#!/usr/bin/env node
(()=>{var __webpack_modules__={96775:(r,i,c)=>{"use strict";function __export(r){for(var c in r)if(!i.hasOwnProperty(c))i[c]=r[c]}Object.defineProperty(i,"__esModule",{value:true});__export(c(20386))},20386:function(r,i,c){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(i,"__esModule",{value:true});const h=c(57147);const d=u(c(15087));const p=d.default("@kwsites/file-exists");function check(r,i,c){p(`checking %s`,r);try{const u=h.statSync(r);if(u.isFile()&&i){p(`[OK] path represents a file`);return true}if(u.isDirectory()&&c){p(`[OK] path represents a directory`);return true}p(`[FAIL] path represents something other than a file or directory`);return false}catch(r){if(r.code==="ENOENT"){p(`[FAIL] path is not accessible: %o`,r);return false}p(`[FATAL] %o`,r);throw r}}function exists(r,c=i.READABLE){return check(r,(c&i.FILE)>0,(c&i.FOLDER)>0)}i.exists=exists;i.FILE=1;i.FOLDER=2;i.READABLE=i.FILE+i.FOLDER},38625:(r,i)=>{"use strict";var c;c={value:true};i.dD=i.gX=void 0;function deferred(){let r;let i;let c="pending";const u=new Promise(((c,u)=>{r=c;i=u}));return{promise:u,done(i){if(c==="pending"){c="resolved";r(i)}},fail(r){if(c==="pending"){c="rejected";i(r)}},get fulfilled(){return c!=="pending"},get status(){return c}}}i.gX=deferred;i.dD=deferred;c=deferred},16314:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.MissingRefError=i.ValidationError=i.CodeGen=i.Name=i.nil=i.stringify=i.str=i._=i.KeywordCxt=void 0;const u=c(87467);const h=c(90453);const d=c(60185);const p=c(57795);const g=["/properties"];const y="http://json-schema.org/draft-07/schema";class Ajv extends u.default{_addVocabularies(){super._addVocabularies();h.default.forEach((r=>this.addVocabulary(r)));if(this.opts.discriminator)this.addKeyword(d.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();if(!this.opts.meta)return;const r=this.opts.$data?this.$dataMetaSchema(p,g):p;this.addMetaSchema(r,y,false);this.refs["http://json-schema.org/schema"]=y}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(y)?y:undefined)}}r.exports=i=Ajv;Object.defineProperty(i,"__esModule",{value:true});i["default"]=Ajv;var b=c(73130);Object.defineProperty(i,"KeywordCxt",{enumerable:true,get:function(){return b.KeywordCxt}});var v=c(41349);Object.defineProperty(i,"_",{enumerable:true,get:function(){return v._}});Object.defineProperty(i,"str",{enumerable:true,get:function(){return v.str}});Object.defineProperty(i,"stringify",{enumerable:true,get:function(){return v.stringify}});Object.defineProperty(i,"nil",{enumerable:true,get:function(){return v.nil}});Object.defineProperty(i,"Name",{enumerable:true,get:function(){return v.Name}});Object.defineProperty(i,"CodeGen",{enumerable:true,get:function(){return v.CodeGen}});var w=c(62039);Object.defineProperty(i,"ValidationError",{enumerable:true,get:function(){return w.default}});var C=c(48391);Object.defineProperty(i,"MissingRefError",{enumerable:true,get:function(){return C.default}})},97351:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.regexpCode=i.getEsmExportName=i.getProperty=i.safeStringify=i.stringify=i.strConcat=i.addCodeArg=i.str=i._=i.nil=i._Code=i.Name=i.IDENTIFIER=i._CodeOrName=void 0;class _CodeOrName{}i._CodeOrName=_CodeOrName;i.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class Name extends _CodeOrName{constructor(r){super();if(!i.IDENTIFIER.test(r))throw new Error("CodeGen: name must be a valid identifier");this.str=r}toString(){return this.str}emptyStr(){return false}get names(){return{[this.str]:1}}}i.Name=Name;class _Code extends _CodeOrName{constructor(r){super();this._items=typeof r==="string"?[r]:r}toString(){return this.str}emptyStr(){if(this._items.length>1)return false;const r=this._items[0];return r===""||r==='""'}get str(){var r;return(r=this._str)!==null&&r!==void 0?r:this._str=this._items.reduce(((r,i)=>`${r}${i}`),"")}get names(){var r;return(r=this._names)!==null&&r!==void 0?r:this._names=this._items.reduce(((r,i)=>{if(i instanceof Name)r[i.str]=(r[i.str]||0)+1;return r}),{})}}i._Code=_Code;i.nil=new _Code("");function _(r,...i){const c=[r[0]];let u=0;while(u<i.length){addCodeArg(c,i[u]);c.push(r[++u])}return new _Code(c)}i._=_;const c=new _Code("+");function str(r,...i){const u=[safeStringify(r[0])];let h=0;while(h<i.length){u.push(c);addCodeArg(u,i[h]);u.push(c,safeStringify(r[++h]))}optimize(u);return new _Code(u)}i.str=str;function addCodeArg(r,i){if(i instanceof _Code)r.push(...i._items);else if(i instanceof Name)r.push(i);else r.push(interpolate(i))}i.addCodeArg=addCodeArg;function optimize(r){let i=1;while(i<r.length-1){if(r[i]===c){const c=mergeExprItems(r[i-1],r[i+1]);if(c!==undefined){r.splice(i-1,3,c);continue}r[i++]="+"}i++}}function mergeExprItems(r,i){if(i==='""')return r;if(r==='""')return i;if(typeof r=="string"){if(i instanceof Name||r[r.length-1]!=='"')return;if(typeof i!="string")return`${r.slice(0,-1)}${i}"`;if(i[0]==='"')return r.slice(0,-1)+i.slice(1);return}if(typeof i=="string"&&i[0]==='"'&&!(r instanceof Name))return`"${r}${i.slice(1)}`;return}function strConcat(r,i){return i.emptyStr()?r:r.emptyStr()?i:str`${r}${i}`}i.strConcat=strConcat;function interpolate(r){return typeof r=="number"||typeof r=="boolean"||r===null?r:safeStringify(Array.isArray(r)?r.join(","):r)}function stringify(r){return new _Code(safeStringify(r))}i.stringify=stringify;function safeStringify(r){return JSON.stringify(r).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}i.safeStringify=safeStringify;function getProperty(r){return typeof r=="string"&&i.IDENTIFIER.test(r)?new _Code(`.${r}`):_`[${r}]`}i.getProperty=getProperty;function getEsmExportName(r){if(typeof r=="string"&&i.IDENTIFIER.test(r)){return new _Code(`${r}`)}throw new Error(`CodeGen: invalid export name: ${r}, use explicit $id name mapping`)}i.getEsmExportName=getEsmExportName;function regexpCode(r){return new _Code(r.toString())}i.regexpCode=regexpCode},41349:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.or=i.and=i.not=i.CodeGen=i.operators=i.varKinds=i.ValueScopeName=i.ValueScope=i.Scope=i.Name=i.regexpCode=i.stringify=i.getProperty=i.nil=i.strConcat=i.str=i._=void 0;const u=c(97351);const h=c(90303);var d=c(97351);Object.defineProperty(i,"_",{enumerable:true,get:function(){return d._}});Object.defineProperty(i,"str",{enumerable:true,get:function(){return d.str}});Object.defineProperty(i,"strConcat",{enumerable:true,get:function(){return d.strConcat}});Object.defineProperty(i,"nil",{enumerable:true,get:function(){return d.nil}});Object.defineProperty(i,"getProperty",{enumerable:true,get:function(){return d.getProperty}});Object.defineProperty(i,"stringify",{enumerable:true,get:function(){return d.stringify}});Object.defineProperty(i,"regexpCode",{enumerable:true,get:function(){return d.regexpCode}});Object.defineProperty(i,"Name",{enumerable:true,get:function(){return d.Name}});var p=c(90303);Object.defineProperty(i,"Scope",{enumerable:true,get:function(){return p.Scope}});Object.defineProperty(i,"ValueScope",{enumerable:true,get:function(){return p.ValueScope}});Object.defineProperty(i,"ValueScopeName",{enumerable:true,get:function(){return p.ValueScopeName}});Object.defineProperty(i,"varKinds",{enumerable:true,get:function(){return p.varKinds}});i.operators={GT:new u._Code(">"),GTE:new u._Code(">="),LT:new u._Code("<"),LTE:new u._Code("<="),EQ:new u._Code("==="),NEQ:new u._Code("!=="),NOT:new u._Code("!"),OR:new u._Code("||"),AND:new u._Code("&&"),ADD:new u._Code("+")};class Node{optimizeNodes(){return this}optimizeNames(r,i){return this}}class Def extends Node{constructor(r,i,c){super();this.varKind=r;this.name=i;this.rhs=c}render({es5:r,_n:i}){const c=r?h.varKinds.var:this.varKind;const u=this.rhs===undefined?"":` = ${this.rhs}`;return`${c} ${this.name}${u};`+i}optimizeNames(r,i){if(!r[this.name.str])return;if(this.rhs)this.rhs=optimizeExpr(this.rhs,r,i);return this}get names(){return this.rhs instanceof u._CodeOrName?this.rhs.names:{}}}class Assign extends Node{constructor(r,i,c){super();this.lhs=r;this.rhs=i;this.sideEffects=c}render({_n:r}){return`${this.lhs} = ${this.rhs};`+r}optimizeNames(r,i){if(this.lhs instanceof u.Name&&!r[this.lhs.str]&&!this.sideEffects)return;this.rhs=optimizeExpr(this.rhs,r,i);return this}get names(){const r=this.lhs instanceof u.Name?{}:{...this.lhs.names};return addExprNames(r,this.rhs)}}class AssignOp extends Assign{constructor(r,i,c,u){super(r,c,u);this.op=i}render({_n:r}){return`${this.lhs} ${this.op}= ${this.rhs};`+r}}class Label extends Node{constructor(r){super();this.label=r;this.names={}}render({_n:r}){return`${this.label}:`+r}}class Break extends Node{constructor(r){super();this.label=r;this.names={}}render({_n:r}){const i=this.label?` ${this.label}`:"";return`break${i};`+r}}class Throw extends Node{constructor(r){super();this.error=r}render({_n:r}){return`throw ${this.error};`+r}get names(){return this.error.names}}class AnyCode extends Node{constructor(r){super();this.code=r}render({_n:r}){return`${this.code};`+r}optimizeNodes(){return`${this.code}`?this:undefined}optimizeNames(r,i){this.code=optimizeExpr(this.code,r,i);return this}get names(){return this.code instanceof u._CodeOrName?this.code.names:{}}}class ParentNode extends Node{constructor(r=[]){super();this.nodes=r}render(r){return this.nodes.reduce(((i,c)=>i+c.render(r)),"")}optimizeNodes(){const{nodes:r}=this;let i=r.length;while(i--){const c=r[i].optimizeNodes();if(Array.isArray(c))r.splice(i,1,...c);else if(c)r[i]=c;else r.splice(i,1)}return r.length>0?this:undefined}optimizeNames(r,i){const{nodes:c}=this;let u=c.length;while(u--){const h=c[u];if(h.optimizeNames(r,i))continue;subtractNames(r,h.names);c.splice(u,1)}return c.length>0?this:undefined}get names(){return this.nodes.reduce(((r,i)=>addNames(r,i.names)),{})}}class BlockNode extends ParentNode{render(r){return"{"+r._n+super.render(r)+"}"+r._n}}class Root extends ParentNode{}class Else extends BlockNode{}Else.kind="else";class If extends BlockNode{constructor(r,i){super(i);this.condition=r}render(r){let i=`if(${this.condition})`+super.render(r);if(this.else)i+="else "+this.else.render(r);return i}optimizeNodes(){super.optimizeNodes();const r=this.condition;if(r===true)return this.nodes;let i=this.else;if(i){const r=i.optimizeNodes();i=this.else=Array.isArray(r)?new Else(r):r}if(i){if(r===false)return i instanceof If?i:i.nodes;if(this.nodes.length)return this;return new If(not(r),i instanceof If?[i]:i.nodes)}if(r===false||!this.nodes.length)return undefined;return this}optimizeNames(r,i){var c;this.else=(c=this.else)===null||c===void 0?void 0:c.optimizeNames(r,i);if(!(super.optimizeNames(r,i)||this.else))return;this.condition=optimizeExpr(this.condition,r,i);return this}get names(){const r=super.names;addExprNames(r,this.condition);if(this.else)addNames(r,this.else.names);return r}}If.kind="if";class For extends BlockNode{}For.kind="for";class ForLoop extends For{constructor(r){super();this.iteration=r}render(r){return`for(${this.iteration})`+super.render(r)}optimizeNames(r,i){if(!super.optimizeNames(r,i))return;this.iteration=optimizeExpr(this.iteration,r,i);return this}get names(){return addNames(super.names,this.iteration.names)}}class ForRange extends For{constructor(r,i,c,u){super();this.varKind=r;this.name=i;this.from=c;this.to=u}render(r){const i=r.es5?h.varKinds.var:this.varKind;const{name:c,from:u,to:d}=this;return`for(${i} ${c}=${u}; ${c}<${d}; ${c}++)`+super.render(r)}get names(){const r=addExprNames(super.names,this.from);return addExprNames(r,this.to)}}class ForIter extends For{constructor(r,i,c,u){super();this.loop=r;this.varKind=i;this.name=c;this.iterable=u}render(r){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(r)}optimizeNames(r,i){if(!super.optimizeNames(r,i))return;this.iterable=optimizeExpr(this.iterable,r,i);return this}get names(){return addNames(super.names,this.iterable.names)}}class Func extends BlockNode{constructor(r,i,c){super();this.name=r;this.args=i;this.async=c}render(r){const i=this.async?"async ":"";return`${i}function ${this.name}(${this.args})`+super.render(r)}}Func.kind="func";class Return extends ParentNode{render(r){return"return "+super.render(r)}}Return.kind="return";class Try extends BlockNode{render(r){let i="try"+super.render(r);if(this.catch)i+=this.catch.render(r);if(this.finally)i+=this.finally.render(r);return i}optimizeNodes(){var r,i;super.optimizeNodes();(r=this.catch)===null||r===void 0?void 0:r.optimizeNodes();(i=this.finally)===null||i===void 0?void 0:i.optimizeNodes();return this}optimizeNames(r,i){var c,u;super.optimizeNames(r,i);(c=this.catch)===null||c===void 0?void 0:c.optimizeNames(r,i);(u=this.finally)===null||u===void 0?void 0:u.optimizeNames(r,i);return this}get names(){const r=super.names;if(this.catch)addNames(r,this.catch.names);if(this.finally)addNames(r,this.finally.names);return r}}class Catch extends BlockNode{constructor(r){super();this.error=r}render(r){return`catch(${this.error})`+super.render(r)}}Catch.kind="catch";class Finally extends BlockNode{render(r){return"finally"+super.render(r)}}Finally.kind="finally";class CodeGen{constructor(r,i={}){this._values={};this._blockStarts=[];this._constants={};this.opts={...i,_n:i.lines?"\n":""};this._extScope=r;this._scope=new h.Scope({parent:r});this._nodes=[new Root]}toString(){return this._root.render(this.opts)}name(r){return this._scope.name(r)}scopeName(r){return this._extScope.name(r)}scopeValue(r,i){const c=this._extScope.value(r,i);const u=this._values[c.prefix]||(this._values[c.prefix]=new Set);u.add(c);return c}getScopeValue(r,i){return this._extScope.getValue(r,i)}scopeRefs(r){return this._extScope.scopeRefs(r,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(r,i,c,u){const h=this._scope.toName(i);if(c!==undefined&&u)this._constants[h.str]=c;this._leafNode(new Def(r,h,c));return h}const(r,i,c){return this._def(h.varKinds.const,r,i,c)}let(r,i,c){return this._def(h.varKinds.let,r,i,c)}var(r,i,c){return this._def(h.varKinds.var,r,i,c)}assign(r,i,c){return this._leafNode(new Assign(r,i,c))}add(r,c){return this._leafNode(new AssignOp(r,i.operators.ADD,c))}code(r){if(typeof r=="function")r();else if(r!==u.nil)this._leafNode(new AnyCode(r));return this}object(...r){const i=["{"];for(const[c,h]of r){if(i.length>1)i.push(",");i.push(c);if(c!==h||this.opts.es5){i.push(":");(0,u.addCodeArg)(i,h)}}i.push("}");return new u._Code(i)}if(r,i,c){this._blockNode(new If(r));if(i&&c){this.code(i).else().code(c).endIf()}else if(i){this.code(i).endIf()}else if(c){throw new Error('CodeGen: "else" body without "then" body')}return this}elseIf(r){return this._elseNode(new If(r))}else(){return this._elseNode(new Else)}endIf(){return this._endBlockNode(If,Else)}_for(r,i){this._blockNode(r);if(i)this.code(i).endFor();return this}for(r,i){return this._for(new ForLoop(r),i)}forRange(r,i,c,u,d=(this.opts.es5?h.varKinds.var:h.varKinds.let)){const p=this._scope.toName(r);return this._for(new ForRange(d,p,i,c),(()=>u(p)))}forOf(r,i,c,d=h.varKinds.const){const p=this._scope.toName(r);if(this.opts.es5){const r=i instanceof u.Name?i:this.var("_arr",i);return this.forRange("_i",0,(0,u._)`${r}.length`,(i=>{this.var(p,(0,u._)`${r}[${i}]`);c(p)}))}return this._for(new ForIter("of",d,p,i),(()=>c(p)))}forIn(r,i,c,d=(this.opts.es5?h.varKinds.var:h.varKinds.const)){if(this.opts.ownProperties){return this.forOf(r,(0,u._)`Object.keys(${i})`,c)}const p=this._scope.toName(r);return this._for(new ForIter("in",d,p,i),(()=>c(p)))}endFor(){return this._endBlockNode(For)}label(r){return this._leafNode(new Label(r))}break(r){return this._leafNode(new Break(r))}return(r){const i=new Return;this._blockNode(i);this.code(r);if(i.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Return)}try(r,i,c){if(!i&&!c)throw new Error('CodeGen: "try" without "catch" and "finally"');const u=new Try;this._blockNode(u);this.code(r);if(i){const r=this.name("e");this._currNode=u.catch=new Catch(r);i(r)}if(c){this._currNode=u.finally=new Finally;this.code(c)}return this._endBlockNode(Catch,Finally)}throw(r){return this._leafNode(new Throw(r))}block(r,i){this._blockStarts.push(this._nodes.length);if(r)this.code(r).endBlock(i);return this}endBlock(r){const i=this._blockStarts.pop();if(i===undefined)throw new Error("CodeGen: not in self-balancing block");const c=this._nodes.length-i;if(c<0||r!==undefined&&c!==r){throw new Error(`CodeGen: wrong number of nodes: ${c} vs ${r} expected`)}this._nodes.length=i;return this}func(r,i=u.nil,c,h){this._blockNode(new Func(r,i,c));if(h)this.code(h).endFunc();return this}endFunc(){return this._endBlockNode(Func)}optimize(r=1){while(r-- >0){this._root.optimizeNodes();this._root.optimizeNames(this._root.names,this._constants)}}_leafNode(r){this._currNode.nodes.push(r);return this}_blockNode(r){this._currNode.nodes.push(r);this._nodes.push(r)}_endBlockNode(r,i){const c=this._currNode;if(c instanceof r||i&&c instanceof i){this._nodes.pop();return this}throw new Error(`CodeGen: not in block "${i?`${r.kind}/${i.kind}`:r.kind}"`)}_elseNode(r){const i=this._currNode;if(!(i instanceof If)){throw new Error('CodeGen: "else" without "if"')}this._currNode=i.else=r;return this}get _root(){return this._nodes[0]}get _currNode(){const r=this._nodes;return r[r.length-1]}set _currNode(r){const i=this._nodes;i[i.length-1]=r}}i.CodeGen=CodeGen;function addNames(r,i){for(const c in i)r[c]=(r[c]||0)+(i[c]||0);return r}function addExprNames(r,i){return i instanceof u._CodeOrName?addNames(r,i.names):r}function optimizeExpr(r,i,c){if(r instanceof u.Name)return replaceName(r);if(!canOptimize(r))return r;return new u._Code(r._items.reduce(((r,i)=>{if(i instanceof u.Name)i=replaceName(i);if(i instanceof u._Code)r.push(...i._items);else r.push(i);return r}),[]));function replaceName(r){const u=c[r.str];if(u===undefined||i[r.str]!==1)return r;delete i[r.str];return u}function canOptimize(r){return r instanceof u._Code&&r._items.some((r=>r instanceof u.Name&&i[r.str]===1&&c[r.str]!==undefined))}}function subtractNames(r,i){for(const c in i)r[c]=(r[c]||0)-(i[c]||0)}function not(r){return typeof r=="boolean"||typeof r=="number"||r===null?!r:(0,u._)`!${par(r)}`}i.not=not;const g=mappend(i.operators.AND);function and(...r){return r.reduce(g)}i.and=and;const y=mappend(i.operators.OR);function or(...r){return r.reduce(y)}i.or=or;function mappend(r){return(i,c)=>i===u.nil?c:c===u.nil?i:(0,u._)`${par(i)} ${r} ${par(c)}`}function par(r){return r instanceof u.Name?r:(0,u._)`(${r})`}},90303:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.ValueScope=i.ValueScopeName=i.Scope=i.varKinds=i.UsedValueState=void 0;const u=c(97351);class ValueError extends Error{constructor(r){super(`CodeGen: "code" for ${r} not defined`);this.value=r.value}}var h;(function(r){r[r["Started"]=0]="Started";r[r["Completed"]=1]="Completed"})(h=i.UsedValueState||(i.UsedValueState={}));i.varKinds={const:new u.Name("const"),let:new u.Name("let"),var:new u.Name("var")};class Scope{constructor({prefixes:r,parent:i}={}){this._names={};this._prefixes=r;this._parent=i}toName(r){return r instanceof u.Name?r:this.name(r)}name(r){return new u.Name(this._newName(r))}_newName(r){const i=this._names[r]||this._nameGroup(r);return`${r}${i.index++}`}_nameGroup(r){var i,c;if(((c=(i=this._parent)===null||i===void 0?void 0:i._prefixes)===null||c===void 0?void 0:c.has(r))||this._prefixes&&!this._prefixes.has(r)){throw new Error(`CodeGen: prefix "${r}" is not allowed in this scope`)}return this._names[r]={prefix:r,index:0}}}i.Scope=Scope;class ValueScopeName extends u.Name{constructor(r,i){super(i);this.prefix=r}setValue(r,{property:i,itemIndex:c}){this.value=r;this.scopePath=(0,u._)`.${new u.Name(i)}[${c}]`}}i.ValueScopeName=ValueScopeName;const d=(0,u._)`\n`;class ValueScope extends Scope{constructor(r){super(r);this._values={};this._scope=r.scope;this.opts={...r,_n:r.lines?d:u.nil}}get(){return this._scope}name(r){return new ValueScopeName(r,this._newName(r))}value(r,i){var c;if(i.ref===undefined)throw new Error("CodeGen: ref must be passed in value");const u=this.toName(r);const{prefix:h}=u;const d=(c=i.key)!==null&&c!==void 0?c:i.ref;let p=this._values[h];if(p){const r=p.get(d);if(r)return r}else{p=this._values[h]=new Map}p.set(d,u);const g=this._scope[h]||(this._scope[h]=[]);const y=g.length;g[y]=i.ref;u.setValue(i,{property:h,itemIndex:y});return u}getValue(r,i){const c=this._values[r];if(!c)return;return c.get(i)}scopeRefs(r,i=this._values){return this._reduceValues(i,(i=>{if(i.scopePath===undefined)throw new Error(`CodeGen: name "${i}" has no value`);return(0,u._)`${r}${i.scopePath}`}))}scopeCode(r=this._values,i,c){return this._reduceValues(r,(r=>{if(r.value===undefined)throw new Error(`CodeGen: name "${r}" has no value`);return r.value.code}),i,c)}_reduceValues(r,c,d={},p){let g=u.nil;for(const y in r){const b=r[y];if(!b)continue;const v=d[y]=d[y]||new Map;b.forEach((r=>{if(v.has(r))return;v.set(r,h.Started);let d=c(r);if(d){const c=this.opts.es5?i.varKinds.var:i.varKinds.const;g=(0,u._)`${g}${c} ${r} = ${d};${this.opts._n}`}else if(d=p===null||p===void 0?void 0:p(r)){g=(0,u._)`${g}${d}${this.opts._n}`}else{throw new ValueError(r)}v.set(r,h.Completed)}))}return g}}i.ValueScope=ValueScope},26193:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.extendErrors=i.resetErrorsCount=i.reportExtraError=i.reportError=i.keyword$DataError=i.keywordError=void 0;const u=c(41349);const h=c(62915);const d=c(67964);i.keywordError={message:({keyword:r})=>(0,u.str)`must pass "${r}" keyword validation`};i.keyword$DataError={message:({keyword:r,schemaType:i})=>i?(0,u.str)`"${r}" keyword must be ${i} ($data)`:(0,u.str)`"${r}" keyword is invalid ($data)`};function reportError(r,c=i.keywordError,h,d){const{it:p}=r;const{gen:g,compositeRule:y,allErrors:b}=p;const v=errorObjectCode(r,c,h);if(d!==null&&d!==void 0?d:y||b){addError(g,v)}else{returnErrors(p,(0,u._)`[${v}]`)}}i.reportError=reportError;function reportExtraError(r,c=i.keywordError,u){const{it:h}=r;const{gen:p,compositeRule:g,allErrors:y}=h;const b=errorObjectCode(r,c,u);addError(p,b);if(!(g||y)){returnErrors(h,d.default.vErrors)}}i.reportExtraError=reportExtraError;function resetErrorsCount(r,i){r.assign(d.default.errors,i);r.if((0,u._)`${d.default.vErrors} !== null`,(()=>r.if(i,(()=>r.assign((0,u._)`${d.default.vErrors}.length`,i)),(()=>r.assign(d.default.vErrors,null)))))}i.resetErrorsCount=resetErrorsCount;function extendErrors({gen:r,keyword:i,schemaValue:c,data:h,errsCount:p,it:g}){if(p===undefined)throw new Error("ajv implementation error");const y=r.name("err");r.forRange("i",p,d.default.errors,(p=>{r.const(y,(0,u._)`${d.default.vErrors}[${p}]`);r.if((0,u._)`${y}.instancePath === undefined`,(()=>r.assign((0,u._)`${y}.instancePath`,(0,u.strConcat)(d.default.instancePath,g.errorPath))));r.assign((0,u._)`${y}.schemaPath`,(0,u.str)`${g.errSchemaPath}/${i}`);if(g.opts.verbose){r.assign((0,u._)`${y}.schema`,c);r.assign((0,u._)`${y}.data`,h)}}))}i.extendErrors=extendErrors;function addError(r,i){const c=r.const("err",i);r.if((0,u._)`${d.default.vErrors} === null`,(()=>r.assign(d.default.vErrors,(0,u._)`[${c}]`)),(0,u._)`${d.default.vErrors}.push(${c})`);r.code((0,u._)`${d.default.errors}++`)}function returnErrors(r,i){const{gen:c,validateName:h,schemaEnv:d}=r;if(d.$async){c.throw((0,u._)`new ${r.ValidationError}(${i})`)}else{c.assign((0,u._)`${h}.errors`,i);c.return(false)}}const p={keyword:new u.Name("keyword"),schemaPath:new u.Name("schemaPath"),params:new u.Name("params"),propertyName:new u.Name("propertyName"),message:new u.Name("message"),schema:new u.Name("schema"),parentSchema:new u.Name("parentSchema")};function errorObjectCode(r,i,c){const{createErrors:h}=r.it;if(h===false)return(0,u._)`{}`;return errorObject(r,i,c)}function errorObject(r,i,c={}){const{gen:u,it:h}=r;const d=[errorInstancePath(h,c),errorSchemaPath(r,c)];extraErrorProps(r,i,d);return u.object(...d)}function errorInstancePath({errorPath:r},{instancePath:i}){const c=i?(0,u.str)`${r}${(0,h.getErrorPath)(i,h.Type.Str)}`:r;return[d.default.instancePath,(0,u.strConcat)(d.default.instancePath,c)]}function errorSchemaPath({keyword:r,it:{errSchemaPath:i}},{schemaPath:c,parentSchema:d}){let g=d?i:(0,u.str)`${i}/${r}`;if(c){g=(0,u.str)`${g}${(0,h.getErrorPath)(c,h.Type.Str)}`}return[p.schemaPath,g]}function extraErrorProps(r,{params:i,message:c},h){const{keyword:g,data:y,schemaValue:b,it:v}=r;const{opts:w,propertyName:C,topSchemaRef:E,schemaPath:x}=v;h.push([p.keyword,g],[p.params,typeof i=="function"?i(r):i||(0,u._)`{}`]);if(w.messages){h.push([p.message,typeof c=="function"?c(r):c])}if(w.verbose){h.push([p.schema,b],[p.parentSchema,(0,u._)`${E}${x}`],[d.default.data,y])}if(C)h.push([p.propertyName,C])}},79364:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.resolveSchema=i.getCompilingSchema=i.resolveRef=i.compileSchema=i.SchemaEnv=void 0;const u=c(41349);const h=c(62039);const d=c(67964);const p=c(53591);const g=c(62915);const y=c(73130);class SchemaEnv{constructor(r){var i;this.refs={};this.dynamicAnchors={};let c;if(typeof r.schema=="object")c=r.schema;this.schema=r.schema;this.schemaId=r.schemaId;this.root=r.root||this;this.baseId=(i=r.baseId)!==null&&i!==void 0?i:(0,p.normalizeId)(c===null||c===void 0?void 0:c[r.schemaId||"$id"]);this.schemaPath=r.schemaPath;this.localRefs=r.localRefs;this.meta=r.meta;this.$async=c===null||c===void 0?void 0:c.$async;this.refs={}}}i.SchemaEnv=SchemaEnv;function compileSchema(r){const i=getCompilingSchema.call(this,r);if(i)return i;const c=(0,p.getFullPath)(this.opts.uriResolver,r.root.baseId);const{es5:g,lines:b}=this.opts.code;const{ownProperties:v}=this.opts;const w=new u.CodeGen(this.scope,{es5:g,lines:b,ownProperties:v});let C;if(r.$async){C=w.scopeValue("Error",{ref:h.default,code:(0,u._)`require("ajv/dist/runtime/validation_error").default`})}const E=w.scopeName("validate");r.validateName=E;const x={gen:w,allErrors:this.opts.allErrors,data:d.default.data,parentData:d.default.parentData,parentDataProperty:d.default.parentDataProperty,dataNames:[d.default.data],dataPathArr:[u.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:w.scopeValue("schema",this.opts.code.source===true?{ref:r.schema,code:(0,u.stringify)(r.schema)}:{ref:r.schema}),validateName:E,ValidationError:C,schema:r.schema,schemaEnv:r,rootId:c,baseId:r.baseId||c,schemaPath:u.nil,errSchemaPath:r.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,u._)`""`,opts:this.opts,self:this};let S;try{this._compilations.add(r);(0,y.validateFunctionCode)(x);w.optimize(this.opts.code.optimize);const i=w.toString();S=`${w.scopeRefs(d.default.scope)}return ${i}`;if(this.opts.code.process)S=this.opts.code.process(S,r);const c=new Function(`${d.default.self}`,`${d.default.scope}`,S);const h=c(this,this.scope.get());this.scope.value(E,{ref:h});h.errors=null;h.schema=r.schema;h.schemaEnv=r;if(r.$async)h.$async=true;if(this.opts.code.source===true){h.source={validateName:E,validateCode:i,scopeValues:w._values}}if(this.opts.unevaluated){const{props:r,items:i}=x;h.evaluated={props:r instanceof u.Name?undefined:r,items:i instanceof u.Name?undefined:i,dynamicProps:r instanceof u.Name,dynamicItems:i instanceof u.Name};if(h.source)h.source.evaluated=(0,u.stringify)(h.evaluated)}r.validate=h;return r}catch(i){delete r.validate;delete r.validateName;if(S)this.logger.error("Error compiling schema, function code:",S);throw i}finally{this._compilations.delete(r)}}i.compileSchema=compileSchema;function resolveRef(r,i,c){var u;c=(0,p.resolveUrl)(this.opts.uriResolver,i,c);const h=r.refs[c];if(h)return h;let d=resolve.call(this,r,c);if(d===undefined){const h=(u=r.localRefs)===null||u===void 0?void 0:u[c];const{schemaId:p}=this.opts;if(h)d=new SchemaEnv({schema:h,schemaId:p,root:r,baseId:i})}if(d===undefined)return;return r.refs[c]=inlineOrCompile.call(this,d)}i.resolveRef=resolveRef;function inlineOrCompile(r){if((0,p.inlineRef)(r.schema,this.opts.inlineRefs))return r.schema;return r.validate?r:compileSchema.call(this,r)}function getCompilingSchema(r){for(const i of this._compilations){if(sameSchemaEnv(i,r))return i}}i.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(r,i){return r.schema===i.schema&&r.root===i.root&&r.baseId===i.baseId}function resolve(r,i){let c;while(typeof(c=this.refs[i])=="string")i=c;return c||this.schemas[i]||resolveSchema.call(this,r,i)}function resolveSchema(r,i){const c=this.opts.uriResolver.parse(i);const u=(0,p._getFullPath)(this.opts.uriResolver,c);let h=(0,p.getFullPath)(this.opts.uriResolver,r.baseId,undefined);if(Object.keys(r.schema).length>0&&u===h){return getJsonPointer.call(this,c,r)}const d=(0,p.normalizeId)(u);const g=this.refs[d]||this.schemas[d];if(typeof g=="string"){const i=resolveSchema.call(this,r,g);if(typeof(i===null||i===void 0?void 0:i.schema)!=="object")return;return getJsonPointer.call(this,c,i)}if(typeof(g===null||g===void 0?void 0:g.schema)!=="object")return;if(!g.validate)compileSchema.call(this,g);if(d===(0,p.normalizeId)(i)){const{schema:i}=g;const{schemaId:c}=this.opts;const u=i[c];if(u)h=(0,p.resolveUrl)(this.opts.uriResolver,h,u);return new SchemaEnv({schema:i,schemaId:c,root:r,baseId:h})}return getJsonPointer.call(this,c,g)}i.resolveSchema=resolveSchema;const b=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(r,{baseId:i,schema:c,root:u}){var h;if(((h=r.fragment)===null||h===void 0?void 0:h[0])!=="/")return;for(const u of r.fragment.slice(1).split("/")){if(typeof c==="boolean")return;const r=c[(0,g.unescapeFragment)(u)];if(r===undefined)return;c=r;const h=typeof c==="object"&&c[this.opts.schemaId];if(!b.has(u)&&h){i=(0,p.resolveUrl)(this.opts.uriResolver,i,h)}}let d;if(typeof c!="boolean"&&c.$ref&&!(0,g.schemaHasRulesButRef)(c,this.RULES)){const r=(0,p.resolveUrl)(this.opts.uriResolver,i,c.$ref);d=resolveSchema.call(this,u,r)}const{schemaId:y}=this.opts;d=d||new SchemaEnv({schema:c,schemaId:y,root:u,baseId:i});if(d.schema!==d.root.schema)return d;return undefined}},67964:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h={data:new u.Name("data"),valCxt:new u.Name("valCxt"),instancePath:new u.Name("instancePath"),parentData:new u.Name("parentData"),parentDataProperty:new u.Name("parentDataProperty"),rootData:new u.Name("rootData"),dynamicAnchors:new u.Name("dynamicAnchors"),vErrors:new u.Name("vErrors"),errors:new u.Name("errors"),this:new u.Name("this"),self:new u.Name("self"),scope:new u.Name("scope"),json:new u.Name("json"),jsonPos:new u.Name("jsonPos"),jsonLen:new u.Name("jsonLen"),jsonPart:new u.Name("jsonPart")};i["default"]=h},48391:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(53591);class MissingRefError extends Error{constructor(r,i,c,h){super(h||`can't resolve reference ${c} from id ${i}`);this.missingRef=(0,u.resolveUrl)(r,i,c);this.missingSchema=(0,u.normalizeId)((0,u.getFullPath)(r,this.missingRef))}}i["default"]=MissingRefError},53591:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.getSchemaRefs=i.resolveUrl=i.normalizeId=i._getFullPath=i.getFullPath=i.inlineRef=void 0;const u=c(62915);const h=c(51230);const d=c(49122);const p=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(r,i=true){if(typeof r=="boolean")return true;if(i===true)return!hasRef(r);if(!i)return false;return countKeys(r)<=i}i.inlineRef=inlineRef;const g=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(r){for(const i in r){if(g.has(i))return true;const c=r[i];if(Array.isArray(c)&&c.some(hasRef))return true;if(typeof c=="object"&&hasRef(c))return true}return false}function countKeys(r){let i=0;for(const c in r){if(c==="$ref")return Infinity;i++;if(p.has(c))continue;if(typeof r[c]=="object"){(0,u.eachItem)(r[c],(r=>i+=countKeys(r)))}if(i===Infinity)return Infinity}return i}function getFullPath(r,i="",c){if(c!==false)i=normalizeId(i);const u=r.parse(i);return _getFullPath(r,u)}i.getFullPath=getFullPath;function _getFullPath(r,i){const c=r.serialize(i);return c.split("#")[0]+"#"}i._getFullPath=_getFullPath;const y=/#\/?$/;function normalizeId(r){return r?r.replace(y,""):""}i.normalizeId=normalizeId;function resolveUrl(r,i,c){c=normalizeId(c);return r.resolve(i,c)}i.resolveUrl=resolveUrl;const b=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(r,i){if(typeof r=="boolean")return{};const{schemaId:c,uriResolver:u}=this.opts;const p=normalizeId(r[c]||i);const g={"":p};const y=getFullPath(u,p,false);const v={};const w=new Set;d(r,{allKeys:true},((r,i,u,h)=>{if(h===undefined)return;const d=y+i;let p=g[h];if(typeof r[c]=="string")p=addRef.call(this,r[c]);addAnchor.call(this,r.$anchor);addAnchor.call(this,r.$dynamicAnchor);g[i]=p;function addRef(i){const c=this.opts.uriResolver.resolve;i=normalizeId(p?c(p,i):i);if(w.has(i))throw ambiguos(i);w.add(i);let u=this.refs[i];if(typeof u=="string")u=this.refs[u];if(typeof u=="object"){checkAmbiguosRef(r,u.schema,i)}else if(i!==normalizeId(d)){if(i[0]==="#"){checkAmbiguosRef(r,v[i],i);v[i]=r}else{this.refs[i]=d}}return i}function addAnchor(r){if(typeof r=="string"){if(!b.test(r))throw new Error(`invalid anchor "${r}"`);addRef.call(this,`#${r}`)}}}));return v;function checkAmbiguosRef(r,i,c){if(i!==undefined&&!h(r,i))throw ambiguos(c)}function ambiguos(r){return new Error(`reference "${r}" resolves to more than one schema`)}}i.getSchemaRefs=getSchemaRefs},33814:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.getRules=i.isJSONType=void 0;const c=["string","number","integer","boolean","null","object","array"];const u=new Set(c);function isJSONType(r){return typeof r=="string"&&u.has(r)}i.isJSONType=isJSONType;function getRules(){const r={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...r,integer:true,boolean:true,null:true},rules:[{rules:[]},r.number,r.string,r.array,r.object],post:{rules:[]},all:{},keywords:{}}}i.getRules=getRules},62915:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.checkStrictMode=i.getErrorPath=i.Type=i.useFunc=i.setEvaluated=i.evaluatedPropsToName=i.mergeEvaluated=i.eachItem=i.unescapeJsonPointer=i.escapeJsonPointer=i.escapeFragment=i.unescapeFragment=i.schemaRefOrVal=i.schemaHasRulesButRef=i.schemaHasRules=i.checkUnknownRules=i.alwaysValidSchema=i.toHash=void 0;const u=c(41349);const h=c(97351);function toHash(r){const i={};for(const c of r)i[c]=true;return i}i.toHash=toHash;function alwaysValidSchema(r,i){if(typeof i=="boolean")return i;if(Object.keys(i).length===0)return true;checkUnknownRules(r,i);return!schemaHasRules(i,r.self.RULES.all)}i.alwaysValidSchema=alwaysValidSchema;function checkUnknownRules(r,i=r.schema){const{opts:c,self:u}=r;if(!c.strictSchema)return;if(typeof i==="boolean")return;const h=u.RULES.keywords;for(const c in i){if(!h[c])checkStrictMode(r,`unknown keyword: "${c}"`)}}i.checkUnknownRules=checkUnknownRules;function schemaHasRules(r,i){if(typeof r=="boolean")return!r;for(const c in r)if(i[c])return true;return false}i.schemaHasRules=schemaHasRules;function schemaHasRulesButRef(r,i){if(typeof r=="boolean")return!r;for(const c in r)if(c!=="$ref"&&i.all[c])return true;return false}i.schemaHasRulesButRef=schemaHasRulesButRef;function schemaRefOrVal({topSchemaRef:r,schemaPath:i},c,h,d){if(!d){if(typeof c=="number"||typeof c=="boolean")return c;if(typeof c=="string")return(0,u._)`${c}`}return(0,u._)`${r}${i}${(0,u.getProperty)(h)}`}i.schemaRefOrVal=schemaRefOrVal;function unescapeFragment(r){return unescapeJsonPointer(decodeURIComponent(r))}i.unescapeFragment=unescapeFragment;function escapeFragment(r){return encodeURIComponent(escapeJsonPointer(r))}i.escapeFragment=escapeFragment;function escapeJsonPointer(r){if(typeof r=="number")return`${r}`;return r.replace(/~/g,"~0").replace(/\//g,"~1")}i.escapeJsonPointer=escapeJsonPointer;function unescapeJsonPointer(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}i.unescapeJsonPointer=unescapeJsonPointer;function eachItem(r,i){if(Array.isArray(r)){for(const c of r)i(c)}else{i(r)}}i.eachItem=eachItem;function makeMergeEvaluated({mergeNames:r,mergeToName:i,mergeValues:c,resultToName:h}){return(d,p,g,y)=>{const b=g===undefined?p:g instanceof u.Name?(p instanceof u.Name?r(d,p,g):i(d,p,g),g):p instanceof u.Name?(i(d,g,p),p):c(p,g);return y===u.Name&&!(b instanceof u.Name)?h(d,b):b}}i.mergeEvaluated={props:makeMergeEvaluated({mergeNames:(r,i,c)=>r.if((0,u._)`${c} !== true && ${i} !== undefined`,(()=>{r.if((0,u._)`${i} === true`,(()=>r.assign(c,true)),(()=>r.assign(c,(0,u._)`${c} || {}`).code((0,u._)`Object.assign(${c}, ${i})`)))})),mergeToName:(r,i,c)=>r.if((0,u._)`${c} !== true`,(()=>{if(i===true){r.assign(c,true)}else{r.assign(c,(0,u._)`${c} || {}`);setEvaluated(r,c,i)}})),mergeValues:(r,i)=>r===true?true:{...r,...i},resultToName:evaluatedPropsToName}),items:makeMergeEvaluated({mergeNames:(r,i,c)=>r.if((0,u._)`${c} !== true && ${i} !== undefined`,(()=>r.assign(c,(0,u._)`${i} === true ? true : ${c} > ${i} ? ${c} : ${i}`))),mergeToName:(r,i,c)=>r.if((0,u._)`${c} !== true`,(()=>r.assign(c,i===true?true:(0,u._)`${c} > ${i} ? ${c} : ${i}`))),mergeValues:(r,i)=>r===true?true:Math.max(r,i),resultToName:(r,i)=>r.var("items",i)})};function evaluatedPropsToName(r,i){if(i===true)return r.var("props",true);const c=r.var("props",(0,u._)`{}`);if(i!==undefined)setEvaluated(r,c,i);return c}i.evaluatedPropsToName=evaluatedPropsToName;function setEvaluated(r,i,c){Object.keys(c).forEach((c=>r.assign((0,u._)`${i}${(0,u.getProperty)(c)}`,true)))}i.setEvaluated=setEvaluated;const d={};function useFunc(r,i){return r.scopeValue("func",{ref:i,code:d[i.code]||(d[i.code]=new h._Code(i.code))})}i.useFunc=useFunc;var p;(function(r){r[r["Num"]=0]="Num";r[r["Str"]=1]="Str"})(p=i.Type||(i.Type={}));function getErrorPath(r,i,c){if(r instanceof u.Name){const h=i===p.Num;return c?h?(0,u._)`"[" + ${r} + "]"`:(0,u._)`"['" + ${r} + "']"`:h?(0,u._)`"/" + ${r}`:(0,u._)`"/" + ${r}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return c?(0,u.getProperty)(r).toString():"/"+escapeJsonPointer(r)}i.getErrorPath=getErrorPath;function checkStrictMode(r,i,c=r.opts.strictSchema){if(!c)return;i=`strict mode: ${i}`;if(c===true)throw new Error(i);r.self.logger.warn(i)}i.checkStrictMode=checkStrictMode},8079:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.shouldUseRule=i.shouldUseGroup=i.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:r,self:i},c){const u=i.RULES.types[c];return u&&u!==true&&shouldUseGroup(r,u)}i.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(r,i){return i.rules.some((i=>shouldUseRule(r,i)))}i.shouldUseGroup=shouldUseGroup;function shouldUseRule(r,i){var c;return r[i.keyword]!==undefined||((c=i.definition.implements)===null||c===void 0?void 0:c.some((i=>r[i]!==undefined)))}i.shouldUseRule=shouldUseRule},48849:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.boolOrEmptySchema=i.topBoolOrEmptySchema=void 0;const u=c(26193);const h=c(41349);const d=c(67964);const p={message:"boolean schema is false"};function topBoolOrEmptySchema(r){const{gen:i,schema:c,validateName:u}=r;if(c===false){falseSchemaError(r,false)}else if(typeof c=="object"&&c.$async===true){i.return(d.default.data)}else{i.assign((0,h._)`${u}.errors`,null);i.return(true)}}i.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(r,i){const{gen:c,schema:u}=r;if(u===false){c.var(i,false);falseSchemaError(r)}else{c.var(i,true)}}i.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(r,i){const{gen:c,data:h}=r;const d={gen:c,keyword:"false schema",data:h,schema:false,schemaCode:false,schemaValue:false,params:{},it:r};(0,u.reportError)(d,p,undefined,i)}},51757:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.reportTypeError=i.checkDataTypes=i.checkDataType=i.coerceAndCheckDataType=i.getJSONTypes=i.getSchemaTypes=i.DataType=void 0;const u=c(33814);const h=c(8079);const d=c(26193);const p=c(41349);const g=c(62915);var y;(function(r){r[r["Correct"]=0]="Correct";r[r["Wrong"]=1]="Wrong"})(y=i.DataType||(i.DataType={}));function getSchemaTypes(r){const i=getJSONTypes(r.type);const c=i.includes("null");if(c){if(r.nullable===false)throw new Error("type: null contradicts nullable: false")}else{if(!i.length&&r.nullable!==undefined){throw new Error('"nullable" cannot be used without "type"')}if(r.nullable===true)i.push("null")}return i}i.getSchemaTypes=getSchemaTypes;function getJSONTypes(r){const i=Array.isArray(r)?r:r?[r]:[];if(i.every(u.isJSONType))return i;throw new Error("type must be JSONType or JSONType[]: "+i.join(","))}i.getJSONTypes=getJSONTypes;function coerceAndCheckDataType(r,i){const{gen:c,data:u,opts:d}=r;const p=coerceToTypes(i,d.coerceTypes);const g=i.length>0&&!(p.length===0&&i.length===1&&(0,h.schemaHasRulesForType)(r,i[0]));if(g){const h=checkDataTypes(i,u,d.strictNumbers,y.Wrong);c.if(h,(()=>{if(p.length)coerceData(r,i,p);else reportTypeError(r)}))}return g}i.coerceAndCheckDataType=coerceAndCheckDataType;const b=new Set(["string","number","integer","boolean","null"]);function coerceToTypes(r,i){return i?r.filter((r=>b.has(r)||i==="array"&&r==="array")):[]}function coerceData(r,i,c){const{gen:u,data:h,opts:d}=r;const g=u.let("dataType",(0,p._)`typeof ${h}`);const y=u.let("coerced",(0,p._)`undefined`);if(d.coerceTypes==="array"){u.if((0,p._)`${g} == 'object' && Array.isArray(${h}) && ${h}.length == 1`,(()=>u.assign(h,(0,p._)`${h}[0]`).assign(g,(0,p._)`typeof ${h}`).if(checkDataTypes(i,h,d.strictNumbers),(()=>u.assign(y,h)))))}u.if((0,p._)`${y} !== undefined`);for(const r of c){if(b.has(r)||r==="array"&&d.coerceTypes==="array"){coerceSpecificType(r)}}u.else();reportTypeError(r);u.endIf();u.if((0,p._)`${y} !== undefined`,(()=>{u.assign(h,y);assignParentData(r,y)}));function coerceSpecificType(r){switch(r){case"string":u.elseIf((0,p._)`${g} == "number" || ${g} == "boolean"`).assign(y,(0,p._)`"" + ${h}`).elseIf((0,p._)`${h} === null`).assign(y,(0,p._)`""`);return;case"number":u.elseIf((0,p._)`${g} == "boolean" || ${h} === null
              || (${g} == "string" && ${h} && ${h} == +${h})`).assign(y,(0,p._)`+${h}`);return;case"integer":u.elseIf((0,p._)`${g} === "boolean" || ${h} === null
              || (${g} === "string" && ${h} && ${h} == +${h} && !(${h} % 1))`).assign(y,(0,p._)`+${h}`);return;case"boolean":u.elseIf((0,p._)`${h} === "false" || ${h} === 0 || ${h} === null`).assign(y,false).elseIf((0,p._)`${h} === "true" || ${h} === 1`).assign(y,true);return;case"null":u.elseIf((0,p._)`${h} === "" || ${h} === 0 || ${h} === false`);u.assign(y,null);return;case"array":u.elseIf((0,p._)`${g} === "string" || ${g} === "number"
              || ${g} === "boolean" || ${h} === null`).assign(y,(0,p._)`[${h}]`)}}}function assignParentData({gen:r,parentData:i,parentDataProperty:c},u){r.if((0,p._)`${i} !== undefined`,(()=>r.assign((0,p._)`${i}[${c}]`,u)))}function checkDataType(r,i,c,u=y.Correct){const h=u===y.Correct?p.operators.EQ:p.operators.NEQ;let d;switch(r){case"null":return(0,p._)`${i} ${h} null`;case"array":d=(0,p._)`Array.isArray(${i})`;break;case"object":d=(0,p._)`${i} && typeof ${i} == "object" && !Array.isArray(${i})`;break;case"integer":d=numCond((0,p._)`!(${i} % 1) && !isNaN(${i})`);break;case"number":d=numCond();break;default:return(0,p._)`typeof ${i} ${h} ${r}`}return u===y.Correct?d:(0,p.not)(d);function numCond(r=p.nil){return(0,p.and)((0,p._)`typeof ${i} == "number"`,r,c?(0,p._)`isFinite(${i})`:p.nil)}}i.checkDataType=checkDataType;function checkDataTypes(r,i,c,u){if(r.length===1){return checkDataType(r[0],i,c,u)}let h;const d=(0,g.toHash)(r);if(d.array&&d.object){const r=(0,p._)`typeof ${i} != "object"`;h=d.null?r:(0,p._)`!${i} || ${r}`;delete d.null;delete d.array;delete d.object}else{h=p.nil}if(d.number)delete d.integer;for(const r in d)h=(0,p.and)(h,checkDataType(r,i,c,u));return h}i.checkDataTypes=checkDataTypes;const v={message:({schema:r})=>`must be ${r}`,params:({schema:r,schemaValue:i})=>typeof r=="string"?(0,p._)`{type: ${r}}`:(0,p._)`{type: ${i}}`};function reportTypeError(r){const i=getTypeErrorContext(r);(0,d.reportError)(i,v)}i.reportTypeError=reportTypeError;function getTypeErrorContext(r){const{gen:i,data:c,schema:u}=r;const h=(0,g.schemaRefOrVal)(r,u,"type");return{gen:i,keyword:"type",data:c,schema:u.type,schemaCode:h,schemaValue:h,parentSchema:u,params:{},it:r}}},37701:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.assignDefaults=void 0;const u=c(41349);const h=c(62915);function assignDefaults(r,i){const{properties:c,items:u}=r.schema;if(i==="object"&&c){for(const i in c){assignDefault(r,i,c[i].default)}}else if(i==="array"&&Array.isArray(u)){u.forEach(((i,c)=>assignDefault(r,c,i.default)))}}i.assignDefaults=assignDefaults;function assignDefault(r,i,c){const{gen:d,compositeRule:p,data:g,opts:y}=r;if(c===undefined)return;const b=(0,u._)`${g}${(0,u.getProperty)(i)}`;if(p){(0,h.checkStrictMode)(r,`default is ignored for: ${b}`);return}let v=(0,u._)`${b} === undefined`;if(y.useDefaults==="empty"){v=(0,u._)`${v} || ${b} === null || ${b} === ""`}d.if(v,(0,u._)`${b} = ${(0,u.stringify)(c)}`)}},73130:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.getData=i.KeywordCxt=i.validateFunctionCode=void 0;const u=c(48849);const h=c(51757);const d=c(8079);const p=c(51757);const g=c(37701);const y=c(29380);const b=c(28383);const v=c(41349);const w=c(67964);const C=c(53591);const E=c(62915);const x=c(26193);function validateFunctionCode(r){if(isSchemaObj(r)){checkKeywords(r);if(schemaCxtHasRules(r)){topSchemaObjCode(r);return}}validateFunction(r,(()=>(0,u.topBoolOrEmptySchema)(r)))}i.validateFunctionCode=validateFunctionCode;function validateFunction({gen:r,validateName:i,schema:c,schemaEnv:u,opts:h},d){if(h.code.es5){r.func(i,(0,v._)`${w.default.data}, ${w.default.valCxt}`,u.$async,(()=>{r.code((0,v._)`"use strict"; ${funcSourceUrl(c,h)}`);destructureValCxtES5(r,h);r.code(d)}))}else{r.func(i,(0,v._)`${w.default.data}, ${destructureValCxt(h)}`,u.$async,(()=>r.code(funcSourceUrl(c,h)).code(d)))}}function destructureValCxt(r){return(0,v._)`{${w.default.instancePath}="", ${w.default.parentData}, ${w.default.parentDataProperty}, ${w.default.rootData}=${w.default.data}${r.dynamicRef?(0,v._)`, ${w.default.dynamicAnchors}={}`:v.nil}}={}`}function destructureValCxtES5(r,i){r.if(w.default.valCxt,(()=>{r.var(w.default.instancePath,(0,v._)`${w.default.valCxt}.${w.default.instancePath}`);r.var(w.default.parentData,(0,v._)`${w.default.valCxt}.${w.default.parentData}`);r.var(w.default.parentDataProperty,(0,v._)`${w.default.valCxt}.${w.default.parentDataProperty}`);r.var(w.default.rootData,(0,v._)`${w.default.valCxt}.${w.default.rootData}`);if(i.dynamicRef)r.var(w.default.dynamicAnchors,(0,v._)`${w.default.valCxt}.${w.default.dynamicAnchors}`)}),(()=>{r.var(w.default.instancePath,(0,v._)`""`);r.var(w.default.parentData,(0,v._)`undefined`);r.var(w.default.parentDataProperty,(0,v._)`undefined`);r.var(w.default.rootData,w.default.data);if(i.dynamicRef)r.var(w.default.dynamicAnchors,(0,v._)`{}`)}))}function topSchemaObjCode(r){const{schema:i,opts:c,gen:u}=r;validateFunction(r,(()=>{if(c.$comment&&i.$comment)commentKeyword(r);checkNoDefault(r);u.let(w.default.vErrors,null);u.let(w.default.errors,0);if(c.unevaluated)resetEvaluated(r);typeAndKeywords(r);returnResults(r)}));return}function resetEvaluated(r){const{gen:i,validateName:c}=r;r.evaluated=i.const("evaluated",(0,v._)`${c}.evaluated`);i.if((0,v._)`${r.evaluated}.dynamicProps`,(()=>i.assign((0,v._)`${r.evaluated}.props`,(0,v._)`undefined`)));i.if((0,v._)`${r.evaluated}.dynamicItems`,(()=>i.assign((0,v._)`${r.evaluated}.items`,(0,v._)`undefined`)))}function funcSourceUrl(r,i){const c=typeof r=="object"&&r[i.schemaId];return c&&(i.code.source||i.code.process)?(0,v._)`/*# sourceURL=${c} */`:v.nil}function subschemaCode(r,i){if(isSchemaObj(r)){checkKeywords(r);if(schemaCxtHasRules(r)){subSchemaObjCode(r,i);return}}(0,u.boolOrEmptySchema)(r,i)}function schemaCxtHasRules({schema:r,self:i}){if(typeof r=="boolean")return!r;for(const c in r)if(i.RULES.all[c])return true;return false}function isSchemaObj(r){return typeof r.schema!="boolean"}function subSchemaObjCode(r,i){const{schema:c,gen:u,opts:h}=r;if(h.$comment&&c.$comment)commentKeyword(r);updateContext(r);checkAsyncSchema(r);const d=u.const("_errs",w.default.errors);typeAndKeywords(r,d);u.var(i,(0,v._)`${d} === ${w.default.errors}`)}function checkKeywords(r){(0,E.checkUnknownRules)(r);checkRefsAndKeywords(r)}function typeAndKeywords(r,i){if(r.opts.jtd)return schemaKeywords(r,[],false,i);const c=(0,h.getSchemaTypes)(r.schema);const u=(0,h.coerceAndCheckDataType)(r,c);schemaKeywords(r,c,!u,i)}function checkRefsAndKeywords(r){const{schema:i,errSchemaPath:c,opts:u,self:h}=r;if(i.$ref&&u.ignoreKeywordsWithRef&&(0,E.schemaHasRulesButRef)(i,h.RULES)){h.logger.warn(`$ref: keywords ignored in schema at path "${c}"`)}}function checkNoDefault(r){const{schema:i,opts:c}=r;if(i.default!==undefined&&c.useDefaults&&c.strictSchema){(0,E.checkStrictMode)(r,"default is ignored in the schema root")}}function updateContext(r){const i=r.schema[r.opts.schemaId];if(i)r.baseId=(0,C.resolveUrl)(r.opts.uriResolver,r.baseId,i)}function checkAsyncSchema(r){if(r.schema.$async&&!r.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:r,schemaEnv:i,schema:c,errSchemaPath:u,opts:h}){const d=c.$comment;if(h.$comment===true){r.code((0,v._)`${w.default.self}.logger.log(${d})`)}else if(typeof h.$comment=="function"){const c=(0,v.str)`${u}/$comment`;const h=r.scopeValue("root",{ref:i.root});r.code((0,v._)`${w.default.self}.opts.$comment(${d}, ${c}, ${h}.schema)`)}}function returnResults(r){const{gen:i,schemaEnv:c,validateName:u,ValidationError:h,opts:d}=r;if(c.$async){i.if((0,v._)`${w.default.errors} === 0`,(()=>i.return(w.default.data)),(()=>i.throw((0,v._)`new ${h}(${w.default.vErrors})`)))}else{i.assign((0,v._)`${u}.errors`,w.default.vErrors);if(d.unevaluated)assignEvaluated(r);i.return((0,v._)`${w.default.errors} === 0`)}}function assignEvaluated({gen:r,evaluated:i,props:c,items:u}){if(c instanceof v.Name)r.assign((0,v._)`${i}.props`,c);if(u instanceof v.Name)r.assign((0,v._)`${i}.items`,u)}function schemaKeywords(r,i,c,u){const{gen:h,schema:g,data:y,allErrors:b,opts:C,self:x}=r;const{RULES:S}=x;if(g.$ref&&(C.ignoreKeywordsWithRef||!(0,E.schemaHasRulesButRef)(g,S))){h.block((()=>keywordCode(r,"$ref",S.all.$ref.definition)));return}if(!C.jtd)checkStrictTypes(r,i);h.block((()=>{for(const r of S.rules)groupKeywords(r);groupKeywords(S.post)}));function groupKeywords(E){if(!(0,d.shouldUseGroup)(g,E))return;if(E.type){h.if((0,p.checkDataType)(E.type,y,C.strictNumbers));iterateKeywords(r,E);if(i.length===1&&i[0]===E.type&&c){h.else();(0,p.reportTypeError)(r)}h.endIf()}else{iterateKeywords(r,E)}if(!b)h.if((0,v._)`${w.default.errors} === ${u||0}`)}}function iterateKeywords(r,i){const{gen:c,schema:u,opts:{useDefaults:h}}=r;if(h)(0,g.assignDefaults)(r,i.type);c.block((()=>{for(const c of i.rules){if((0,d.shouldUseRule)(u,c)){keywordCode(r,c.keyword,c.definition,i.type)}}}))}function checkStrictTypes(r,i){if(r.schemaEnv.meta||!r.opts.strictTypes)return;checkContextTypes(r,i);if(!r.opts.allowUnionTypes)checkMultipleTypes(r,i);checkKeywordTypes(r,r.dataTypes)}function checkContextTypes(r,i){if(!i.length)return;if(!r.dataTypes.length){r.dataTypes=i;return}i.forEach((i=>{if(!includesType(r.dataTypes,i)){strictTypesError(r,`type "${i}" not allowed by context "${r.dataTypes.join(",")}"`)}}));r.dataTypes=r.dataTypes.filter((r=>includesType(i,r)))}function checkMultipleTypes(r,i){if(i.length>1&&!(i.length===2&&i.includes("null"))){strictTypesError(r,"use allowUnionTypes to allow union type keyword")}}function checkKeywordTypes(r,i){const c=r.self.RULES.all;for(const u in c){const h=c[u];if(typeof h=="object"&&(0,d.shouldUseRule)(r.schema,h)){const{type:c}=h.definition;if(c.length&&!c.some((r=>hasApplicableType(i,r)))){strictTypesError(r,`missing type "${c.join(",")}" for keyword "${u}"`)}}}}function hasApplicableType(r,i){return r.includes(i)||i==="number"&&r.includes("integer")}function includesType(r,i){return r.includes(i)||i==="integer"&&r.includes("number")}function strictTypesError(r,i){const c=r.schemaEnv.baseId+r.errSchemaPath;i+=` at "${c}" (strictTypes)`;(0,E.checkStrictMode)(r,i,r.opts.strictTypes)}class KeywordCxt{constructor(r,i,c){(0,y.validateKeywordUsage)(r,i,c);this.gen=r.gen;this.allErrors=r.allErrors;this.keyword=c;this.data=r.data;this.schema=r.schema[c];this.$data=i.$data&&r.opts.$data&&this.schema&&this.schema.$data;this.schemaValue=(0,E.schemaRefOrVal)(r,this.schema,c,this.$data);this.schemaType=i.schemaType;this.parentSchema=r.schema;this.params={};this.it=r;this.def=i;if(this.$data){this.schemaCode=r.gen.const("vSchema",getData(this.$data,r))}else{this.schemaCode=this.schemaValue;if(!(0,y.validSchemaType)(this.schema,i.schemaType,i.allowUndefined)){throw new Error(`${c} value must be ${JSON.stringify(i.schemaType)}`)}}if("code"in i?i.trackErrors:i.errors!==false){this.errsCount=r.gen.const("_errs",w.default.errors)}}result(r,i,c){this.failResult((0,v.not)(r),i,c)}failResult(r,i,c){this.gen.if(r);if(c)c();else this.error();if(i){this.gen.else();i();if(this.allErrors)this.gen.endIf()}else{if(this.allErrors)this.gen.endIf();else this.gen.else()}}pass(r,i){this.failResult((0,v.not)(r),undefined,i)}fail(r){if(r===undefined){this.error();if(!this.allErrors)this.gen.if(false);return}this.gen.if(r);this.error();if(this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(r){if(!this.$data)return this.fail(r);const{schemaCode:i}=this;this.fail((0,v._)`${i} !== undefined && (${(0,v.or)(this.invalid$data(),r)})`)}error(r,i,c){if(i){this.setParams(i);this._error(r,c);this.setParams({});return}this._error(r,c)}_error(r,i){(r?x.reportExtraError:x.reportError)(this,this.def.error,i)}$dataError(){(0,x.reportError)(this,this.def.$dataError||x.keyword$DataError)}reset(){if(this.errsCount===undefined)throw new Error('add "trackErrors" to keyword definition');(0,x.resetErrorsCount)(this.gen,this.errsCount)}ok(r){if(!this.allErrors)this.gen.if(r)}setParams(r,i){if(i)Object.assign(this.params,r);else this.params=r}block$data(r,i,c=v.nil){this.gen.block((()=>{this.check$data(r,c);i()}))}check$data(r=v.nil,i=v.nil){if(!this.$data)return;const{gen:c,schemaCode:u,schemaType:h,def:d}=this;c.if((0,v.or)((0,v._)`${u} === undefined`,i));if(r!==v.nil)c.assign(r,true);if(h.length||d.validateSchema){c.elseIf(this.invalid$data());this.$dataError();if(r!==v.nil)c.assign(r,false)}c.else()}invalid$data(){const{gen:r,schemaCode:i,schemaType:c,def:u,it:h}=this;return(0,v.or)(wrong$DataType(),invalid$DataSchema());function wrong$DataType(){if(c.length){if(!(i instanceof v.Name))throw new Error("ajv implementation error");const r=Array.isArray(c)?c:[c];return(0,v._)`${(0,p.checkDataTypes)(r,i,h.opts.strictNumbers,p.DataType.Wrong)}`}return v.nil}function invalid$DataSchema(){if(u.validateSchema){const c=r.scopeValue("validate$data",{ref:u.validateSchema});return(0,v._)`!${c}(${i})`}return v.nil}}subschema(r,i){const c=(0,b.getSubschema)(this.it,r);(0,b.extendSubschemaData)(c,this.it,r);(0,b.extendSubschemaMode)(c,r);const u={...this.it,...c,items:undefined,props:undefined};subschemaCode(u,i);return u}mergeEvaluated(r,i){const{it:c,gen:u}=this;if(!c.opts.unevaluated)return;if(c.props!==true&&r.props!==undefined){c.props=E.mergeEvaluated.props(u,r.props,c.props,i)}if(c.items!==true&&r.items!==undefined){c.items=E.mergeEvaluated.items(u,r.items,c.items,i)}}mergeValidEvaluated(r,i){const{it:c,gen:u}=this;if(c.opts.unevaluated&&(c.props!==true||c.items!==true)){u.if(i,(()=>this.mergeEvaluated(r,v.Name)));return true}}}i.KeywordCxt=KeywordCxt;function keywordCode(r,i,c,u){const h=new KeywordCxt(r,c,i);if("code"in c){c.code(h,u)}else if(h.$data&&c.validate){(0,y.funcKeywordCode)(h,c)}else if("macro"in c){(0,y.macroKeywordCode)(h,c)}else if(c.compile||c.validate){(0,y.funcKeywordCode)(h,c)}}const S=/^\/(?:[^~]|~0|~1)*$/;const k=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(r,{dataLevel:i,dataNames:c,dataPathArr:u}){let h;let d;if(r==="")return w.default.rootData;if(r[0]==="/"){if(!S.test(r))throw new Error(`Invalid JSON-pointer: ${r}`);h=r;d=w.default.rootData}else{const p=k.exec(r);if(!p)throw new Error(`Invalid JSON-pointer: ${r}`);const g=+p[1];h=p[2];if(h==="#"){if(g>=i)throw new Error(errorMsg("property/index",g));return u[i-g]}if(g>i)throw new Error(errorMsg("data",g));d=c[i-g];if(!h)return d}let p=d;const g=h.split("/");for(const r of g){if(r){d=(0,v._)`${d}${(0,v.getProperty)((0,E.unescapeJsonPointer)(r))}`;p=(0,v._)`${p} && ${d}`}}return p;function errorMsg(r,c){return`Cannot access ${r} ${c} levels up, current level is ${i}`}}i.getData=getData},29380:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.validateKeywordUsage=i.validSchemaType=i.funcKeywordCode=i.macroKeywordCode=void 0;const u=c(41349);const h=c(67964);const d=c(84797);const p=c(26193);function macroKeywordCode(r,i){const{gen:c,keyword:h,schema:d,parentSchema:p,it:g}=r;const y=i.macro.call(g.self,d,p,g);const b=useKeyword(c,h,y);if(g.opts.validateSchema!==false)g.self.validateSchema(y,true);const v=c.name("valid");r.subschema({schema:y,schemaPath:u.nil,errSchemaPath:`${g.errSchemaPath}/${h}`,topSchemaRef:b,compositeRule:true},v);r.pass(v,(()=>r.error(true)))}i.macroKeywordCode=macroKeywordCode;function funcKeywordCode(r,i){var c;const{gen:p,keyword:g,schema:y,parentSchema:b,$data:v,it:w}=r;checkAsyncKeyword(w,i);const C=!v&&i.compile?i.compile.call(w.self,y,b,w):i.validate;const E=useKeyword(p,g,C);const x=p.let("valid");r.block$data(x,validateKeyword);r.ok((c=i.valid)!==null&&c!==void 0?c:x);function validateKeyword(){if(i.errors===false){assignValid();if(i.modifying)modifyData(r);reportErrs((()=>r.error()))}else{const c=i.async?validateAsync():validateSync();if(i.modifying)modifyData(r);reportErrs((()=>addErrs(r,c)))}}function validateAsync(){const r=p.let("ruleErrs",null);p.try((()=>assignValid((0,u._)`await `)),(i=>p.assign(x,false).if((0,u._)`${i} instanceof ${w.ValidationError}`,(()=>p.assign(r,(0,u._)`${i}.errors`)),(()=>p.throw(i)))));return r}function validateSync(){const r=(0,u._)`${E}.errors`;p.assign(r,null);assignValid(u.nil);return r}function assignValid(c=(i.async?(0,u._)`await `:u.nil)){const g=w.opts.passContext?h.default.this:h.default.self;const y=!("compile"in i&&!v||i.schema===false);p.assign(x,(0,u._)`${c}${(0,d.callValidateCode)(r,E,g,y)}`,i.modifying)}function reportErrs(r){var c;p.if((0,u.not)((c=i.valid)!==null&&c!==void 0?c:x),r)}}i.funcKeywordCode=funcKeywordCode;function modifyData(r){const{gen:i,data:c,it:h}=r;i.if(h.parentData,(()=>i.assign(c,(0,u._)`${h.parentData}[${h.parentDataProperty}]`)))}function addErrs(r,i){const{gen:c}=r;c.if((0,u._)`Array.isArray(${i})`,(()=>{c.assign(h.default.vErrors,(0,u._)`${h.default.vErrors} === null ? ${i} : ${h.default.vErrors}.concat(${i})`).assign(h.default.errors,(0,u._)`${h.default.vErrors}.length`);(0,p.extendErrors)(r)}),(()=>r.error()))}function checkAsyncKeyword({schemaEnv:r},i){if(i.async&&!r.$async)throw new Error("async keyword in sync schema")}function useKeyword(r,i,c){if(c===undefined)throw new Error(`keyword "${i}" failed to compile`);return r.scopeValue("keyword",typeof c=="function"?{ref:c}:{ref:c,code:(0,u.stringify)(c)})}function validSchemaType(r,i,c=false){return!i.length||i.some((i=>i==="array"?Array.isArray(r):i==="object"?r&&typeof r=="object"&&!Array.isArray(r):typeof r==i||c&&typeof r=="undefined"))}i.validSchemaType=validSchemaType;function validateKeywordUsage({schema:r,opts:i,self:c,errSchemaPath:u},h,d){if(Array.isArray(h.keyword)?!h.keyword.includes(d):h.keyword!==d){throw new Error("ajv implementation error")}const p=h.dependencies;if(p===null||p===void 0?void 0:p.some((i=>!Object.prototype.hasOwnProperty.call(r,i)))){throw new Error(`parent schema must have dependencies of ${d}: ${p.join(",")}`)}if(h.validateSchema){const p=h.validateSchema(r[d]);if(!p){const r=`keyword "${d}" value is invalid at path "${u}": `+c.errorsText(h.validateSchema.errors);if(i.validateSchema==="log")c.logger.error(r);else throw new Error(r)}}}i.validateKeywordUsage=validateKeywordUsage},28383:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.extendSubschemaMode=i.extendSubschemaData=i.getSubschema=void 0;const u=c(41349);const h=c(62915);function getSubschema(r,{keyword:i,schemaProp:c,schema:d,schemaPath:p,errSchemaPath:g,topSchemaRef:y}){if(i!==undefined&&d!==undefined){throw new Error('both "keyword" and "schema" passed, only one allowed')}if(i!==undefined){const d=r.schema[i];return c===undefined?{schema:d,schemaPath:(0,u._)`${r.schemaPath}${(0,u.getProperty)(i)}`,errSchemaPath:`${r.errSchemaPath}/${i}`}:{schema:d[c],schemaPath:(0,u._)`${r.schemaPath}${(0,u.getProperty)(i)}${(0,u.getProperty)(c)}`,errSchemaPath:`${r.errSchemaPath}/${i}/${(0,h.escapeFragment)(c)}`}}if(d!==undefined){if(p===undefined||g===undefined||y===undefined){throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"')}return{schema:d,schemaPath:p,topSchemaRef:y,errSchemaPath:g}}throw new Error('either "keyword" or "schema" must be passed')}i.getSubschema=getSubschema;function extendSubschemaData(r,i,{dataProp:c,dataPropType:d,data:p,dataTypes:g,propertyName:y}){if(p!==undefined&&c!==undefined){throw new Error('both "data" and "dataProp" passed, only one allowed')}const{gen:b}=i;if(c!==undefined){const{errorPath:p,dataPathArr:g,opts:y}=i;const v=b.let("data",(0,u._)`${i.data}${(0,u.getProperty)(c)}`,true);dataContextProps(v);r.errorPath=(0,u.str)`${p}${(0,h.getErrorPath)(c,d,y.jsPropertySyntax)}`;r.parentDataProperty=(0,u._)`${c}`;r.dataPathArr=[...g,r.parentDataProperty]}if(p!==undefined){const i=p instanceof u.Name?p:b.let("data",p,true);dataContextProps(i);if(y!==undefined)r.propertyName=y}if(g)r.dataTypes=g;function dataContextProps(c){r.data=c;r.dataLevel=i.dataLevel+1;r.dataTypes=[];i.definedProperties=new Set;r.parentData=i.data;r.dataNames=[...i.dataNames,c]}}i.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(r,{jtdDiscriminator:i,jtdMetadata:c,compositeRule:u,createErrors:h,allErrors:d}){if(u!==undefined)r.compositeRule=u;if(h!==undefined)r.createErrors=h;if(d!==undefined)r.allErrors=d;r.jtdDiscriminator=i;r.jtdMetadata=c}i.extendSubschemaMode=extendSubschemaMode},87467:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.CodeGen=i.Name=i.nil=i.stringify=i.str=i._=i.KeywordCxt=void 0;var u=c(73130);Object.defineProperty(i,"KeywordCxt",{enumerable:true,get:function(){return u.KeywordCxt}});var h=c(41349);Object.defineProperty(i,"_",{enumerable:true,get:function(){return h._}});Object.defineProperty(i,"str",{enumerable:true,get:function(){return h.str}});Object.defineProperty(i,"stringify",{enumerable:true,get:function(){return h.stringify}});Object.defineProperty(i,"nil",{enumerable:true,get:function(){return h.nil}});Object.defineProperty(i,"Name",{enumerable:true,get:function(){return h.Name}});Object.defineProperty(i,"CodeGen",{enumerable:true,get:function(){return h.CodeGen}});const d=c(62039);const p=c(48391);const g=c(33814);const y=c(79364);const b=c(41349);const v=c(53591);const w=c(51757);const C=c(62915);const E=c(80584);const x=c(58996);const defaultRegExp=(r,i)=>new RegExp(r,i);defaultRegExp.code="new RegExp";const S=["removeAdditional","useDefaults","coerceTypes"];const k=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]);const T={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."};const N={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};const O=200;function requiredOptions(r){var i,c,u,h,d,p,g,y,b,v,w,C,E,S,k,T,N,$,A,P,I,R,j,L,M;const D=r.strict;const q=(i=r.code)===null||i===void 0?void 0:i.optimize;const F=q===true||q===undefined?1:q||0;const B=(u=(c=r.code)===null||c===void 0?void 0:c.regExp)!==null&&u!==void 0?u:defaultRegExp;const U=(h=r.uriResolver)!==null&&h!==void 0?h:x.default;return{strictSchema:(p=(d=r.strictSchema)!==null&&d!==void 0?d:D)!==null&&p!==void 0?p:true,strictNumbers:(y=(g=r.strictNumbers)!==null&&g!==void 0?g:D)!==null&&y!==void 0?y:true,strictTypes:(v=(b=r.strictTypes)!==null&&b!==void 0?b:D)!==null&&v!==void 0?v:"log",strictTuples:(C=(w=r.strictTuples)!==null&&w!==void 0?w:D)!==null&&C!==void 0?C:"log",strictRequired:(S=(E=r.strictRequired)!==null&&E!==void 0?E:D)!==null&&S!==void 0?S:false,code:r.code?{...r.code,optimize:F,regExp:B}:{optimize:F,regExp:B},loopRequired:(k=r.loopRequired)!==null&&k!==void 0?k:O,loopEnum:(T=r.loopEnum)!==null&&T!==void 0?T:O,meta:(N=r.meta)!==null&&N!==void 0?N:true,messages:($=r.messages)!==null&&$!==void 0?$:true,inlineRefs:(A=r.inlineRefs)!==null&&A!==void 0?A:true,schemaId:(P=r.schemaId)!==null&&P!==void 0?P:"$id",addUsedSchema:(I=r.addUsedSchema)!==null&&I!==void 0?I:true,validateSchema:(R=r.validateSchema)!==null&&R!==void 0?R:true,validateFormats:(j=r.validateFormats)!==null&&j!==void 0?j:true,unicodeRegExp:(L=r.unicodeRegExp)!==null&&L!==void 0?L:true,int32range:(M=r.int32range)!==null&&M!==void 0?M:true,uriResolver:U}}class Ajv{constructor(r={}){this.schemas={};this.refs={};this.formats={};this._compilations=new Set;this._loading={};this._cache=new Map;r=this.opts={...r,...requiredOptions(r)};const{es5:i,lines:c}=this.opts.code;this.scope=new b.ValueScope({scope:{},prefixes:k,es5:i,lines:c});this.logger=getLogger(r.logger);const u=r.validateFormats;r.validateFormats=false;this.RULES=(0,g.getRules)();checkOptions.call(this,T,r,"NOT SUPPORTED");checkOptions.call(this,N,r,"DEPRECATED","warn");this._metaOpts=getMetaSchemaOptions.call(this);if(r.formats)addInitialFormats.call(this);this._addVocabularies();this._addDefaultMetaSchema();if(r.keywords)addInitialKeywords.call(this,r.keywords);if(typeof r.meta=="object")this.addMetaSchema(r.meta);addInitialSchemas.call(this);r.validateFormats=u}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:r,meta:i,schemaId:c}=this.opts;let u=E;if(c==="id"){u={...E};u.id=u.$id;delete u.$id}if(i&&r)this.addMetaSchema(u,u[c],false)}defaultMeta(){const{meta:r,schemaId:i}=this.opts;return this.opts.defaultMeta=typeof r=="object"?r[i]||r:undefined}validate(r,i){let c;if(typeof r=="string"){c=this.getSchema(r);if(!c)throw new Error(`no schema with key or ref "${r}"`)}else{c=this.compile(r)}const u=c(i);if(!("$async"in c))this.errors=c.errors;return u}compile(r,i){const c=this._addSchema(r,i);return c.validate||this._compileSchemaEnv(c)}compileAsync(r,i){if(typeof this.opts.loadSchema!="function"){throw new Error("options.loadSchema should be a function")}const{loadSchema:c}=this.opts;return runCompileAsync.call(this,r,i);async function runCompileAsync(r,i){await loadMetaSchema.call(this,r.$schema);const c=this._addSchema(r,i);return c.validate||_compileAsync.call(this,c)}async function loadMetaSchema(r){if(r&&!this.getSchema(r)){await runCompileAsync.call(this,{$ref:r},true)}}async function _compileAsync(r){try{return this._compileSchemaEnv(r)}catch(i){if(!(i instanceof p.default))throw i;checkLoaded.call(this,i);await loadMissingSchema.call(this,i.missingSchema);return _compileAsync.call(this,r)}}function checkLoaded({missingSchema:r,missingRef:i}){if(this.refs[r]){throw new Error(`AnySchema ${r} is loaded but ${i} cannot be resolved`)}}async function loadMissingSchema(r){const c=await _loadSchema.call(this,r);if(!this.refs[r])await loadMetaSchema.call(this,c.$schema);if(!this.refs[r])this.addSchema(c,r,i)}async function _loadSchema(r){const i=this._loading[r];if(i)return i;try{return await(this._loading[r]=c(r))}finally{delete this._loading[r]}}}addSchema(r,i,c,u=this.opts.validateSchema){if(Array.isArray(r)){for(const i of r)this.addSchema(i,undefined,c,u);return this}let h;if(typeof r==="object"){const{schemaId:i}=this.opts;h=r[i];if(h!==undefined&&typeof h!="string"){throw new Error(`schema ${i} must be string`)}}i=(0,v.normalizeId)(i||h);this._checkUnique(i);this.schemas[i]=this._addSchema(r,c,i,u,true);return this}addMetaSchema(r,i,c=this.opts.validateSchema){this.addSchema(r,i,true,c);return this}validateSchema(r,i){if(typeof r=="boolean")return true;let c;c=r.$schema;if(c!==undefined&&typeof c!="string"){throw new Error("$schema must be a string")}c=c||this.opts.defaultMeta||this.defaultMeta();if(!c){this.logger.warn("meta-schema not available");this.errors=null;return true}const u=this.validate(c,r);if(!u&&i){const r="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(r);else throw new Error(r)}return u}getSchema(r){let i;while(typeof(i=getSchEnv.call(this,r))=="string")r=i;if(i===undefined){const{schemaId:c}=this.opts;const u=new y.SchemaEnv({schema:{},schemaId:c});i=y.resolveSchema.call(this,u,r);if(!i)return;this.refs[r]=i}return i.validate||this._compileSchemaEnv(i)}removeSchema(r){if(r instanceof RegExp){this._removeAllSchemas(this.schemas,r);this._removeAllSchemas(this.refs,r);return this}switch(typeof r){case"undefined":this._removeAllSchemas(this.schemas);this._removeAllSchemas(this.refs);this._cache.clear();return this;case"string":{const i=getSchEnv.call(this,r);if(typeof i=="object")this._cache.delete(i.schema);delete this.schemas[r];delete this.refs[r];return this}case"object":{const i=r;this._cache.delete(i);let c=r[this.opts.schemaId];if(c){c=(0,v.normalizeId)(c);delete this.schemas[c];delete this.refs[c]}return this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(r){for(const i of r)this.addKeyword(i);return this}addKeyword(r,i){let c;if(typeof r=="string"){c=r;if(typeof i=="object"){this.logger.warn("these parameters are deprecated, see docs for addKeyword");i.keyword=c}}else if(typeof r=="object"&&i===undefined){i=r;c=i.keyword;if(Array.isArray(c)&&!c.length){throw new Error("addKeywords: keyword must be string or non-empty array")}}else{throw new Error("invalid addKeywords parameters")}checkKeyword.call(this,c,i);if(!i){(0,C.eachItem)(c,(r=>addRule.call(this,r)));return this}keywordMetaschema.call(this,i);const u={...i,type:(0,w.getJSONTypes)(i.type),schemaType:(0,w.getJSONTypes)(i.schemaType)};(0,C.eachItem)(c,u.type.length===0?r=>addRule.call(this,r,u):r=>u.type.forEach((i=>addRule.call(this,r,u,i))));return this}getKeyword(r){const i=this.RULES.all[r];return typeof i=="object"?i.definition:!!i}removeKeyword(r){const{RULES:i}=this;delete i.keywords[r];delete i.all[r];for(const c of i.rules){const i=c.rules.findIndex((i=>i.keyword===r));if(i>=0)c.rules.splice(i,1)}return this}addFormat(r,i){if(typeof i=="string")i=new RegExp(i);this.formats[r]=i;return this}errorsText(r=this.errors,{separator:i=", ",dataVar:c="data"}={}){if(!r||r.length===0)return"No errors";return r.map((r=>`${c}${r.instancePath} ${r.message}`)).reduce(((r,c)=>r+i+c))}$dataMetaSchema(r,i){const c=this.RULES.all;r=JSON.parse(JSON.stringify(r));for(const u of i){const i=u.split("/").slice(1);let h=r;for(const r of i)h=h[r];for(const r in c){const i=c[r];if(typeof i!="object")continue;const{$data:u}=i.definition;const d=h[r];if(u&&d)h[r]=schemaOrData(d)}}return r}_removeAllSchemas(r,i){for(const c in r){const u=r[c];if(!i||i.test(c)){if(typeof u=="string"){delete r[c]}else if(u&&!u.meta){this._cache.delete(u.schema);delete r[c]}}}}_addSchema(r,i,c,u=this.opts.validateSchema,h=this.opts.addUsedSchema){let d;const{schemaId:p}=this.opts;if(typeof r=="object"){d=r[p]}else{if(this.opts.jtd)throw new Error("schema must be object");else if(typeof r!="boolean")throw new Error("schema must be object or boolean")}let g=this._cache.get(r);if(g!==undefined)return g;c=(0,v.normalizeId)(d||c);const b=v.getSchemaRefs.call(this,r,c);g=new y.SchemaEnv({schema:r,schemaId:p,meta:i,baseId:c,localRefs:b});this._cache.set(g.schema,g);if(h&&!c.startsWith("#")){if(c)this._checkUnique(c);this.refs[c]=g}if(u)this.validateSchema(r,true);return g}_checkUnique(r){if(this.schemas[r]||this.refs[r]){throw new Error(`schema with key or id "${r}" already exists`)}}_compileSchemaEnv(r){if(r.meta)this._compileMetaSchema(r);else y.compileSchema.call(this,r);if(!r.validate)throw new Error("ajv implementation error");return r.validate}_compileMetaSchema(r){const i=this.opts;this.opts=this._metaOpts;try{y.compileSchema.call(this,r)}finally{this.opts=i}}}i["default"]=Ajv;Ajv.ValidationError=d.default;Ajv.MissingRefError=p.default;function checkOptions(r,i,c,u="error"){for(const h in r){const d=h;if(d in i)this.logger[u](`${c}: option ${h}. ${r[d]}`)}}function getSchEnv(r){r=(0,v.normalizeId)(r);return this.schemas[r]||this.refs[r]}function addInitialSchemas(){const r=this.opts.schemas;if(!r)return;if(Array.isArray(r))this.addSchema(r);else for(const i in r)this.addSchema(r[i],i)}function addInitialFormats(){for(const r in this.opts.formats){const i=this.opts.formats[r];if(i)this.addFormat(r,i)}}function addInitialKeywords(r){if(Array.isArray(r)){this.addVocabulary(r);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const i in r){const c=r[i];if(!c.keyword)c.keyword=i;this.addKeyword(c)}}function getMetaSchemaOptions(){const r={...this.opts};for(const i of S)delete r[i];return r}const $={log(){},warn(){},error(){}};function getLogger(r){if(r===false)return $;if(r===undefined)return console;if(r.log&&r.warn&&r.error)return r;throw new Error("logger must implement log, warn and error methods")}const A=/^[a-z_$][a-z0-9_$:-]*$/i;function checkKeyword(r,i){const{RULES:c}=this;(0,C.eachItem)(r,(r=>{if(c.keywords[r])throw new Error(`Keyword ${r} is already defined`);if(!A.test(r))throw new Error(`Keyword ${r} has invalid name`)}));if(!i)return;if(i.$data&&!("code"in i||"validate"in i)){throw new Error('$data keyword must have "code" or "validate" function')}}function addRule(r,i,c){var u;const h=i===null||i===void 0?void 0:i.post;if(c&&h)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:d}=this;let p=h?d.post:d.rules.find((({type:r})=>r===c));if(!p){p={type:c,rules:[]};d.rules.push(p)}d.keywords[r]=true;if(!i)return;const g={keyword:r,definition:{...i,type:(0,w.getJSONTypes)(i.type),schemaType:(0,w.getJSONTypes)(i.schemaType)}};if(i.before)addBeforeRule.call(this,p,g,i.before);else p.rules.push(g);d.all[r]=g;(u=i.implements)===null||u===void 0?void 0:u.forEach((r=>this.addKeyword(r)))}function addBeforeRule(r,i,c){const u=r.rules.findIndex((r=>r.keyword===c));if(u>=0){r.rules.splice(u,0,i)}else{r.rules.push(i);this.logger.warn(`rule ${c} is not defined`)}}function keywordMetaschema(r){let{metaSchema:i}=r;if(i===undefined)return;if(r.$data&&this.opts.$data)i=schemaOrData(i);r.validateSchema=this.compile(i,true)}const P={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function schemaOrData(r){return{anyOf:[r,P]}}},94456:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(51230);u.code='require("ajv/dist/runtime/equal").default';i["default"]=u},96209:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});function ucs2length(r){const i=r.length;let c=0;let u=0;let h;while(u<i){c++;h=r.charCodeAt(u++);if(h>=55296&&h<=56319&&u<i){h=r.charCodeAt(u);if((h&64512)===56320)u++}}return c}i["default"]=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default'},58996:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(14856);u.code='require("ajv/dist/runtime/uri").default';i["default"]=u},62039:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});class ValidationError extends Error{constructor(r){super("validation failed");this.errors=r;this.ajv=this.validation=true}}i["default"]=ValidationError},89495:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.validateAdditionalItems=void 0;const u=c(41349);const h=c(62915);const d={message:({params:{len:r}})=>(0,u.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,u._)`{limit: ${r}}`};const p={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:d,code(r){const{parentSchema:i,it:c}=r;const{items:u}=i;if(!Array.isArray(u)){(0,h.checkStrictMode)(c,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(r,u)}};function validateAdditionalItems(r,i){const{gen:c,schema:d,data:p,keyword:g,it:y}=r;y.items=true;const b=c.const("len",(0,u._)`${p}.length`);if(d===false){r.setParams({len:i.length});r.pass((0,u._)`${b} <= ${i.length}`)}else if(typeof d=="object"&&!(0,h.alwaysValidSchema)(y,d)){const h=c.var("valid",(0,u._)`${b} <= ${i.length}`);c.if((0,u.not)(h),(()=>validateItems(h)));r.ok(h)}function validateItems(d){c.forRange("i",i.length,b,(i=>{r.subschema({keyword:g,dataProp:i,dataPropType:h.Type.Num},d);if(!y.allErrors)c.if((0,u.not)(d),(()=>c.break()))}))}}i.validateAdditionalItems=validateAdditionalItems;i["default"]=p},18679:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(84797);const h=c(41349);const d=c(67964);const p=c(62915);const g={message:"must NOT have additional properties",params:({params:r})=>(0,h._)`{additionalProperty: ${r.additionalProperty}}`};const y={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:true,trackErrors:true,error:g,code(r){const{gen:i,schema:c,parentSchema:g,data:y,errsCount:b,it:v}=r;if(!b)throw new Error("ajv implementation error");const{allErrors:w,opts:C}=v;v.props=true;if(C.removeAdditional!=="all"&&(0,p.alwaysValidSchema)(v,c))return;const E=(0,u.allSchemaProperties)(g.properties);const x=(0,u.allSchemaProperties)(g.patternProperties);checkAdditionalProperties();r.ok((0,h._)`${b} === ${d.default.errors}`);function checkAdditionalProperties(){i.forIn("key",y,(r=>{if(!E.length&&!x.length)additionalPropertyCode(r);else i.if(isAdditional(r),(()=>additionalPropertyCode(r)))}))}function isAdditional(c){let d;if(E.length>8){const r=(0,p.schemaRefOrVal)(v,g.properties,"properties");d=(0,u.isOwnProperty)(i,r,c)}else if(E.length){d=(0,h.or)(...E.map((r=>(0,h._)`${c} === ${r}`)))}else{d=h.nil}if(x.length){d=(0,h.or)(d,...x.map((i=>(0,h._)`${(0,u.usePattern)(r,i)}.test(${c})`)))}return(0,h.not)(d)}function deleteAdditional(r){i.code((0,h._)`delete ${y}[${r}]`)}function additionalPropertyCode(u){if(C.removeAdditional==="all"||C.removeAdditional&&c===false){deleteAdditional(u);return}if(c===false){r.setParams({additionalProperty:u});r.error();if(!w)i.break();return}if(typeof c=="object"&&!(0,p.alwaysValidSchema)(v,c)){const c=i.name("valid");if(C.removeAdditional==="failing"){applyAdditionalSchema(u,c,false);i.if((0,h.not)(c),(()=>{r.reset();deleteAdditional(u)}))}else{applyAdditionalSchema(u,c);if(!w)i.if((0,h.not)(c),(()=>i.break()))}}}function applyAdditionalSchema(i,c,u){const h={keyword:"additionalProperties",dataProp:i,dataPropType:p.Type.Str};if(u===false){Object.assign(h,{compositeRule:true,createErrors:false,allErrors:false})}r.subschema(h,c)}}};i["default"]=y},54460:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(62915);const h={keyword:"allOf",schemaType:"array",code(r){const{gen:i,schema:c,it:h}=r;if(!Array.isArray(c))throw new Error("ajv implementation error");const d=i.name("valid");c.forEach(((i,c)=>{if((0,u.alwaysValidSchema)(h,i))return;const p=r.subschema({keyword:"allOf",schemaProp:c},d);r.ok(d);r.mergeEvaluated(p)}))}};i["default"]=h},32803:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(84797);const h={keyword:"anyOf",schemaType:"array",trackErrors:true,code:u.validateUnion,error:{message:"must match a schema in anyOf"}};i["default"]=h},80110:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d={message:({params:{min:r,max:i}})=>i===undefined?(0,u.str)`must contain at least ${r} valid item(s)`:(0,u.str)`must contain at least ${r} and no more than ${i} valid item(s)`,params:({params:{min:r,max:i}})=>i===undefined?(0,u._)`{minContains: ${r}}`:(0,u._)`{minContains: ${r}, maxContains: ${i}}`};const p={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:true,error:d,code(r){const{gen:i,schema:c,parentSchema:d,data:p,it:g}=r;let y;let b;const{minContains:v,maxContains:w}=d;if(g.opts.next){y=v===undefined?1:v;b=w}else{y=1}const C=i.const("len",(0,u._)`${p}.length`);r.setParams({min:y,max:b});if(b===undefined&&y===0){(0,h.checkStrictMode)(g,`"minContains" == 0 without "maxContains": "contains" keyword ignored`);return}if(b!==undefined&&y>b){(0,h.checkStrictMode)(g,`"minContains" > "maxContains" is always invalid`);r.fail();return}if((0,h.alwaysValidSchema)(g,c)){let i=(0,u._)`${C} >= ${y}`;if(b!==undefined)i=(0,u._)`${i} && ${C} <= ${b}`;r.pass(i);return}g.items=true;const E=i.name("valid");if(b===undefined&&y===1){validateItems(E,(()=>i.if(E,(()=>i.break()))))}else if(y===0){i.let(E,true);if(b!==undefined)i.if((0,u._)`${p}.length > 0`,validateItemsWithCount)}else{i.let(E,false);validateItemsWithCount()}r.result(E,(()=>r.reset()));function validateItemsWithCount(){const r=i.name("_valid");const c=i.let("count",0);validateItems(r,(()=>i.if(r,(()=>checkLimits(c)))))}function validateItems(c,u){i.forRange("i",0,C,(i=>{r.subschema({keyword:"contains",dataProp:i,dataPropType:h.Type.Num,compositeRule:true},c);u()}))}function checkLimits(r){i.code((0,u._)`${r}++`);if(b===undefined){i.if((0,u._)`${r} >= ${y}`,(()=>i.assign(E,true).break()))}else{i.if((0,u._)`${r} > ${b}`,(()=>i.assign(E,false).break()));if(y===1)i.assign(E,true);else i.if((0,u._)`${r} >= ${y}`,(()=>i.assign(E,true)))}}}};i["default"]=p},49110:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.validateSchemaDeps=i.validatePropertyDeps=i.error=void 0;const u=c(41349);const h=c(62915);const d=c(84797);i.error={message:({params:{property:r,depsCount:i,deps:c}})=>{const h=i===1?"property":"properties";return(0,u.str)`must have ${h} ${c} when property ${r} is present`},params:({params:{property:r,depsCount:i,deps:c,missingProperty:h}})=>(0,u._)`{property: ${r},
    missingProperty: ${h},
    depsCount: ${i},
    deps: ${c}}`};const p={keyword:"dependencies",type:"object",schemaType:"object",error:i.error,code(r){const[i,c]=splitDependencies(r);validatePropertyDeps(r,i);validateSchemaDeps(r,c)}};function splitDependencies({schema:r}){const i={};const c={};for(const u in r){if(u==="__proto__")continue;const h=Array.isArray(r[u])?i:c;h[u]=r[u]}return[i,c]}function validatePropertyDeps(r,i=r.schema){const{gen:c,data:h,it:p}=r;if(Object.keys(i).length===0)return;const g=c.let("missing");for(const y in i){const b=i[y];if(b.length===0)continue;const v=(0,d.propertyInData)(c,h,y,p.opts.ownProperties);r.setParams({property:y,depsCount:b.length,deps:b.join(", ")});if(p.allErrors){c.if(v,(()=>{for(const i of b){(0,d.checkReportMissingProp)(r,i)}}))}else{c.if((0,u._)`${v} && (${(0,d.checkMissingProp)(r,b,g)})`);(0,d.reportMissingProp)(r,g);c.else()}}}i.validatePropertyDeps=validatePropertyDeps;function validateSchemaDeps(r,i=r.schema){const{gen:c,data:u,keyword:p,it:g}=r;const y=c.name("valid");for(const b in i){if((0,h.alwaysValidSchema)(g,i[b]))continue;c.if((0,d.propertyInData)(c,u,b,g.opts.ownProperties),(()=>{const i=r.subschema({keyword:p,schemaProp:b},y);r.mergeValidEvaluated(i,y)}),(()=>c.var(y,true)));r.ok(y)}}i.validateSchemaDeps=validateSchemaDeps;i["default"]=p},44838:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d={message:({params:r})=>(0,u.str)`must match "${r.ifClause}" schema`,params:({params:r})=>(0,u._)`{failingKeyword: ${r.ifClause}}`};const p={keyword:"if",schemaType:["object","boolean"],trackErrors:true,error:d,code(r){const{gen:i,parentSchema:c,it:d}=r;if(c.then===undefined&&c.else===undefined){(0,h.checkStrictMode)(d,'"if" without "then" and "else" is ignored')}const p=hasSchema(d,"then");const g=hasSchema(d,"else");if(!p&&!g)return;const y=i.let("valid",true);const b=i.name("_valid");validateIf();r.reset();if(p&&g){const c=i.let("ifClause");r.setParams({ifClause:c});i.if(b,validateClause("then",c),validateClause("else",c))}else if(p){i.if(b,validateClause("then"))}else{i.if((0,u.not)(b),validateClause("else"))}r.pass(y,(()=>r.error(true)));function validateIf(){const i=r.subschema({keyword:"if",compositeRule:true,createErrors:false,allErrors:false},b);r.mergeEvaluated(i)}function validateClause(c,h){return()=>{const d=r.subschema({keyword:c},b);i.assign(y,b);r.mergeValidEvaluated(d,y);if(h)i.assign(h,(0,u._)`${c}`);else r.setParams({ifClause:c})}}}};function hasSchema(r,i){const c=r.schema[i];return c!==undefined&&!(0,h.alwaysValidSchema)(r,c)}i["default"]=p},77559:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(89495);const h=c(22755);const d=c(27836);const p=c(87091);const g=c(80110);const y=c(49110);const b=c(85767);const v=c(18679);const w=c(83887);const C=c(42272);const E=c(82777);const x=c(32803);const S=c(65791);const k=c(54460);const T=c(44838);const N=c(74727);function getApplicator(r=false){const i=[E.default,x.default,S.default,k.default,T.default,N.default,b.default,v.default,y.default,w.default,C.default];if(r)i.push(h.default,p.default);else i.push(u.default,d.default);i.push(g.default);return i}i["default"]=getApplicator},27836:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.validateTuple=void 0;const u=c(41349);const h=c(62915);const d=c(84797);const p={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(r){const{schema:i,it:c}=r;if(Array.isArray(i))return validateTuple(r,"additionalItems",i);c.items=true;if((0,h.alwaysValidSchema)(c,i))return;r.ok((0,d.validateArray)(r))}};function validateTuple(r,i,c=r.schema){const{gen:d,parentSchema:p,data:g,keyword:y,it:b}=r;checkStrictTuple(p);if(b.opts.unevaluated&&c.length&&b.items!==true){b.items=h.mergeEvaluated.items(d,c.length,b.items)}const v=d.name("valid");const w=d.const("len",(0,u._)`${g}.length`);c.forEach(((i,c)=>{if((0,h.alwaysValidSchema)(b,i))return;d.if((0,u._)`${w} > ${c}`,(()=>r.subschema({keyword:y,schemaProp:c,dataProp:c},v)));r.ok(v)}));function checkStrictTuple(r){const{opts:u,errSchemaPath:d}=b;const p=c.length;const g=p===r.minItems&&(p===r.maxItems||r[i]===false);if(u.strictTuples&&!g){const r=`"${y}" is ${p}-tuple, but minItems or maxItems/${i} are not specified or different at path "${d}"`;(0,h.checkStrictMode)(b,r,u.strictTuples)}}}i.validateTuple=validateTuple;i["default"]=p},87091:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d=c(84797);const p=c(89495);const g={message:({params:{len:r}})=>(0,u.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,u._)`{limit: ${r}}`};const y={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:g,code(r){const{schema:i,parentSchema:c,it:u}=r;const{prefixItems:g}=c;u.items=true;if((0,h.alwaysValidSchema)(u,i))return;if(g)(0,p.validateAdditionalItems)(r,g);else r.ok((0,d.validateArray)(r))}};i["default"]=y},82777:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(62915);const h={keyword:"not",schemaType:["object","boolean"],trackErrors:true,code(r){const{gen:i,schema:c,it:h}=r;if((0,u.alwaysValidSchema)(h,c)){r.fail();return}const d=i.name("valid");r.subschema({keyword:"not",compositeRule:true,createErrors:false,allErrors:false},d);r.failResult(d,(()=>r.reset()),(()=>r.error()))},error:{message:"must NOT be valid"}};i["default"]=h},65791:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d={message:"must match exactly one schema in oneOf",params:({params:r})=>(0,u._)`{passingSchemas: ${r.passing}}`};const p={keyword:"oneOf",schemaType:"array",trackErrors:true,error:d,code(r){const{gen:i,schema:c,parentSchema:d,it:p}=r;if(!Array.isArray(c))throw new Error("ajv implementation error");if(p.opts.discriminator&&d.discriminator)return;const g=c;const y=i.let("valid",false);const b=i.let("passing",null);const v=i.name("_valid");r.setParams({passing:b});i.block(validateOneOf);r.result(y,(()=>r.reset()),(()=>r.error(true)));function validateOneOf(){g.forEach(((c,d)=>{let g;if((0,h.alwaysValidSchema)(p,c)){i.var(v,true)}else{g=r.subschema({keyword:"oneOf",schemaProp:d,compositeRule:true},v)}if(d>0){i.if((0,u._)`${v} && ${y}`).assign(y,false).assign(b,(0,u._)`[${b}, ${d}]`).else()}i.if(v,(()=>{i.assign(y,true);i.assign(b,d);if(g)r.mergeEvaluated(g,u.Name)}))}))}}};i["default"]=p},42272:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(84797);const h=c(41349);const d=c(62915);const p=c(62915);const g={keyword:"patternProperties",type:"object",schemaType:"object",code(r){const{gen:i,schema:c,data:g,parentSchema:y,it:b}=r;const{opts:v}=b;const w=(0,u.allSchemaProperties)(c);const C=w.filter((r=>(0,d.alwaysValidSchema)(b,c[r])));if(w.length===0||C.length===w.length&&(!b.opts.unevaluated||b.props===true)){return}const E=v.strictSchema&&!v.allowMatchingProperties&&y.properties;const x=i.name("valid");if(b.props!==true&&!(b.props instanceof h.Name)){b.props=(0,p.evaluatedPropsToName)(i,b.props)}const{props:S}=b;validatePatternProperties();function validatePatternProperties(){for(const r of w){if(E)checkMatchingProperties(r);if(b.allErrors){validateProperties(r)}else{i.var(x,true);validateProperties(r);i.if(x)}}}function checkMatchingProperties(r){for(const i in E){if(new RegExp(r).test(i)){(0,d.checkStrictMode)(b,`property ${i} matches pattern ${r} (use allowMatchingProperties)`)}}}function validateProperties(c){i.forIn("key",g,(d=>{i.if((0,h._)`${(0,u.usePattern)(r,c)}.test(${d})`,(()=>{const u=C.includes(c);if(!u){r.subschema({keyword:"patternProperties",schemaProp:c,dataProp:d,dataPropType:p.Type.Str},x)}if(b.opts.unevaluated&&S!==true){i.assign((0,h._)`${S}[${d}]`,true)}else if(!u&&!b.allErrors){i.if((0,h.not)(x),(()=>i.break()))}}))}))}}};i["default"]=g},22755:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(27836);const h={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,u.validateTuple)(r,"items")};i["default"]=h},83887:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(73130);const h=c(84797);const d=c(62915);const p=c(18679);const g={keyword:"properties",type:"object",schemaType:"object",code(r){const{gen:i,schema:c,parentSchema:g,data:y,it:b}=r;if(b.opts.removeAdditional==="all"&&g.additionalProperties===undefined){p.default.code(new u.KeywordCxt(b,p.default,"additionalProperties"))}const v=(0,h.allSchemaProperties)(c);for(const r of v){b.definedProperties.add(r)}if(b.opts.unevaluated&&v.length&&b.props!==true){b.props=d.mergeEvaluated.props(i,(0,d.toHash)(v),b.props)}const w=v.filter((r=>!(0,d.alwaysValidSchema)(b,c[r])));if(w.length===0)return;const C=i.name("valid");for(const c of w){if(hasDefault(c)){applyPropertySchema(c)}else{i.if((0,h.propertyInData)(i,y,c,b.opts.ownProperties));applyPropertySchema(c);if(!b.allErrors)i.else().var(C,true);i.endIf()}r.it.definedProperties.add(c);r.ok(C)}function hasDefault(r){return b.opts.useDefaults&&!b.compositeRule&&c[r].default!==undefined}function applyPropertySchema(i){r.subschema({keyword:"properties",schemaProp:i,dataProp:i},C)}}};i["default"]=g},85767:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d={message:"property name must be valid",params:({params:r})=>(0,u._)`{propertyName: ${r.propertyName}}`};const p={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:d,code(r){const{gen:i,schema:c,data:d,it:p}=r;if((0,h.alwaysValidSchema)(p,c))return;const g=i.name("valid");i.forIn("key",d,(c=>{r.setParams({propertyName:c});r.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:true},g);i.if((0,u.not)(g),(()=>{r.error(true);if(!p.allErrors)i.break()}))}));r.ok(g)}};i["default"]=p},74727:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(62915);const h={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:i,it:c}){if(i.if===undefined)(0,u.checkStrictMode)(c,`"${r}" without "if" is ignored`)}};i["default"]=h},84797:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.validateUnion=i.validateArray=i.usePattern=i.callValidateCode=i.schemaProperties=i.allSchemaProperties=i.noPropertyInData=i.propertyInData=i.isOwnProperty=i.hasPropFunc=i.reportMissingProp=i.checkMissingProp=i.checkReportMissingProp=void 0;const u=c(41349);const h=c(62915);const d=c(67964);const p=c(62915);function checkReportMissingProp(r,i){const{gen:c,data:h,it:d}=r;c.if(noPropertyInData(c,h,i,d.opts.ownProperties),(()=>{r.setParams({missingProperty:(0,u._)`${i}`},true);r.error()}))}i.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:r,data:i,it:{opts:c}},h,d){return(0,u.or)(...h.map((h=>(0,u.and)(noPropertyInData(r,i,h,c.ownProperties),(0,u._)`${d} = ${h}`))))}i.checkMissingProp=checkMissingProp;function reportMissingProp(r,i){r.setParams({missingProperty:i},true);r.error()}i.reportMissingProp=reportMissingProp;function hasPropFunc(r){return r.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,u._)`Object.prototype.hasOwnProperty`})}i.hasPropFunc=hasPropFunc;function isOwnProperty(r,i,c){return(0,u._)`${hasPropFunc(r)}.call(${i}, ${c})`}i.isOwnProperty=isOwnProperty;function propertyInData(r,i,c,h){const d=(0,u._)`${i}${(0,u.getProperty)(c)} !== undefined`;return h?(0,u._)`${d} && ${isOwnProperty(r,i,c)}`:d}i.propertyInData=propertyInData;function noPropertyInData(r,i,c,h){const d=(0,u._)`${i}${(0,u.getProperty)(c)} === undefined`;return h?(0,u.or)(d,(0,u.not)(isOwnProperty(r,i,c))):d}i.noPropertyInData=noPropertyInData;function allSchemaProperties(r){return r?Object.keys(r).filter((r=>r!=="__proto__")):[]}i.allSchemaProperties=allSchemaProperties;function schemaProperties(r,i){return allSchemaProperties(i).filter((c=>!(0,h.alwaysValidSchema)(r,i[c])))}i.schemaProperties=schemaProperties;function callValidateCode({schemaCode:r,data:i,it:{gen:c,topSchemaRef:h,schemaPath:p,errorPath:g},it:y},b,v,w){const C=w?(0,u._)`${r}, ${i}, ${h}${p}`:i;const E=[[d.default.instancePath,(0,u.strConcat)(d.default.instancePath,g)],[d.default.parentData,y.parentData],[d.default.parentDataProperty,y.parentDataProperty],[d.default.rootData,d.default.rootData]];if(y.opts.dynamicRef)E.push([d.default.dynamicAnchors,d.default.dynamicAnchors]);const x=(0,u._)`${C}, ${c.object(...E)}`;return v!==u.nil?(0,u._)`${b}.call(${v}, ${x})`:(0,u._)`${b}(${x})`}i.callValidateCode=callValidateCode;const g=(0,u._)`new RegExp`;function usePattern({gen:r,it:{opts:i}},c){const h=i.unicodeRegExp?"u":"";const{regExp:d}=i.code;const y=d(c,h);return r.scopeValue("pattern",{key:y.toString(),ref:y,code:(0,u._)`${d.code==="new RegExp"?g:(0,p.useFunc)(r,d)}(${c}, ${h})`})}i.usePattern=usePattern;function validateArray(r){const{gen:i,data:c,keyword:d,it:p}=r;const g=i.name("valid");if(p.allErrors){const r=i.let("valid",true);validateItems((()=>i.assign(r,false)));return r}i.var(g,true);validateItems((()=>i.break()));return g;function validateItems(p){const y=i.const("len",(0,u._)`${c}.length`);i.forRange("i",0,y,(c=>{r.subschema({keyword:d,dataProp:c,dataPropType:h.Type.Num},g);i.if((0,u.not)(g),p)}))}}i.validateArray=validateArray;function validateUnion(r){const{gen:i,schema:c,keyword:d,it:p}=r;if(!Array.isArray(c))throw new Error("ajv implementation error");const g=c.some((r=>(0,h.alwaysValidSchema)(p,r)));if(g&&!p.opts.unevaluated)return;const y=i.let("valid",false);const b=i.name("_valid");i.block((()=>c.forEach(((c,h)=>{const p=r.subschema({keyword:d,schemaProp:h,compositeRule:true},b);i.assign(y,(0,u._)`${y} || ${b}`);const g=r.mergeValidEvaluated(p,b);if(!g)i.if((0,u.not)(y))}))));r.result(y,(()=>r.reset()),(()=>r.error(true)))}i.validateUnion=validateUnion},69358:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const c={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};i["default"]=c},58061:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(69358);const h=c(79724);const d=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",u.default,h.default];i["default"]=d},79724:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.callRef=i.getValidate=void 0;const u=c(48391);const h=c(84797);const d=c(41349);const p=c(67964);const g=c(79364);const y=c(62915);const b={keyword:"$ref",schemaType:"string",code(r){const{gen:i,schema:c,it:h}=r;const{baseId:p,schemaEnv:y,validateName:b,opts:v,self:w}=h;const{root:C}=y;if((c==="#"||c==="#/")&&p===C.baseId)return callRootRef();const E=g.resolveRef.call(w,C,p,c);if(E===undefined)throw new u.default(h.opts.uriResolver,p,c);if(E instanceof g.SchemaEnv)return callValidate(E);return inlineRefSchema(E);function callRootRef(){if(y===C)return callRef(r,b,y,y.$async);const c=i.scopeValue("root",{ref:C});return callRef(r,(0,d._)`${c}.validate`,C,C.$async)}function callValidate(i){const c=getValidate(r,i);callRef(r,c,i,i.$async)}function inlineRefSchema(u){const h=i.scopeValue("schema",v.code.source===true?{ref:u,code:(0,d.stringify)(u)}:{ref:u});const p=i.name("valid");const g=r.subschema({schema:u,dataTypes:[],schemaPath:d.nil,topSchemaRef:h,errSchemaPath:c},p);r.mergeEvaluated(g);r.ok(p)}}};function getValidate(r,i){const{gen:c}=r;return i.validate?c.scopeValue("validate",{ref:i.validate}):(0,d._)`${c.scopeValue("wrapper",{ref:i})}.validate`}i.getValidate=getValidate;function callRef(r,i,c,u){const{gen:g,it:b}=r;const{allErrors:v,schemaEnv:w,opts:C}=b;const E=C.passContext?p.default.this:d.nil;if(u)callAsyncRef();else callSyncRef();function callAsyncRef(){if(!w.$async)throw new Error("async schema referenced by sync schema");const c=g.let("valid");g.try((()=>{g.code((0,d._)`await ${(0,h.callValidateCode)(r,i,E)}`);addEvaluatedFrom(i);if(!v)g.assign(c,true)}),(r=>{g.if((0,d._)`!(${r} instanceof ${b.ValidationError})`,(()=>g.throw(r)));addErrorsFrom(r);if(!v)g.assign(c,false)}));r.ok(c)}function callSyncRef(){r.result((0,h.callValidateCode)(r,i,E),(()=>addEvaluatedFrom(i)),(()=>addErrorsFrom(i)))}function addErrorsFrom(r){const i=(0,d._)`${r}.errors`;g.assign(p.default.vErrors,(0,d._)`${p.default.vErrors} === null ? ${i} : ${p.default.vErrors}.concat(${i})`);g.assign(p.default.errors,(0,d._)`${p.default.vErrors}.length`)}function addEvaluatedFrom(r){var i;if(!b.opts.unevaluated)return;const u=(i=c===null||c===void 0?void 0:c.validate)===null||i===void 0?void 0:i.evaluated;if(b.props!==true){if(u&&!u.dynamicProps){if(u.props!==undefined){b.props=y.mergeEvaluated.props(g,u.props,b.props)}}else{const i=g.var("props",(0,d._)`${r}.evaluated.props`);b.props=y.mergeEvaluated.props(g,i,b.props,d.Name)}}if(b.items!==true){if(u&&!u.dynamicItems){if(u.items!==undefined){b.items=y.mergeEvaluated.items(g,u.items,b.items)}}else{const i=g.var("items",(0,d._)`${r}.evaluated.items`);b.items=y.mergeEvaluated.items(g,i,b.items,d.Name)}}}}i.callRef=callRef;i["default"]=b},60185:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(45365);const d=c(79364);const p=c(62915);const g={message:({params:{discrError:r,tagName:i}})=>r===h.DiscrError.Tag?`tag "${i}" must be string`:`value of tag "${i}" must be in oneOf`,params:({params:{discrError:r,tag:i,tagName:c}})=>(0,u._)`{error: ${r}, tag: ${c}, tagValue: ${i}}`};const y={keyword:"discriminator",type:"object",schemaType:"object",error:g,code(r){const{gen:i,data:c,schema:g,parentSchema:y,it:b}=r;const{oneOf:v}=y;if(!b.opts.discriminator){throw new Error("discriminator: requires discriminator option")}const w=g.propertyName;if(typeof w!="string")throw new Error("discriminator: requires propertyName");if(g.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const C=i.let("valid",false);const E=i.const("tag",(0,u._)`${c}${(0,u.getProperty)(w)}`);i.if((0,u._)`typeof ${E} == "string"`,(()=>validateMapping()),(()=>r.error(false,{discrError:h.DiscrError.Tag,tag:E,tagName:w})));r.ok(C);function validateMapping(){const c=getMapping();i.if(false);for(const r in c){i.elseIf((0,u._)`${E} === ${r}`);i.assign(C,applyTagSchema(c[r]))}i.else();r.error(false,{discrError:h.DiscrError.Mapping,tag:E,tagName:w});i.endIf()}function applyTagSchema(c){const h=i.name("valid");const d=r.subschema({keyword:"oneOf",schemaProp:c},h);r.mergeEvaluated(d,u.Name);return h}function getMapping(){var r;const i={};const c=hasRequired(y);let u=true;for(let i=0;i<v.length;i++){let h=v[i];if((h===null||h===void 0?void 0:h.$ref)&&!(0,p.schemaHasRulesButRef)(h,b.self.RULES)){h=d.resolveRef.call(b.self,b.schemaEnv.root,b.baseId,h===null||h===void 0?void 0:h.$ref);if(h instanceof d.SchemaEnv)h=h.schema}const g=(r=h===null||h===void 0?void 0:h.properties)===null||r===void 0?void 0:r[w];if(typeof g!="object"){throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${w}"`)}u=u&&(c||hasRequired(h));addMappings(g,i)}if(!u)throw new Error(`discriminator: "${w}" must be required`);return i;function hasRequired({required:r}){return Array.isArray(r)&&r.includes(w)}function addMappings(r,i){if(r.const){addMapping(r.const,i)}else if(r.enum){for(const c of r.enum){addMapping(c,i)}}else{throw new Error(`discriminator: "properties/${w}" must have "const" or "enum"`)}}function addMapping(r,c){if(typeof r!="string"||r in i){throw new Error(`discriminator: "${w}" values must be unique strings`)}i[r]=c}}}};i["default"]=y},45365:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.DiscrError=void 0;var c;(function(r){r["Tag"]="tag";r["Mapping"]="mapping"})(c=i.DiscrError||(i.DiscrError={}))},90453:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(58061);const h=c(68529);const d=c(77559);const p=c(47787);const g=c(20727);const y=[u.default,h.default,(0,d.default)(),p.default,g.metadataVocabulary,g.contentVocabulary];i["default"]=y},225:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h={message:({schemaCode:r})=>(0,u.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,u._)`{format: ${r}}`};const d={keyword:"format",type:["number","string"],schemaType:"string",$data:true,error:h,code(r,i){const{gen:c,data:h,$data:d,schema:p,schemaCode:g,it:y}=r;const{opts:b,errSchemaPath:v,schemaEnv:w,self:C}=y;if(!b.validateFormats)return;if(d)validate$DataFormat();else validateFormat();function validate$DataFormat(){const d=c.scopeValue("formats",{ref:C.formats,code:b.code.formats});const p=c.const("fDef",(0,u._)`${d}[${g}]`);const y=c.let("fType");const v=c.let("format");c.if((0,u._)`typeof ${p} == "object" && !(${p} instanceof RegExp)`,(()=>c.assign(y,(0,u._)`${p}.type || "string"`).assign(v,(0,u._)`${p}.validate`)),(()=>c.assign(y,(0,u._)`"string"`).assign(v,p)));r.fail$data((0,u.or)(unknownFmt(),invalidFmt()));function unknownFmt(){if(b.strictSchema===false)return u.nil;return(0,u._)`${g} && !${v}`}function invalidFmt(){const r=w.$async?(0,u._)`(${p}.async ? await ${v}(${h}) : ${v}(${h}))`:(0,u._)`${v}(${h})`;const c=(0,u._)`(typeof ${v} == "function" ? ${r} : ${v}.test(${h}))`;return(0,u._)`${v} && ${v} !== true && ${y} === ${i} && !${c}`}}function validateFormat(){const d=C.formats[p];if(!d){unknownFormat();return}if(d===true)return;const[g,y,E]=getFormat(d);if(g===i)r.pass(validCondition());function unknownFormat(){if(b.strictSchema===false){C.logger.warn(unknownMsg());return}throw new Error(unknownMsg());function unknownMsg(){return`unknown format "${p}" ignored in schema at path "${v}"`}}function getFormat(r){const i=r instanceof RegExp?(0,u.regexpCode)(r):b.code.formats?(0,u._)`${b.code.formats}${(0,u.getProperty)(p)}`:undefined;const h=c.scopeValue("formats",{key:p,ref:r,code:i});if(typeof r=="object"&&!(r instanceof RegExp)){return[r.type||"string",r.validate,(0,u._)`${h}.validate`]}return["string",r,h]}function validCondition(){if(typeof d=="object"&&!(d instanceof RegExp)&&d.async){if(!w.$async)throw new Error("async format in sync schema");return(0,u._)`await ${E}(${h})`}return typeof y=="function"?(0,u._)`${E}(${h})`:(0,u._)`${E}.test(${h})`}}}};i["default"]=d},47787:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(225);const h=[u.default];i["default"]=h},20727:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.contentVocabulary=i.metadataVocabulary=void 0;i.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];i.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},30909:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d=c(94456);const p={message:"must be equal to constant",params:({schemaCode:r})=>(0,u._)`{allowedValue: ${r}}`};const g={keyword:"const",$data:true,error:p,code(r){const{gen:i,data:c,$data:p,schemaCode:g,schema:y}=r;if(p||y&&typeof y=="object"){r.fail$data((0,u._)`!${(0,h.useFunc)(i,d.default)}(${c}, ${g})`)}else{r.fail((0,u._)`${y} !== ${c}`)}}};i["default"]=g},77564:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d=c(94456);const p={message:"must be equal to one of the allowed values",params:({schemaCode:r})=>(0,u._)`{allowedValues: ${r}}`};const g={keyword:"enum",schemaType:"array",$data:true,error:p,code(r){const{gen:i,data:c,$data:p,schema:g,schemaCode:y,it:b}=r;if(!p&&g.length===0)throw new Error("enum must have non-empty array");const v=g.length>=b.opts.loopEnum;let w;const getEql=()=>w!==null&&w!==void 0?w:w=(0,h.useFunc)(i,d.default);let C;if(v||p){C=i.let("valid");r.block$data(C,loopEnum)}else{if(!Array.isArray(g))throw new Error("ajv implementation error");const r=i.const("vSchema",y);C=(0,u.or)(...g.map(((i,c)=>equalCode(r,c))))}r.pass(C);function loopEnum(){i.assign(C,false);i.forOf("v",y,(r=>i.if((0,u._)`${getEql()}(${c}, ${r})`,(()=>i.assign(C,true).break()))))}function equalCode(r,i){const h=g[i];return typeof h==="object"&&h!==null?(0,u._)`${getEql()}(${c}, ${r}[${i}])`:(0,u._)`${c} === ${h}`}}};i["default"]=g},68529:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(44529);const h=c(3731);const d=c(81564);const p=c(99065);const g=c(41443);const y=c(74873);const b=c(44611);const v=c(13940);const w=c(30909);const C=c(77564);const E=[u.default,h.default,d.default,p.default,g.default,y.default,b.default,v.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},w.default,C.default];i["default"]=E},44611:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h={message({keyword:r,schemaCode:i}){const c=r==="maxItems"?"more":"fewer";return(0,u.str)`must NOT have ${c} than ${i} items`},params:({schemaCode:r})=>(0,u._)`{limit: ${r}}`};const d={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:true,error:h,code(r){const{keyword:i,data:c,schemaCode:h}=r;const d=i==="maxItems"?u.operators.GT:u.operators.LT;r.fail$data((0,u._)`${c}.length ${d} ${h}`)}};i["default"]=d},81564:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=c(62915);const d=c(96209);const p={message({keyword:r,schemaCode:i}){const c=r==="maxLength"?"more":"fewer";return(0,u.str)`must NOT have ${c} than ${i} characters`},params:({schemaCode:r})=>(0,u._)`{limit: ${r}}`};const g={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:true,error:p,code(r){const{keyword:i,data:c,schemaCode:p,it:g}=r;const y=i==="maxLength"?u.operators.GT:u.operators.LT;const b=g.opts.unicode===false?(0,u._)`${c}.length`:(0,u._)`${(0,h.useFunc)(r.gen,d.default)}(${c})`;r.fail$data((0,u._)`${b} ${y} ${p}`)}};i["default"]=g},44529:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h=u.operators;const d={maximum:{okStr:"<=",ok:h.LTE,fail:h.GT},minimum:{okStr:">=",ok:h.GTE,fail:h.LT},exclusiveMaximum:{okStr:"<",ok:h.LT,fail:h.GTE},exclusiveMinimum:{okStr:">",ok:h.GT,fail:h.LTE}};const p={message:({keyword:r,schemaCode:i})=>(0,u.str)`must be ${d[r].okStr} ${i}`,params:({keyword:r,schemaCode:i})=>(0,u._)`{comparison: ${d[r].okStr}, limit: ${i}}`};const g={keyword:Object.keys(d),type:"number",schemaType:"number",$data:true,error:p,code(r){const{keyword:i,data:c,schemaCode:h}=r;r.fail$data((0,u._)`${c} ${d[i].fail} ${h} || isNaN(${c})`)}};i["default"]=g},41443:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h={message({keyword:r,schemaCode:i}){const c=r==="maxProperties"?"more":"fewer";return(0,u.str)`must NOT have ${c} than ${i} properties`},params:({schemaCode:r})=>(0,u._)`{limit: ${r}}`};const d={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:true,error:h,code(r){const{keyword:i,data:c,schemaCode:h}=r;const d=i==="maxProperties"?u.operators.GT:u.operators.LT;r.fail$data((0,u._)`Object.keys(${c}).length ${d} ${h}`)}};i["default"]=d},3731:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(41349);const h={message:({schemaCode:r})=>(0,u.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,u._)`{multipleOf: ${r}}`};const d={keyword:"multipleOf",type:"number",schemaType:"number",$data:true,error:h,code(r){const{gen:i,data:c,schemaCode:h,it:d}=r;const p=d.opts.multipleOfPrecision;const g=i.let("res");const y=p?(0,u._)`Math.abs(Math.round(${g}) - ${g}) > 1e-${p}`:(0,u._)`${g} !== parseInt(${g})`;r.fail$data((0,u._)`(${h} === 0 || (${g} = ${c}/${h}, ${y}))`)}};i["default"]=d},99065:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(84797);const h=c(41349);const d={message:({schemaCode:r})=>(0,h.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,h._)`{pattern: ${r}}`};const p={keyword:"pattern",type:"string",schemaType:"string",$data:true,error:d,code(r){const{data:i,$data:c,schema:d,schemaCode:p,it:g}=r;const y=g.opts.unicodeRegExp?"u":"";const b=c?(0,h._)`(new RegExp(${p}, ${y}))`:(0,u.usePattern)(r,d);r.fail$data((0,h._)`!${b}.test(${i})`)}};i["default"]=p},74873:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(84797);const h=c(41349);const d=c(62915);const p={message:({params:{missingProperty:r}})=>(0,h.str)`must have required property '${r}'`,params:({params:{missingProperty:r}})=>(0,h._)`{missingProperty: ${r}}`};const g={keyword:"required",type:"object",schemaType:"array",$data:true,error:p,code(r){const{gen:i,schema:c,schemaCode:p,data:g,$data:y,it:b}=r;const{opts:v}=b;if(!y&&c.length===0)return;const w=c.length>=v.loopRequired;if(b.allErrors)allErrorsMode();else exitOnErrorMode();if(v.strictRequired){const i=r.parentSchema.properties;const{definedProperties:u}=r.it;for(const r of c){if((i===null||i===void 0?void 0:i[r])===undefined&&!u.has(r)){const i=b.schemaEnv.baseId+b.errSchemaPath;const c=`required property "${r}" is not defined at "${i}" (strictRequired)`;(0,d.checkStrictMode)(b,c,b.opts.strictRequired)}}}function allErrorsMode(){if(w||y){r.block$data(h.nil,loopAllRequired)}else{for(const i of c){(0,u.checkReportMissingProp)(r,i)}}}function exitOnErrorMode(){const h=i.let("missing");if(w||y){const c=i.let("valid",true);r.block$data(c,(()=>loopUntilMissing(h,c)));r.ok(c)}else{i.if((0,u.checkMissingProp)(r,c,h));(0,u.reportMissingProp)(r,h);i.else()}}function loopAllRequired(){i.forOf("prop",p,(c=>{r.setParams({missingProperty:c});i.if((0,u.noPropertyInData)(i,g,c,v.ownProperties),(()=>r.error()))}))}function loopUntilMissing(c,d){r.setParams({missingProperty:c});i.forOf(c,p,(()=>{i.assign(d,(0,u.propertyInData)(i,g,c,v.ownProperties));i.if((0,h.not)(d),(()=>{r.error();i.break()}))}),h.nil)}}};i["default"]=g},13940:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(51757);const h=c(41349);const d=c(62915);const p=c(94456);const g={message:({params:{i:r,j:i}})=>(0,h.str)`must NOT have duplicate items (items ## ${i} and ${r} are identical)`,params:({params:{i:r,j:i}})=>(0,h._)`{i: ${r}, j: ${i}}`};const y={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:true,error:g,code(r){const{gen:i,data:c,$data:g,schema:y,parentSchema:b,schemaCode:v,it:w}=r;if(!g&&!y)return;const C=i.let("valid");const E=b.items?(0,u.getSchemaTypes)(b.items):[];r.block$data(C,validateUniqueItems,(0,h._)`${v} === false`);r.ok(C);function validateUniqueItems(){const u=i.let("i",(0,h._)`${c}.length`);const d=i.let("j");r.setParams({i:u,j:d});i.assign(C,true);i.if((0,h._)`${u} > 1`,(()=>(canOptimize()?loopN:loopN2)(u,d)))}function canOptimize(){return E.length>0&&!E.some((r=>r==="object"||r==="array"))}function loopN(d,p){const g=i.name("item");const y=(0,u.checkDataTypes)(E,g,w.opts.strictNumbers,u.DataType.Wrong);const b=i.const("indices",(0,h._)`{}`);i.for((0,h._)`;${d}--;`,(()=>{i.let(g,(0,h._)`${c}[${d}]`);i.if(y,(0,h._)`continue`);if(E.length>1)i.if((0,h._)`typeof ${g} == "string"`,(0,h._)`${g} += "_"`);i.if((0,h._)`typeof ${b}[${g}] == "number"`,(()=>{i.assign(p,(0,h._)`${b}[${g}]`);r.error();i.assign(C,false).break()})).code((0,h._)`${b}[${g}] = ${d}`)}))}function loopN2(u,g){const y=(0,d.useFunc)(i,p.default);const b=i.name("outer");i.label(b).for((0,h._)`;${u}--;`,(()=>i.for((0,h._)`${g} = ${u}; ${g}--;`,(()=>i.if((0,h._)`${y}(${c}[${u}], ${c}[${g}])`,(()=>{r.error();i.assign(C,false).break(b)}))))))}}};i["default"]=y},85218:r=>{"use strict";r.exports=balanced;function balanced(r,i,c){if(r instanceof RegExp)r=maybeMatch(r,c);if(i instanceof RegExp)i=maybeMatch(i,c);var u=range(r,i,c);return u&&{start:u[0],end:u[1],pre:c.slice(0,u[0]),body:c.slice(u[0]+r.length,u[1]),post:c.slice(u[1]+i.length)}}function maybeMatch(r,i){var c=i.match(r);return c?c[0]:null}balanced.range=range;function range(r,i,c){var u,h,d,p,g;var y=c.indexOf(r);var b=c.indexOf(i,y+1);var v=y;if(y>=0&&b>0){if(r===i){return[y,b]}u=[];d=c.length;while(v>=0&&!g){if(v==y){u.push(v);y=c.indexOf(r,v+1)}else if(u.length==1){g=[u.pop(),b]}else{h=u.pop();if(h<d){d=h;p=b}b=c.indexOf(i,v+1)}v=y<b&&y>=0?y:b}if(u.length){g=[d,p]}}return g}},4645:(r,i,c)=>{"use strict";const u=c(57147);const h=c(71017);const d=c(14859);const p=c(47526);let g;function Database(r,i){if(new.target==null){return new Database(r,i)}let b;if(Buffer.isBuffer(r)){b=r;r=":memory:"}if(r==null)r="";if(i==null)i={};if(typeof r!=="string")throw new TypeError("Expected first argument to be a string");if(typeof i!=="object")throw new TypeError("Expected second argument to be an options object");if("readOnly"in i)throw new TypeError('Misspelled option "readOnly" should be "readonly"');if("memory"in i)throw new TypeError('Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)');const v=r.trim();const w=v===""||v===":memory:";const C=d.getBooleanOption(i,"readonly");const E=d.getBooleanOption(i,"fileMustExist");const x="timeout"in i?i.timeout:5e3;const S="verbose"in i?i.verbose:null;const k="nativeBinding"in i?i.nativeBinding:null;if(C&&w&&!b)throw new TypeError("In-memory/temporary databases cannot be readonly");if(!Number.isInteger(x)||x<0)throw new TypeError('Expected the "timeout" option to be a positive integer');if(x>2147483647)throw new RangeError('Option "timeout" cannot be greater than 2147483647');if(S!=null&&typeof S!=="function")throw new TypeError('Expected the "verbose" option to be a function');if(k!=null&&typeof k!=="string")throw new TypeError('Expected the "nativeBinding" option to be a string');let T;if(k==null){T=g||(g=require(c.ab+"build/Release/better_sqlite3.node"))}else{T=require(h.resolve(k).replace(/(\.node)?$/,".node"))}if(!T.isInitialized){T.setErrorConstructor(p);T.isInitialized=true}if(!w&&!u.existsSync(h.dirname(v))){throw new TypeError("Cannot open database because the directory does not exist")}Object.defineProperties(this,{[d.cppdb]:{value:new T.Database(v,r,w,C,E,x,S||null,b||null)},...y.getters})}const y=c(78963);Database.prototype.prepare=y.prepare;Database.prototype.transaction=c(77810);Database.prototype.pragma=c(50411);Database.prototype.backup=c(26606);Database.prototype.serialize=c(84231);Database.prototype.function=c(23865);Database.prototype.aggregate=c(20040);Database.prototype.table=c(49785);Database.prototype.loadExtension=y.loadExtension;Database.prototype.exec=y.exec;Database.prototype.close=y.close;Database.prototype.defaultSafeIntegers=y.defaultSafeIntegers;Database.prototype.unsafeMode=y.unsafeMode;Database.prototype[d.inspect]=c(79508);r.exports=Database},18940:(r,i,c)=>{"use strict";r.exports=c(4645);r.exports.SqliteError=c(47526)},20040:(r,i,c)=>{"use strict";const{getBooleanOption:u,cppdb:h}=c(14859);r.exports=function defineAggregate(r,i){if(typeof r!=="string")throw new TypeError("Expected first argument to be a string");if(typeof i!=="object"||i===null)throw new TypeError("Expected second argument to be an options object");if(!r)throw new TypeError("User-defined function name cannot be an empty string");const c="start"in i?i.start:null;const d=getFunctionOption(i,"step",true);const p=getFunctionOption(i,"inverse",false);const g=getFunctionOption(i,"result",false);const y="safeIntegers"in i?+u(i,"safeIntegers"):2;const b=u(i,"deterministic");const v=u(i,"directOnly");const w=u(i,"varargs");let C=-1;if(!w){C=Math.max(getLength(d),p?getLength(p):0);if(C>0)C-=1;if(C>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}this[h].aggregate(c,d,p,g,r,C,y,b,v);return this};const getFunctionOption=(r,i,c)=>{const u=i in r?r[i]:null;if(typeof u==="function")return u;if(u!=null)throw new TypeError(`Expected the "${i}" option to be a function`);if(c)throw new TypeError(`Missing required option "${i}"`);return null};const getLength=({length:r})=>{if(Number.isInteger(r)&&r>=0)return r;throw new TypeError("Expected function.length to be a positive integer")}},26606:(r,i,c)=>{"use strict";const u=c(57147);const h=c(71017);const{promisify:d}=c(73837);const{cppdb:p}=c(14859);const g=d(u.access);r.exports=async function backup(r,i){if(i==null)i={};if(typeof r!=="string")throw new TypeError("Expected first argument to be a string");if(typeof i!=="object")throw new TypeError("Expected second argument to be an options object");r=r.trim();const c="attached"in i?i.attached:"main";const u="progress"in i?i.progress:null;if(!r)throw new TypeError("Backup filename cannot be an empty string");if(r===":memory:")throw new TypeError('Invalid backup filename ":memory:"');if(typeof c!=="string")throw new TypeError('Expected the "attached" option to be a string');if(!c)throw new TypeError('The "attached" option cannot be an empty string');if(u!=null&&typeof u!=="function")throw new TypeError('Expected the "progress" option to be a function');await g(h.dirname(r)).catch((()=>{throw new TypeError("Cannot save backup because the directory does not exist")}));const d=await g(r).then((()=>false),(()=>true));return runBackup(this[p].backup(this,c,r,d),u||null)};const runBackup=(r,i)=>{let c=0;let u=true;return new Promise(((h,d)=>{setImmediate((function step(){try{const d=r.transfer(c);if(!d.remainingPages){r.close();h(d);return}if(u){u=false;c=100}if(i){const r=i(d);if(r!==undefined){if(typeof r==="number"&&r===r)c=Math.max(0,Math.min(2147483647,Math.round(r)));else throw new TypeError("Expected progress callback to return a number or undefined")}}setImmediate(step)}catch(i){r.close();d(i)}}))}))}},23865:(r,i,c)=>{"use strict";const{getBooleanOption:u,cppdb:h}=c(14859);r.exports=function defineFunction(r,i,c){if(i==null)i={};if(typeof i==="function"){c=i;i={}}if(typeof r!=="string")throw new TypeError("Expected first argument to be a string");if(typeof c!=="function")throw new TypeError("Expected last argument to be a function");if(typeof i!=="object")throw new TypeError("Expected second argument to be an options object");if(!r)throw new TypeError("User-defined function name cannot be an empty string");const d="safeIntegers"in i?+u(i,"safeIntegers"):2;const p=u(i,"deterministic");const g=u(i,"directOnly");const y=u(i,"varargs");let b=-1;if(!y){b=c.length;if(!Number.isInteger(b)||b<0)throw new TypeError("Expected function.length to be a positive integer");if(b>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}this[h].function(c,r,b,d,p,g);return this}},79508:r=>{"use strict";const i=function Database(){};r.exports=function inspect(r,c){return Object.assign(new i,this)}},50411:(r,i,c)=>{"use strict";const{getBooleanOption:u,cppdb:h}=c(14859);r.exports=function pragma(r,i){if(i==null)i={};if(typeof r!=="string")throw new TypeError("Expected first argument to be a string");if(typeof i!=="object")throw new TypeError("Expected second argument to be an options object");const c=u(i,"simple");const d=this[h].prepare(`PRAGMA ${r}`,this,true);return c?d.pluck().get():d.all()}},84231:(r,i,c)=>{"use strict";const{cppdb:u}=c(14859);r.exports=function serialize(r){if(r==null)r={};if(typeof r!=="object")throw new TypeError("Expected first argument to be an options object");const i="attached"in r?r.attached:"main";if(typeof i!=="string")throw new TypeError('Expected the "attached" option to be a string');if(!i)throw new TypeError('The "attached" option cannot be an empty string');return this[u].serialize(i)}},49785:(r,i,c)=>{"use strict";const{cppdb:u}=c(14859);r.exports=function defineTable(r,i){if(typeof r!=="string")throw new TypeError("Expected first argument to be a string");if(!r)throw new TypeError("Virtual table module name cannot be an empty string");let c=false;if(typeof i==="object"&&i!==null){c=true;i=defer(parseTableDefinition(i,"used",r))}else{if(typeof i!=="function")throw new TypeError("Expected second argument to be a function or a table definition object");i=wrapFactory(i)}this[u].table(i,r,c);return this};function wrapFactory(r){return function virtualTableFactory(i,c,u,...h){const p={module:i,database:c,table:u};const g=d.call(r,p,h);if(typeof g!=="object"||g===null){throw new TypeError(`Virtual table module "${i}" did not return a table definition object`)}return parseTableDefinition(g,"returned",i)}}function parseTableDefinition(r,i,c){if(!h.call(r,"rows")){throw new TypeError(`Virtual table module "${c}" ${i} a table definition without a "rows" property`)}if(!h.call(r,"columns")){throw new TypeError(`Virtual table module "${c}" ${i} a table definition without a "columns" property`)}const u=r.rows;if(typeof u!=="function"||Object.getPrototypeOf(u)!==p){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with an invalid "rows" property (should be a generator function)`)}let d=r.columns;if(!Array.isArray(d)||!(d=[...d]).every((r=>typeof r==="string"))){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with an invalid "columns" property (should be an array of strings)`)}if(d.length!==new Set(d).size){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with duplicate column names`)}if(!d.length){throw new RangeError(`Virtual table module "${c}" ${i} a table definition with zero columns`)}let g;if(h.call(r,"parameters")){g=r.parameters;if(!Array.isArray(g)||!(g=[...g]).every((r=>typeof r==="string"))){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with an invalid "parameters" property (should be an array of strings)`)}}else{g=inferParameters(u)}if(g.length!==new Set(g).size){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with duplicate parameter names`)}if(g.length>32){throw new RangeError(`Virtual table module "${c}" ${i} a table definition with more than the maximum number of 32 parameters`)}for(const r of g){if(d.includes(r)){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with column "${r}" which was ambiguously defined as both a column and parameter`)}}let y=2;if(h.call(r,"safeIntegers")){const u=r.safeIntegers;if(typeof u!=="boolean"){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with an invalid "safeIntegers" property (should be a boolean)`)}y=+u}let b=false;if(h.call(r,"directOnly")){b=r.directOnly;if(typeof b!=="boolean"){throw new TypeError(`Virtual table module "${c}" ${i} a table definition with an invalid "directOnly" property (should be a boolean)`)}}const v=[...g.map(identifier).map((r=>`${r} HIDDEN`)),...d.map(identifier)];return[`CREATE TABLE x(${v.join(", ")});`,wrapGenerator(u,new Map(d.map(((r,i)=>[r,g.length+i]))),c),g,y,b]}function wrapGenerator(r,i,c){return function*virtualTable(...u){const h=u.map((r=>Buffer.isBuffer(r)?Buffer.from(r):r));for(let r=0;r<i.size;++r){h.push(null)}for(const d of r(...u)){if(Array.isArray(d)){extractRowArray(d,h,i.size,c);yield h}else if(typeof d==="object"&&d!==null){extractRowObject(d,h,i,c);yield h}else{throw new TypeError(`Virtual table module "${c}" yielded something that isn't a valid row object`)}}}}function extractRowArray(r,i,c,u){if(r.length!==c){throw new TypeError(`Virtual table module "${u}" yielded a row with an incorrect number of columns`)}const h=i.length-c;for(let u=0;u<c;++u){i[u+h]=r[u]}}function extractRowObject(r,i,c,u){let h=0;for(const d of Object.keys(r)){const p=c.get(d);if(p===undefined){throw new TypeError(`Virtual table module "${u}" yielded a row with an undeclared column "${d}"`)}i[p]=r[d];h+=1}if(h!==c.size){throw new TypeError(`Virtual table module "${u}" yielded a row with missing columns`)}}function inferParameters({length:r}){if(!Number.isInteger(r)||r<0){throw new TypeError("Expected function.length to be a positive integer")}const i=[];for(let c=0;c<r;++c){i.push(`$${c+1}`)}return i}const{hasOwnProperty:h}=Object.prototype;const{apply:d}=Function.prototype;const p=Object.getPrototypeOf((function*(){}));const identifier=r=>`"${r.replace(/"/g,'""')}"`;const defer=r=>()=>r},77810:(r,i,c)=>{"use strict";const{cppdb:u}=c(14859);const h=new WeakMap;r.exports=function transaction(r){if(typeof r!=="function")throw new TypeError("Expected first argument to be a function");const i=this[u];const c=getController(i,this);const{apply:h}=Function.prototype;const d={default:{value:wrapTransaction(h,r,i,c.default)},deferred:{value:wrapTransaction(h,r,i,c.deferred)},immediate:{value:wrapTransaction(h,r,i,c.immediate)},exclusive:{value:wrapTransaction(h,r,i,c.exclusive)},database:{value:this,enumerable:true}};Object.defineProperties(d.default.value,d);Object.defineProperties(d.deferred.value,d);Object.defineProperties(d.immediate.value,d);Object.defineProperties(d.exclusive.value,d);return d.default.value};const getController=(r,i)=>{let c=h.get(r);if(!c){const u={commit:r.prepare("COMMIT",i,false),rollback:r.prepare("ROLLBACK",i,false),savepoint:r.prepare("SAVEPOINT `\t_bs3.\t`",i,false),release:r.prepare("RELEASE `\t_bs3.\t`",i,false),rollbackTo:r.prepare("ROLLBACK TO `\t_bs3.\t`",i,false)};h.set(r,c={default:Object.assign({begin:r.prepare("BEGIN",i,false)},u),deferred:Object.assign({begin:r.prepare("BEGIN DEFERRED",i,false)},u),immediate:Object.assign({begin:r.prepare("BEGIN IMMEDIATE",i,false)},u),exclusive:Object.assign({begin:r.prepare("BEGIN EXCLUSIVE",i,false)},u)})}return c};const wrapTransaction=(r,i,c,{begin:u,commit:h,rollback:d,savepoint:p,release:g,rollbackTo:y})=>function sqliteTransaction(){let b,v,w;if(c.inTransaction){b=p;v=g;w=y}else{b=u;v=h;w=d}b.run();try{const c=r.call(i,this,arguments);v.run();return c}catch(r){if(c.inTransaction){w.run();if(w!==d)v.run()}throw r}}},78963:(r,i,c)=>{"use strict";const{cppdb:u}=c(14859);i.prepare=function prepare(r){return this[u].prepare(r,this,false)};i.exec=function exec(r){this[u].exec(r);return this};i.close=function close(){this[u].close();return this};i.loadExtension=function loadExtension(...r){this[u].loadExtension(...r);return this};i.defaultSafeIntegers=function defaultSafeIntegers(...r){this[u].defaultSafeIntegers(...r);return this};i.unsafeMode=function unsafeMode(...r){this[u].unsafeMode(...r);return this};i.getters={name:{get:function name(){return this[u].name},enumerable:true},open:{get:function open(){return this[u].open},enumerable:true},inTransaction:{get:function inTransaction(){return this[u].inTransaction},enumerable:true},readonly:{get:function readonly(){return this[u].readonly},enumerable:true},memory:{get:function memory(){return this[u].memory},enumerable:true}}},47526:r=>{"use strict";const i={value:"SqliteError",writable:true,enumerable:false,configurable:true};function SqliteError(r,c){if(new.target!==SqliteError){return new SqliteError(r,c)}if(typeof c!=="string"){throw new TypeError("Expected second argument to be a string")}Error.call(this,r);i.value=""+r;Object.defineProperty(this,"message",i);Error.captureStackTrace(this,SqliteError);this.code=c}Object.setPrototypeOf(SqliteError,Error);Object.setPrototypeOf(SqliteError.prototype,Error.prototype);Object.defineProperty(SqliteError.prototype,"name",i);r.exports=SqliteError},14859:(r,i)=>{"use strict";i.getBooleanOption=(r,i)=>{let c=false;if(i in r&&typeof(c=r[i])!=="boolean"){throw new TypeError(`Expected the "${i}" option to be a boolean`)}return c};i.cppdb=Symbol();i.inspect=Symbol.for("nodejs.util.inspect.custom")},54800:(r,i,c)=>{var u=c(47381);var h=c(85218);r.exports=expandTop;var d="\0SLASH"+Math.random()+"\0";var p="\0OPEN"+Math.random()+"\0";var g="\0CLOSE"+Math.random()+"\0";var y="\0COMMA"+Math.random()+"\0";var b="\0PERIOD"+Math.random()+"\0";function numeric(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function escapeBraces(r){return r.split("\\\\").join(d).split("\\{").join(p).split("\\}").join(g).split("\\,").join(y).split("\\.").join(b)}function unescapeBraces(r){return r.split(d).join("\\").split(p).join("{").split(g).join("}").split(y).join(",").split(b).join(".")}function parseCommaParts(r){if(!r)return[""];var i=[];var c=h("{","}",r);if(!c)return r.split(",");var u=c.pre;var d=c.body;var p=c.post;var g=u.split(",");g[g.length-1]+="{"+d+"}";var y=parseCommaParts(p);if(p.length){g[g.length-1]+=y.shift();g.push.apply(g,y)}i.push.apply(i,g);return i}function expandTop(r){if(!r)return[];if(r.substr(0,2)==="{}"){r="\\{\\}"+r.substr(2)}return expand(escapeBraces(r),true).map(unescapeBraces)}function identity(r){return r}function embrace(r){return"{"+r+"}"}function isPadded(r){return/^-?0\d/.test(r)}function lte(r,i){return r<=i}function gte(r,i){return r>=i}function expand(r,i){var c=[];var d=h("{","}",r);if(!d||/\$$/.test(d.pre))return[r];var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(d.body);var y=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(d.body);var b=p||y;var v=d.body.indexOf(",")>=0;if(!b&&!v){if(d.post.match(/,.*\}/)){r=d.pre+"{"+d.body+g+d.post;return expand(r)}return[r]}var w;if(b){w=d.body.split(/\.\./)}else{w=parseCommaParts(d.body);if(w.length===1){w=expand(w[0],false).map(embrace);if(w.length===1){var C=d.post.length?expand(d.post,false):[""];return C.map((function(r){return d.pre+w[0]+r}))}}}var E=d.pre;var C=d.post.length?expand(d.post,false):[""];var x;if(b){var S=numeric(w[0]);var k=numeric(w[1]);var T=Math.max(w[0].length,w[1].length);var N=w.length==3?Math.abs(numeric(w[2])):1;var O=lte;var $=k<S;if($){N*=-1;O=gte}var A=w.some(isPadded);x=[];for(var P=S;O(P,k);P+=N){var I;if(y){I=String.fromCharCode(P);if(I==="\\")I=""}else{I=String(P);if(A){var R=T-I.length;if(R>0){var j=new Array(R+1).join("0");if(P<0)I="-"+j+I.slice(1);else I=j+I}}}x.push(I)}}else{x=u(w,(function(r){return expand(r,false)}))}for(var L=0;L<x.length;L++){for(var M=0;M<C.length;M++){var D=E+x[L]+C[M];if(!i||b||D)c.push(D)}}return c}},47381:r=>{r.exports=function(r,c){var u=[];for(var h=0;h<r.length;h++){var d=c(r[h],h);if(i(d))u.push.apply(u,d);else u.push(d)}return u};var i=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}},49541:(r,i,c)=>{i.formatArgs=formatArgs;i.save=save;i.load=load;i.useColors=useColors;i.storage=localstorage();i.destroy=(()=>{let r=false;return()=>{if(!r){r=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(i){i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff);if(!this.useColors){return}const c="color: "+this.color;i.splice(1,0,c,"color: inherit");let u=0;let h=0;i[0].replace(/%[a-zA-Z%]/g,(r=>{if(r==="%%"){return}u++;if(r==="%c"){h=u}}));i.splice(h,0,c)}i.log=console.debug||console.log||(()=>{});function save(r){try{if(r){i.storage.setItem("debug",r)}else{i.storage.removeItem("debug")}}catch(r){}}function load(){let r;try{r=i.storage.getItem("debug")}catch(r){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}function localstorage(){try{return localStorage}catch(r){}}r.exports=c(37564)(i);const{formatters:u}=r.exports;u.j=function(r){try{return JSON.stringify(r)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}},37564:(r,i,c)=>{function setup(r){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=c(73079);createDebug.destroy=destroy;Object.keys(r).forEach((i=>{createDebug[i]=r[i]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(r){let i=0;for(let c=0;c<r.length;c++){i=(i<<5)-i+r.charCodeAt(c);i|=0}return createDebug.colors[Math.abs(i)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(r){let i;let c=null;let u;let h;function debug(...r){if(!debug.enabled){return}const c=debug;const u=Number(new Date);const h=u-(i||u);c.diff=h;c.prev=i;c.curr=u;i=u;r[0]=createDebug.coerce(r[0]);if(typeof r[0]!=="string"){r.unshift("%O")}let d=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((i,u)=>{if(i==="%%"){return"%"}d++;const h=createDebug.formatters[u];if(typeof h==="function"){const u=r[d];i=h.call(c,u);r.splice(d,1);d--}return i}));createDebug.formatArgs.call(c,r);const p=c.log||createDebug.log;p.apply(c,r)}debug.namespace=r;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(r);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(c!==null){return c}if(u!==createDebug.namespaces){u=createDebug.namespaces;h=createDebug.enabled(r)}return h},set:r=>{c=r}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(r,i){const c=createDebug(this.namespace+(typeof i==="undefined"?":":i)+r);c.log=this.log;return c}function enable(r){createDebug.save(r);createDebug.namespaces=r;createDebug.names=[];createDebug.skips=[];let i;const c=(typeof r==="string"?r:"").split(/[\s,]+/);const u=c.length;for(i=0;i<u;i++){if(!c[i]){continue}r=c[i].replace(/\*/g,".*?");if(r[0]==="-"){createDebug.skips.push(new RegExp("^"+r.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+r+"$"))}}}function disable(){const r=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((r=>"-"+r))].join(",");createDebug.enable("");return r}function enabled(r){if(r[r.length-1]==="*"){return true}let i;let c;for(i=0,c=createDebug.skips.length;i<c;i++){if(createDebug.skips[i].test(r)){return false}}for(i=0,c=createDebug.names.length;i<c;i++){if(createDebug.names[i].test(r)){return true}}return false}function toNamespace(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(r){if(r instanceof Error){return r.stack||r.message}return r}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}r.exports=setup},15087:(r,i,c)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){r.exports=c(49541)}else{r.exports=c(96049)}},96049:(r,i,c)=>{const u=c(76224);const h=c(73837);i.init=init;i.log=log;i.formatArgs=formatArgs;i.save=save;i.load=load;i.useColors=useColors;i.destroy=h.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");i.colors=[6,2,3,4,5,1];try{const r=c(82793);if(r&&(r.stderr||r).level>=2){i.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(r){}i.inspectOpts=Object.keys(process.env).filter((r=>/^debug_/i.test(r))).reduce(((r,i)=>{const c=i.substring(6).toLowerCase().replace(/_([a-z])/g,((r,i)=>i.toUpperCase()));let u=process.env[i];if(/^(yes|on|true|enabled)$/i.test(u)){u=true}else if(/^(no|off|false|disabled)$/i.test(u)){u=false}else if(u==="null"){u=null}else{u=Number(u)}r[c]=u;return r}),{});function useColors(){return"colors"in i.inspectOpts?Boolean(i.inspectOpts.colors):u.isatty(process.stderr.fd)}function formatArgs(i){const{namespace:c,useColors:u}=this;if(u){const u=this.color;const h="[3"+(u<8?u:"8;5;"+u);const d=`  ${h};1m${c} [0m`;i[0]=d+i[0].split("\n").join("\n"+d);i.push(h+"m+"+r.exports.humanize(this.diff)+"[0m")}else{i[0]=getDate()+c+" "+i[0]}}function getDate(){if(i.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...r){return process.stderr.write(h.format(...r)+"\n")}function save(r){if(r){process.env.DEBUG=r}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(r){r.inspectOpts={};const c=Object.keys(i.inspectOpts);for(let u=0;u<c.length;u++){r.inspectOpts[c[u]]=i.inspectOpts[c[u]]}}r.exports=c(37564)(i);const{formatters:d}=r.exports;d.o=function(r){this.inspectOpts.colors=this.useColors;return h.inspect(r,this.inspectOpts).split("\n").map((r=>r.trim())).join(" ")};d.O=function(r){this.inspectOpts.colors=this.useColors;return h.inspect(r,this.inspectOpts)}},90102:(r,i,c)=>{const u=c(57147);const h=c(71017);const d=c(22037);const p=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function parse(r){const i={};let c=r.toString();c=c.replace(/\r\n?/gm,"\n");let u;while((u=p.exec(c))!=null){const r=u[1];let c=u[2]||"";c=c.trim();const h=c[0];c=c.replace(/^(['"`])([\s\S]*)\1$/gm,"$2");if(h==='"'){c=c.replace(/\\n/g,"\n");c=c.replace(/\\r/g,"\r")}i[r]=c}return i}function _log(r){console.log(`[dotenv][DEBUG] ${r}`)}function _resolveHome(r){return r[0]==="~"?h.join(d.homedir(),r.slice(1)):r}function config(r){let i=h.resolve(process.cwd(),".env");let c="utf8";const d=Boolean(r&&r.debug);const p=Boolean(r&&r.override);if(r){if(r.path!=null){i=_resolveHome(r.path)}if(r.encoding!=null){c=r.encoding}}try{const r=g.parse(u.readFileSync(i,{encoding:c}));Object.keys(r).forEach((function(i){if(!Object.prototype.hasOwnProperty.call(process.env,i)){process.env[i]=r[i]}else{if(p===true){process.env[i]=r[i]}if(d){if(p===true){_log(`"${i}" is already defined in \`process.env\` and WAS overwritten`)}else{_log(`"${i}" is already defined in \`process.env\` and was NOT overwritten`)}}}}));return{parsed:r}}catch(r){if(d){_log(`Failed to load ${i} ${r.message}`)}return{error:r}}}const g={config:config,parse:parse};r.exports.config=g.config;r.exports.parse=g.parse;r.exports=g},51230:r=>{"use strict";r.exports=function equal(r,i){if(r===i)return true;if(r&&i&&typeof r=="object"&&typeof i=="object"){if(r.constructor!==i.constructor)return false;var c,u,h;if(Array.isArray(r)){c=r.length;if(c!=i.length)return false;for(u=c;u--!==0;)if(!equal(r[u],i[u]))return false;return true}if(r.constructor===RegExp)return r.source===i.source&&r.flags===i.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===i.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===i.toString();h=Object.keys(r);c=h.length;if(c!==Object.keys(i).length)return false;for(u=c;u--!==0;)if(!Object.prototype.hasOwnProperty.call(i,h[u]))return false;for(u=c;u--!==0;){var d=h[u];if(!equal(r[d],i[d]))return false}return true}return r!==r&&i!==i}},33981:(r,i,c)=>{r.exports=realpath;realpath.realpath=realpath;realpath.sync=realpathSync;realpath.realpathSync=realpathSync;realpath.monkeypatch=monkeypatch;realpath.unmonkeypatch=unmonkeypatch;var u=c(57147);var h=u.realpath;var d=u.realpathSync;var p=process.version;var g=/^v[0-5]\./.test(p);var y=c(43623);function newError(r){return r&&r.syscall==="realpath"&&(r.code==="ELOOP"||r.code==="ENOMEM"||r.code==="ENAMETOOLONG")}function realpath(r,i,c){if(g){return h(r,i,c)}if(typeof i==="function"){c=i;i=null}h(r,i,(function(u,h){if(newError(u)){y.realpath(r,i,c)}else{c(u,h)}}))}function realpathSync(r,i){if(g){return d(r,i)}try{return d(r,i)}catch(c){if(newError(c)){return y.realpathSync(r,i)}else{throw c}}}function monkeypatch(){u.realpath=realpath;u.realpathSync=realpathSync}function unmonkeypatch(){u.realpath=h;u.realpathSync=d}},43623:(r,i,c)=>{var u=c(71017);var h=process.platform==="win32";var d=c(57147);var p=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var r;if(p){var i=new Error;r=debugCallback}else r=missingCallback;return r;function debugCallback(r){if(r){i.message=r.message;r=i;missingCallback(r)}}function missingCallback(r){if(r){if(process.throwDeprecation)throw r;else if(!process.noDeprecation){var i="fs: missing callback "+(r.stack||r.message);if(process.traceDeprecation)console.trace(i);else console.error(i)}}}}function maybeCallback(r){return typeof r==="function"?r:rethrow()}var g=u.normalize;if(h){var y=/(.*?)(?:[\/\\]+|$)/g}else{var y=/(.*?)(?:[\/]+|$)/g}if(h){var b=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/}else{var b=/^[\/]*/}i.realpathSync=function realpathSync(r,i){r=u.resolve(r);if(i&&Object.prototype.hasOwnProperty.call(i,r)){return i[r]}var c=r,p={},g={};var v;var w;var C;var E;start();function start(){var i=b.exec(r);v=i[0].length;w=i[0];C=i[0];E="";if(h&&!g[C]){d.lstatSync(C);g[C]=true}}while(v<r.length){y.lastIndex=v;var x=y.exec(r);E=w;w+=x[0];C=E+x[1];v=y.lastIndex;if(g[C]||i&&i[C]===C){continue}var S;if(i&&Object.prototype.hasOwnProperty.call(i,C)){S=i[C]}else{var k=d.lstatSync(C);if(!k.isSymbolicLink()){g[C]=true;if(i)i[C]=C;continue}var T=null;if(!h){var N=k.dev.toString(32)+":"+k.ino.toString(32);if(p.hasOwnProperty(N)){T=p[N]}}if(T===null){d.statSync(C);T=d.readlinkSync(C)}S=u.resolve(E,T);if(i)i[C]=S;if(!h)p[N]=T}r=u.resolve(S,r.slice(v));start()}if(i)i[c]=r;return r};i.realpath=function realpath(r,i,c){if(typeof c!=="function"){c=maybeCallback(i);i=null}r=u.resolve(r);if(i&&Object.prototype.hasOwnProperty.call(i,r)){return process.nextTick(c.bind(null,null,i[r]))}var p=r,g={},v={};var w;var C;var E;var x;start();function start(){var i=b.exec(r);w=i[0].length;C=i[0];E=i[0];x="";if(h&&!v[E]){d.lstat(E,(function(r){if(r)return c(r);v[E]=true;LOOP()}))}else{process.nextTick(LOOP)}}function LOOP(){if(w>=r.length){if(i)i[p]=r;return c(null,r)}y.lastIndex=w;var u=y.exec(r);x=C;C+=u[0];E=x+u[1];w=y.lastIndex;if(v[E]||i&&i[E]===E){return process.nextTick(LOOP)}if(i&&Object.prototype.hasOwnProperty.call(i,E)){return gotResolvedLink(i[E])}return d.lstat(E,gotStat)}function gotStat(r,u){if(r)return c(r);if(!u.isSymbolicLink()){v[E]=true;if(i)i[E]=E;return process.nextTick(LOOP)}if(!h){var p=u.dev.toString(32)+":"+u.ino.toString(32);if(g.hasOwnProperty(p)){return gotTarget(null,g[p],E)}}d.stat(E,(function(r){if(r)return c(r);d.readlink(E,(function(r,i){if(!h)g[p]=i;gotTarget(r,i)}))}))}function gotTarget(r,h,d){if(r)return c(r);var p=u.resolve(x,h);if(i)i[d]=p;gotResolvedLink(p)}function gotResolvedLink(i){r=u.resolve(i,r.slice(w));start()}}},569:(r,i,c)=>{i.setopts=setopts;i.ownProp=ownProp;i.makeAbs=makeAbs;i.finish=finish;i.mark=mark;i.isIgnored=isIgnored;i.childrenIgnored=childrenIgnored;function ownProp(r,i){return Object.prototype.hasOwnProperty.call(r,i)}var u=c(57147);var h=c(71017);var d=c(88923);var p=c(26230);var g=d.Minimatch;function alphasort(r,i){return r.localeCompare(i,"en")}function setupIgnores(r,i){r.ignore=i.ignore||[];if(!Array.isArray(r.ignore))r.ignore=[r.ignore];if(r.ignore.length){r.ignore=r.ignore.map(ignoreMap)}}function ignoreMap(r){var i=null;if(r.slice(-3)==="/**"){var c=r.replace(/(\/\*\*)+$/,"");i=new g(c,{dot:true})}return{matcher:new g(r,{dot:true}),gmatcher:i}}function setopts(r,i,c){if(!c)c={};if(c.matchBase&&-1===i.indexOf("/")){if(c.noglobstar){throw new Error("base matching requires globstar")}i="**/"+i}r.silent=!!c.silent;r.pattern=i;r.strict=c.strict!==false;r.realpath=!!c.realpath;r.realpathCache=c.realpathCache||Object.create(null);r.follow=!!c.follow;r.dot=!!c.dot;r.mark=!!c.mark;r.nodir=!!c.nodir;if(r.nodir)r.mark=true;r.sync=!!c.sync;r.nounique=!!c.nounique;r.nonull=!!c.nonull;r.nosort=!!c.nosort;r.nocase=!!c.nocase;r.stat=!!c.stat;r.noprocess=!!c.noprocess;r.absolute=!!c.absolute;r.fs=c.fs||u;r.maxLength=c.maxLength||Infinity;r.cache=c.cache||Object.create(null);r.statCache=c.statCache||Object.create(null);r.symlinks=c.symlinks||Object.create(null);setupIgnores(r,c);r.changedCwd=false;var d=process.cwd();if(!ownProp(c,"cwd"))r.cwd=d;else{r.cwd=h.resolve(c.cwd);r.changedCwd=r.cwd!==d}r.root=c.root||h.resolve(r.cwd,"/");r.root=h.resolve(r.root);if(process.platform==="win32")r.root=r.root.replace(/\\/g,"/");r.cwdAbs=p(r.cwd)?r.cwd:makeAbs(r,r.cwd);if(process.platform==="win32")r.cwdAbs=r.cwdAbs.replace(/\\/g,"/");r.nomount=!!c.nomount;c.nonegate=true;c.nocomment=true;c.allowWindowsEscape=false;r.minimatch=new g(i,c);r.options=r.minimatch.options}function finish(r){var i=r.nounique;var c=i?[]:Object.create(null);for(var u=0,h=r.matches.length;u<h;u++){var d=r.matches[u];if(!d||Object.keys(d).length===0){if(r.nonull){var p=r.minimatch.globSet[u];if(i)c.push(p);else c[p]=true}}else{var g=Object.keys(d);if(i)c.push.apply(c,g);else g.forEach((function(r){c[r]=true}))}}if(!i)c=Object.keys(c);if(!r.nosort)c=c.sort(alphasort);if(r.mark){for(var u=0;u<c.length;u++){c[u]=r._mark(c[u])}if(r.nodir){c=c.filter((function(i){var c=!/\/$/.test(i);var u=r.cache[i]||r.cache[makeAbs(r,i)];if(c&&u)c=u!=="DIR"&&!Array.isArray(u);return c}))}}if(r.ignore.length)c=c.filter((function(i){return!isIgnored(r,i)}));r.found=c}function mark(r,i){var c=makeAbs(r,i);var u=r.cache[c];var h=i;if(u){var d=u==="DIR"||Array.isArray(u);var p=i.slice(-1)==="/";if(d&&!p)h+="/";else if(!d&&p)h=h.slice(0,-1);if(h!==i){var g=makeAbs(r,h);r.statCache[g]=r.statCache[c];r.cache[g]=r.cache[c]}}return h}function makeAbs(r,i){var c=i;if(i.charAt(0)==="/"){c=h.join(r.root,i)}else if(p(i)||i===""){c=i}else if(r.changedCwd){c=h.resolve(r.cwd,i)}else{c=h.resolve(i)}if(process.platform==="win32")c=c.replace(/\\/g,"/");return c}function isIgnored(r,i){if(!r.ignore.length)return false;return r.ignore.some((function(r){return r.matcher.match(i)||!!(r.gmatcher&&r.gmatcher.match(i))}))}function childrenIgnored(r,i){if(!r.ignore.length)return false;return r.ignore.some((function(r){return!!(r.gmatcher&&r.gmatcher.match(i))}))}},74991:(r,i,c)=>{r.exports=glob;var u=c(33981);var h=c(88923);var d=h.Minimatch;var p=c(2842);var g=c(82361).EventEmitter;var y=c(71017);var b=c(39491);var v=c(26230);var w=c(74003);var C=c(569);var E=C.setopts;var x=C.ownProp;var S=c(28143);var k=c(73837);var T=C.childrenIgnored;var N=C.isIgnored;var O=c(29852);function glob(r,i,c){if(typeof i==="function")c=i,i={};if(!i)i={};if(i.sync){if(c)throw new TypeError("callback provided to sync glob");return w(r,i)}return new Glob(r,i,c)}glob.sync=w;var $=glob.GlobSync=w.GlobSync;glob.glob=glob;function extend(r,i){if(i===null||typeof i!=="object"){return r}var c=Object.keys(i);var u=c.length;while(u--){r[c[u]]=i[c[u]]}return r}glob.hasMagic=function(r,i){var c=extend({},i);c.noprocess=true;var u=new Glob(r,c);var h=u.minimatch.set;if(!r)return false;if(h.length>1)return true;for(var d=0;d<h[0].length;d++){if(typeof h[0][d]!=="string")return true}return false};glob.Glob=Glob;p(Glob,g);function Glob(r,i,c){if(typeof i==="function"){c=i;i=null}if(i&&i.sync){if(c)throw new TypeError("callback provided to sync glob");return new $(r,i)}if(!(this instanceof Glob))return new Glob(r,i,c);E(this,r,i);this._didRealPath=false;var u=this.minimatch.set.length;this.matches=new Array(u);if(typeof c==="function"){c=O(c);this.on("error",c);this.on("end",(function(r){c(null,r)}))}var h=this;this._processing=0;this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(u===0)return done();var d=true;for(var p=0;p<u;p++){this._process(this.minimatch.set[p],p,false,done)}d=false;function done(){--h._processing;if(h._processing<=0){if(d){process.nextTick((function(){h._finish()}))}else{h._finish()}}}}Glob.prototype._finish=function(){b(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();C.finish(this);this.emit("end",this.found)};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var r=this.matches.length;if(r===0)return this._finish();var i=this;for(var c=0;c<this.matches.length;c++)this._realpathSet(c,next);function next(){if(--r===0)i._finish()}};Glob.prototype._realpathSet=function(r,i){var c=this.matches[r];if(!c)return i();var h=Object.keys(c);var d=this;var p=h.length;if(p===0)return i();var g=this.matches[r]=Object.create(null);h.forEach((function(c,h){c=d._makeAbs(c);u.realpath(c,d.realpathCache,(function(u,h){if(!u)g[h]=true;else if(u.syscall==="stat")g[c]=true;else d.emit("error",u);if(--p===0){d.matches[r]=g;i()}}))}))};Glob.prototype._mark=function(r){return C.mark(this,r)};Glob.prototype._makeAbs=function(r){return C.makeAbs(this,r)};Glob.prototype.abort=function(){this.aborted=true;this.emit("abort")};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit("pause")}};Glob.prototype.resume=function(){if(this.paused){this.emit("resume");this.paused=false;if(this._emitQueue.length){var r=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<r.length;i++){var c=r[i];this._emitMatch(c[0],c[1])}}if(this._processQueue.length){var u=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<u.length;i++){var h=u[i];this._processing--;this._process(h[0],h[1],h[2],h[3])}}}};Glob.prototype._process=function(r,i,c,u){b(this instanceof Glob);b(typeof u==="function");if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([r,i,c,u]);return}var d=0;while(typeof r[d]==="string"){d++}var p;switch(d){case r.length:this._processSimple(r.join("/"),i,u);return;case 0:p=null;break;default:p=r.slice(0,d).join("/");break}var g=r.slice(d);var y;if(p===null)y=".";else if(v(p)||v(r.map((function(r){return typeof r==="string"?r:"[*]"})).join("/"))){if(!p||!v(p))p="/"+p;y=p}else y=p;var w=this._makeAbs(y);if(T(this,y))return u();var C=g[0]===h.GLOBSTAR;if(C)this._processGlobStar(p,y,w,g,i,c,u);else this._processReaddir(p,y,w,g,i,c,u)};Glob.prototype._processReaddir=function(r,i,c,u,h,d,p){var g=this;this._readdir(c,d,(function(y,b){return g._processReaddir2(r,i,c,u,h,d,b,p)}))};Glob.prototype._processReaddir2=function(r,i,c,u,h,d,p,g){if(!p)return g();var b=u[0];var v=!!this.minimatch.negate;var w=b._glob;var C=this.dot||w.charAt(0)===".";var E=[];for(var x=0;x<p.length;x++){var S=p[x];if(S.charAt(0)!=="."||C){var k;if(v&&!r){k=!S.match(b)}else{k=S.match(b)}if(k)E.push(S)}}var T=E.length;if(T===0)return g();if(u.length===1&&!this.mark&&!this.stat){if(!this.matches[h])this.matches[h]=Object.create(null);for(var x=0;x<T;x++){var S=E[x];if(r){if(r!=="/")S=r+"/"+S;else S=r+S}if(S.charAt(0)==="/"&&!this.nomount){S=y.join(this.root,S)}this._emitMatch(h,S)}return g()}u.shift();for(var x=0;x<T;x++){var S=E[x];var N;if(r){if(r!=="/")S=r+"/"+S;else S=r+S}this._process([S].concat(u),h,d,g)}g()};Glob.prototype._emitMatch=function(r,i){if(this.aborted)return;if(N(this,i))return;if(this.paused){this._emitQueue.push([r,i]);return}var c=v(i)?i:this._makeAbs(i);if(this.mark)i=this._mark(i);if(this.absolute)i=c;if(this.matches[r][i])return;if(this.nodir){var u=this.cache[c];if(u==="DIR"||Array.isArray(u))return}this.matches[r][i]=true;var h=this.statCache[c];if(h)this.emit("stat",i,h);this.emit("match",i)};Glob.prototype._readdirInGlobStar=function(r,i){if(this.aborted)return;if(this.follow)return this._readdir(r,false,i);var c="lstat\0"+r;var u=this;var h=S(c,lstatcb_);if(h)u.fs.lstat(r,h);function lstatcb_(c,h){if(c&&c.code==="ENOENT")return i();var d=h&&h.isSymbolicLink();u.symlinks[r]=d;if(!d&&h&&!h.isDirectory()){u.cache[r]="FILE";i()}else u._readdir(r,false,i)}};Glob.prototype._readdir=function(r,i,c){if(this.aborted)return;c=S("readdir\0"+r+"\0"+i,c);if(!c)return;if(i&&!x(this.symlinks,r))return this._readdirInGlobStar(r,c);if(x(this.cache,r)){var u=this.cache[r];if(!u||u==="FILE")return c();if(Array.isArray(u))return c(null,u)}var h=this;h.fs.readdir(r,readdirCb(this,r,c))};function readdirCb(r,i,c){return function(u,h){if(u)r._readdirError(i,u,c);else r._readdirEntries(i,h,c)}}Glob.prototype._readdirEntries=function(r,i,c){if(this.aborted)return;if(!this.mark&&!this.stat){for(var u=0;u<i.length;u++){var h=i[u];if(r==="/")h=r+h;else h=r+"/"+h;this.cache[h]=true}}this.cache[r]=i;return c(null,i)};Glob.prototype._readdirError=function(r,i,c){if(this.aborted)return;switch(i.code){case"ENOTSUP":case"ENOTDIR":var u=this._makeAbs(r);this.cache[u]="FILE";if(u===this.cwdAbs){var h=new Error(i.code+" invalid cwd "+this.cwd);h.path=this.cwd;h.code=i.code;this.emit("error",h);this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=false;break;default:this.cache[this._makeAbs(r)]=false;if(this.strict){this.emit("error",i);this.abort()}if(!this.silent)console.error("glob error",i);break}return c()};Glob.prototype._processGlobStar=function(r,i,c,u,h,d,p){var g=this;this._readdir(c,d,(function(y,b){g._processGlobStar2(r,i,c,u,h,d,b,p)}))};Glob.prototype._processGlobStar2=function(r,i,c,u,h,d,p,g){if(!p)return g();var y=u.slice(1);var b=r?[r]:[];var v=b.concat(y);this._process(v,h,false,g);var w=this.symlinks[c];var C=p.length;if(w&&d)return g();for(var E=0;E<C;E++){var x=p[E];if(x.charAt(0)==="."&&!this.dot)continue;var S=b.concat(p[E],y);this._process(S,h,true,g);var k=b.concat(p[E],u);this._process(k,h,true,g)}g()};Glob.prototype._processSimple=function(r,i,c){var u=this;this._stat(r,(function(h,d){u._processSimple2(r,i,h,d,c)}))};Glob.prototype._processSimple2=function(r,i,c,u,h){if(!this.matches[i])this.matches[i]=Object.create(null);if(!u)return h();if(r&&v(r)&&!this.nomount){var d=/[\/\\]$/.test(r);if(r.charAt(0)==="/"){r=y.join(this.root,r)}else{r=y.resolve(this.root,r);if(d)r+="/"}}if(process.platform==="win32")r=r.replace(/\\/g,"/");this._emitMatch(i,r);h()};Glob.prototype._stat=function(r,i){var c=this._makeAbs(r);var u=r.slice(-1)==="/";if(r.length>this.maxLength)return i();if(!this.stat&&x(this.cache,c)){var h=this.cache[c];if(Array.isArray(h))h="DIR";if(!u||h==="DIR")return i(null,h);if(u&&h==="FILE")return i()}var d;var p=this.statCache[c];if(p!==undefined){if(p===false)return i(null,p);else{var g=p.isDirectory()?"DIR":"FILE";if(u&&g==="FILE")return i();else return i(null,g,p)}}var y=this;var b=S("stat\0"+c,lstatcb_);if(b)y.fs.lstat(c,b);function lstatcb_(u,h){if(h&&h.isSymbolicLink()){return y.fs.stat(c,(function(u,d){if(u)y._stat2(r,c,null,h,i);else y._stat2(r,c,u,d,i)}))}else{y._stat2(r,c,u,h,i)}}};Glob.prototype._stat2=function(r,i,c,u,h){if(c&&(c.code==="ENOENT"||c.code==="ENOTDIR")){this.statCache[i]=false;return h()}var d=r.slice(-1)==="/";this.statCache[i]=u;if(i.slice(-1)==="/"&&u&&!u.isDirectory())return h(null,false,u);var p=true;if(u)p=u.isDirectory()?"DIR":"FILE";this.cache[i]=this.cache[i]||p;if(d&&p==="FILE")return h();return h(null,p,u)}},74003:(r,i,c)=>{r.exports=globSync;globSync.GlobSync=GlobSync;var u=c(33981);var h=c(88923);var d=h.Minimatch;var p=c(74991).Glob;var g=c(73837);var y=c(71017);var b=c(39491);var v=c(26230);var w=c(569);var C=w.setopts;var E=w.ownProp;var x=w.childrenIgnored;var S=w.isIgnored;function globSync(r,i){if(typeof i==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(r,i).found}function GlobSync(r,i){if(!r)throw new Error("must provide pattern");if(typeof i==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(r,i);C(this,r,i);if(this.noprocess)return this;var c=this.minimatch.set.length;this.matches=new Array(c);for(var u=0;u<c;u++){this._process(this.minimatch.set[u],u,false)}this._finish()}GlobSync.prototype._finish=function(){b.ok(this instanceof GlobSync);if(this.realpath){var r=this;this.matches.forEach((function(i,c){var h=r.matches[c]=Object.create(null);for(var d in i){try{d=r._makeAbs(d);var p=u.realpathSync(d,r.realpathCache);h[p]=true}catch(i){if(i.syscall==="stat")h[r._makeAbs(d)]=true;else throw i}}}))}w.finish(this)};GlobSync.prototype._process=function(r,i,c){b.ok(this instanceof GlobSync);var u=0;while(typeof r[u]==="string"){u++}var d;switch(u){case r.length:this._processSimple(r.join("/"),i);return;case 0:d=null;break;default:d=r.slice(0,u).join("/");break}var p=r.slice(u);var g;if(d===null)g=".";else if(v(d)||v(r.map((function(r){return typeof r==="string"?r:"[*]"})).join("/"))){if(!d||!v(d))d="/"+d;g=d}else g=d;var y=this._makeAbs(g);if(x(this,g))return;var w=p[0]===h.GLOBSTAR;if(w)this._processGlobStar(d,g,y,p,i,c);else this._processReaddir(d,g,y,p,i,c)};GlobSync.prototype._processReaddir=function(r,i,c,u,h,d){var p=this._readdir(c,d);if(!p)return;var g=u[0];var b=!!this.minimatch.negate;var v=g._glob;var w=this.dot||v.charAt(0)===".";var C=[];for(var E=0;E<p.length;E++){var x=p[E];if(x.charAt(0)!=="."||w){var S;if(b&&!r){S=!x.match(g)}else{S=x.match(g)}if(S)C.push(x)}}var k=C.length;if(k===0)return;if(u.length===1&&!this.mark&&!this.stat){if(!this.matches[h])this.matches[h]=Object.create(null);for(var E=0;E<k;E++){var x=C[E];if(r){if(r.slice(-1)!=="/")x=r+"/"+x;else x=r+x}if(x.charAt(0)==="/"&&!this.nomount){x=y.join(this.root,x)}this._emitMatch(h,x)}return}u.shift();for(var E=0;E<k;E++){var x=C[E];var T;if(r)T=[r,x];else T=[x];this._process(T.concat(u),h,d)}};GlobSync.prototype._emitMatch=function(r,i){if(S(this,i))return;var c=this._makeAbs(i);if(this.mark)i=this._mark(i);if(this.absolute){i=c}if(this.matches[r][i])return;if(this.nodir){var u=this.cache[c];if(u==="DIR"||Array.isArray(u))return}this.matches[r][i]=true;if(this.stat)this._stat(i)};GlobSync.prototype._readdirInGlobStar=function(r){if(this.follow)return this._readdir(r,false);var i;var c;var u;try{c=this.fs.lstatSync(r)}catch(r){if(r.code==="ENOENT"){return null}}var h=c&&c.isSymbolicLink();this.symlinks[r]=h;if(!h&&c&&!c.isDirectory())this.cache[r]="FILE";else i=this._readdir(r,false);return i};GlobSync.prototype._readdir=function(r,i){var c;if(i&&!E(this.symlinks,r))return this._readdirInGlobStar(r);if(E(this.cache,r)){var u=this.cache[r];if(!u||u==="FILE")return null;if(Array.isArray(u))return u}try{return this._readdirEntries(r,this.fs.readdirSync(r))}catch(i){this._readdirError(r,i);return null}};GlobSync.prototype._readdirEntries=function(r,i){if(!this.mark&&!this.stat){for(var c=0;c<i.length;c++){var u=i[c];if(r==="/")u=r+u;else u=r+"/"+u;this.cache[u]=true}}this.cache[r]=i;return i};GlobSync.prototype._readdirError=function(r,i){switch(i.code){case"ENOTSUP":case"ENOTDIR":var c=this._makeAbs(r);this.cache[c]="FILE";if(c===this.cwdAbs){var u=new Error(i.code+" invalid cwd "+this.cwd);u.path=this.cwd;u.code=i.code;throw u}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=false;break;default:this.cache[this._makeAbs(r)]=false;if(this.strict)throw i;if(!this.silent)console.error("glob error",i);break}};GlobSync.prototype._processGlobStar=function(r,i,c,u,h,d){var p=this._readdir(c,d);if(!p)return;var g=u.slice(1);var y=r?[r]:[];var b=y.concat(g);this._process(b,h,false);var v=p.length;var w=this.symlinks[c];if(w&&d)return;for(var C=0;C<v;C++){var E=p[C];if(E.charAt(0)==="."&&!this.dot)continue;var x=y.concat(p[C],g);this._process(x,h,true);var S=y.concat(p[C],u);this._process(S,h,true)}};GlobSync.prototype._processSimple=function(r,i){var c=this._stat(r);if(!this.matches[i])this.matches[i]=Object.create(null);if(!c)return;if(r&&v(r)&&!this.nomount){var u=/[\/\\]$/.test(r);if(r.charAt(0)==="/"){r=y.join(this.root,r)}else{r=y.resolve(this.root,r);if(u)r+="/"}}if(process.platform==="win32")r=r.replace(/\\/g,"/");this._emitMatch(i,r)};GlobSync.prototype._stat=function(r){var i=this._makeAbs(r);var c=r.slice(-1)==="/";if(r.length>this.maxLength)return false;if(!this.stat&&E(this.cache,i)){var u=this.cache[i];if(Array.isArray(u))u="DIR";if(!c||u==="DIR")return u;if(c&&u==="FILE")return false}var h;var d=this.statCache[i];if(!d){var p;try{p=this.fs.lstatSync(i)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR")){this.statCache[i]=false;return false}}if(p&&p.isSymbolicLink()){try{d=this.fs.statSync(i)}catch(r){d=p}}else{d=p}}this.statCache[i]=d;var u=true;if(d)u=d.isDirectory()?"DIR":"FILE";this.cache[i]=this.cache[i]||u;if(c&&u==="FILE")return false;return u};GlobSync.prototype._mark=function(r){return w.mark(this,r)};GlobSync.prototype._makeAbs=function(r){return w.makeAbs(this,r)}},41914:r=>{"use strict";r.exports=(r,i=process.argv)=>{const c=r.startsWith("-")?"":r.length===1?"-":"--";const u=i.indexOf(c+r);const h=i.indexOf("--");return u!==-1&&(h===-1||u<h)}},28143:(r,i,c)=>{var u=c(83270);var h=Object.create(null);var d=c(29852);r.exports=u(inflight);function inflight(r,i){if(h[r]){h[r].push(i);return null}else{h[r]=[i];return makeres(r)}}function makeres(r){return d((function RES(){var i=h[r];var c=i.length;var u=slice(arguments);try{for(var d=0;d<c;d++){i[d].apply(null,u)}}finally{if(i.length>c){i.splice(0,c);process.nextTick((function(){RES.apply(null,u)}))}else{delete h[r]}}}))}function slice(r){var i=r.length;var c=[];for(var u=0;u<i;u++)c[u]=r[u];return c}},2842:(r,i,c)=>{try{var u=c(73837);if(typeof u.inherits!=="function")throw"";r.exports=u.inherits}catch(i){r.exports=c(73782)}},73782:r=>{if(typeof Object.create==="function"){r.exports=function inherits(r,i){if(i){r.super_=i;r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}})}}}else{r.exports=function inherits(r,i){if(i){r.super_=i;var TempCtor=function(){};TempCtor.prototype=i.prototype;r.prototype=new TempCtor;r.prototype.constructor=r}}}},49122:r=>{"use strict";var i=r.exports=function(r,i,c){if(typeof i=="function"){c=i;i={}}c=i.cb||c;var u=typeof c=="function"?c:c.pre||function(){};var h=c.post||function(){};_traverse(i,u,h,r,"",r)};i.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true,if:true,then:true,else:true};i.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};i.propsKeywords={$defs:true,definitions:true,properties:true,patternProperties:true,dependencies:true};i.skipKeywords={default:true,enum:true,const:true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse(r,c,u,h,d,p,g,y,b,v){if(h&&typeof h=="object"&&!Array.isArray(h)){c(h,d,p,g,y,b,v);for(var w in h){var C=h[w];if(Array.isArray(C)){if(w in i.arrayKeywords){for(var E=0;E<C.length;E++)_traverse(r,c,u,C[E],d+"/"+w+"/"+E,p,d,w,h,E)}}else if(w in i.propsKeywords){if(C&&typeof C=="object"){for(var x in C)_traverse(r,c,u,C[x],d+"/"+w+"/"+escapeJsonPtr(x),p,d,w,h,x)}}else if(w in i.keywords||r.allKeys&&!(w in i.skipKeywords)){_traverse(r,c,u,C,d+"/"+w,p,d,w,h)}}u(h,d,p,g,y,b,v)}}function escapeJsonPtr(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}},18369:(r,i,c)=>{const u=c(23161);u.knex=u;u.default=u;r.exports=u},55481:(r,i,c)=>{const u=c(83577);const h=c(26901);const{callbackify:d}=c(73837);const p=c(25779);const{formatQuery:g}=c(46421);function augmentWithBuilderInterface(r){r.prototype.toQuery=function(r){let i=this.toSQL(this._method,r);if(!Array.isArray(i))i=[i];if(!i.length){return""}return i.map((i=>g(i.sql,i.bindings,r,this.client))).reduce(((r,i)=>r.concat(r.endsWith(";")?"\n":";\n",i)))};r.prototype.then=function(){let r=this.client.runner(this).run();if(this.client.config.asyncStackTraces){r=r.catch((r=>{r.originalStack=r.stack;const i=r.stack.split("\n")[0];const{error:c,lines:u}=this._asyncStack;const h=c.stack.split("\n");const d=h.slice(u);d.unshift(i);r.stack=d.join("\n");throw r}))}return r.then.apply(r,arguments)};r.prototype.options=function(r){this._options=this._options||[];this._options.push(u(r)||{});return this};r.prototype.connection=function(r){this._connection=r;this.client.processPassedConnection(r);return this};r.prototype.debug=function(r){this._debug=arguments.length?r:true;return this};r.prototype.transacting=function(r){if(r&&r.client){if(!r.client.transacting){r.client.logger.warn(`Invalid transaction value: ${r.client}`)}else{this.client=r.client}}if(h(r)){this.client.logger.error("Invalid value on transacting call, potential bug");throw Error("Invalid transacting value (null, undefined or empty object)")}return this};r.prototype.stream=function(r){return this.client.runner(this).stream(r)};r.prototype.pipe=function(r,i){return this.client.runner(this).pipe(r,i)};r.prototype.asCallback=function(r){const i=this.then();d((()=>i))(r);return i};r.prototype.catch=function(r){return this.then().catch(r)};Object.defineProperty(r.prototype,Symbol.toStringTag,{get:()=>"object"});p(r.prototype)}r.exports={augmentWithBuilderInterface:augmentWithBuilderInterface}},92776:(r,i,c)=>{const{Pool:u,TimeoutError:h}=c(56821);const{EventEmitter:d}=c(82361);const{promisify:p}=c(73837);const{makeEscape:g}=c(93835);const y=c(96321);const b=c(73614);const v=c(27963);const w=c(33715);const C=c(21251);const{executeQuery:E,enrichQueryObject:x}=c(46421);const S=c(26447);const k=c(8697);const T=c(86968);const N=c(3975);const O=c(63670);const $=c(31492);const A=c(20064);const P=c(10208);const{KnexTimeoutError:I}=c(77903);const{outputQuery:R,unwrapRaw:j}=c(31823);const{compileCallback:L}=c(7646);const M=c(45114);const D=c(46605);const q=c(28935);const F=c(65561);const{POOL_CONFIG_OPTIONS:B}=c(9153);const U=c(91978);const V=c(71822);const Q=c(64677);const H=c(15087)("knex:client");class Client extends d{constructor(r={}){super();this.config=r;this.logger=new F(r);if(this.dialect&&!this.config.client){this.logger.warn(`Using 'this.dialect' to identify the client is deprecated and support for it will be removed in the future. Please use configuration option 'client' instead.`)}const i=this.config.client||this.dialect;if(!i){throw new Error(`knex: Required configuration option 'client' is missing.`)}if(r.version){this.version=r.version}if(r.connection&&r.connection instanceof Function){this.connectionConfigProvider=r.connection;this.connectionConfigExpirationChecker=()=>true}else{this.connectionSettings=y(r.connection||{});this.connectionConfigExpirationChecker=null}if(this.driverName&&r.connection){this.initializeDriver();if(!r.pool||r.pool&&r.pool.max!==0){this.initializePool(r)}}this.valueForUndefined=this.raw("DEFAULT");if(r.useNullAsDefault){this.valueForUndefined=null}}formatter(r){return new q(this,r)}queryBuilder(){return new S(this)}queryCompiler(r,i){return new k(this,r,i)}schemaBuilder(){return new T(this)}schemaCompiler(r){return new N(this,r)}tableBuilder(r,i,c,u){return new O(this,r,i,c,u)}viewBuilder(r,i,c){return new U(this,r,i,c)}tableCompiler(r){return new $(this,r)}viewCompiler(r){return new V(this,r)}columnBuilder(r,i,c){return new A(this,r,i,c)}columnCompiler(r,i){return new P(this,r,i)}runner(r){return new w(this,r)}transaction(r,i,c){return new C(this,r,i,c)}raw(){return new M(this).set(...arguments)}ref(){return new D(this,...arguments)}query(r,i){const c=x(r,i,this);return E(r,c,this)}stream(r,i,c,u){const h=x(r,i,this);return this._stream(r,h,c,u)}prepBindings(r){return r}positionBindings(r){return r}postProcessResponse(r,i){if(this.config.postProcessResponse){return this.config.postProcessResponse(r,i)}return r}wrapIdentifier(r,i){return this.customWrapIdentifier(r,this.wrapIdentifierImpl,i)}customWrapIdentifier(r,i,c){if(this.config.wrapIdentifier){return this.config.wrapIdentifier(r,i,c)}return i(r)}wrapIdentifierImpl(r){return r!=="*"?`"${r.replace(/"/g,'""')}"`:"*"}initializeDriver(){try{this.driver=this._driver()}catch(r){const i=`Knex: run\n$ npm install ${this.driverName} --save`;this.logger.error(`${i}\n${r.message}\n${r.stack}`);throw new Error(`${i}\n${r.message}`)}}poolDefaults(){return{min:2,max:10,propagateCreateError:true}}getPoolSettings(r){r=b({},r,this.poolDefaults());B.forEach((i=>{if(i in r){this.logger.warn([`Pool config option "${i}" is no longer supported.`,`See https://github.com/Vincit/tarn.js for possible pool config options.`].join(" "))}}));const i=[this.config.acquireConnectionTimeout||6e4,r.acquireTimeoutMillis].filter((r=>r!==undefined));r.acquireTimeoutMillis=Math.min(...i);const updatePoolConnectionSettingsFromProvider=async()=>{if(!this.connectionConfigProvider){return}if(!this.connectionConfigExpirationChecker||!this.connectionConfigExpirationChecker()){return}const r=await this.connectionConfigProvider();if(r.expirationChecker){this.connectionConfigExpirationChecker=r.expirationChecker;delete r.expirationChecker}else{this.connectionConfigExpirationChecker=null}this.connectionSettings=r};return Object.assign(r,{create:async()=>{await updatePoolConnectionSettingsFromProvider();const i=await this.acquireRawConnection();i.__knexUid=v("__knexUid");if(r.afterCreate){await p(r.afterCreate)(i)}return i},destroy:r=>{if(r!==void 0){return this.destroyRawConnection(r)}},validate:r=>{if(r.__knex__disposed){this.logger.warn(`Connection Error: ${r.__knex__disposed}`);return false}return this.validateConnection(r)}})}initializePool(r=this.config){if(this.pool){this.logger.warn("The pool has already been initialized");return}const i={...this.getPoolSettings(r.pool)};if(i.afterCreate){delete i.afterCreate}this.pool=new u(i)}validateConnection(r){return true}async acquireConnection(){if(!this.pool){throw new Error("Unable to acquire a connection")}try{const r=await this.pool.acquire().promise;H("acquired connection from pool: %s",r.__knexUid);return r}catch(r){let i=r;if(r instanceof h){i=new I("Knex: Timeout acquiring a connection. The pool is probably full. "+"Are you missing a .transacting(trx) call?")}throw i}}releaseConnection(r){H("releasing connection to pool: %s",r.__knexUid);const i=this.pool.release(r);if(!i){H("pool refused connection: %s",r.__knexUid)}return Promise.resolve()}async destroy(r){try{if(this.pool&&this.pool.destroy){await this.pool.destroy()}this.pool=undefined;if(typeof r==="function"){r()}}catch(i){if(typeof r==="function"){return r(i)}throw i}}database(){return this.connectionSettings.database}toString(){return"[object KnexClient]"}assertCanCancelQuery(){if(!this.canCancelQuery){throw new Error("Query cancelling not supported for this dialect")}}cancelQuery(){throw new Error("Query cancelling not supported for this dialect")}alias(r,i){return r+" as "+i}parameter(r,i,c){if(typeof r==="function"){return R(L(r,undefined,this,c),true,i,this)}return j(r,true,i,this,c)||"?"}parameterize(r,i,c,u){if(typeof r==="function")return this.parameter(r,c,u);r=Array.isArray(r)?r:[r];let h="",d=-1;while(++d<r.length){if(d>0)h+=", ";let p=r[d];if(Q(p)){p=JSON.stringify(p)}h+=this.parameter(p===undefined?i:p,c,u)}return h}values(r,i,c){if(Array.isArray(r)){if(Array.isArray(r[0])){return`(${r.map((r=>`(${this.parameterize(r,undefined,i,c)})`)).join(", ")})`}return`(${this.parameterize(r,undefined,i,c)})`}if(r&&r.isRawInstance){return`(${this.parameter(r,i,c)})`}return this.parameter(r,i,c)}processPassedConnection(r){}toPathForJson(r){return r}}Object.assign(Client.prototype,{_escapeBinding:g({escapeString(r){return`'${r.replace(/'/g,"''")}'`}}),canCancelQuery:false});r.exports=Client},9153:r=>{const i=Object.freeze({pg:"postgres",postgresql:"postgres",sqlite:"sqlite3"});const c=Object.freeze(["mssql","mysql","mysql2","oracledb","postgres","pgnative","redshift","sqlite3","cockroachdb","better-sqlite3"].concat(Object.keys(i)));const u=Object.freeze({MsSQL:"mssql",MySQL:"mysql",MySQL2:"mysql2",Oracle:"oracledb",PostgreSQL:"pg",PgNative:"pgnative",Redshift:"pg-redshift",SQLite:"sqlite3",CockroachDB:"cockroachdb",BetterSQLite3:"better-sqlite3"});const h=Object.freeze(["maxWaitingClients","testOnBorrow","fifo","priorityRange","autostart","evictionRunIntervalMillis","numTestsPerRun","softIdleTimeoutMillis","Promise"]);const d=/,[\s](?![^(]*\))/g;r.exports={CLIENT_ALIASES:i,SUPPORTED_CLIENTS:c,POOL_CONFIG_OPTIONS:h,COMMA_NO_PAREN_REGEX:d,DRIVER_NAMES:u}},54132:(r,i,c)=>{const u=c(94839);class Client_BetterSQLite3 extends u{_driver(){return c(18940)}async acquireRawConnection(){return new this.driver(this.connectionSettings.filename)}async destroyRawConnection(r){return r.close()}async _query(r,i){if(!i.sql)throw new Error("The query is empty");if(!r){throw new Error("No connection provided")}const c=r.prepare(i.sql);const u=this._formatBindings(i.bindings);if(c.reader){const r=await c.all(u);i.response=r;return i}const h=await c.run(u);i.response=h;i.context={lastID:h.lastInsertRowid,changes:h.changes};return i}_formatBindings(r){if(!r){return[]}return r.map((r=>{if(r instanceof Date){return r.valueOf()}if(typeof r==="boolean"){return Number(r)}return r}))}}Object.assign(Client_BetterSQLite3.prototype,{driverName:"better-sqlite3"});r.exports=Client_BetterSQLite3},5743:(r,i,c)=>{const u=c(82048);class ColumnCompiler_CRDB extends u{uuid(r={primaryKey:false}){return"uuid"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key default gen_random_uuid()":"")}}r.exports=ColumnCompiler_CRDB},81895:(r,i,c)=>{const u=c(26447);const h=c(26901);r.exports=class QueryBuilder_CockroachDB extends u{upsert(r,i,c){this._method="upsert";if(!h(i))this.returning(i,c);this._single.upsert=r;return this}}},91247:(r,i,c)=>{const u=c(25934);const{columnize:h,wrap:d,operator:p}=c(31823);class QueryCompiler_CRDB extends u{truncate(){return`truncate ${this.tableName}`}upsert(){let r=this._upsert();if(r==="")return r;const{returning:i}=this.single;if(i)r+=this._returning(i);return{sql:r,returning:i}}_upsert(){const r=this.single.upsert||[];const i=this.with()+`upsert into ${this.tableName} `;const c=this._insertBody(r);return c===""?"":i+c}_groupOrder(r,i){return this._basicGroupOrder(r,i)}whereJsonPath(r){let i="";if(!isNaN(r.value)&&parseInt(r.value)){i="::int"}else if(!isNaN(r.value)&&parseFloat(r.value)){i="::float"}else{i=" #>> '{}'"}return`json_extract_path(${this._columnClause(r)}, ${this.client.toArrayPathFromJsonPath(r.jsonPath,this.builder,this.bindingsHolder)})${i} ${p(r.operator,this.builder,this.client,this.bindingsHolder)} ${this._jsonValueClause(r)}`}_jsonExtract(r,i){let c;if(Array.isArray(i.column)){c=i.column}else{c=[i]}return c.map((r=>{const i=`json_extract_path(${h(r.column||r[0],this.builder,this.client,this.bindingsHolder)}, ${this.client.toArrayPathFromJsonPath(r.path||r[1],this.builder,this.bindingsHolder)})`;const c=r.alias||r[2];return c?this.client.alias(i,this.formatter.wrap(c)):i})).join(", ")}_onJsonPathEquals(r,i){return"json_extract_path("+d(i.columnFirst,undefined,this.builder,this.client,this.bindingsHolder)+", "+this.client.toArrayPathFromJsonPath(i.jsonPathFirst,this.builder,this.bindingsHolder)+") = json_extract_path("+d(i.columnSecond,undefined,this.builder,this.client,this.bindingsHolder)+", "+this.client.toArrayPathFromJsonPath(i.jsonPathSecond,this.builder,this.bindingsHolder)+")"}}r.exports=QueryCompiler_CRDB},66624:(r,i,c)=>{const u=c(80639);class TableCompiler_CRDB extends u{constructor(r,i){super(r,i)}addColumns(r,i,c){if(i===this.alterColumnsPrefix){for(const r of c){this.client.logger.warn("Experimental alter column in use, see issue: https://github.com/cockroachdb/cockroach/issues/49329");this.pushQuery({sql:"SET enable_experimental_alter_column_type_general = true",bindings:[]});super._addColumn(r)}}else{super.addColumns(r,i)}}dropUnique(r,i){i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`drop index ${this.tableName()}@${i} cascade `)}}r.exports=TableCompiler_CRDB},54701:(r,i,c)=>{const u=c(59162);class ViewCompiler_CRDB extends u{renameColumn(r,i){throw new Error("rename column of views is not supported by this dialect.")}defaultTo(r,i){throw new Error("change default values of views is not supported by this dialect.")}}r.exports=ViewCompiler_CRDB},2489:(r,i,c)=>{const u=c(97582);const h=c(1729);const d=c(91247);const p=c(5743);const g=c(66624);const y=c(54701);const b=c(81895);class Client_CockroachDB extends u{transaction(){return new h(this,...arguments)}queryCompiler(r,i){return new d(this,r,i)}columnCompiler(){return new p(this,...arguments)}tableCompiler(){return new g(this,...arguments)}viewCompiler(){return new y(this,...arguments)}queryBuilder(){return new b(this)}_parseVersion(r){return r.split(" ")[2]}async cancelQuery(r){try{return await this._wrappedCancelQueryCall(null,r)}catch(r){this.logger.warn(`Connection Error: ${r}`);throw r}}_wrappedCancelQueryCall(r,i){if(i.activeQuery.processID===0&&i.activeQuery.secretKey===0){return}return i.cancel(i,i.activeQuery)}toArrayPathFromJsonPath(r,i,c){return r.replace(/^(\$\.)/,"").replace(/\[([0-9]+)]/,".$1").split(".").map(function(r){return this.parameter(r,i,c)}.bind(this)).join(", ")}}Object.assign(Client_CockroachDB.prototype,{driverName:"cockroachdb"});r.exports=Client_CockroachDB},55496:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});i.getDialectByNameOrAlias=void 0;const{resolveClientNameWithAliases:u}=c(79362);const h=Object.freeze({"better-sqlite3":()=>c(54132),cockroachdb:()=>c(2489),mssql:()=>c(11193),mysql:()=>c(17191),mysql2:()=>c(41407),oracle:()=>c(62007),oracledb:()=>c(47738),pgnative:()=>c(43798),postgres:()=>c(97582),redshift:()=>c(50919),sqlite3:()=>c(94839)});function getDialectByNameOrAlias(r){const i=u(r);const c=h[i];if(!c){throw new Error(`Invalid clientName given: ${r}`)}return c()}i.getDialectByNameOrAlias=getDialectByNameOrAlias},11193:(r,i,c)=>{const u=c(94328);const h=c(13270);const d=c(92776);const p=c(26899);const g=c(93669);const y=c(23724);const b=c(50972);const v=c(648);const w=c(94428);const C=c(62966);const E=c(26447);const x=c(15087)("knex:mssql");const S={MIN:-2147483648,MAX:2147483647};const k={MIN:-9007199254740991,MAX:9007199254740991};class Client_MSSQL extends d{constructor(r={}){super(r)}_generateConnection(){const r=this.connectionSettings;r.options=r.options||{};const i={authentication:{type:r.type||"default",options:{userName:r.userName||r.user,password:r.password,domain:r.domain,token:r.token,clientId:r.clientId,clientSecret:r.clientSecret,tenantId:r.tenantId,msiEndpoint:r.msiEndpoint}},server:r.server||r.host,options:{database:r.database,encrypt:r.encrypt||false,port:r.port||1433,connectTimeout:r.connectionTimeout||r.timeout||15e3,requestTimeout:!h(r.requestTimeout)?r.requestTimeout:15e3,rowCollectionOnDone:false,rowCollectionOnRequestCompletion:false,useColumnNames:false,tdsVersion:r.options.tdsVersion||"7_4",appName:r.options.appName||"knex",trustServerCertificate:false,...r.options}};if(i.options.instanceName)delete i.options.port;if(isNaN(i.options.requestTimeout))i.options.requestTimeout=15e3;if(i.options.requestTimeout===Infinity)i.options.requestTimeout=0;if(i.options.requestTimeout<0)i.options.requestTimeout=0;if(r.debug){i.options.debug={packet:true,token:true,data:true,payload:true}}return i}_driver(){const r=c(49124);return r}formatter(){return new p(this,...arguments)}transaction(){return new g(this,...arguments)}queryCompiler(){return new y(this,...arguments)}schemaCompiler(){return new b(this,...arguments)}tableCompiler(){return new v(this,...arguments)}viewCompiler(){return new w(this,...arguments)}queryBuilder(){const r=new E(this);return r}columnCompiler(){return new C(this,...arguments)}wrapIdentifierImpl(r){if(r==="*"){return"*"}return`[${r.replace(/[[\]]+/g,"")}]`}acquireRawConnection(){return new Promise(((r,i)=>{x("connection::connection new connection requested");const c=this._driver();const u=Object.assign({},this._generateConnection());const h=new c.Connection(u);h.connect((c=>{if(c){x("connection::connect error: %s",c.message);return i(c)}x("connection::connect connected to server");h.connected=true;h.on("error",(r=>{x("connection::error message=%s",r.message);h.__knex__disposed=r;h.connected=false}));h.once("end",(()=>{h.connected=false;h.__knex__disposed="Connection to server was terminated.";x("connection::end connection ended.")}));return r(h)}))}))}validateConnection(r){return r&&r.connected}destroyRawConnection(r){x("connection::destroy");return new Promise((i=>{r.once("end",(()=>{i()}));r.close()}))}positionBindings(r){let i=-1;return r.replace(/\\?\?/g,(r=>{if(r==="\\?"){return"?"}i+=1;return`@p${i}`}))}_chomp(r){if(r.state.name==="LoggedIn"){const i=this.requestQueue.pop();if(i){x("connection::query executing query, %d more in queue",this.requestQueue.length);r.execSql(i)}}}_enqueueRequest(r,i){this.requestQueue.push(r);this._chomp(i)}_makeRequest(r,i){const c=this._driver();const u=typeof r==="string"?r:r.sql;let h=0;if(!u)throw new Error("The query is empty");x("request::request sql=%s",u);const d=new c.Request(u,((r,c)=>{if(r){x("request::error message=%s",r.message);return i(r)}h=c;x("request::callback rowCount=%d",h)}));d.on("prepared",(()=>{x("request %s::request prepared",this.id)}));d.on("done",((r,i)=>{x("request::done rowCount=%d more=%s",r,i)}));d.on("doneProc",((r,i)=>{x("request::doneProc id=%s rowCount=%d more=%s",d.id,r,i)}));d.on("doneInProc",((r,i)=>{x("request::doneInProc id=%s rowCount=%d more=%s",d.id,r,i)}));d.once("requestCompleted",(()=>{x("request::completed id=%s",d.id);return i(null,h)}));d.on("error",(r=>{x("request::error id=%s message=%s",d.id,r.message);return i(r)}));return d}_stream(r,i,c){return new Promise(((u,h)=>{const d=this._makeRequest(i,(r=>{if(r){c.emit("error",r);return h(r)}u()}));d.on("row",(r=>{c.write(r.reduce(((r,i)=>({...r,[i.metadata.colName]:i.value})),{}))}));d.on("error",(r=>{c.emit("error",r);h(r)}));d.once("requestCompleted",(()=>{c.end();u()}));this._assignBindings(d,i.bindings);this._enqueueRequest(d,r)}))}_assignBindings(r,i){if(Array.isArray(i)){for(let c=0;c<i.length;c++){const u=i[c];this._setReqInput(r,c,u)}}}_scaleForBinding(r){if(r%1===0){throw new Error(`The binding value ${r} must be a decimal number.`)}return{scale:10}}_typeForBinding(r){const i=this._driver();if(this.connectionSettings.options&&this.connectionSettings.options.mapBinding){const i=this.connectionSettings.options.mapBinding(r);if(i){return[i.value,i.type]}}switch(typeof r){case"string":return[r,i.TYPES.NVarChar];case"boolean":return[r,i.TYPES.Bit];case"number":{if(r%1!==0){return[r,i.TYPES.Float]}if(r<S.MIN||r>S.MAX){if(r<k.MIN||r>k.MAX){throw new Error(`Bigint must be safe integer or must be passed as string, saw ${r}`)}return[r,i.TYPES.BigInt]}return[r,i.TYPES.Int]}default:{if(r instanceof Date){return[r,i.TYPES.DateTime]}if(r instanceof Buffer){return[r,i.TYPES.VarBinary]}return[r,i.TYPES.NVarChar]}}}_query(r,i){return new Promise(((c,u)=>{const h=[];const d=this._makeRequest(i,((d,p)=>{if(d){return u(d)}i.response=h;process.nextTick((()=>this._chomp(r)));c(i)}));d.on("row",(r=>{x("request::row");h.push(r)}));this._assignBindings(d,i.bindings);this._enqueueRequest(d,r)}))}_setReqInput(r,i,c){const[u,h]=this._typeForBinding(c);const d="p".concat(i);let p;if(typeof u==="number"&&u%1!==0){p=this._scaleForBinding(u)}x("request::binding pos=%d type=%s value=%s",i,h.name,u);if(Buffer.isBuffer(u)){p={length:"max"}}r.addParameter(d,h,u,p)}processResponse(r,i){if(r==null)return;let{response:c}=r;const{method:h}=r;if(r.output){return r.output.call(i,c)}c=c.map((r=>r.reduce(((r,i)=>{const c=i.metadata.colName;if(r[c]){if(!Array.isArray(r[c])){r[c]=[r[c]]}r[c].push(i.value)}else{r[c]=i.value}return r}),{})));if(r.output)return r.output.call(i,c);switch(h){case"select":return c;case"first":return c[0];case"pluck":return u(c,r.pluck);case"insert":case"del":case"update":case"counter":if(r.returning){if(r.returning==="@@rowcount"){return c[0][""]}}return c;default:return c}}}Object.assign(Client_MSSQL.prototype,{requestQueue:[],dialect:"mssql",driverName:"mssql"});r.exports=Client_MSSQL},26899:(r,i,c)=>{const u=c(28935);class MSSQL_Formatter extends u{columnizeWithPrefix(r,i){const c=typeof i==="string"?[i]:i;let u="",h=-1;while(++h<c.length){if(h>0)u+=", ";u+=r+this.wrap(c[h])}return u}escapingStringDelimiters(r){return(r||"").replace(/'/g,"''")}}r.exports=MSSQL_Formatter},23724:(r,i,c)=>{const u=c(8697);const h=c(14606);const d=c(54945);const p=c(26901);const g=c(45114);const{columnize:y}=c(31823);const b=["columns","join","lock","where","union","group","having","order","limit","offset"];class QueryCompiler_MSSQL extends u{constructor(r,i,c){super(r,i,c);const{onConflict:u}=this.single;if(u){throw new Error(".onConflict() is not supported for mssql.")}this._emptyInsertValue="default values"}with(){const r=[];if(this.grouped.with){for(const i of this.grouped.with){if(i.recursive){r.push(i);i.recursive=false}}}const i=super.with();for(const i of r){i.recursive=true}return i}select(){const r=this.with();const i=b.map((r=>this[r](this)));return r+h(i).join(" ")}insert(){if(this.single.options&&this.single.options.includeTriggerModifications){return this.insertWithTriggers()}else{return this.standardInsert()}}insertWithTriggers(){const r=this.single.insert||[];const{returning:i}=this.single;let c=this.with()+`${this._buildTempTable(i)}insert into ${this.tableName} `;const u=i?this._returning("insert",i,true)+" ":"";if(Array.isArray(r)){if(r.length===0){return""}}else if(typeof r==="object"&&p(r)){return{sql:c+u+this._emptyInsertValue+this._buildReturningSelect(i),returning:i}}c+=this._buildInsertData(r,u);if(i){c+=this._buildReturningSelect(i)}return{sql:c,returning:i}}_buildInsertData(r,i){let c="";const u=this._prepInsert(r);if(typeof u==="string"){c+=u}else{if(u.columns.length){c+=`(${this.formatter.columnize(u.columns)}`;c+=`) ${i}values (`+this._buildInsertValues(u)+")"}else if(r.length===1&&r[0]){c+=i+this._emptyInsertValue}else{return""}}return c}standardInsert(){const r=this.single.insert||[];let i=this.with()+`insert into ${this.tableName} `;const{returning:c}=this.single;const u=c?this._returning("insert",c)+" ":"";if(Array.isArray(r)){if(r.length===0){return""}}else if(typeof r==="object"&&p(r)){return{sql:i+u+this._emptyInsertValue,returning:c}}i+=this._buildInsertData(r,u);return{sql:i,returning:c}}update(){if(this.single.options&&this.single.options.includeTriggerModifications){return this.updateWithTriggers()}else{return this.standardUpdate()}}updateWithTriggers(){const r=this.top();const i=this.with();const c=this._prepUpdate(this.single.update);const u=this.join();const h=this.where();const d=this.order();const{returning:p}=this.single;const g=this._buildTempTable(p);return{sql:i+g+`update ${r?r+" ":""}${this.tableName}`+" set "+c.join(", ")+(p?` ${this._returning("update",p,true)}`:"")+(u?` from ${this.tableName} ${u}`:"")+(h?` ${h}`:"")+(d?` ${d}`:"")+(!p?this._returning("rowcount","@@rowcount"):this._buildReturningSelect(p)),returning:p||"@@rowcount"}}_formatGroupsItemValue(r,i){const c=super._formatGroupsItemValue(r);if(i&&!(r instanceof g)){const r=`IIF(${c} is null,`;if(i==="first"){return`${r}0,1)`}else if(i==="last"){return`${r}1,0)`}}return c}standardUpdate(){const r=this.top();const i=this.with();const c=this._prepUpdate(this.single.update);const u=this.join();const h=this.where();const d=this.order();const{returning:p}=this.single;return{sql:i+`update ${r?r+" ":""}${this.tableName}`+" set "+c.join(", ")+(p?` ${this._returning("update",p)}`:"")+(u?` from ${this.tableName} ${u}`:"")+(h?` ${h}`:"")+(d?` ${d}`:"")+(!p?this._returning("rowcount","@@rowcount"):""),returning:p||"@@rowcount"}}del(){if(this.single.options&&this.single.options.includeTriggerModifications){return this.deleteWithTriggers()}else{return this.standardDelete()}}deleteWithTriggers(){const r=this.with();const{tableName:i}=this;const c=this.where();const u=this.join();const{returning:h}=this.single;const d=h?` ${this._returning("del",h,true)}`:"";const p=u?`${i}${d} `:"";return{sql:r+`${this._buildTempTable(h)}delete ${p}from ${i}`+(!u?d:"")+(u?` ${u}`:"")+(c?` ${c}`:"")+(!h?this._returning("rowcount","@@rowcount"):this._buildReturningSelect(h)),returning:h||"@@rowcount"}}standardDelete(){const r=this.with();const{tableName:i}=this;const c=this.where();const u=this.join();const{returning:h}=this.single;const d=h?` ${this._returning("del",h)}`:"";const p=u?`${i}${d} `:"";return{sql:r+`delete ${p}from ${i}`+(!u?d:"")+(u?` ${u}`:"")+(c?` ${c}`:"")+(!h?this._returning("rowcount","@@rowcount"):""),returning:h||"@@rowcount"}}columns(){let r="";if(this.onlyUnions())return"";const i=this.top();const c=this._hintComments();const u=this.grouped.columns||[];let h=-1,d=[];if(u){while(++h<u.length){const i=u[h];if(i.distinct)r="distinct ";if(i.distinctOn){r=this.distinctOn(i.value);continue}if(i.type==="aggregate"){d.push(...this.aggregate(i))}else if(i.type==="aggregateRaw"){d.push(this.aggregateRaw(i))}else if(i.type==="analytic"){d.push(this.analytic(i))}else if(i.type==="json"){d.push(this.json(i))}else if(i.value&&i.value.length>0){d.push(this.formatter.columnize(i.value))}}}if(d.length===0)d=["*"];const p=this.onlyJson()?"":"select ";return`${p}${c}${r}`+(i?i+" ":"")+d.join(", ")+(this.tableName?` from ${this.tableName}`:"")}_returning(r,i,c){switch(r){case"update":case"insert":return i?`output ${this.formatter.columnizeWithPrefix("inserted.",i)}${c?" into #out":""}`:"";case"del":return i?`output ${this.formatter.columnizeWithPrefix("deleted.",i)}${c?" into #out":""}`:"";case"rowcount":return i?";select @@rowcount":""}}_buildTempTable(r){if(r&&r.length>0){let i="";if(Array.isArray(r)){i=r.map((r=>`[t].${this.formatter.columnize(r)}`)).join(",")}else{i=`[t].${this.formatter.columnize(r)}`}let c=`select top(0) ${i} into #out `;c+=`from ${this.tableName} as t `;c+=`left join ${this.tableName} on 0=1;`;return c}return""}_buildReturningSelect(r){if(r&&r.length>0){let i="";if(Array.isArray(r)){i=r.map((r=>`${this.formatter.columnize(r)}`)).join(",")}else{i=this.formatter.columnize(r)}let c=`; select ${i} from #out; `;c+=`drop table #out;`;return c}return""}truncate(){return`truncate table ${this.tableName}`}forUpdate(){return"with (UPDLOCK)"}forShare(){return"with (HOLDLOCK)"}columnInfo(){const r=this.single.columnInfo;let i=this.single.schema;const c=this.client.customWrapIdentifier(this.single.table,d);if(i){i=this.client.customWrapIdentifier(i,d)}let u=`select [COLUMN_NAME], [COLUMN_DEFAULT], [DATA_TYPE], [CHARACTER_MAXIMUM_LENGTH], [IS_NULLABLE] from INFORMATION_SCHEMA.COLUMNS where table_name = ? and table_catalog = ?`;const h=[c,this.client.database()];if(i){u+=" and table_schema = ?";h.push(i)}else{u+=` and table_schema = 'dbo'`}return{sql:u,bindings:h,output(i){const c=i.reduce(((r,i)=>{r[i[0].value]={defaultValue:i[1].value,type:i[2].value,maxLength:i[3].value,nullable:i[4].value==="YES"};return r}),{});return r&&c[r]||c}}}top(){const r=!this.single.limit&&this.single.limit!==0;const i=!this.single.offset;if(r||!i)return"";return`top (${this._getValueOrParameterFromAttribute("limit")})`}limit(){return""}offset(){const r=!this.single.limit&&this.single.limit!==0;const i=!this.single.offset;if(i)return"";let c=`offset ${i?"0":this._getValueOrParameterFromAttribute("offset")} rows`;if(!r){c+=` fetch next ${this._getValueOrParameterFromAttribute("limit")} rows only`}return c}whereLike(r){return`${this._columnClause(r)} collate SQL_Latin1_General_CP1_CS_AS ${this._not(r,"like ")}${this._valueClause(r)}`}whereILike(r){return`${this._columnClause(r)} collate SQL_Latin1_General_CP1_CI_AS ${this._not(r,"like ")}${this._valueClause(r)}`}jsonExtract(r){return this._jsonExtract(r.singleValue?"JSON_VALUE":"JSON_QUERY",r)}jsonSet(r){return this._jsonSet("JSON_MODIFY",r)}jsonInsert(r){return this._jsonSet("JSON_MODIFY",r)}jsonRemove(r){const i=`JSON_MODIFY(${y(r.column,this.builder,this.client,this.bindingsHolder)},${this.client.parameter(r.path,this.builder,this.bindingsHolder)}, NULL)`;return r.alias?this.client.alias(i,this.formatter.wrap(r.alias)):i}whereJsonPath(r){return this._whereJsonPath("JSON_VALUE",r)}whereJsonSupersetOf(r){throw new Error("Json superset where clause not actually supported by MSSQL")}whereJsonSubsetOf(r){throw new Error("Json subset where clause not actually supported by MSSQL")}_getExtracts(r,i){const c=y(r.column,this.builder,this.client,this.bindingsHolder);return(Array.isArray(r.values)?r.values:[r.values]).map((function(r){return"JSON_VALUE("+c+","+this.client.parameter(r,this.builder,this.bindingsHolder)+")"}),this).join(i)}onJsonPathEquals(r){return this._onJsonPathEquals("JSON_VALUE",r)}}r.exports=QueryCompiler_MSSQL},62966:(r,i,c)=>{const u=c(10208);const{toNumber:h}=c(79362);const{formatDefault:d}=c(7646);const{operator:p}=c(31823);class ColumnCompiler_MSSQL extends u{constructor(r,i,c){super(r,i,c);this.modifiers=["nullable","defaultTo","first","after","comment"];this._addCheckModifiers()}double(r,i){return"float"}floating(r,i){return`float`}integer(){return"int"}tinyint(){return"tinyint"}varchar(r){return`nvarchar(${h(r,255)})`}timestamp({useTz:r=false}={}){return r?"datetimeoffset":"datetime2"}bit(r){if(r>1){this.client.logger.warn("Bit field is exactly 1 bit length for MSSQL")}return"bit"}binary(r){return r?`varbinary(${h(r)})`:"varbinary(max)"}first(){this.client.logger.warn("Column first modifier not available for MSSQL");return""}after(r){this.client.logger.warn("Column after modifier not available for MSSQL");return""}defaultTo(r,{constraintName:i}={}){const c=d(r,this.type,this.client);i=typeof i!=="undefined"?i:`${this.tableCompiler.tableNameRaw}_${this.getColumnName()}_default`.toLowerCase();if(this.columnBuilder._method==="alter"){this.pushAdditional((function(){this.pushQuery(`ALTER TABLE ${this.tableCompiler.tableName()} ADD CONSTRAINT ${this.formatter.wrap(i)} DEFAULT ${c} FOR ${this.formatter.wrap(this.getColumnName())}`)}));return""}if(!i){return`DEFAULT ${c}`}return`CONSTRAINT ${this.formatter.wrap(i)} DEFAULT ${c}`}comment(r){if(!r){return}if(r&&r.length>7500/2){this.client.logger.warn("Your comment might be longer than the max comment length for MSSQL of 7,500 bytes.")}const i=this.formatter.escapingStringDelimiters(r);const c=this.tableCompiler.schemaNameRaw||"dbo";const u=this.formatter.escapingStringDelimiters(this.tableCompiler.tableNameRaw);const h=this.formatter.escapingStringDelimiters(this.args[0]||this.defaults("columnName"));const d=`N'MS_Description', N'${i}', N'Schema', N'${c}', N'Table', N'${u}', N'Column', N'${h}'`;this.pushAdditional((function(){const r=`EXISTS(SELECT * FROM sys.fn_listextendedproperty(N'MS_Description', N'Schema', N'${c}', N'Table', N'${u}', N'Column', N'${h}'))`;this.pushQuery(`IF ${r}\n  EXEC sys.sp_updateextendedproperty ${d}\nELSE\n  EXEC sys.sp_addextendedproperty ${d}`)}));return""}checkLength(r,i,c){return this._check(`LEN(${this.formatter.wrap(this.getColumnName())}) ${p(r,this.columnBuilder,this.bindingsHolder)} ${h(i)}`,c)}checkRegex(r,i){return this._check(`${this.formatter.wrap(this.getColumnName())} LIKE ${this.client._escapeBinding("%"+r+"%")}`,i)}increments(r={primaryKey:true}){return"int identity(1,1) not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}bigincrements(r={primaryKey:true}){return"bigint identity(1,1) not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}}ColumnCompiler_MSSQL.prototype.bigint="bigint";ColumnCompiler_MSSQL.prototype.mediumint="int";ColumnCompiler_MSSQL.prototype.smallint="smallint";ColumnCompiler_MSSQL.prototype.text="nvarchar(max)";ColumnCompiler_MSSQL.prototype.mediumtext="nvarchar(max)";ColumnCompiler_MSSQL.prototype.longtext="nvarchar(max)";ColumnCompiler_MSSQL.prototype.json=ColumnCompiler_MSSQL.prototype.jsonb="nvarchar(max)";ColumnCompiler_MSSQL.prototype.enu="nvarchar(100)";ColumnCompiler_MSSQL.prototype.uuid=({useBinaryUuid:r=false}={})=>r?"binary(16)":"uniqueidentifier";ColumnCompiler_MSSQL.prototype.datetime="datetime2";ColumnCompiler_MSSQL.prototype.bool="bit";r.exports=ColumnCompiler_MSSQL},50972:(r,i,c)=>{const u=c(3975);class SchemaCompiler_MSSQL extends u{constructor(r,i){super(r,i)}dropTableIfExists(r){const i=this.formatter.wrap(prefixedTableName(this.schema,r));this.pushQuery(`if object_id('${i}', 'U') is not null DROP TABLE ${i}`)}dropViewIfExists(r){const i=this.formatter.wrap(prefixedTableName(this.schema,r));this.pushQuery(`if object_id('${i}', 'V') is not null DROP VIEW ${i}`)}renameTable(r,i){this.pushQuery(`exec sp_rename ${this.client.parameter(prefixedTableName(this.schema,r),this.builder,this.bindingsHolder)}, ${this.client.parameter(i,this.builder,this.bindingsHolder)}`)}renameView(r,i){this.pushQuery(`exec sp_rename ${this.client.parameter(prefixedTableName(this.schema,r),this.builder,this.bindingsHolder)}, ${this.client.parameter(i,this.builder,this.bindingsHolder)}`)}hasTable(r){const i=this.client.parameter(prefixedTableName(this.schema,r),this.builder,this.bindingsHolder);const c=[r];let u=`SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES `+`WHERE TABLE_NAME = ${i}`;if(this.schema){u+=" AND TABLE_SCHEMA = ?";c.push(this.schema)}this.pushQuery({sql:u,bindings:c,output:r=>r.length>0})}hasColumn(r,i){const c=this.client.parameter(i,this.builder,this.bindingsHolder);const u=this.client.parameter(this.formatter.wrap(prefixedTableName(this.schema,r)),this.builder,this.bindingsHolder);const h=`select object_id from sys.columns `+`where name = ${c} `+`and object_id = object_id(${u})`;this.pushQuery({sql:h,output:r=>r.length>0})}}SchemaCompiler_MSSQL.prototype.dropTablePrefix="DROP TABLE ";function prefixedTableName(r,i){return r?`${r}.${i}`:i}r.exports=SchemaCompiler_MSSQL},648:(r,i,c)=>{const u=c(31492);const h=c(79362);const{isObject:d}=c(29706);class TableCompiler_MSSQL extends u{constructor(r,i){super(r,i)}createQuery(r,i,c){let u=i?`if object_id('${this.tableName()}', 'U') is null `:"";if(c){u+=`SELECT * INTO ${this.tableName()} FROM ${this.tableNameLike()} WHERE 0=1`}else{u+="CREATE TABLE "+this.tableName()+(this._formatting?" (\n    ":" (")+r.sql.join(this._formatting?",\n    ":", ")+this._addChecks()+")"}this.pushQuery(u);if(this.single.comment){this.comment(this.single.comment)}if(c){this.addColumns(r,this.addColumnsPrefix)}}comment(r){if(!r){return}if(r.length>7500/2){this.client.logger.warn("Your comment might be longer than the max comment length for MSSQL of 7,500 bytes.")}const i=this.formatter.escapingStringDelimiters(r);const c=this.formatter.escapingStringDelimiters(this.schemaNameRaw||"dbo");const u=this.formatter.escapingStringDelimiters(this.tableNameRaw);const h=`N'MS_Description', N'${i}', N'Schema', N'${c}', N'Table', N'${u}'`;const d=`EXISTS(SELECT * FROM sys.fn_listextendedproperty(N'MS_Description', N'Schema', N'${c}', N'Table', N'${u}', NULL, NULL))`;this.pushQuery(`IF ${d}\n  EXEC sys.sp_updateextendedproperty ${h}\nELSE\n  EXEC sys.sp_addextendedproperty ${h}`)}addColumns(r,i){i=i||this.addColumnsPrefix;if(r.sql.length>0){this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+i+r.sql.join(", "),bindings:r.bindings})}}alterColumns(r,i){for(let r=0,c=i.length;r<c;r++){const c=i[r];if(c.modified.defaultTo){const r=this.schemaNameRaw||"dbo";const i=`\n              DECLARE @constraint varchar(100) = (SELECT default_constraints.name\n                                                  FROM sys.all_columns\n                                                  INNER JOIN sys.tables\n                                                    ON all_columns.object_id = tables.object_id\n                                                  INNER JOIN sys.schemas\n                                                    ON tables.schema_id = schemas.schema_id\n                                                  INNER JOIN sys.default_constraints\n                                                    ON all_columns.default_object_id = default_constraints.object_id\n                                                  WHERE schemas.name = '${r}'\n                                                  AND tables.name = '${this.tableNameRaw}'\n                                                  AND all_columns.name = '${c.getColumnName()}')\n\n              IF @constraint IS NOT NULL EXEC('ALTER TABLE ${this.tableNameRaw} DROP CONSTRAINT ' + @constraint)`;this.pushQuery(i)}}r.sql.forEach((i=>{this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+(this.lowerCase?this.alterColumnPrefix.toLowerCase():this.alterColumnPrefix)+i,bindings:r.bindings})}))}dropColumn(){const r=this;const i=h.normalizeArr.apply(null,arguments);const c=Array.isArray(i)?i:[i];const u=c.map((i=>r.formatter.wrap(i)));const d=this.schemaNameRaw||"dbo";for(const r of i){const i=`\n              DECLARE @constraint varchar(100) = (SELECT default_constraints.name\n                                                  FROM sys.all_columns\n                                                  INNER JOIN sys.tables\n                                                    ON all_columns.object_id = tables.object_id\n                                                  INNER JOIN sys.schemas\n                                                    ON tables.schema_id = schemas.schema_id\n                                                  INNER JOIN sys.default_constraints\n                                                    ON all_columns.default_object_id = default_constraints.object_id\n                                                  WHERE schemas.name = '${d}'\n                                                  AND tables.name = '${this.tableNameRaw}'\n                                                  AND all_columns.name = '${r}')\n\n              IF @constraint IS NOT NULL EXEC('ALTER TABLE ${this.tableNameRaw} DROP CONSTRAINT ' + @constraint)`;this.pushQuery(i)}this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+this.dropColumnPrefix+u.join(", "))}changeType(){}renameColumn(r,i){this.pushQuery(`exec sp_rename ${this.client.parameter(this.tableName()+"."+r,this.tableBuilder,this.bindingsHolder)}, ${this.client.parameter(i,this.tableBuilder,this.bindingsHolder)}, 'COLUMN'`)}dropFKRefs(r,i){const c=this.client.formatter(this.tableBuilder);return Promise.all(i.map((function(i){const u=c.wrap(i.CONSTRAINT_NAME);const h=c.wrap(i.TABLE_NAME);return r.query({sql:`ALTER TABLE ${h} DROP CONSTRAINT ${u}`})})))}createFKRefs(r,i){const c=this.client.formatter(this.tableBuilder);return Promise.all(i.map((function(i){const u=c.wrap(i.TABLE_NAME);const h=c.wrap(i.CONSTRAINT_NAME);const d=c.columnize(i.COLUMN_NAME);const p=c.columnize(i.REFERENCED_COLUMN_NAME);const g=c.wrap(i.REFERENCED_TABLE_NAME);const y=` ON UPDATE ${i.UPDATE_RULE}`;const b=` ON DELETE ${i.DELETE_RULE}`;return r.query({sql:`ALTER TABLE ${u} ADD CONSTRAINT ${h}`+" FOREIGN KEY ("+d+") REFERENCES "+g+" ("+p+")"+y+b})})))}index(r,i,c){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);let u;if(d(c)){({predicate:u}=c)}const h=u?" "+this.client.queryCompiler(u).where():"";this.pushQuery(`CREATE INDEX ${i} ON ${this.tableName()} (${this.formatter.columnize(r)})${h}`)}primary(r,i){let c;if(d(i)){({constraintName:i,deferrable:c}=i)}if(c&&c!=="not deferrable"){this.client.logger.warn(`mssql: primary key constraint [${i}] will not be deferrable ${c} because mssql does not support deferred constraints.`)}i=i?this.formatter.wrap(i):this.formatter.wrap(`${this.tableNameRaw}_pkey`);if(!this.forCreate){this.pushQuery(`ALTER TABLE ${this.tableName()} ADD CONSTRAINT ${i} PRIMARY KEY (${this.formatter.columnize(r)})`)}else{this.pushQuery(`CONSTRAINT ${i} PRIMARY KEY (${this.formatter.columnize(r)})`)}}unique(r,i){let c;let u=false;if(d(i)){({indexName:i,deferrable:c,useConstraint:u}=i)}if(c&&c!=="not deferrable"){this.client.logger.warn(`mssql: unique index [${i}] will not be deferrable ${c} because mssql does not support deferred constraints.`)}i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);if(!Array.isArray(r)){r=[r]}const h=r.map((r=>this.formatter.columnize(r)+" IS NOT NULL")).join(" AND ");if(u){this.pushQuery(`ALTER TABLE ${this.tableName()} ADD CONSTRAINT ${i} UNIQUE (${this.formatter.columnize(r)})`)}else{this.pushQuery(`CREATE UNIQUE INDEX ${i} ON ${this.tableName()} (${this.formatter.columnize(r)}) WHERE ${h}`)}}dropIndex(r,i){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);this.pushQuery(`DROP INDEX ${i} ON ${this.tableName()}`)}dropForeign(r,i){i=i?this.formatter.wrap(i):this._indexCommand("foreign",this.tableNameRaw,r);this.pushQuery(`ALTER TABLE ${this.tableName()} DROP CONSTRAINT ${i}`)}dropPrimary(r){r=r?this.formatter.wrap(r):this.formatter.wrap(`${this.tableNameRaw}_pkey`);this.pushQuery(`ALTER TABLE ${this.tableName()} DROP CONSTRAINT ${r}`)}dropUnique(r,i){i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`DROP INDEX ${i} ON ${this.tableName()}`)}}TableCompiler_MSSQL.prototype.createAlterTableMethods=["foreign","primary"];TableCompiler_MSSQL.prototype.lowerCase=false;TableCompiler_MSSQL.prototype.addColumnsPrefix="ADD ";TableCompiler_MSSQL.prototype.dropColumnPrefix="DROP COLUMN ";TableCompiler_MSSQL.prototype.alterColumnPrefix="ALTER COLUMN ";r.exports=TableCompiler_MSSQL},94428:(r,i,c)=>{const u=c(71822);const{columnize:h}=c(31823);class ViewCompiler_MSSQL extends u{constructor(r,i){super(r,i)}createQuery(r,i,c,u){const d="CREATE "+(u?"OR ALTER ":"")+"VIEW ";let p=d+this.viewName();const g=r?" ("+h(r,this.viewBuilder,this.client,this.bindingsHolder)+")":"";p+=g;p+=" AS ";p+=i.toString();this.pushQuery({sql:p})}renameColumn(r,i){this.pushQuery(`exec sp_rename ${this.client.parameter(this.viewName()+"."+r,this.viewBuilder,this.bindingsHolder)}, ${this.client.parameter(i,this.viewBuilder,this.bindingsHolder)}, 'COLUMN'`)}createOrReplace(){this.createQuery(this.columns,this.selectQuery,false,true)}}r.exports=ViewCompiler_MSSQL},93669:(r,i,c)=>{const u=c(21251);const h=c(15087)("knex:tx");class Transaction_MSSQL extends u{begin(r){h("transaction::begin id=%s",this.txid);return new Promise(((i,c)=>{r.beginTransaction((r=>{if(r){h("transaction::begin error id=%s message=%s",this.txid,r.message);return c(r)}i()}),this.outerTx?this.txid:undefined,nameToIsolationLevelEnum(this.isolationLevel))})).then(this._resolver,this._rejecter)}savepoint(r){h("transaction::savepoint id=%s",this.txid);return new Promise(((i,c)=>{r.saveTransaction((r=>{if(r){h("transaction::savepoint id=%s message=%s",this.txid,r.message);return c(r)}this.trxClient.emit("query",{__knexUid:this.trxClient.__knexUid,__knexTxId:this.trxClient.__knexTxId,autogenerated:true,sql:this.outerTx?`SAVE TRANSACTION [${this.txid}]`:`SAVE TRANSACTION`});i()}),this.outerTx?this.txid:undefined)}))}commit(r,i){h("transaction::commit id=%s",this.txid);return new Promise(((c,u)=>{r.commitTransaction((r=>{if(r){h("transaction::commit error id=%s message=%s",this.txid,r.message);return u(r)}this._completed=true;c(i)}),this.outerTx?this.txid:undefined)})).then((()=>this._resolver(i)),this._rejecter)}release(r,i){return this._resolver(i)}rollback(r,i){this._completed=true;h("transaction::rollback id=%s",this.txid);return new Promise(((c,u)=>{if(!r.inTransaction){return u(i||new Error("Transaction rejected with non-error: undefined"))}if(r.state.name!=="LoggedIn"){return u(new Error("Can't rollback transaction. There is a request in progress"))}r.rollbackTransaction((r=>{if(r){h("transaction::rollback error id=%s message=%s",this.txid,r.message)}u(r||i||new Error("Transaction rejected with non-error: undefined"))}),this.outerTx?this.txid:undefined)})).catch((r=>{if(!i&&this.doNotRejectOnRollback){this._resolver();return}if(i){try{r.originalError=i}catch(r){}}this._rejecter(r)}))}rollbackTo(r,i){return this.rollback(r,i).then((()=>void this.trxClient.emit("query",{__knexUid:this.trxClient.__knexUid,__knexTxId:this.trxClient.__knexTxId,autogenerated:true,sql:`ROLLBACK TRANSACTION`})))}}r.exports=Transaction_MSSQL;function nameToIsolationLevelEnum(r){if(!r)return;r=r.toUpperCase().replace(" ","_");const i=d[r];if(!i){throw new Error(`Unknown Isolation level, was expecting one of: ${JSON.stringify(p)}`)}return i}const d={READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5};const p=Object.keys(d).map((r=>r.toLowerCase().replace("_"," ")))},17191:(r,i,c)=>{const u=c(78581);const h=c(94328);const{promisify:d}=c(73837);const p=c(92776);const g=c(8839);const y=c(97579);const b=c(71899);const v=c(90782);const w=c(97779);const{makeEscape:C}=c(93835);const E=c(24570);const x=c(50265);class Client_MySQL extends p{_driver(){return c(58583)}queryCompiler(r,i){return new y(this,r,i)}schemaCompiler(){return new b(this,...arguments)}tableCompiler(){return new v(this,...arguments)}viewCompiler(){return new E(this,...arguments)}viewBuilder(){return new x(this,...arguments)}columnCompiler(){return new w(this,...arguments)}transaction(){return new g(this,...arguments)}wrapIdentifierImpl(r){return r!=="*"?`\`${r.replace(/`/g,"``")}\``:"*"}acquireRawConnection(){return new Promise(((r,i)=>{const c=this.driver.createConnection(this.connectionSettings);c.on("error",(r=>{c.__knex__disposed=r}));c.connect((u=>{if(u){c.removeAllListeners();return i(u)}r(c)}))}))}async destroyRawConnection(r){try{const i=d((i=>r.end(i)));return await i()}catch(i){r.__knex__disposed=i}finally{u((()=>r.removeAllListeners()))}}validateConnection(r){return r.state==="connected"||r.state==="authenticated"}_stream(r,i,c,u){if(!i.sql)throw new Error("The query is empty");u=u||{};const h=Object.assign({sql:i.sql},i.options);return new Promise(((d,p)=>{c.on("error",p);c.on("end",d);const g=r.query(h,i.bindings).stream(u);g.on("error",(r=>{p(r);c.emit("error",r)}));g.pipe(c)}))}_query(r,i){if(!i||typeof i==="string")i={sql:i};if(!i.sql)throw new Error("The query is empty");return new Promise((function(c,u){if(!i.sql){c();return}const h=Object.assign({sql:i.sql},i.options);r.query(h,i.bindings,(function(r,h,d){if(r)return u(r);i.response=[h,d];c(i)}))}))}processResponse(r,i){if(r==null)return;const{response:c}=r;const{method:u}=r;const d=c[0];const p=c[1];if(r.output)return r.output.call(i,d,p);switch(u){case"select":return d;case"first":return d[0];case"pluck":return h(d,r.pluck);case"insert":return[d.insertId];case"del":case"update":case"counter":return d.affectedRows;default:return c}}async cancelQuery(r){const i=await this.acquireRawConnection();try{return await this._wrappedCancelQueryCall(i,r)}finally{await this.destroyRawConnection(i);if(i.__knex__disposed){this.logger.warn(`Connection Error: ${i.__knex__disposed}`)}}}_wrappedCancelQueryCall(r,i){return this._query(r,{sql:"KILL QUERY ?",bindings:[i.threadId],options:{}})}}Object.assign(Client_MySQL.prototype,{dialect:"mysql",driverName:"mysql",_escapeBinding:C(),canCancelQuery:true});r.exports=Client_MySQL},97579:(r,i,c)=>{const u=c(54945);const h=c(8697);const{wrapAsIdentifier:d}=c(7646);const{columnize:p,wrap:g}=c(31823);class QueryCompiler_MySQL extends h{constructor(r,i,c){super(r,i,c);const{returning:u}=this.single;if(u){this.client.logger.warn(".returning() is not supported by mysql and will not have any effect.")}this._emptyInsertValue="() values ()"}insert(){let r=super.insert();if(r==="")return r;const{ignore:i,merge:c,insert:u}=this.single;if(i)r=r.replace("insert into","insert ignore into");if(c){r+=this._merge(c.updates,u);const i=this.where();if(i){throw new Error(".onConflict().merge().where() is not supported for mysql")}}return r}_merge(r,i){const c=" on duplicate key update ";if(r&&Array.isArray(r)){return c+r.map((r=>d(r,this.formatter.builder,this.client))).map((r=>`${r} = values(${r})`)).join(", ")}else if(r&&typeof r==="object"){const i=this._prepUpdate(r);return c+i.join(",")}else{const r=this._prepInsert(i);if(typeof r==="string"){throw new Error("If using merge with a raw insert query, then updates must be provided")}return c+r.columns.map((r=>d(r,this.builder,this.client))).map((r=>`${r} = values(${r})`)).join(", ")}}update(){const r=this.with();const i=this.join();const c=this._prepUpdate(this.single.update);const u=this.where();const h=this.order();const d=this.limit();return r+`update ${this.tableName}`+(i?` ${i}`:"")+" set "+c.join(", ")+(u?` ${u}`:"")+(h?` ${h}`:"")+(d?` ${d}`:"")}forUpdate(){return"for update"}forShare(){return"lock in share mode"}skipLocked(){return"skip locked"}noWait(){return"nowait"}columnInfo(){const r=this.single.columnInfo;const i=this.client.customWrapIdentifier(this.single.table,u);return{sql:"select * from information_schema.columns where table_name = ? and table_schema = ?",bindings:[i,this.client.database()],output(i){const c=i.reduce((function(r,i){r[i.COLUMN_NAME]={defaultValue:i.COLUMN_DEFAULT==="NULL"?null:i.COLUMN_DEFAULT,type:i.DATA_TYPE,maxLength:i.CHARACTER_MAXIMUM_LENGTH,nullable:i.IS_NULLABLE==="YES"};return r}),{});return r&&c[r]||c}}}limit(){const r=!this.single.limit&&this.single.limit!==0;if(r&&!this.single.offset)return"";const i=this.single.offset&&r?"18446744073709551615":this._getValueOrParameterFromAttribute("limit");return`limit ${i}`}whereLike(r){return`${this._columnClause(r)} ${this._not(r,"like ")}${this._valueClause(r)} COLLATE utf8_bin`}whereILike(r){return`${this._columnClause(r)} ${this._not(r,"like ")}${this._valueClause(r)}`}jsonExtract(r){return this._jsonExtract(["json_extract","json_unquote"],r)}jsonSet(r){return this._jsonSet("json_set",r)}jsonInsert(r){return this._jsonSet("json_insert",r)}jsonRemove(r){const i=`json_remove(${p(r.column,this.builder,this.client,this.bindingsHolder)},${this.client.parameter(r.path,this.builder,this.bindingsHolder)})`;return r.alias?this.client.alias(i,this.formatter.wrap(r.alias)):i}whereJsonObject(r){return this._not(r,`json_contains(${this._columnClause(r)}, ${this._jsonValueClause(r)})`)}whereJsonPath(r){return this._whereJsonPath("json_extract",r)}whereJsonSupersetOf(r){return this._not(r,`json_contains(${g(r.column,undefined,this.builder,this.client,this.bindingsHolder)},${this._jsonValueClause(r)})`)}whereJsonSubsetOf(r){return this._not(r,`json_contains(${this._jsonValueClause(r)},${g(r.column,undefined,this.builder,this.client,this.bindingsHolder)})`)}onJsonPathEquals(r){return this._onJsonPathEquals("json_extract",r)}}r.exports=QueryCompiler_MySQL},97779:(r,i,c)=>{const u=c(10208);const{isObject:h}=c(29706);const{toNumber:d}=c(79362);const p=/(?<!\\)'/g;class ColumnCompiler_MySQL extends u{constructor(r,i,c){super(r,i,c);this.modifiers=["unsigned","nullable","defaultTo","comment","collate","first","after"];this._addCheckModifiers()}double(r,i){if(!r)return"double";return`double(${d(r,8)}, ${d(i,2)})`}integer(r){r=r?`(${d(r,11)})`:"";return`int${r}`}tinyint(r){r=r?`(${d(r,1)})`:"";return`tinyint${r}`}text(r){switch(r){case"medium":case"mediumtext":return"mediumtext";case"long":case"longtext":return"longtext";default:return"text"}}mediumtext(){return this.text("medium")}longtext(){return this.text("long")}enu(r){return`enum('${r.join("', '")}')`}datetime(r){if(h(r)){({precision:r}=r)}return typeof r==="number"?`datetime(${r})`:"datetime"}timestamp(r){if(h(r)){({precision:r}=r)}return typeof r==="number"?`timestamp(${r})`:"timestamp"}time(r){if(h(r)){({precision:r}=r)}return typeof r==="number"?`time(${r})`:"time"}bit(r){return r?`bit(${d(r)})`:"bit"}binary(r){return r?`varbinary(${d(r)})`:"blob"}json(){return"json"}jsonb(){return"json"}defaultTo(r){if(r===null||r===undefined){return}if((this.type==="json"||this.type==="jsonb")&&h(r)){return`default ('${JSON.stringify(r)}')`}const i=super.defaultTo.apply(this,arguments);if(this.type!=="blob"&&this.type.indexOf("text")===-1){return i}return""}unsigned(){return"unsigned"}comment(r){if(r&&r.length>255){this.client.logger.warn("Your comment is longer than the max comment length for MySQL")}return r&&`comment '${r.replace(p,"\\'")}'`}first(){return"first"}after(r){return`after ${this.formatter.wrap(r)}`}collate(r){return r&&`collate '${r}'`}checkRegex(r,i){return this._check(`${this.formatter.wrap(this.getColumnName())} REGEXP ${this.client._escapeBinding(r)}`,i)}increments(r={primaryKey:true}){return"int unsigned not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" auto_increment primary key":"")}bigincrements(r={primaryKey:true}){return"bigint unsigned not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" auto_increment primary key":"")}}ColumnCompiler_MySQL.prototype.bigint="bigint";ColumnCompiler_MySQL.prototype.mediumint="mediumint";ColumnCompiler_MySQL.prototype.smallint="smallint";r.exports=ColumnCompiler_MySQL},71899:(r,i,c)=>{const u=c(3975);class SchemaCompiler_MySQL extends u{constructor(r,i){super(r,i)}renameTable(r,i){this.pushQuery(`rename table ${this.formatter.wrap(r)} to ${this.formatter.wrap(i)}`)}renameView(r,i){this.renameTable(r,i)}hasTable(r){let i="select * from information_schema.tables where table_name = ?";const c=[r];if(this.schema){i+=" and table_schema = ?";c.push(this.schema)}else{i+=" and table_schema = database()"}this.pushQuery({sql:i,bindings:c,output:function output(r){return r.length>0}})}hasColumn(r,i){this.pushQuery({sql:`show columns from ${this.formatter.wrap(r)}`,output(r){return r.some((r=>this.client.wrapIdentifier(r.Field.toLowerCase())===this.client.wrapIdentifier(i.toLowerCase())))}})}}r.exports=SchemaCompiler_MySQL},90782:(r,i,c)=>{const u=c(31492);const{isObject:h,isString:d}=c(29706);class TableCompiler_MySQL extends u{constructor(r,i){super(r,i)}createQuery(r,i,c){const u=i?"create table if not exists ":"create table ";const{client:h}=this;let d={};let p=" ("+r.sql.join(", ");p+=this.primaryKeys()||"";p+=this._addChecks();p+=")";let g=u+this.tableName()+(c&&this.tableNameLike()?" like "+this.tableNameLike():p);if(h.connectionSettings){d=h.connectionSettings}const y=this.single.charset||d.charset||"";const b=this.single.collate||d.collate||"";const v=this.single.engine||"";if(y&&!c)g+=` default character set ${y}`;if(b)g+=` collate ${b}`;if(v)g+=` engine = ${v}`;if(this.single.comment){const r=this.single.comment||"";const i=1024;if(r.length>i)this.client.logger.warn(`The max length for a table comment is ${i} characters`);g+=` comment = '${r}'`}this.pushQuery(g);if(c){this.addColumns(r,this.addColumnsPrefix)}}comment(r){this.pushQuery(`alter table ${this.tableName()} comment = '${r}'`)}changeType(){}renameColumn(r,i){const c=this;const u=this.tableName();const h=this.formatter.wrap(r)+" "+this.formatter.wrap(i);this.pushQuery({sql:`show full fields from ${u} where field = `+this.client.parameter(r,this.tableBuilder,this.bindingsHolder),output(d){const p=d[0];const g=this;return c.getFKRefs(g).then((([d])=>new Promise(((r,i)=>{try{if(!d.length){r()}r(c.dropFKRefs(g,d))}catch(r){i(r)}})).then((function(){let r=`alter table ${u} change ${h} ${p.Type}`;if(String(p.Null).toUpperCase()!=="YES"){r+=` NOT NULL`}else{r+=` NULL`}if(p.Default!==void 0&&p.Default!==null){r+=` DEFAULT '${p.Default}'`}if(p.Collation!==void 0&&p.Collation!==null){r+=` COLLATE '${p.Collation}'`}if(p.Extra=="auto_increment"){r+=` AUTO_INCREMENT`}return g.query({sql:r})})).then((function(){if(!d.length){return}return c.createFKRefs(g,d.map((function(c){if(c.REFERENCED_COLUMN_NAME===r){c.REFERENCED_COLUMN_NAME=i}if(c.COLUMN_NAME===r){c.COLUMN_NAME=i}return c})))}))))}})}primaryKeys(){const r=(this.grouped.alterTable||[]).filter((r=>r.method==="primary"));if(r.length>0&&r[0].args.length>0){const i=r[0].args[0];let c=r[0].args[1]||"";if(c){c=" constraint "+this.formatter.wrap(c)}if(this.grouped.columns){const r=this._getIncrementsColumnNames();if(r.length){r.forEach((r=>{if(!i.includes(r)){i.unshift(r)}}))}}return`,${c} primary key (${this.formatter.columnize(i)})`}}getFKRefs(r){const i={bindings:[]};const c="SELECT KCU.CONSTRAINT_NAME, KCU.TABLE_NAME, KCU.COLUMN_NAME, "+"       KCU.REFERENCED_TABLE_NAME, KCU.REFERENCED_COLUMN_NAME, "+"       RC.UPDATE_RULE, RC.DELETE_RULE "+"FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS KCU "+"JOIN INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS AS RC "+"       USING(CONSTRAINT_NAME)"+"WHERE KCU.REFERENCED_TABLE_NAME = "+this.client.parameter(this.tableNameRaw,this.tableBuilder,i)+" "+"  AND KCU.CONSTRAINT_SCHEMA = "+this.client.parameter(this.client.database(),this.tableBuilder,i)+" "+"  AND RC.CONSTRAINT_SCHEMA = "+this.client.parameter(this.client.database(),this.tableBuilder,i);return r.query({sql:c,bindings:i.bindings})}dropFKRefs(r,i){const c=this.client.formatter(this.tableBuilder);return Promise.all(i.map((function(i){const u=c.wrap(i.CONSTRAINT_NAME);const h=c.wrap(i.TABLE_NAME);return r.query({sql:`alter table ${h} drop foreign key ${u}`})})))}createFKRefs(r,i){const c=this.client.formatter(this.tableBuilder);return Promise.all(i.map((function(i){const u=c.wrap(i.TABLE_NAME);const h=c.wrap(i.CONSTRAINT_NAME);const d=c.columnize(i.COLUMN_NAME);const p=c.columnize(i.REFERENCED_COLUMN_NAME);const g=c.wrap(i.REFERENCED_TABLE_NAME);const y=` ON UPDATE ${i.UPDATE_RULE}`;const b=` ON DELETE ${i.DELETE_RULE}`;return r.query({sql:`alter table ${u} add constraint ${h} `+"foreign key ("+d+") references "+g+" ("+p+")"+y+b})})))}index(r,i,c){let u;let p;if(d(c)){p=c}else if(h(c)){({indexType:p,storageEngineIndexType:u}=c)}i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);u=u?` using ${u}`:"";this.pushQuery(`alter table ${this.tableName()} add${p?` ${p}`:""} index ${i}(${this.formatter.columnize(r)})${u}`)}primary(r,i){let c;if(h(i)){({constraintName:i,deferrable:c}=i)}if(c&&c!=="not deferrable"){this.client.logger.warn(`mysql: primary key constraint \`${i}\` will not be deferrable ${c} because mysql does not support deferred constraints.`)}i=i?this.formatter.wrap(i):this.formatter.wrap(`${this.tableNameRaw}_pkey`);const u=r;let d=[];if(this.grouped.columns){d=this._getIncrementsColumnNames();if(d){d.forEach((r=>{if(!u.includes(r)){u.unshift(r)}}))}}if(this.method!=="create"&&this.method!=="createIfNot"){this.pushQuery(`alter table ${this.tableName()} add primary key ${i}(${this.formatter.columnize(u)})`)}if(d.length){this.pushQuery(`alter table ${this.tableName()} modify column ${this.formatter.columnize(d)} int unsigned not null auto_increment`)}}unique(r,i){let c;let u;if(h(i)){({indexName:i,deferrable:u,storageEngineIndexType:c}=i)}if(u&&u!=="not deferrable"){this.client.logger.warn(`mysql: unique index \`${i}\` will not be deferrable ${u} because mysql does not support deferred constraints.`)}i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);c=c?` using ${c}`:"";this.pushQuery(`alter table ${this.tableName()} add unique ${i}(${this.formatter.columnize(r)})${c}`)}dropIndex(r,i){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop index ${i}`)}dropForeign(r,i){i=i?this.formatter.wrap(i):this._indexCommand("foreign",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop foreign key ${i}`)}dropPrimary(){this.pushQuery(`alter table ${this.tableName()} drop primary key`)}dropUnique(r,i){i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop index ${i}`)}}TableCompiler_MySQL.prototype.addColumnsPrefix="add ";TableCompiler_MySQL.prototype.alterColumnsPrefix="modify ";TableCompiler_MySQL.prototype.dropColumnPrefix="drop ";r.exports=TableCompiler_MySQL},50265:(r,i,c)=>{const u=c(91978);class ViewBuilder_MySQL extends u{constructor(){super(...arguments)}checkOption(){this._single.checkOption="default_option"}localCheckOption(){this._single.checkOption="local"}cascadedCheckOption(){this._single.checkOption="cascaded"}}r.exports=ViewBuilder_MySQL},24570:(r,i,c)=>{const u=c(71822);class ViewCompiler_MySQL extends u{constructor(r,i){super(r,i)}createOrReplace(){this.createQuery(this.columns,this.selectQuery,false,true)}}r.exports=ViewCompiler_MySQL},8839:(r,i,c)=>{const u=c(21251);const h=c(15087);const d=h("knex:tx");class Transaction_MySQL extends u{query(r,i,c,u){const h=this;const p=this.trxClient.query(r,i).catch((r=>{if(r.errno===1305){this.trxClient.logger.warn("Transaction was implicitly committed, do not mix transactions and "+"DDL with MySQL (#805)");return}c=2;u=r;h._completed=true;d("%s error running transaction query",h.txid)})).then((function(r){if(c===1)h._resolver(u);if(c===2){if(u===undefined){if(h.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(i)){h._resolver();return}u=new Error(`Transaction rejected with non-error: ${u}`)}h._rejecter(u)}return r}));if(c===1||c===2){h._completed=true}return p}}r.exports=Transaction_MySQL},41407:(r,i,c)=>{const u=c(17191);const h=c(6186);class Client_MySQL2 extends u{transaction(){return new h(this,...arguments)}_driver(){return c(886)}validateConnection(r){return r&&!r._fatalError&&!r._protocolError&&!r._closing&&!r.stream.destroyed}}Object.assign(Client_MySQL2.prototype,{driverName:"mysql2"});r.exports=Client_MySQL2},6186:(r,i,c)=>{const u=c(21251);const h=c(15087)("knex:tx");class Transaction_MySQL2 extends u{query(r,i,c,u){const d=this;const p=this.trxClient.query(r,i).catch((r=>{if(r.code==="ER_SP_DOES_NOT_EXIST"){this.trxClient.logger.warn("Transaction was implicitly committed, do not mix transactions and "+"DDL with MySQL (#805)");return}c=2;u=r;d._completed=true;h("%s error running transaction query",d.txid)})).then((function(r){if(c===1)d._resolver(u);if(c===2){if(u===undefined){if(d.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(i)){d._resolver();return}u=new Error(`Transaction rejected with non-error: ${u}`)}d._rejecter(u);return r}}));if(c===1||c===2){d._completed=true}return p}}r.exports=Transaction_MySQL2},62007:(r,i,c)=>{const{ReturningHelper:u}=c(74972);const{isConnectionError:h}=c(74972);const d=c(92776);const p=c(23740);const g=c(14857);const y=c(65359);const b=c(17639);class Client_Oracle extends d{schemaCompiler(){return new p(this,...arguments)}columnBuilder(){return new g(this,...arguments)}columnCompiler(){return new y(this,...arguments)}tableCompiler(){return new b(this,...arguments)}database(){return this.connectionSettings.database}positionBindings(r){let i=0;return r.replace(/\?/g,(function(){i+=1;return`:${i}`}))}_stream(r,i,c,u){if(!i.sql)throw new Error("The query is empty");return new Promise((function(d,p){c.on("error",(i=>{if(h(i)){r.__knex__disposed=i}p(i)}));c.on("end",d);const g=r.queryStream(i.sql,i.bindings,u);g.pipe(c);g.on("error",(function(r){p(r);c.emit("error",r)}))}))}alias(r,i){return r+" "+i}parameter(r,i,c){if(r instanceof u&&this.driver){r=new this.driver.OutParam(this.driver.OCCISTRING)}else if(typeof r==="boolean"){r=r?1:0}return super.parameter(r,i,c)}}Object.assign(Client_Oracle.prototype,{dialect:"oracle",driverName:"oracle"});r.exports=Client_Oracle},27087:(r,i,c)=>{const u=c(14606);const h=c(54945);const d=c(26901);const p=c(64677);const g=c(28847);const y=c(8697);const{ReturningHelper:b}=c(74972);const{isString:v}=c(29706);const w=["columns","join","where","union","group","having","order","lock"];class QueryCompiler_Oracle extends y{constructor(r,i,c){super(r,i,c);const{onConflict:u}=this.single;if(u){throw new Error(".onConflict() is not supported for oracledb.")}this.first=this.select}insert(){let r=this.single.insert||[];let{returning:i}=this.single;if(!Array.isArray(r)&&p(this.single.insert)){r=[this.single.insert]}if(i&&!Array.isArray(i)){i=[i]}if(Array.isArray(r)&&r.length===1&&d(r[0])){return this._addReturningToSqlAndConvert(`insert into ${this.tableName} (${this.formatter.wrap(this.single.returning)}) values (default)`,i,this.tableName)}if(d(this.single.insert)&&typeof this.single.insert!=="function"){return""}const c=this._prepInsert(r);const u={};if(v(c)){return this._addReturningToSqlAndConvert(`insert into ${this.tableName} ${c}`,i)}if(c.values.length===1){return this._addReturningToSqlAndConvert(`insert into ${this.tableName} (${this.formatter.columnize(c.columns)}) values (${this.client.parameterize(c.values[0],undefined,this.builder,this.bindingsHolder)})`,i,this.tableName)}const h=c.columns.length===0;u.sql="begin "+c.values.map((r=>{let d;const p=!h?this.client.parameterize(r,this.client.valueForUndefined,this.builder,this.bindingsHolder):"";const g=Array.isArray(i)?i:[i];let y=`insert into ${this.tableName} `;if(i){d=new b(g.join(":"));u.outParams=(u.outParams||[]).concat(d)}if(h){y+=`(${this.formatter.wrap(this.single.returning)}) values (default)`}else{y+=`(${this.formatter.columnize(c.columns)}) values (${p})`}y+=i?` returning ROWID into ${this.client.parameter(d,this.builder,this.bindingsHolder)}`:"";y=this.formatter.client.positionBindings(y);const v=p.replace("DEFAULT, ","").replace(", DEFAULT","");return`execute immediate '${y.replace(/'/g,"''")}`+(v||i?"' using ":"")+v+(v&&i?", ":"")+(i?"out ?":"")+";"})).join(" ")+"end;";if(i){u.returning=i;u.returningSql=`select ${this.formatter.columnize(i)}`+" from "+this.tableName+" where ROWID in ("+u.outParams.map(((r,i)=>`:${i+1}`)).join(", ")+")"+" order by case ROWID "+u.outParams.map(((r,i)=>`when CHARTOROWID(:${i+1}) then ${i}`)).join(" ")+" end"}return u}update(){const r=this._prepUpdate(this.single.update);const i=this.where();let{returning:c}=this.single;const u=`update ${this.tableName}`+" set "+r.join(", ")+(i?` ${i}`:"");if(!c){return u}if(!Array.isArray(c)){c=[c]}return this._addReturningToSqlAndConvert(u,c,this.tableName)}truncate(){return`truncate table ${this.tableName}`}forUpdate(){return"for update"}forShare(){this.client.logger.warn("lock for share is not supported by oracle dialect");return""}columnInfo(){const r=this.single.columnInfo;const i=this.client.customWrapIdentifier(this.single.table,h);const c=`select * from xmltable( '/ROWSET/ROW'\n      passing dbms_xmlgen.getXMLType('\n      select char_col_decl_length, column_name, data_type, data_default, nullable\n      from all_tab_columns where table_name = ''${i}'' ')\n      columns\n      CHAR_COL_DECL_LENGTH number, COLUMN_NAME varchar2(200), DATA_TYPE varchar2(106),\n      DATA_DEFAULT clob, NULLABLE varchar2(1))`;return{sql:c,output(i){const c=g(i,(function(r,i){r[i.COLUMN_NAME]={type:i.DATA_TYPE,defaultValue:i.DATA_DEFAULT,maxLength:i.CHAR_COL_DECL_LENGTH,nullable:i.NULLABLE==="Y"};return r}),{});return r&&c[r]||c}}}select(){let r=this.with();const i=w.map((r=>this[r]()));r+=u(i).join(" ");return this._surroundQueryWithLimitAndOffset(r)}aggregate(r){return this._aggregate(r,{aliasSeparator:" "})}_addReturningToSqlAndConvert(r,i,c){const u={sql:r};if(!i){return u}const h=Array.isArray(i)?i:[i];const d=new b(h.join(":"));u.sql=r+" returning ROWID into "+this.client.parameter(d,this.builder,this.bindingsHolder);u.returningSql=`select ${this.formatter.columnize(i)} from ${c} where ROWID = :1`;u.outParams=[d];u.returning=i;return u}_surroundQueryWithLimitAndOffset(r){let{limit:i}=this.single;const{offset:c}=this.single;const u=i||i===0||i==="0";i=+i;if(!u&&!c)return r;r=r||"";if(u&&!c){return`select * from (${r}) where rownum <= ${this._getValueOrParameterFromAttribute("limit",i)}`}const h=+c+(u?i:1e13);return"select * from "+"(select row_.*, ROWNUM rownum_ from ("+r+") row_ "+"where rownum <= "+(this.single.skipBinding["offset"]?h:this.client.parameter(h,this.builder,this.bindingsHolder))+") "+"where rownum_ > "+this._getValueOrParameterFromAttribute("offset",c)}}r.exports=QueryCompiler_Oracle},45300:(r,i,c)=>{const u=c(2567);function createAutoIncrementTriggerAndSequence(r){r.pushAdditional((function(){const r=this.tableCompiler.tableNameRaw;const i=this.tableCompiler.schemaNameRaw;const c=u.createAutoIncrementTrigger(this.client.logger,r,i);this.pushQuery(c)}))}r.exports={createAutoIncrementTriggerAndSequence:createAutoIncrementTriggerAndSequence}},2567:(r,i,c)=>{const u=c(74972);const h={renameColumnTrigger:function(r,i,c,h){const d=u.generateCombinedName(r,"autoinc_trg",i);const p=u.generateCombinedName(r,"seq",i);return`DECLARE `+`PK_NAME VARCHAR(200); `+`IS_AUTOINC NUMBER := 0; `+`BEGIN`+`  EXECUTE IMMEDIATE ('ALTER TABLE "${i}" RENAME COLUMN "${c}" TO "${h}"');`+`  SELECT COUNT(*) INTO IS_AUTOINC from "USER_TRIGGERS" where trigger_name = '${d}';`+`  IF (IS_AUTOINC > 0) THEN`+`    SELECT cols.column_name INTO PK_NAME`+`    FROM all_constraints cons, all_cons_columns cols`+`    WHERE cons.constraint_type = 'P'`+`    AND cons.constraint_name = cols.constraint_name`+`    AND cons.owner = cols.owner`+`    AND cols.table_name = '${i}';`+`    IF ('${h}' = PK_NAME) THEN`+`      EXECUTE IMMEDIATE ('DROP TRIGGER "${d}"');`+`      EXECUTE IMMEDIATE ('create or replace trigger "${d}"`+`      BEFORE INSERT on "${i}" for each row`+`        declare`+`        checking number := 1;`+`        begin`+`          if (:new."${h}" is null) then`+`            while checking >= 1 loop`+`              select "${p}".nextval into :new."${h}" from dual;`+`              select count("${h}") into checking from "${i}"`+`              where "${h}" = :new."${h}";`+`            end loop;`+`          end if;`+`        end;');`+`    end if;`+`  end if;`+`END;`},createAutoIncrementTrigger:function(r,i,c){const h=`"${i}"`;const d=i;const p=c?`"${c}".`:"";const g=c?`'${c}'`:"cols.owner";const y=u.generateCombinedName(r,"autoinc_trg",i);const b=u.generateCombinedName(r,"seq",i);const v=`"${b}"`;return`DECLARE `+`PK_NAME VARCHAR(200); `+`BEGIN`+`  EXECUTE IMMEDIATE ('CREATE SEQUENCE ${p}${v}');`+`  SELECT cols.column_name INTO PK_NAME`+`  FROM all_constraints cons, all_cons_columns cols`+`  WHERE cons.constraint_type = 'P'`+`  AND cons.constraint_name = cols.constraint_name`+`  AND cons.owner = ${g}`+`  AND cols.table_name = '${d}';`+`  execute immediate ('create or replace trigger ${p}"${y}"`+`  BEFORE INSERT on ${p}${h}`+`  for each row`+`  declare`+`  checking number := 1;`+`  begin`+`    if (:new."' || PK_NAME || '" is null) then`+`      while checking >= 1 loop`+`        select ${p}${v}.nextval into :new."' || PK_NAME || '" from dual;`+`        select count("' || PK_NAME || '") into checking from ${p}${h}`+`        where "' || PK_NAME || '" = :new."' || PK_NAME || '";`+`      end loop;`+`    end if;`+`  end;'); `+`END;`},renameTableAndAutoIncrementTrigger:function(r,i,c){const h=u.generateCombinedName(r,"autoinc_trg",i);const d=u.generateCombinedName(r,"seq",i);const p=u.generateCombinedName(r,"autoinc_trg",c);const g=u.generateCombinedName(r,"seq",c);return`DECLARE `+`PK_NAME VARCHAR(200); `+`IS_AUTOINC NUMBER := 0; `+`BEGIN`+`  EXECUTE IMMEDIATE ('RENAME "${i}" TO "${c}"');`+`  SELECT COUNT(*) INTO IS_AUTOINC from "USER_TRIGGERS" where trigger_name = '${h}';`+`  IF (IS_AUTOINC > 0) THEN`+`    EXECUTE IMMEDIATE ('DROP TRIGGER "${h}"');`+`    EXECUTE IMMEDIATE ('RENAME "${d}" TO "${g}"');`+`    SELECT cols.column_name INTO PK_NAME`+`    FROM all_constraints cons, all_cons_columns cols`+`    WHERE cons.constraint_type = 'P'`+`    AND cons.constraint_name = cols.constraint_name`+`    AND cons.owner = cols.owner`+`    AND cols.table_name = '${c}';`+`    EXECUTE IMMEDIATE ('create or replace trigger "${p}"`+`    BEFORE INSERT on "${c}" for each row`+`      declare`+`      checking number := 1;`+`      begin`+`        if (:new."' || PK_NAME || '" is null) then`+`          while checking >= 1 loop`+`            select "${g}".nextval into :new."' || PK_NAME || '" from dual;`+`            select count("' || PK_NAME || '") into checking from "${c}"`+`            where "' || PK_NAME || '" = :new."' || PK_NAME || '";`+`          end loop;`+`        end if;`+`      end;');`+`  end if;`+`END;`}};r.exports=h},14857:(r,i,c)=>{const u=c(20064);const h=c(74373);class ColumnBuilder_Oracle extends u{constructor(){super(...arguments)}checkIn(){this._modifiers.checkIn=h(arguments);return this}}r.exports=ColumnBuilder_Oracle},65359:(r,i,c)=>{const u=c(783);const h=c(45114);const d=c(10208);const{createAutoIncrementTriggerAndSequence:p}=c(45300);const{toNumber:g}=c(79362);class ColumnCompiler_Oracle extends d{constructor(){super(...arguments);this.modifiers=["defaultTo","checkIn","nullable","comment"]}increments(r={primaryKey:true}){p(this);return"integer not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}bigincrements(r={primaryKey:true}){p(this);return"number(20, 0) not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}floating(r){const i=g(r,0);return`float${i?`(${i})`:""}`}double(r,i){return`number(${g(r,8)}, ${g(i,2)})`}decimal(r,i){if(r===null)return"decimal";return`decimal(${g(r,8)}, ${g(i,2)})`}integer(r){return r?`number(${g(r,11)})`:"integer"}enu(r){r=u(r);const i=(r||[]).reduce(((r,i)=>Math.max(r,String(i).length)),1);this.columnBuilder._modifiers.checkIn=[r];return`varchar2(${i})`}datetime(r){return r?"timestamp":"timestamp with time zone"}timestamp(r){return r?"timestamp":"timestamp with time zone"}bool(){this.columnBuilder._modifiers.checkIn=[[0,1]];return"number(1, 0)"}varchar(r){return`varchar2(${g(r,255)})`}comment(r){const i=this.args[0]||this.defaults("columnName");this.pushAdditional((function(){this.pushQuery(`comment on column ${this.tableCompiler.tableName()}.`+this.formatter.wrap(i)+" is '"+(r||"")+"'")}),r)}checkIn(r){if(r===undefined){return""}else if(r instanceof h){r=r.toQuery()}else if(Array.isArray(r)){r=r.map((r=>`'${r}'`)).join(", ")}else{r=`'${r}'`}return`check (${this.formatter.wrap(this.args[0])} in (${r}))`}}ColumnCompiler_Oracle.prototype.tinyint="smallint";ColumnCompiler_Oracle.prototype.smallint="smallint";ColumnCompiler_Oracle.prototype.mediumint="integer";ColumnCompiler_Oracle.prototype.biginteger="number(20, 0)";ColumnCompiler_Oracle.prototype.text="clob";ColumnCompiler_Oracle.prototype.time="timestamp with time zone";ColumnCompiler_Oracle.prototype.bit="clob";ColumnCompiler_Oracle.prototype.json="clob";r.exports=ColumnCompiler_Oracle},23740:(r,i,c)=>{const u=c(3975);const h=c(74972);const d=c(2567);class SchemaCompiler_Oracle extends u{constructor(){super(...arguments)}renameTable(r,i){const c=d.renameTableAndAutoIncrementTrigger(this.client.logger,r,i);this.pushQuery(c)}hasTable(r){this.pushQuery({sql:"select TABLE_NAME from USER_TABLES where TABLE_NAME = "+this.client.parameter(r,this.builder,this.bindingsHolder),output(r){return r.length>0}})}hasColumn(r,i){const c=`select COLUMN_NAME from ALL_TAB_COLUMNS `+`where TABLE_NAME = ${this.client.parameter(r,this.builder,this.bindingsHolder)} `+`and COLUMN_NAME = ${this.client.parameter(i,this.builder,this.bindingsHolder)}`;this.pushQuery({sql:c,output:r=>r.length>0})}dropSequenceIfExists(r){const i=this.schema?`"${this.schema}".`:"";this.pushQuery(h.wrapSqlWithCatch(`drop sequence ${i}${this.formatter.wrap(r)}`,-2289))}_dropRelatedSequenceIfExists(r){const i=h.generateCombinedName(this.client.logger,"seq",r);this.dropSequenceIfExists(i)}dropTable(r){const i=this.schema?`"${this.schema}".`:"";this.pushQuery(`drop table ${i}${this.formatter.wrap(r)}`);this._dropRelatedSequenceIfExists(r)}dropTableIfExists(r){this.dropObject(r,"table")}dropViewIfExists(r){this.dropObject(r,"view")}dropObject(r,i){const c=this.schema?`"${this.schema}".`:"";let u=-942;if(i==="materialized view"){u=-12003}this.pushQuery(h.wrapSqlWithCatch(`drop ${i} ${c}${this.formatter.wrap(r)}`,u));this._dropRelatedSequenceIfExists(r)}refreshMaterializedView(r){return this.pushQuery({sql:`BEGIN DBMS_MVIEW.REFRESH('${this.schemaNameRaw?this.schemaNameRaw+".":""}${r}'); END;`})}dropMaterializedView(r){this._dropView(r,false,true)}dropMaterializedViewIfExists(r){this.dropObject(r,"materialized view")}}r.exports=SchemaCompiler_Oracle},17639:(r,i,c)=>{const u=c(74972);const h=c(31492);const d=c(79362);const p=c(2567);const{isObject:g}=c(29706);class TableCompiler_Oracle extends h{constructor(){super(...arguments)}addColumns(r,i){if(r.sql.length>0){i=i||this.addColumnsPrefix;const c=r.sql;const u=this.lowerCase?"alter table ":"ALTER TABLE ";let h=`${u}${this.tableName()} ${i}`;if(r.sql.length>1){h+=`(${c.join(", ")})`}else{h+=c.join(", ")}this.pushQuery({sql:h,bindings:r.bindings})}}renameColumn(r,i){const c=this.tableName().slice(1,-1);return this.pushQuery(p.renameColumnTrigger(this.client.logger,c,r,i))}compileAdd(r){const i=this.formatter.wrap(r);const c=this.prefixArray("add column",this.getColumns(r));return this.pushQuery({sql:`alter table ${i} ${c.join(", ")}`})}createQuery(r,i,c){const h=c&&this.tableNameLike()?" as (select * from "+this.tableNameLike()+" where 0=1)":" ("+r.sql.join(", ")+this._addChecks()+")";const d=`create table ${this.tableName()}${h}`;this.pushQuery({sql:i?u.wrapSqlWithCatch(d,-955):d,bindings:r.bindings});if(this.single.comment)this.comment(this.single.comment);if(c){this.addColumns(r,this.addColumnsPrefix)}}comment(r){this.pushQuery(`comment on table ${this.tableName()} is '${r}'`)}dropColumn(){const r=d.normalizeArr.apply(null,arguments);this.pushQuery(`alter table ${this.tableName()} drop (${this.formatter.columnize(r)})`)}_indexCommand(r,i,c){return this.formatter.wrap(u.generateCombinedName(this.client.logger,r,i,c))}primary(r,i){let c;if(g(i)){({constraintName:i,deferrable:c}=i)}c=c?` deferrable initially ${c}`:"";i=i?this.formatter.wrap(i):this.formatter.wrap(`${this.tableNameRaw}_pkey`);const u=r;let h=[];if(this.grouped.columns){h=this._getIncrementsColumnNames();if(h){h.forEach((r=>{if(!u.includes(r)){u.unshift(r)}}))}}this.pushQuery(`alter table ${this.tableName()} add constraint ${i} primary key (${this.formatter.columnize(u)})${c}`)}dropPrimary(r){r=r?this.formatter.wrap(r):this.formatter.wrap(this.tableNameRaw+"_pkey");this.pushQuery(`alter table ${this.tableName()} drop constraint ${r}`)}index(r,i){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);this.pushQuery(`create index ${i} on ${this.tableName()}`+" ("+this.formatter.columnize(r)+")")}dropIndex(r,i){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);this.pushQuery(`drop index ${i}`)}unique(r,i){let c;if(g(i)){({indexName:i,deferrable:c}=i)}c=c?` deferrable initially ${c}`:"";i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} add constraint ${i}`+" unique ("+this.formatter.columnize(r)+")"+c)}dropUnique(r,i){i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop constraint ${i}`)}dropForeign(r,i){i=i?this.formatter.wrap(i):this._indexCommand("foreign",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop constraint ${i}`)}}TableCompiler_Oracle.prototype.addColumnsPrefix="add ";TableCompiler_Oracle.prototype.alterColumnsPrefix="modify ";r.exports=TableCompiler_Oracle},74972:(r,i,c)=>{function generateCombinedName(r,i,u,h){const d=c(6113);const p=30;if(!Array.isArray(h))h=h?[h]:[];const g=u.replace(/\.|-/g,"_");const y=h.join("_");let b=`${g}_${y.length?y+"_":""}${i}`.toLowerCase();if(b.length>p){r.warn(`Automatically generated name "${b}" exceeds ${p} character `+`limit for Oracle. Using base64 encoded sha1 of that name instead.`);b=d.createHash("sha1").update(b).digest("base64").replace("=","")}return b}function wrapSqlWithCatch(r,i){return`begin execute immediate '${r.replace(/'/g,"''")}'; `+`exception when others then if sqlcode != ${i} then raise; `+`end if; `+`end;`}function ReturningHelper(r){this.columnName=r}ReturningHelper.prototype.toString=function(){return`[object ReturningHelper:${this.columnName}]`};function isConnectionError(r){return["DPI-1010","DPI-1080","ORA-03114","ORA-03113","ORA-03135","ORA-12514","ORA-00022","ORA-00028","ORA-00031","ORA-00045","ORA-00378","ORA-00602","ORA-00603","ORA-00609","ORA-01012","ORA-01041","ORA-01043","ORA-01089","ORA-01092","ORA-02396","ORA-03122","ORA-12153","ORA-12537","ORA-12547","ORA-12570","ORA-12583","ORA-27146","ORA-28511","ORA-56600","NJS-024","NJS-003"].some((function(i){return r.message.indexOf(i)===0}))}r.exports={generateCombinedName:generateCombinedName,isConnectionError:isConnectionError,wrapSqlWithCatch:wrapSqlWithCatch,ReturningHelper:ReturningHelper}},47738:(r,i,c)=>{const u=c(22759);const h=c(65922);const d=c(26901);const p=c(94328);const g=c(28935);const y=c(34661);const b=c(14566);const v=c(69277);const{BlobHelper:w,ReturningHelper:C,monkeyPatchConnection:E}=c(17159);const x=c(45256);const S=c(45226);const k=c(70866);const T=c(62007);const{isString:N}=c(29706);const{outputQuery:O,unwrapRaw:$}=c(31823);const{compileCallback:A}=c(7646);class Client_Oracledb extends T{constructor(r){super(r);if(this.driver){process.env.UV_THREADPOOL_SIZE=process.env.UV_THREADPOOL_SIZE||1;process.env.UV_THREADPOOL_SIZE=parseInt(process.env.UV_THREADPOOL_SIZE)+this.driver.poolMax}}_driver(){const r=this;const i=c(17415);r.fetchAsString=[];if(this.config.fetchAsString&&Array.isArray(this.config.fetchAsString)){this.config.fetchAsString.forEach((function(c){if(!N(c))return;c=c.toUpperCase();if(i[c]){if(c!=="NUMBER"&&c!=="DATE"&&c!=="CLOB"&&c!=="BUFFER"){this.logger.warn('Only "date", "number", "clob" and "buffer" are supported for fetchAsString')}r.fetchAsString.push(i[c])}}))}return i}queryCompiler(r,i){return new y(this,r,i)}tableCompiler(){return new b(this,...arguments)}columnCompiler(){return new v(this,...arguments)}viewBuilder(){return new S(this,...arguments)}viewCompiler(){return new x(this,...arguments)}formatter(r){return new g(this,r)}transaction(){return new k(this,...arguments)}prepBindings(r){return p(r,(r=>{if(r instanceof w&&this.driver){return{type:this.driver.BLOB,dir:this.driver.BIND_OUT}}else if(r instanceof C&&this.driver){return{type:this.driver.STRING,dir:this.driver.BIND_OUT}}else if(typeof r==="boolean"){return r?1:0}return r}))}parameter(r,i,c){if(typeof r==="function"){return O(A(r,undefined,this,c),true,i,this)}else if(r instanceof w){c.bindings.push(r.value);return"?"}return $(r,true,i,this,c)||"?"}acquireRawConnection(){const r=this;const i=new Promise((function(i,c){const u=r.connectionSettings.externalAuth?{externalAuth:r.connectionSettings.externalAuth}:{user:r.connectionSettings.user,password:r.connectionSettings.password};u.connectString=resolveConnectString(r.connectionSettings);if(r.connectionSettings.prefetchRowCount){u.prefetchRows=r.connectionSettings.prefetchRowCount}if(r.connectionSettings.stmtCacheSize!==undefined){u.stmtCacheSize=r.connectionSettings.stmtCacheSize}r.driver.fetchAsString=r.fetchAsString;r.driver.getConnection(u,(function(u,h){if(u){return c(u)}E(h,r);i(h)}))}));return i}destroyRawConnection(r){return r.release()}_query(r,i){if(!i.sql)throw new Error("The query is empty");const c={autoCommit:false};if(i.method==="select"){c.resultSet=true}return r.executeAsync(i.sql,i.bindings,c).then((async function(c){let d=h(c.outBinds);i.response=c.rows||[];i.rowsAffected=c.rows?c.rows.rowsAffected:c.rowsAffected;if(i.method==="raw"&&d.length>0){return{response:d}}if(i.method==="update"){const r=i.rowsAffected.length||i.rowsAffected;const c=[];const h=[];const updateOutBinds=i=>function(c,u){const p=u*r;h.push(d[i+p])};for(let h=0;h<r;h++){c.push(i.outBinding[0]);u(i.outBinding[0],updateOutBinds(h))}d=h;i.outBinding=c}if(!i.returning&&d.length===0){if(!r.isTransaction){await r.commitAsync()}return i}const p=[];let g=0;for(let r=0;r<i.outBinding.length;r++){const c=i.outBinding[r];g=g+(i.outBinding[r-1]?i.outBinding[r-1].length:0);for(let u=0;u<c.length;u++){const h=c[u];await new Promise((function(c,y){if(h instanceof w){const p=d[u+g];if(h.returning){i.response[r]=i.response[r]||{};i.response[r][h.columnName]=h.value}p.on("error",(function(r){y(r)}));p.on("finish",(function(){c()}));p.write(h.value);p.end()}else if(i.outBinding[r][u]==="ROWID"){p.push(d[u+g]);c()}else{i.response[r]=i.response[r]||{};i.response[r][h]=d[u+g];c()}}))}}if(r.isTransaction){return i}await r.commitAsync();if(i.returningSql){const c=await r.executeAsync(i.returningSql(),p,{resultSet:true});i.response=c.rows}return i}))}processResponse(r,i){const{response:c}=r;if(r.output){return r.output.call(i,c)}switch(r.method){case"select":return c;case"first":return c[0];case"pluck":return p(c,r.pluck);case"insert":case"del":case"update":case"counter":if(r.returning&&!d(r.returning)){return c}else if(r.rowsAffected!==undefined){return r.rowsAffected}else{return 1}default:return c}}processPassedConnection(r){E(r,this)}}Client_Oracledb.prototype.driverName="oracledb";function resolveConnectString(r){if(r.connectString){return r.connectString}if(!r.port){return r.host+"/"+r.database}return r.host+":"+r.port+"/"+r.database}r.exports=Client_Oracledb},34661:(r,i,c)=>{const u=c(83577);const h=c(22759);const d=c(26901);const p=c(64677);const g=c(27087);const y=c(17159).ReturningHelper;const b=c(17159).BlobHelper;const{isString:v}=c(29706);const{columnize:w}=c(31823);class Oracledb_Compiler extends g{insert(){const r=this;const i=this._prepOutbindings(this.single.insert,this.single.returning);const c=i.outBinding;const u=i.returning;const p=i.values;if(Array.isArray(p)&&p.length===1&&d(p[0])){const r=this.single.returning?" ("+this.formatter.wrap(this.single.returning)+")":"";return this._addReturningToSqlAndConvert("insert into "+this.tableName+r+" values (default)",c[0],this.tableName,u)}if(d(this.single.insert)&&typeof this.single.insert!=="function"){return""}const g=this._prepInsert(p);const w={};if(v(g)){return this._addReturningToSqlAndConvert("insert into "+this.tableName+" "+g,c[0],this.tableName,u)}if(g.values.length===1){return this._addReturningToSqlAndConvert("insert into "+this.tableName+" ("+this.formatter.columnize(g.columns)+") values ("+this.client.parameterize(g.values[0],undefined,this.builder,this.bindingsHolder)+")",c[0],this.tableName,u)}const C=g.columns.length===0;w.returning=u;w.sql="begin "+g.values.map((function(i,u){const d=!C?r.client.parameterize(i,r.client.valueForUndefined,r.builder,r.bindingsHolder):"";let p="insert into "+r.tableName;if(C){p+=" ("+r.formatter.wrap(r.single.returning)+") values (default)"}else{p+=" ("+r.formatter.columnize(g.columns)+") values ("+d+")"}let v="";let w="";let E="";let x="";h(i,(function(r){if(!(r instanceof b)){E+=" ?,"}}));E=E.slice(0,-1);c[u].forEach((function(i){const c=i.columnName||i;v+=r.formatter.wrap(c)+",";w+=" ?,";x+=" out ?,";if(i instanceof b){return r.formatter.bindings.push(i)}r.formatter.bindings.push(new y(c))}));v=v.slice(0,-1);w=w.slice(0,-1);x=x.slice(0,-1);if(v&&w){p+=" returning "+v+" into"+w}p=r.formatter.client.positionBindings(p);const S=d.replace(/DEFAULT, /g,"").replace(/, DEFAULT/g,"").replace("EMPTY_BLOB(), ","").replace(", EMPTY_BLOB()","");return"execute immediate '"+p.replace(/'/g,"''")+(S||i?"' using ":"")+S+(S&&x?",":"")+x+";"})).join(" ")+"end;";w.outBinding=c;if(u[0]==="*"){w.returningSql=function(){return"select * from "+r.tableName+" where ROWID in ("+this.outBinding.map((function(r,i){return":"+(i+1)})).join(", ")+")"+" order by case ROWID "+this.outBinding.map((function(r,i){return"when CHARTOROWID(:"+(i+1)+") then "+i})).join(" ")+" end"}}return w}with(){const r=[];if(this.grouped.with){for(const i of this.grouped.with){if(i.recursive){r.push(i);i.recursive=false}}}const i=super.with();for(const i of r){i.recursive=true}return i}_addReturningToSqlAndConvert(r,i,c,u){const h=this;const d={sql:r};if(!i){return d}const p=Array.isArray(i)?i:[i];let g="";let v="";p.forEach((function(r){const i=r.columnName||r;g+=h.formatter.wrap(i)+",";v+="?,";if(r instanceof b){return h.formatter.bindings.push(r)}h.formatter.bindings.push(new y(i))}));d.sql=r;g=g.slice(0,-1);v=v.slice(0,-1);if(g&&v){d.sql+=" returning "+g+" into "+v}d.outBinding=[i];if(u[0]==="*"){d.returningSql=function(){return"select * from "+h.tableName+" where ROWID = :1"}}d.returning=u;return d}_prepOutbindings(r,i){const c={};let d=r||[];let g=i||[];if(!Array.isArray(d)&&p(r)){d=[d]}if(g&&!Array.isArray(g)){g=[g]}const y=[];h(d,(function(r,i){if(g[0]==="*"){y[i]=["ROWID"]}else{y[i]=u(g)}h(r,(function(c,u){if(c instanceof Buffer){r[u]=new b(u,c);const h=y[i].indexOf(u);if(h>=0){y[i].splice(h,1);r[u].returning=true}y[i].push(r[u])}if(c===undefined){delete d[i][u]}}))}));c.returning=g;c.outBinding=y;c.values=d;return c}_groupOrder(r,i){return super._groupOrderNulls(r,i)}update(){const r=this;const i={};const c=this._prepOutbindings(this.single.update||this.single.counter,this.single.returning);const u=c.outBinding;const h=c.returning;const p=this._prepUpdate(this.single.update);const g=this.where();let v="";let w="";if(d(p)&&typeof this.single.update!=="function"){return""}u.forEach((function(i){i.forEach((function(i){const c=i.columnName||i;v+=r.formatter.wrap(c)+",";w+=" ?,";if(i instanceof b){return r.formatter.bindings.push(i)}r.formatter.bindings.push(new y(c))}))}));v=v.slice(0,-1);w=w.slice(0,-1);i.outBinding=u;i.returning=h;i.sql="update "+this.tableName+" set "+p.join(", ")+(g?" "+g:"");if(u.length&&!d(u[0])){i.sql+=" returning "+v+" into"+w}if(h[0]==="*"){i.returningSql=function(){let i="select * from "+r.tableName;const c=this.rowsAffected.length||this.rowsAffected;let u=" where ROWID in (";let h=") order by case ROWID ";for(let r=0;r<c;r++){if(this.returning[0]==="*"){u+=":"+(r+1)+", ";h+="when CHARTOROWID(:"+(r+1)+") then "+r+" "}}if(this.returning[0]==="*"){this.returning=this.returning.slice(0,-1);u=u.slice(0,-2);h=h.slice(0,-1)}return i+=u+h+" end"}}return i}_jsonPathWrap(r){return`'${r.path||r[1]}'`}jsonExtract(r){return this._jsonExtract(r.singleValue?"json_value":"json_query",r)}jsonSet(r){return`json_transform(${w(r.column,this.builder,this.client,this.bindingsHolder)}, set ${this.client.parameter(r.path,this.builder,this.bindingsHolder)} = ${this.client.parameter(r.value,this.builder,this.bindingsHolder)})`}jsonInsert(r){return`json_transform(${w(r.column,this.builder,this.client,this.bindingsHolder)}, insert ${this.client.parameter(r.path,this.builder,this.bindingsHolder)} = ${this.client.parameter(r.value,this.builder,this.bindingsHolder)})`}jsonRemove(r){const i=`json_transform(${w(r.column,this.builder,this.client,this.bindingsHolder)}, remove ${this.client.parameter(r.path,this.builder,this.bindingsHolder)})`;return r.alias?this.client.alias(i,this.formatter.wrap(r.alias)):i}whereJsonPath(r){return this._whereJsonPath("json_value",r)}whereJsonSupersetOf(r){throw new Error("Json superset where clause not actually supported by Oracle")}whereJsonSubsetOf(r){throw new Error("Json subset where clause not actually supported by Oracle")}onJsonPathEquals(r){return this._onJsonPathEquals("json_value",r)}}r.exports=Oracledb_Compiler},69277:(r,i,c)=>{const u=c(65359);const{isObject:h}=c(29706);class ColumnCompiler_Oracledb extends u{constructor(){super(...arguments);this.modifiers=["defaultTo","nullable","comment"];this._addCheckModifiers()}datetime(r){let i;if(h(r)){({useTz:i}=r)}else{i=!r}return i?"timestamp with local time zone":"timestamp"}timestamp(r){let i;if(h(r)){({useTz:i}=r)}else{i=!r}return i?"timestamp with local time zone":"timestamp"}checkRegex(r,i){return this._check(`REGEXP_LIKE(${this.formatter.wrap(this.getColumnName())},${this.client._escapeBinding(r)})`,i)}json(){return`varchar2(4000) check (${this.formatter.columnize(this.getColumnName())} is json)`}jsonb(){return this.json()}}ColumnCompiler_Oracledb.prototype.time="timestamp with local time zone";ColumnCompiler_Oracledb.prototype.uuid=({useBinaryUuid:r=false}={})=>r?"raw(16)":"char(36)";r.exports=ColumnCompiler_Oracledb},14566:(r,i,c)=>{const u=c(17639);class TableCompiler_Oracledb extends u{constructor(r,i){super(r,i)}_setNullableState(r,i){const c=i?"NULL":"NOT NULL";const u=`alter table ${this.tableName()} modify (${this.formatter.wrap(r)} ${c})`;return this.pushQuery({sql:u})}}r.exports=TableCompiler_Oracledb},45226:(r,i,c)=>{const u=c(91978);class ViewBuilder_Oracledb extends u{constructor(){super(...arguments)}checkOption(){this._single.checkOption="default_option"}}r.exports=ViewBuilder_Oracledb},45256:(r,i,c)=>{const u=c(71822);class ViewCompiler_Oracledb extends u{constructor(r,i){super(r,i)}createOrReplace(){this.createQuery(this.columns,this.selectQuery,false,true)}createMaterializedView(){this.createQuery(this.columns,this.selectQuery,true)}}r.exports=ViewCompiler_Oracledb},70866:(r,i,c)=>{const u=c(21251);const{timeout:h,KnexTimeoutError:d}=c(77903);const p=c(15087)("knex:tx");const g=["read committed","serializable"];const y=false;r.exports=class Oracle_Transaction extends u{begin(r){if(this.isolationLevel){if(y){if(!g.includes(this.isolationLevel)){this.client.logger.warn("Oracle only supports read committed and serializable transactions, ignoring the isolation level param")}else{return this.query(r,`SET TRANSACTION ${this.isolationLevel}`)}}else{this.client.logger.warn("Transaction isolation is not currently supported for Oracle")}}return Promise.resolve()}async commit(r,i){this._completed=true;try{await r.commitAsync();this._resolver(i)}catch(r){this._rejecter(r)}}release(r,i){return this._resolver(i)}rollback(r,i){this._completed=true;p("%s: rolling back",this.txid);return h(r.rollbackAsync(),5e3).catch((r=>{if(!(r instanceof d)){return Promise.reject(r)}this._rejecter(r)})).then((()=>{if(i===undefined){if(this.doNotRejectOnRollback){this._resolver();return}i=new Error(`Transaction rejected with non-error: ${i}`)}this._rejecter(i)}))}savepoint(r){return this.query(r,`SAVEPOINT ${this.txid}`)}async acquireConnection(r,i){const c=r&&r.connection;const u=c||await this.client.acquireConnection();try{u.__knexTxId=this.txid;u.isTransaction=true;return await i(u)}finally{p("%s: releasing connection",this.txid);u.isTransaction=false;try{await u.commitAsync()}catch(r){this._rejecter(r)}finally{if(!c){await this.client.releaseConnection(u)}else{p("%s: not releasing external connection",this.txid)}}}}}},17159:(r,i,c)=>{const u=c(74972);const{promisify:h}=c(73837);const d=c(12781);function BlobHelper(r,i){this.columnName=r;this.value=i;this.returning=false}BlobHelper.prototype.toString=function(){return"[object BlobHelper:"+this.columnName+"]"};function readStream(r,i){return new Promise(((c,u)=>{let h=i==="string"?"":Buffer.alloc(0);r.on("error",(function(r){u(r)}));r.on("data",(function(r){if(i==="string"){h+=r}else{h=Buffer.concat([h,r])}}));r.on("end",(function(){c(h)}))}))}const lobProcessing=function(r){const i=c(17415);let u;if(r.type){if(r.type===i.BLOB){u="buffer"}else if(r.type===i.CLOB){u="string"}}else if(r.iLob){if(r.iLob.type===i.CLOB){u="string"}else if(r.iLob.type===i.BLOB){u="buffer"}}else{throw new Error("Unrecognized oracledb lob stream type")}if(u==="string"){r.setEncoding("utf-8")}return readStream(r,u)};function monkeyPatchConnection(r,i){if(r.executeAsync){return}r.commitAsync=function(){return new Promise(((r,i)=>{this.commit((function(c){if(c){return i(c)}r()}))}))};r.rollbackAsync=function(){return new Promise(((r,i)=>{this.rollback((function(c){if(c){return i(c)}r()}))}))};const c=h((function(c,h,d,p){d=d||{};d.outFormat=i.driver.OUT_FORMAT_OBJECT||i.driver.OBJECT;if(!d.outFormat){throw new Error("not found oracledb.outFormat constants")}if(d.resultSet){r.execute(c,h||[],d,(function(i,c){if(i){if(u.isConnectionError(i)){r.close().catch((function(r){}));r.__knex__disposed=i}return p(i)}const h={rows:[],resultSet:c.resultSet};const d=100;const fetchRowsFromRS=function(r,i,c){i.getRows(c,(function(d,g){if(d){if(u.isConnectionError(d)){r.close().catch((function(r){}));r.__knex__disposed=d}i.close((function(){return p(d)}))}else if(g.length===0){return p(null,h)}else if(g.length>0){if(g.length===c){h.rows=h.rows.concat(g);fetchRowsFromRS(r,i,c)}else{h.rows=h.rows.concat(g);return p(null,h)}}}))};fetchRowsFromRS(r,c.resultSet,d)}))}else{r.execute(c,h||[],d,(function(i,c){if(i){if(u.isConnectionError(i)){r.close().catch((function(r){}));r.__knex__disposed=i}return p(i)}return p(null,c)}))}}));r.executeAsync=function(r,i,u){return c(r,i,u).then((async r=>{const closeResultSet=()=>r.resultSet?h(r.resultSet.close).call(r.resultSet):Promise.resolve();const i=[];if(r.rows){if(Array.isArray(r.rows)){for(let c=0;c<r.rows.length;c++){const u=r.rows[c];for(const r in u){if(u[r]instanceof d.Readable){i.push({index:c,key:r,stream:u[r]})}}}}}try{for(const c of i){r.rows[c.index][c.key]=await lobProcessing(c.stream)}}catch(r){await closeResultSet().catch((()=>{}));throw r}await closeResultSet();return r}))}}u.BlobHelper=BlobHelper;u.monkeyPatchConnection=monkeyPatchConnection;r.exports=u},43798:(r,i,c)=>{const u=c(97582);class Client_PgNative extends u{constructor(...r){super(...r);this.driverName="pgnative";this.canCancelQuery=true}_driver(){return c(65021).native}_stream(r,i,c,u){if(!i.sql)throw new Error("The query is empty");const h=this;return new Promise(((u,d)=>{c.on("error",d);c.on("end",u);return h._query(r,i).then((r=>r.response)).then((({rows:r})=>r.forEach((r=>c.write(r))))).catch((function(r){c.emit("error",r)})).then((function(){c.end()}))}))}async cancelQuery(r){try{return await this._wrappedCancelQueryCall(null,r)}catch(r){this.logger.warn(`Connection Error: ${r}`);throw r}}_wrappedCancelQueryCall(r,i){return new Promise((function(r,c){i.native.cancel((function(i){if(i){c(i);return}r(true)}))}))}}r.exports=Client_PgNative},1729:(r,i,c)=>{const u=c(21251);class Transaction_PG extends u{begin(r){if(this.isolationLevel){return this.query(r,`BEGIN ISOLATION LEVEL ${this.isolationLevel};`)}return this.query(r,"BEGIN;")}}r.exports=Transaction_PG},97582:(r,i,c)=>{const u=c(91363);const h=c(94328);const{promisify:d}=c(73837);const p=c(92776);const g=c(1729);const y=c(25934);const b=c(62498);const v=c(82048);const w=c(80639);const C=c(59162);const E=c(80264);const x=c(18104);const{makeEscape:S}=c(93835);const{isString:k}=c(29706);class Client_PG extends p{constructor(r){super(r);if(r.returning){this.defaultReturning=r.returning}if(r.searchPath){this.searchPath=r.searchPath}}transaction(){return new g(this,...arguments)}queryBuilder(){return new b(this)}queryCompiler(r,i){return new y(this,r,i)}columnCompiler(){return new v(this,...arguments)}schemaCompiler(){return new x(this,...arguments)}tableCompiler(){return new w(this,...arguments)}viewCompiler(){return new C(this,...arguments)}viewBuilder(){return new E(this,...arguments)}_driver(){return c(65021)}wrapIdentifierImpl(r){if(r==="*")return r;let i="";const c=r.match(/(.*?)(\[[0-9]+\])/);if(c){r=c[1];i=c[2]}return`"${r.replace(/"/g,'""')}"${i}`}_acquireOnlyConnection(){const r=new this.driver.Client(this.connectionSettings);return r.connect().then((()=>r))}acquireRawConnection(){const r=this;return this._acquireOnlyConnection().then((function(i){i.on("error",(r=>{i.__knex__disposed=r}));i.on("end",(r=>{i.__knex__disposed=r||"Connection ended unexpectedly"}));if(!r.version){return r.checkVersion(i).then((function(c){r.version=c;return i}))}return i})).then((async function setSearchPath(i){await r.setSchemaSearchPath(i);return i}))}async destroyRawConnection(r){const i=d((i=>r.end(i)));return i()}checkVersion(r){return new Promise(((i,c)=>{r.query("select version();",((r,u)=>{if(r)return c(r);i(this._parseVersion(u.rows[0].version))}))}))}_parseVersion(r){return/^PostgreSQL (.*?)( |$)/.exec(r)[1]}positionBindings(r){let i=0;return r.replace(/(\\*)(\?)/g,(function(r,c){if(c.length%2){return"?"}else{i++;return`$${i}`}}))}setSchemaSearchPath(r,i){let c=i||this.searchPath;if(!c)return Promise.resolve(true);if(!Array.isArray(c)&&!k(c)){throw new TypeError(`knex: Expected searchPath to be Array/String, got: ${typeof c}`)}if(k(c)){if(c.includes(",")){const r=c.split(",");const i=`[${r.map((r=>`'${r}'`)).join(", ")}]`;this.logger.warn(`Detected comma in searchPath "${c}".`+`If you are trying to specify multiple schemas, use Array syntax: ${i}`)}c=[c]}c=c.map((r=>`"${r}"`)).join(",");return new Promise((function(i,u){r.query(`set search_path to ${c}`,(function(r){if(r)return u(r);i(true)}))}))}_stream(r,i,u,h){if(!i.sql)throw new Error("The query is empty");const d=process.browser?undefined:c(9276);const p=i.sql;return new Promise((function(c,g){const y=r.query(new d(p,i.bindings,h));y.on("error",(function(r){g(r);u.emit("error",r)}));u.on("end",c);y.pipe(u)}))}_query(r,i){if(!i.sql)throw new Error("The query is empty");let c={text:i.sql,values:i.bindings||[]};if(i.options){c=u(c,i.options)}return new Promise((function(u,h){r.query(c,(function(r,c){if(r)return h(r);i.response=c;u(i)}))}))}processResponse(r,i){const c=r.response;if(r.output)return r.output.call(i,c);if(r.method==="raw")return c;const{returning:u}=r;if(c.command==="SELECT"){if(r.method==="first")return c.rows[0];if(r.method==="pluck")return h(c.rows,r.pluck);return c.rows}if(u){const r=[];for(let i=0,u=c.rows.length;i<u;i++){const u=c.rows[i];r[i]=u}return r}if(c.command==="UPDATE"||c.command==="DELETE"){return c.rowCount}return c}async cancelQuery(r){const i=await this.acquireRawConnection();try{return await this._wrappedCancelQueryCall(i,r)}finally{await this.destroyRawConnection(i).catch((r=>{this.logger.warn(`Connection Error: ${r}`)}))}}_wrappedCancelQueryCall(r,i){return this._query(r,{sql:"SELECT pg_cancel_backend($1);",bindings:[i.processID],options:{}})}toPathForJson(r){const i=/^{.*}$/;if(r.match(i)){return r}return"{"+r.replace(/^(\$\.)/,"").replace(".",",").replace(/\[([0-9]+)]/,",$1")+"}"}}Object.assign(Client_PG.prototype,{dialect:"postgresql",driverName:"pg",canCancelQuery:true,_escapeBinding:S({escapeArray(r,i){return i(arrayString(r,i))},escapeString(r){let i=false;let c="'";for(let u=0;u<r.length;u++){const h=r[u];if(h==="'"){c+=h+h}else if(h==="\\"){c+=h+h;i=true}else{c+=h}}c+="'";if(i===true){c="E"+c}return c},escapeObject(r,i,c,u=[]){if(r&&typeof r.toPostgres==="function"){u=u||[];if(u.indexOf(r)!==-1){throw new Error(`circular reference detected while preparing "${r}" for query`)}u.push(r);return i(r.toPostgres(i),u)}return JSON.stringify(r)}})});function arrayString(r,i){let c="{";for(let u=0;u<r.length;u++){if(u>0)c+=",";const h=r[u];if(h===null||typeof h==="undefined"){c+="NULL"}else if(Array.isArray(h)){c+=arrayString(h,i)}else if(typeof h==="number"){c+=h}else{c+=JSON.stringify(typeof h==="string"?h:i(h))}}return c+"}"}r.exports=Client_PG},62498:(r,i,c)=>{const u=c(26447);r.exports=class QueryBuilder_PostgreSQL extends u{using(r){this._single.using=r;return this}withMaterialized(r,i,c){this._validateWithArgs(r,i,c,"with");return this.withWrapped(r,i,c,true)}withNotMaterialized(r,i,c){this._validateWithArgs(r,i,c,"with");return this.withWrapped(r,i,c,false)}}},25934:(r,i,c)=>{const u=c(54945);const h=c(28847);const d=c(8697);const{wrapString:p,columnize:g,operator:y,wrap:b}=c(31823);class QueryCompiler_PG extends d{constructor(r,i,c){super(r,i,c);this._defaultInsertValue="default"}truncate(){return`truncate ${this.tableName} restart identity`}insert(){let r=super.insert();if(r==="")return r;const{returning:i,onConflict:c,ignore:u,merge:h,insert:d}=this.single;if(c&&u)r+=this._ignore(c);if(c&&h){r+=this._merge(h.updates,c,d);const i=this.where();if(i)r+=` ${i}`}if(i)r+=this._returning(i);return{sql:r,returning:i}}update(){const r=this.with();const i=this._prepUpdate(this.single.update);const c=this.where();const{returning:u}=this.single;return{sql:r+`update ${this.single.only?"only ":""}${this.tableName} `+`set ${i.join(", ")}`+(c?` ${c}`:"")+this._returning(u),returning:u}}using(){const r=this.single.using;if(!r)return;let i="using ";if(Array.isArray(r)){i+=r.map((r=>this.formatter.wrap(r))).join(",")}else{i+=this.formatter.wrap(r)}return i}del(){const{tableName:r}=this;const i=this.with();let c=this.where()||"";let u=this.using()||"";const h=this.grouped.join;const d=[];if(Array.isArray(h)){for(const r of h){d.push(b(this._joinTable(r),undefined,this.builder,this.client,this.bindingsHolder));const i=[];for(const c of r.clauses){i.push(this.whereBasic({column:c.column,operator:"=",value:c.value,asColumn:true}))}if(i.length>0){c+=(c?" and ":"where ")+i.join(" and ")}}if(d.length>0){u+=(u?",":"using ")+d.join(",")}}const p=i+`delete from ${this.single.only?"only ":""}${r}`+(u?` ${u}`:"")+(c?` ${c}`:"");const{returning:g}=this.single;return{sql:p+this._returning(g),returning:g}}aggregate(r){return this._aggregate(r,{distinctParentheses:true})}_returning(r){return r?` returning ${this.formatter.columnize(r)}`:""}_ignore(r){if(r===true){return" on conflict do nothing"}return` on conflict ${this._onConflictClause(r)} do nothing`}_merge(r,i,c){let u=` on conflict ${this._onConflictClause(i)} do update set `;if(r&&Array.isArray(r)){u+=r.map((r=>p(r.split(".").pop(),this.formatter.builder,this.client,this.formatter))).map((r=>`${r} = excluded.${r}`)).join(", ");return u}else if(r&&typeof r==="object"){const i=this._prepUpdate(r);if(typeof i==="string"){u+=i}else{u+=i.join(",")}return u}else{const r=this._prepInsert(c);if(typeof r==="string"){throw new Error("If using merge with a raw insert query, then updates must be provided")}u+=r.columns.map((r=>p(r.split(".").pop(),this.builder,this.client))).map((r=>`${r} = excluded.${r}`)).join(", ");return u}}_tableNames(r){const i=this.single.schema;const c=[];for(let u=0;u<r.length;u++){let h=r[u];if(h){if(i){h=`${i}.${h}`}c.push(this.formatter.wrap(h))}}return c.join(", ")}_lockingClause(r){const i=this.single.lockTables||[];return r+(i.length?" of "+this._tableNames(i):"")}_groupOrder(r,i){return super._groupOrderNulls(r,i)}forUpdate(){return this._lockingClause("for update")}forShare(){return this._lockingClause("for share")}forNoKeyUpdate(){return this._lockingClause("for no key update")}forKeyShare(){return this._lockingClause("for key share")}skipLocked(){return"skip locked"}noWait(){return"nowait"}columnInfo(){const r=this.single.columnInfo;let i=this.single.schema;const c=this.client.customWrapIdentifier(this.single.table,u);if(i){i=this.client.customWrapIdentifier(i,u)}const h="select * from information_schema.columns where table_name = ? and table_catalog = current_database()";const d=[c];return this._buildColumnInfoQuery(i,h,d,r)}_buildColumnInfoQuery(r,i,c,u){if(r){i+=" and table_schema = ?";c.push(r)}else{i+=" and table_schema = current_schema()"}return{sql:i,bindings:c,output(r){const i=h(r.rows,(function(r,i){r[i.column_name]={type:i.data_type,maxLength:i.character_maximum_length,nullable:i.is_nullable==="YES",defaultValue:i.column_default};return r}),{});return u&&i[u]||i}}}distinctOn(r){return"distinct on ("+this.formatter.columnize(r)+") "}jsonExtract(r){return this._jsonExtract("jsonb_path_query",r)}jsonSet(r){return this._jsonSet("jsonb_set",Object.assign({},r,{path:this.client.toPathForJson(r.path)}))}jsonInsert(r){return this._jsonSet("jsonb_insert",Object.assign({},r,{path:this.client.toPathForJson(r.path)}))}jsonRemove(r){const i=`${g(r.column,this.builder,this.client,this.bindingsHolder)} #- ${this.client.parameter(this.client.toPathForJson(r.path),this.builder,this.bindingsHolder)}`;return r.alias?this.client.alias(i,this.formatter.wrap(r.alias)):i}whereJsonPath(r){let i="";if(!isNaN(r.value)&&parseInt(r.value)){i="::int"}else if(!isNaN(r.value)&&parseFloat(r.value)){i="::float"}else{i=" #>> '{}'"}return`jsonb_path_query_first(${this._columnClause(r)}, ${this.client.parameter(r.jsonPath,this.builder,this.bindingsHolder)})${i} ${y(r.operator,this.builder,this.client,this.bindingsHolder)} ${this._jsonValueClause(r)}`}whereJsonSupersetOf(r){return this._not(r,`${b(r.column,undefined,this.builder,this.client,this.bindingsHolder)} @> ${this._jsonValueClause(r)}`)}whereJsonSubsetOf(r){return this._not(r,`${g(r.column,this.builder,this.client,this.bindingsHolder)} <@ ${this._jsonValueClause(r)}`)}onJsonPathEquals(r){return this._onJsonPathEquals("jsonb_path_query_first",r)}}r.exports=QueryCompiler_PG},82048:(r,i,c)=>{const u=c(10208);const{isObject:h}=c(29706);const{toNumber:d}=c(79362);const p=/(?<!')'(?!')/g;class ColumnCompiler_PG extends u{constructor(r,i,c){super(r,i,c);this.modifiers=["nullable","defaultTo","comment"];this._addCheckModifiers()}bit(r){return r.length!==false?`bit(${r.length})`:"bit"}enu(r,i){i=i||{};const c=i.useNative&&i.existingType?undefined:r.join("', '");if(i.useNative){let r="";const u=i.schemaName||this.tableCompiler.schemaNameRaw;if(u){r+=`"${u}".`}r+=`"${i.enumName}"`;if(!i.existingType){this.tableCompiler.unshiftQuery(`create type ${r} as enum ('${c}')`)}return r}return`text check (${this.formatter.wrap(this.args[0])} in ('${c}'))`}decimal(r,i){if(r===null)return"decimal";return`decimal(${d(r,8)}, ${d(i,2)})`}json(r){if(r)this.client.logger.deprecate("json(true)","jsonb()");return jsonColumn(this.client,r)}jsonb(){return jsonColumn(this.client,true)}checkRegex(r,i){return this._check(`${this.formatter.wrap(this.getColumnName())} ~ ${this.client._escapeBinding(r)}`,i)}datetime(r=false,i){let c;if(h(r)){({useTz:c,precision:i}=r)}else{c=!r}c=typeof c==="boolean"?c:true;i=i!==undefined&&i!==null?"("+i+")":"";return`${c?"timestamptz":"timestamp"}${i}`}timestamp(r=false,i){return this.datetime(r,i)}comment(r){const i=this.args[0]||this.defaults("columnName");const c=r?`'${r.replace(p,"''")}'`:"NULL";this.pushAdditional((function(){this.pushQuery(`comment on column ${this.tableCompiler.tableName()}.`+this.formatter.wrap(i)+` is ${c}`)}),r)}increments(r={primaryKey:true}){return"serial"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}bigincrements(r={primaryKey:true}){return"bigserial"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}uuid(r={primaryKey:false}){return"uuid"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")}}ColumnCompiler_PG.prototype.bigint="bigint";ColumnCompiler_PG.prototype.binary="bytea";ColumnCompiler_PG.prototype.bool="boolean";ColumnCompiler_PG.prototype.double="double precision";ColumnCompiler_PG.prototype.floating="real";ColumnCompiler_PG.prototype.smallint="smallint";ColumnCompiler_PG.prototype.tinyint="smallint";function jsonColumn(r,i){if(!r.version||r.config.client==="cockroachdb"||r.config.jsonbSupport===true||parseFloat(r.version)>=9.2){return i?"jsonb":"json"}return"text"}r.exports=ColumnCompiler_PG},18104:(r,i,c)=>{const u=c(3975);class SchemaCompiler_PG extends u{constructor(r,i){super(r,i)}hasTable(r){let i="select * from information_schema.tables where table_name = ?";const c=[r];if(this.schema){i+=" and table_schema = ?";c.push(this.schema)}else{i+=" and table_schema = current_schema()"}this.pushQuery({sql:i,bindings:c,output(r){return r.rows.length>0}})}hasColumn(r,i){let c="select * from information_schema.columns where table_name = ? and column_name = ?";const u=[r,i];if(this.schema){c+=" and table_schema = ?";u.push(this.schema)}else{c+=" and table_schema = current_schema()"}this.pushQuery({sql:c,bindings:u,output(r){return r.rows.length>0}})}qualifiedTableName(r){const i=this.schema?`${this.schema}.${r}`:r;return this.formatter.wrap(i)}renameTable(r,i){this.pushQuery(`alter table ${this.qualifiedTableName(r)} rename to ${this.formatter.wrap(i)}`)}createSchema(r){this.pushQuery(`create schema ${this.formatter.wrap(r)}`)}createSchemaIfNotExists(r){this.pushQuery(`create schema if not exists ${this.formatter.wrap(r)}`)}dropSchema(r,i=false){this.pushQuery(`drop schema ${this.formatter.wrap(r)}${i?" cascade":""}`)}dropSchemaIfExists(r,i=false){this.pushQuery(`drop schema if exists ${this.formatter.wrap(r)}${i?" cascade":""}`)}dropExtension(r){this.pushQuery(`drop extension ${this.formatter.wrap(r)}`)}dropExtensionIfExists(r){this.pushQuery(`drop extension if exists ${this.formatter.wrap(r)}`)}createExtension(r){this.pushQuery(`create extension ${this.formatter.wrap(r)}`)}createExtensionIfNotExists(r){this.pushQuery(`create extension if not exists ${this.formatter.wrap(r)}`)}renameView(r,i){this.pushQuery(this.alterViewPrefix+`${this.formatter.wrap(r)} rename to ${this.formatter.wrap(i)}`)}refreshMaterializedView(r,i=false){this.pushQuery({sql:`refresh materialized view${i?" concurrently":""} ${this.formatter.wrap(r)}`})}dropMaterializedView(r){this._dropView(r,false,true)}dropMaterializedViewIfExists(r){this._dropView(r,true,true)}}r.exports=SchemaCompiler_PG},80639:(r,i,c)=>{const u=c(88524);const h=c(31492);const{isObject:d,isString:p}=c(29706);class TableCompiler_PG extends h{constructor(r,i){super(r,i)}renameColumn(r,i){return this.pushQuery({sql:`alter table ${this.tableName()} rename ${this.formatter.wrap(r)} to ${this.formatter.wrap(i)}`})}_setNullableState(r,i){const c=i?"drop not null":"set not null";const u=`alter table ${this.tableName()} alter column ${this.formatter.wrap(r)} ${c}`;return this.pushQuery({sql:u})}compileAdd(r){const i=this.formatter.wrap(r);const c=this.prefixArray("add column",this.getColumns(r));return this.pushQuery({sql:`alter table ${i} ${c.join(", ")}`})}createQuery(r,i,c){const h=i?"create table if not exists ":"create table ";const d=` (${r.sql.join(", ")}${this.primaryKeys()||""}${this._addChecks()})`;let p=h+this.tableName()+(c&&this.tableNameLike()?" (like "+this.tableNameLike()+" including all"+(r.sql.length?", "+r.sql.join(", "):"")+")":d);if(this.single.inherits)p+=` inherits (${this.formatter.wrap(this.single.inherits)})`;this.pushQuery({sql:p,bindings:r.bindings});const g=u(this.single,"comment");if(g)this.comment(this.single.comment)}primaryKeys(){const r=(this.grouped.alterTable||[]).filter((r=>r.method==="primary"));if(r.length>0&&r[0].args.length>0){const i=r[0].args[0];let c=r[0].args[1]||"";let u;if(d(c)){({constraintName:c,deferrable:u}=c)}u=u?` deferrable initially ${u}`:"";c=c?this.formatter.wrap(c):this.formatter.wrap(`${this.tableNameRaw}_pkey`);return`, constraint ${c} primary key (${this.formatter.columnize(i)})${u}`}}addColumns(r,i,c){if(i===this.alterColumnsPrefix){for(const r of c){this._addColumn(r)}}else{super.addColumns(r,i)}}_addColumn(r){const i=this.tableName();const c=r.getColumnType();const u=this.client.wrapIdentifier(r.getColumnName(),r.columnBuilder.queryContext());const h=r.type==="enu";this.pushQuery({sql:`alter table ${i} alter column ${u} drop default`,bindings:[]});const d=r.columnBuilder.alterNullable;if(d){this.pushQuery({sql:`alter table ${i} alter column ${u} drop not null`,bindings:[]})}const p=r.columnBuilder.alterType;if(p){this.pushQuery({sql:`alter table ${i} alter column ${u} type ${c} using (${u}${h?"::text::":"::"}${c})`,bindings:[]})}const g=r.modified["defaultTo"];if(g){const c=r.defaultTo.apply(r,g);this.pushQuery({sql:`alter table ${i} alter column ${u} set ${c}`,bindings:[]})}if(d){const c=r.modified["nullable"];if(c&&c[0]===false){this.pushQuery({sql:`alter table ${i} alter column ${u} set not null`,bindings:[]})}}}comment(r){this.pushQuery(`comment on table ${this.tableName()} is '${this.single.comment}'`)}primary(r,i){let c;if(d(i)){({constraintName:i,deferrable:c}=i)}c=c?` deferrable initially ${c}`:"";i=i?this.formatter.wrap(i):this.formatter.wrap(`${this.tableNameRaw}_pkey`);if(this.method!=="create"&&this.method!=="createIfNot"){this.pushQuery(`alter table ${this.tableName()} add constraint ${i} primary key (${this.formatter.columnize(r)})${c}`)}}unique(r,i){let c;if(d(i)){({indexName:i,deferrable:c}=i)}c=c?` deferrable initially ${c}`:"";i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} add constraint ${i}`+" unique ("+this.formatter.columnize(r)+")"+c)}index(r,i,c){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);let u;let h;if(p(c)){h=c}else if(d(c)){({indexType:h,predicate:u}=c)}const g=u?" "+this.client.queryCompiler(u).where():"";this.pushQuery(`create index ${i} on ${this.tableName()}${h&&` using ${h}`||""}`+" ("+this.formatter.columnize(r)+")"+`${g}`)}dropPrimary(r){r=r?this.formatter.wrap(r):this.formatter.wrap(this.tableNameRaw+"_pkey");this.pushQuery(`alter table ${this.tableName()} drop constraint ${r}`)}dropIndex(r,i){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);i=this.schemaNameRaw?`${this.formatter.wrap(this.schemaNameRaw)}.${i}`:i;this.pushQuery(`drop index ${i}`)}dropUnique(r,i){i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop constraint ${i}`)}dropForeign(r,i){i=i?this.formatter.wrap(i):this._indexCommand("foreign",this.tableNameRaw,r);this.pushQuery(`alter table ${this.tableName()} drop constraint ${i}`)}}r.exports=TableCompiler_PG},80264:(r,i,c)=>{const u=c(91978);class ViewBuilder_PG extends u{constructor(){super(...arguments)}checkOption(){this._single.checkOption="default_option"}localCheckOption(){this._single.checkOption="local"}cascadedCheckOption(){this._single.checkOption="cascaded"}}r.exports=ViewBuilder_PG},59162:(r,i,c)=>{const u=c(71822);class ViewCompiler_PG extends u{constructor(r,i){super(r,i)}renameColumn(r,i){return this.pushQuery({sql:`alter view ${this.viewName()} rename ${this.formatter.wrap(r)} to ${this.formatter.wrap(i)}`})}defaultTo(r,i){return this.pushQuery({sql:`alter view ${this.viewName()} alter ${this.formatter.wrap(r)} set default ${i}`})}createOrReplace(){this.createQuery(this.columns,this.selectQuery,false,true)}createMaterializedView(){this.createQuery(this.columns,this.selectQuery,true)}}r.exports=ViewCompiler_PG},50919:(r,i,c)=>{const u=c(97582);const h=c(94328);const d=c(10355);const p=c(3524);const g=c(95758);const y=c(35957);const b=c(20458);const v=c(82987);const w=c(32255);class Client_Redshift extends u{transaction(){return new d(this,...arguments)}queryCompiler(r,i){return new p(this,r,i)}columnBuilder(){return new g(this,...arguments)}columnCompiler(){return new y(this,...arguments)}tableCompiler(){return new b(this,...arguments)}schemaCompiler(){return new v(this,...arguments)}viewCompiler(){return new w(this,...arguments)}_driver(){return c(65021)}processResponse(r,i){const c=r.response;if(r.output)return r.output.call(i,c);if(r.method==="raw")return c;if(c.command==="SELECT"){if(r.method==="first")return c.rows[0];if(r.method==="pluck")return h(c.rows,r.pluck);return c.rows}if(c.command==="INSERT"||c.command==="UPDATE"||c.command==="DELETE"){return c.rowCount}return c}toPathForJson(r,i,c){return r.replace(/^(\$\.)/,"").split(".").map(function(r){return this.parameter(r,i,c)}.bind(this)).join(", ")}}Object.assign(Client_Redshift.prototype,{dialect:"redshift",driverName:"pg-redshift"});r.exports=Client_Redshift},3524:(r,i,c)=>{const u=c(8697);const h=c(25934);const d=c(54945);const{columnize:p}=c(31823);class QueryCompiler_Redshift extends h{truncate(){return`truncate ${this.tableName.toLowerCase()}`}insert(){const r=u.prototype.insert.apply(this,arguments);if(r==="")return r;this._slightReturn();return{sql:r}}update(){const r=u.prototype.update.apply(this,arguments);this._slightReturn();return{sql:r}}del(){const r=u.prototype.del.apply(this,arguments);this._slightReturn();return{sql:r}}_slightReturn(){if(this.single.isReturning){this.client.logger.warn("insert/update/delete returning is not supported by redshift dialect")}}forUpdate(){this.client.logger.warn("table lock is not supported by redshift dialect");return""}forShare(){this.client.logger.warn("lock for share is not supported by redshift dialect");return""}forNoKeyUpdate(){this.client.logger.warn("table lock is not supported by redshift dialect");return""}forKeyShare(){this.client.logger.warn("lock for share is not supported by redshift dialect");return""}columnInfo(){const r=this.single.columnInfo;let i=this.single.schema;const c=this.client.customWrapIdentifier(this.single.table,d);if(i){i=this.client.customWrapIdentifier(i,d)}const u="select * from information_schema.columns where table_name = ? and table_catalog = ?";const h=[c.toLowerCase(),this.client.database().toLowerCase()];return this._buildColumnInfoQuery(i,u,h,r)}jsonExtract(r){let i;if(Array.isArray(r.column)){i=r.column}else{i=[r]}return i.map((i=>{const c=`json_extract_path_text(${p(i.column||i[0],this.builder,this.client,this.bindingsHolder)}, ${this.client.toPathForJson(r.path||i[1],this.builder,this.bindingsHolder)})`;const u=i.alias||i[2];return u?this.client.alias(c,this.formatter.wrap(u)):c})).join(", ")}jsonSet(r){throw new Error("Json set is not supported by Redshift")}jsonInsert(r){throw new Error("Json insert is not supported by Redshift")}jsonRemove(r){throw new Error("Json remove is not supported by Redshift")}whereJsonPath(r){return this._whereJsonPath("json_extract_path_text",Object.assign({},r,{path:this.client.toPathForJson(r.path)}))}whereJsonSupersetOf(r){throw new Error("Json superset is not supported by Redshift")}whereJsonSubsetOf(r){throw new Error("Json subset is not supported by Redshift")}onJsonPathEquals(r){return this._onJsonPathEquals("json_extract_path_text",r)}}r.exports=QueryCompiler_Redshift},95758:(r,i,c)=>{const u=c(20064);class ColumnBuilder_Redshift extends u{constructor(){super(...arguments)}primary(){this.notNullable();return super.primary(...arguments)}index(){this.client.logger.warn("Redshift does not support the creation of indexes.");return this}}r.exports=ColumnBuilder_Redshift},35957:(r,i,c)=>{const u=c(82048);const h=c(10208);class ColumnCompiler_Redshift extends u{constructor(){super(...arguments)}bit(r){return r.length!==false?`char(${r.length})`:"char(1)"}datetime(r){return r?"timestamp":"timestamptz"}timestamp(r){return r?"timestamp":"timestamptz"}comment(r){this.pushAdditional((function(){this.pushQuery(`comment on column ${this.tableCompiler.tableName()}.`+this.formatter.wrap(this.args[0])+" is "+(r?`'${r}'`:"NULL"))}),r)}}ColumnCompiler_Redshift.prototype.increments=({primaryKey:r=true}={})=>"integer identity(1,1)"+(r?" primary key":"")+" not null";ColumnCompiler_Redshift.prototype.bigincrements=({primaryKey:r=true}={})=>"bigint identity(1,1)"+(r?" primary key":"")+" not null";ColumnCompiler_Redshift.prototype.binary="varchar(max)";ColumnCompiler_Redshift.prototype.blob="varchar(max)";ColumnCompiler_Redshift.prototype.enu="varchar(255)";ColumnCompiler_Redshift.prototype.enum="varchar(255)";ColumnCompiler_Redshift.prototype.json="varchar(max)";ColumnCompiler_Redshift.prototype.jsonb="varchar(max)";ColumnCompiler_Redshift.prototype.longblob="varchar(max)";ColumnCompiler_Redshift.prototype.mediumblob="varchar(16777218)";ColumnCompiler_Redshift.prototype.set="text";ColumnCompiler_Redshift.prototype.text="varchar(max)";ColumnCompiler_Redshift.prototype.tinyblob="varchar(256)";ColumnCompiler_Redshift.prototype.uuid=h.prototype.uuid;ColumnCompiler_Redshift.prototype.varbinary="varchar(max)";ColumnCompiler_Redshift.prototype.bigint="bigint";ColumnCompiler_Redshift.prototype.bool="boolean";ColumnCompiler_Redshift.prototype.double="double precision";ColumnCompiler_Redshift.prototype.floating="real";ColumnCompiler_Redshift.prototype.smallint="smallint";ColumnCompiler_Redshift.prototype.tinyint="smallint";r.exports=ColumnCompiler_Redshift},82987:(r,i,c)=>{const u=c(18104);class SchemaCompiler_Redshift extends u{constructor(){super(...arguments)}}r.exports=SchemaCompiler_Redshift},20458:(r,i,c)=>{const u=c(88524);const h=c(80639);class TableCompiler_Redshift extends h{constructor(){super(...arguments)}index(r,i,c){this.client.logger.warn("Redshift does not support the creation of indexes.")}dropIndex(r,i){this.client.logger.warn("Redshift does not support the deletion of indexes.")}createQuery(r,i,c){const h=i?"create table if not exists ":"create table ";const d=" ("+r.sql.join(", ")+this._addChecks()+")";let p=h+this.tableName()+(c&&this.tableNameLike()?" (like "+this.tableNameLike()+")":d);if(this.single.inherits)p+=` like (${this.formatter.wrap(this.single.inherits)})`;this.pushQuery({sql:p,bindings:r.bindings});const g=u(this.single,"comment");if(g)this.comment(this.single.comment);if(c){this.addColumns(r,this.addColumnsPrefix)}}primary(r,i){const c=this;i=i?c.formatter.wrap(i):c.formatter.wrap(`${this.tableNameRaw}_pkey`);if(r.constructor!==Array){r=[r]}const u=c.grouped.columns;if(u){for(let i=0;i<r.length;i++){let c=u.find((c=>c.grouping==="columns"&&c.builder&&c.builder._method==="add"&&c.builder._args&&c.builder._args.indexOf(r[i])>-1));if(c){c=c.builder}const h=!(c&&c._modifiers&&c._modifiers["nullable"]&&c._modifiers["nullable"][0]===false);if(h){if(c){return this.client.logger.warn("Redshift does not allow primary keys to contain nullable columns.")}else{return this.client.logger.warn("Redshift does not allow primary keys to contain nonexistent columns.")}}}}return c.pushQuery(`alter table ${c.tableName()} add constraint ${i} primary key (${c.formatter.columnize(r)})`)}addColumns(r,i,c){if(i===this.alterColumnsPrefix){super.addColumns(r,i,c)}else{i=i||this.addColumnsPrefix;c=c||this.getColumns();for(const r of c){const c=this.tableName();const u=r.compileColumn();this.pushQuery({sql:`alter table ${c} ${i}${u}`,bindings:[]})}}}}r.exports=TableCompiler_Redshift},32255:(r,i,c)=>{const u=c(59162);class ViewCompiler_Redshift extends u{constructor(r,i){super(r,i)}}r.exports=ViewCompiler_Redshift},10355:(r,i,c)=>{const u=c(21251);r.exports=class Redshift_Transaction extends u{begin(r){if(this.isolationLevel){return this.query(r,`BEGIN ISOLATION LEVEL ${this.isolationLevel};`)}return this.query(r,"BEGIN;")}savepoint(r){this.trxClient.logger("Redshift does not support savepoints.");return Promise.resolve()}release(r,i){this.trxClient.logger("Redshift does not support savepoints.");return Promise.resolve()}rollbackTo(r,i){this.trxClient.logger("Redshift does not support savepoints.");return Promise.resolve()}}},84860:(r,i,c)=>{const u=c(21251);class Transaction_Sqlite extends u{begin(r){if(this.isolationLevel){this.client.logger.warn("sqlite3 only supports serializable transactions, ignoring the isolation level param")}return this.query(r,"BEGIN;")}}r.exports=Transaction_Sqlite},94839:(r,i,c)=>{const u=c(73614);const h=c(94328);const{promisify:d}=c(73837);const p=c(92776);const g=c(45114);const y=c(84860);const b=c(6684);const v=c(96525);const w=c(28848);const C=c(66332);const E=c(74080);const x=c(14850);const S=c(28935);const k=c(55608);class Client_SQLite3 extends p{constructor(r){super(r);if(r.connection&&r.connection.filename===undefined){this.logger.warn("Could not find `connection.filename` in config. Please specify "+"the database path and name to avoid errors. "+"(see docs https://knexjs.org/guide/#configuration-options)")}if(r.useNullAsDefault===undefined){this.logger.warn("sqlite does not support inserting default values. Set the "+"`useNullAsDefault` flag to hide this warning. "+"(see docs https://knexjs.org/guide/query-builder.html#insert).")}}_driver(){return c(97010)}schemaCompiler(){return new v(this,...arguments)}transaction(){return new y(this,...arguments)}queryCompiler(r,i){return new b(this,r,i)}queryBuilder(){return new k(this)}viewCompiler(r,i){return new E(this,r,i)}columnCompiler(){return new w(this,...arguments)}tableCompiler(){return new C(this,...arguments)}ddl(r,i,c){return new x(this,r,i,c)}wrapIdentifierImpl(r){return r!=="*"?`\`${r.replace(/`/g,"``")}\``:"*"}acquireRawConnection(){return new Promise(((r,i)=>{let c=this.driver.OPEN_READWRITE|this.driver.OPEN_CREATE;if(this.connectionSettings.flags){if(!Array.isArray(this.connectionSettings.flags)){throw new Error(`flags must be an array of strings`)}this.connectionSettings.flags.forEach((r=>{if(!r.startsWith("OPEN_")||!this.driver[r]){throw new Error(`flag ${r} not supported by node-sqlite3`)}c=c|this.driver[r]}))}const u=new this.driver.Database(this.connectionSettings.filename,c,(c=>{if(c){return i(c)}r(u)}))}))}async destroyRawConnection(r){const i=d((i=>r.close(i)));return i()}_query(r,i){if(!i.sql)throw new Error("The query is empty");const{method:c}=i;let u;switch(c){case"insert":case"update":u=i.returning?"all":"run";break;case"counter":case"del":u="run";break;default:u="all"}return new Promise((function(c,h){if(!r||!r[u]){return h(new Error(`Error calling ${u} on connection.`))}r[u](i.sql,i.bindings,(function(r,u){if(r)return h(r);i.response=u;i.context=this;return c(i)}))}))}_stream(r,i,c){if(!i.sql)throw new Error("The query is empty");const u=this;return new Promise((function(h,d){c.on("error",d);c.on("end",h);return u._query(r,i).then((r=>r.response)).then((r=>r.forEach((r=>c.write(r))))).catch((function(r){c.emit("error",r)})).then((function(){c.end()}))}))}processResponse(r,i){const c=r.context;const{response:u,returning:d}=r;if(r.output)return r.output.call(i,u);switch(r.method){case"select":return u;case"first":return u[0];case"pluck":return h(u,r.pluck);case"insert":{if(d){if(u){return u}}return[c.lastID]}case"update":{if(d){if(u){return u}}return c.changes}case"del":case"counter":return c.changes;default:{return u}}}poolDefaults(){return u({min:1,max:1},super.poolDefaults())}formatter(r){return new S(this,r)}values(r,i,c){if(Array.isArray(r)){if(Array.isArray(r[0])){return`( values ${r.map((r=>`(${this.parameterize(r,undefined,i,c)})`)).join(", ")})`}return`(${this.parameterize(r,undefined,i,c)})`}if(r instanceof g){return`(${this.parameter(r,i,c)})`}return this.parameter(r,i,c)}}Object.assign(Client_SQLite3.prototype,{dialect:"sqlite3",driverName:"sqlite3"});r.exports=Client_SQLite3},55608:(r,i,c)=>{const u=c(26447);r.exports=class QueryBuilder_SQLite3 extends u{withMaterialized(r,i,c){this._validateWithArgs(r,i,c,"with");return this.withWrapped(r,i,c,true)}withNotMaterialized(r,i,c){this._validateWithArgs(r,i,c,"with");return this.withWrapped(r,i,c,false)}}},6684:(r,i,c)=>{const u=c(55028);const h=c(22759);const d=c(54945);const p=c(26901);const g=c(28847);const y=c(8697);const b=c(70654);const{isString:v}=c(29706);const{wrapString:w,columnize:C}=c(31823);const E=u("");class QueryCompiler_SQLite3 extends y{constructor(r,i,c){super(r,i,c);this.forShare=E;this.forKeyShare=E;this.forUpdate=E;this.forNoKeyUpdate=E}insert(){const r=this.single.insert||[];let i=this.with()+`insert into ${this.tableName} `;if(Array.isArray(r)){if(r.length===0){return""}else if(r.length===1&&r[0]&&p(r[0])){return{sql:i+this._emptyInsertValue}}}else if(typeof r==="object"&&p(r)){return{sql:i+this._emptyInsertValue}}const c=this._prepInsert(r);if(v(c)){return{sql:i+c}}if(c.columns.length===0){return{sql:""}}i+=`(${this.formatter.columnize(c.columns)})`;if(this.client.valueForUndefined!==null){c.values.forEach((r=>{h(r,(r=>{if(r===undefined)throw new TypeError("`sqlite` does not support inserting default values. Specify "+"values explicitly or use the `useNullAsDefault` config flag. "+"(see docs https://knexjs.org/guide/query-builder.html#insert).")}))}))}if(c.values.length===1){const u=this.client.parameterize(c.values[0],this.client.valueForUndefined,this.builder,this.bindingsHolder);i+=` values (${u})`;const{onConflict:h,ignore:d,merge:p}=this.single;if(h&&d)i+=this._ignore(h);else if(h&&p){i+=this._merge(p.updates,h,r);const c=this.where();if(c)i+=` ${c}`}const{returning:g}=this.single;if(g){i+=this._returning(g)}return{sql:i,returning:g}}const u=[];let d=-1;while(++d<c.values.length){let r=-1;const i=u[d]=[];let h=c.values[d];h=h===undefined?this.client.valueForUndefined:h;while(++r<c.columns.length){i.push(this.client.alias(this.client.parameter(h[r],this.builder,this.bindingsHolder),this.formatter.wrap(c.columns[r])))}u[d]=i.join(", ")}i+=" select "+u.join(" union all select ");const{onConflict:g,ignore:y,merge:b}=this.single;if(g&&y)i+=" where true"+this._ignore(g);else if(g&&b){i+=" where true"+this._merge(b.updates,g,r)}const{returning:w}=this.single;if(w)i+=this._returning(w);return{sql:i,returning:w}}update(){const r=this.with();const i=this._prepUpdate(this.single.update);const c=this.where();const{returning:u}=this.single;return{sql:r+`update ${this.single.only?"only ":""}${this.tableName} `+`set ${i.join(", ")}`+(c?` ${c}`:"")+this._returning(u),returning:u}}_ignore(r){if(r===true){return" on conflict do nothing"}return` on conflict ${this._onConflictClause(r)} do nothing`}_merge(r,i,c){let u=` on conflict ${this._onConflictClause(i)} do update set `;if(r&&Array.isArray(r)){u+=r.map((r=>w(r.split(".").pop(),this.formatter.builder,this.client,this.formatter))).map((r=>`${r} = excluded.${r}`)).join(", ");return u}else if(r&&typeof r==="object"){const i=this._prepUpdate(r);if(typeof i==="string"){u+=i}else{u+=i.join(",")}return u}else{const r=this._prepInsert(c);if(typeof r==="string"){throw new Error("If using merge with a raw insert query, then updates must be provided")}u+=r.columns.map((r=>w(r.split(".").pop(),this.builder,this.client))).map((r=>`${r} = excluded.${r}`)).join(", ");return u}}_returning(r){return r?` returning ${this.formatter.columnize(r)}`:""}truncate(){const{table:r}=this.single;return{sql:`delete from ${this.tableName}`,output(){return this.query({sql:`delete from sqlite_sequence where name = '${r}'`}).catch(b)}}}columnInfo(){const r=this.single.columnInfo;const i=this.client.customWrapIdentifier(this.single.table,d);return{sql:`PRAGMA table_info(\`${i}\`)`,output(i){const c=/.*\((\d+)\)/;const u=g(i,(function(r,i){let{type:u}=i;let h=u.match(c);if(h){h=h[1]}u=h?u.split("(")[0]:u;r[i.name]={type:u.toLowerCase(),maxLength:h,nullable:!i.notnull,defaultValue:i.dflt_value};return r}),{});return r&&u[r]||u}}}limit(){const r=!this.single.limit&&this.single.limit!==0;if(r&&!this.single.offset)return"";this.single.limit=r?-1:this.single.limit;return`limit ${this._getValueOrParameterFromAttribute("limit")}`}jsonExtract(r){return this._jsonExtract("json_extract",r)}jsonSet(r){return this._jsonSet("json_set",r)}jsonInsert(r){return this._jsonSet("json_insert",r)}jsonRemove(r){const i=`json_remove(${C(r.column,this.builder,this.client,this.bindingsHolder)},${this.client.parameter(r.path,this.builder,this.bindingsHolder)})`;return r.alias?this.client.alias(i,this.formatter.wrap(r.alias)):i}whereJsonPath(r){return this._whereJsonPath("json_extract",r)}whereJsonSupersetOf(r){throw new Error("Json superset where clause not actually supported by SQLite")}whereJsonSubsetOf(r){throw new Error("Json subset where clause not actually supported by SQLite")}onJsonPathEquals(r){return this._onJsonPathEquals("json_extract",r)}}r.exports=QueryCompiler_SQLite3},14850:(r,i,c)=>{const u=c(54945);const{nanonum:h}=c(81048);const{copyData:d,dropOriginal:p,renameTable:g,getTableSql:y,isForeignCheckEnabled:b,setForeignCheck:v,executeForeignCheck:w}=c(50866);const{parseCreateTable:C,parseCreateIndex:E}=c(39322);const{compileCreateTable:x,compileCreateIndex:S}=c(16594);const{isEqualId:k,includesId:T}=c(98715);class SQLite3_DDL{constructor(r,i,c,d){this.client=r;this.tableCompiler=i;this.pragma=c;this.tableNameRaw=this.tableCompiler.tableNameRaw;this.alteredName=`_knex_temp_alter${h(3)}`;this.connection=d;this.formatter=r=>this.client.customWrapIdentifier(r,u);this.wrap=r=>this.client.wrapIdentifierImpl(r)}tableName(){return this.formatter(this.tableNameRaw)}getTableSql(){const r=this.tableName();return this.client.transaction((async i=>{i.disableProcessing();const c=await i.raw(y(r));i.enableProcessing();return{createTable:c.filter((r=>r.type==="table"))[0].sql,createIndices:c.filter((r=>r.type==="index")).map((r=>r.sql))}}),{connection:this.connection})}async isForeignCheckEnabled(){const r=await this.client.raw(b()).connection(this.connection);return r[0].foreign_keys===1}async setForeignCheck(r){await this.client.raw(v(r)).connection(this.connection)}renameTable(r){return r.raw(g(this.alteredName,this.tableName()))}dropOriginal(r){return r.raw(p(this.tableName()))}copyData(r,i){return r.raw(d(this.tableName(),this.alteredName,i))}async alterColumn(r){const{createTable:i,createIndices:c}=await this.getTableSql();const u=C(i);u.table=this.alteredName;u.columns=u.columns.map((i=>{const c=r.find((r=>k(r.name,i.name)));if(c){i.type=c.type;i.constraints.default=c.defaultTo!==null?{name:null,value:c.defaultTo,expression:false}:null;i.constraints.notnull=c.notNull?{name:null,conflict:null}:null;i.constraints.null=c.notNull?null:i.constraints.null}return i}));const h=x(u,this.wrap);return this.generateAlterCommands(h,c)}async dropColumn(r){const{createTable:i,createIndices:c}=await this.getTableSql();const u=C(i);u.table=this.alteredName;u.columns=u.columns.filter((i=>i.expression||!T(r,i.name)));if(u.columns.length===0){throw new Error("Unable to drop last column from table")}u.constraints=u.constraints.filter((i=>{if(i.type==="PRIMARY KEY"||i.type==="UNIQUE"){return i.columns.every((i=>i.expression||!T(r,i.name)))}else if(i.type==="FOREIGN KEY"){return i.columns.every((i=>!T(r,i)))&&(i.references.table!==u.table||i.references.columns.every((i=>!T(r,i))))}else{return true}}));const h=u.columns.map((r=>r.name));const d=x(u,this.wrap);const p=[];for(const i of c){const c=E(i);c.columns=c.columns.filter((i=>i.expression||!T(r,i.name)));if(c.columns.length>0){p.push(S(c,this.wrap))}}return this.alter(d,p,h)}async dropForeign(r,i){const{createTable:c,createIndices:u}=await this.getTableSql();const h=C(c);h.table=this.alteredName;if(!i){h.columns=h.columns.map((i=>({...i,references:T(r,i.name)?null:i.references})))}h.constraints=h.constraints.filter((c=>{if(c.type==="FOREIGN KEY"){if(i){return!c.name||!k(c.name,i)}return c.columns.every((i=>!T(r,i)))}else{return true}}));const d=x(h,this.wrap);return this.alter(d,u)}async dropPrimary(r){const{createTable:i,createIndices:c}=await this.getTableSql();const u=C(i);u.table=this.alteredName;u.columns=u.columns.map((r=>({...r,primary:null})));u.constraints=u.constraints.filter((i=>{if(i.type==="PRIMARY KEY"){if(r){return!i.name||!k(i.name,r)}else{return false}}else{return true}}));const h=x(u,this.wrap);return this.alter(h,c)}async primary(r,i){const{createTable:c,createIndices:u}=await this.getTableSql();const h=C(c);h.table=this.alteredName;h.columns=h.columns.map((r=>({...r,primary:null})));h.constraints=h.constraints.filter((r=>r.type!=="PRIMARY KEY"));h.constraints.push({type:"PRIMARY KEY",name:i||null,columns:r.map((r=>({name:r,expression:false,collation:null,order:null}))),conflict:null});const d=x(h,this.wrap);return this.alter(d,u)}async foreign(r){const{createTable:i,createIndices:c}=await this.getTableSql();const u=C(i);u.table=this.alteredName;u.constraints.push({type:"FOREIGN KEY",name:r.keyName||null,columns:r.column,references:{table:r.inTable,columns:r.references,delete:r.onDelete||null,update:r.onUpdate||null,match:null,deferrable:null}});const h=x(u,this.wrap);return this.generateAlterCommands(h,c)}async setNullable(r,i){const{createTable:c,createIndices:u}=await this.getTableSql();const h=C(c);h.table=this.alteredName;const d=h.columns.find((i=>k(r,i.name)));if(!d){throw new Error(`.setNullable: Column ${r} does not exist in table ${this.tableName()}.`)}d.constraints.notnull=i?null:{name:null,conflict:null};d.constraints.null=i?d.constraints.null:null;const p=x(h,this.wrap);return this.generateAlterCommands(p,u)}async alter(r,i,c){const u=await this.isForeignCheckEnabled();if(u){await this.setForeignCheck(false)}try{await this.client.transaction((async h=>{await h.raw(r);await this.copyData(h,c);await this.dropOriginal(h);await this.renameTable(h);for(const r of i){await h.raw(r)}if(u){const r=await h.raw(w());if(r.length>0){throw new Error("FOREIGN KEY constraint failed")}}}),{connection:this.connection})}finally{if(u){await this.setForeignCheck(true)}}}async generateAlterCommands(r,i,c){const u=[];const h=[];const y=[];let b=null;u.push(r);u.push(d(this.tableName(),this.alteredName,c));u.push(p(this.tableName()));u.push(g(this.alteredName,this.tableName()));for(const r of i){u.push(r)}const C=await this.isForeignCheckEnabled();if(C){h.push(v(false));y.push(v(true));b=w()}return{pre:h,sql:u,check:b,post:y}}}r.exports=SQLite3_DDL},16594:r=>{function compileCreateTable(r,i=(r=>r)){return createTable(r,i)}function compileCreateIndex(r,i=(r=>r)){return createIndex(r,i)}function createTable(r,i){return`CREATE${temporary(r,i)} TABLE${exists(r,i)} ${schema(r,i)}${table(r,i)} (${columnDefinitionList(r,i)}${tableConstraintList(r,i)})${rowid(r,i)}`}function temporary(r,i){return r.temporary?" TEMP":""}function rowid(r,i){return r.rowid?" WITHOUT ROWID":""}function columnDefinitionList(r,i){return r.columns.map((r=>columnDefinition(r,i))).join(", ")}function columnDefinition(r,i){return`${identifier(r.name,i)}${typeName(r,i)}${columnConstraintList(r.constraints,i)}`}function typeName(r,i){return r.type!==null?` ${r.type}`:""}function columnConstraintList(r,i){return`${primaryColumnConstraint(r,i)}${notnullColumnConstraint(r,i)}${nullColumnConstraint(r,i)}${uniqueColumnConstraint(r,i)}${checkColumnConstraint(r,i)}${defaultColumnConstraint(r,i)}${collateColumnConstraint(r,i)}${referencesColumnConstraint(r,i)}${asColumnConstraint(r,i)}`}function primaryColumnConstraint(r,i){return r.primary!==null?` ${constraintName(r.primary,i)}PRIMARY KEY${order(r.primary,i)}${conflictClause(r.primary,i)}${autoincrement(r.primary,i)}`:""}function autoincrement(r,i){return r.autoincrement?" AUTOINCREMENT":""}function notnullColumnConstraint(r,i){return r.notnull!==null?` ${constraintName(r.notnull,i)}NOT NULL${conflictClause(r.notnull,i)}`:""}function nullColumnConstraint(r,i){return r.null!==null?` ${constraintName(r.null,i)}NULL${conflictClause(r.null,i)}`:""}function uniqueColumnConstraint(r,i){return r.unique!==null?` ${constraintName(r.unique,i)}UNIQUE${conflictClause(r.unique,i)}`:""}function checkColumnConstraint(r,i){return r.check!==null?` ${constraintName(r.check,i)}CHECK (${expression(r.check.expression,i)})`:""}function defaultColumnConstraint(r,i){return r.default!==null?` ${constraintName(r.default,i)}DEFAULT ${!r.default.expression?r.default.value:`(${expression(r.default.value,i)})`}`:""}function collateColumnConstraint(r,i){return r.collate!==null?` ${constraintName(r.collate,i)}COLLATE ${r.collate.collation}`:""}function referencesColumnConstraint(r,i){return r.references!==null?` ${constraintName(r.references,i)}${foreignKeyClause(r.references,i)}`:""}function asColumnConstraint(r,i){return r.as!==null?` ${constraintName(r.as,i)}${r.as.generated?"GENERATED ALWAYS ":""}AS (${expression(r.as.expression,i)})${r.as.mode!==null?` ${r.as.mode}`:""}`:""}function tableConstraintList(r,i){return r.constraints.reduce(((r,c)=>`${r}, ${tableConstraint(c,i)}`),"")}function tableConstraint(r,i){switch(r.type){case"PRIMARY KEY":return primaryTableConstraint(r,i);case"UNIQUE":return uniqueTableConstraint(r,i);case"CHECK":return checkTableConstraint(r,i);case"FOREIGN KEY":return foreignTableConstraint(r,i)}}function primaryTableConstraint(r,i){return`${constraintName(r,i)}PRIMARY KEY (${indexedColumnList(r,i)})${conflictClause(r,i)}`}function uniqueTableConstraint(r,i){return`${constraintName(r,i)}UNIQUE (${indexedColumnList(r,i)})${conflictClause(r,i)}`}function conflictClause(r,i){return r.conflict!==null?` ON CONFLICT ${r.conflict}`:""}function checkTableConstraint(r,i){return`${constraintName(r,i)}CHECK (${expression(r.expression,i)})`}function foreignTableConstraint(r,i){return`${constraintName(r,i)}FOREIGN KEY (${columnNameList(r,i)}) ${foreignKeyClause(r.references,i)}`}function foreignKeyClause(r,i){return`REFERENCES ${table(r,i)}${columnNameListOptional(r,i)}${deleteUpdateMatchList(r,i)}${deferrable(r.deferrable,i)}`}function columnNameListOptional(r,i){return r.columns.length>0?` (${columnNameList(r,i)})`:""}function columnNameList(r,i){return r.columns.map((r=>identifier(r,i))).join(", ")}function deleteUpdateMatchList(r,i){return`${deleteReference(r,i)}${updateReference(r,i)}${matchReference(r,i)}`}function deleteReference(r,i){return r.delete!==null?` ON DELETE ${r.delete}`:""}function updateReference(r,i){return r.update!==null?` ON UPDATE ${r.update}`:""}function matchReference(r,i){return r.match!==null?` MATCH ${r.match}`:""}function deferrable(r,i){return r!==null?` ${r.not?"NOT ":""}DEFERRABLE${r.initially!==null?` INITIALLY ${r.initially}`:""}`:""}function constraintName(r,i){return r.name!==null?`CONSTRAINT ${identifier(r.name,i)} `:""}function createIndex(r,i){return`CREATE${unique(r,i)} INDEX${exists(r,i)} ${schema(r,i)}${index(r,i)} on ${table(r,i)} (${indexedColumnList(r,i)})${where(r,i)}`}function unique(r,i){return r.unique?" UNIQUE":""}function exists(r,i){return r.exists?" IF NOT EXISTS":""}function schema(r,i){return r.schema!==null?`${identifier(r.schema,i)}.`:""}function index(r,i){return identifier(r.index,i)}function table(r,i){return identifier(r.table,i)}function where(r,i){return r.where!==null?` where ${expression(r.where)}`:""}function indexedColumnList(r,i){return r.columns.map((r=>!r.expression?indexedColumn(r,i):indexedColumnExpression(r,i))).join(", ")}function indexedColumn(r,i){return`${identifier(r.name,i)}${collation(r,i)}${order(r,i)}`}function indexedColumnExpression(r,i){return`${indexedExpression(r.name,i)}${collation(r,i)}${order(r,i)}`}function collation(r,i){return r.collation!==null?` COLLATE ${r.collation}`:""}function order(r,i){return r.order!==null?` ${r.order}`:""}function indexedExpression(r,i){return expression(r,i)}function expression(r,i){return r.reduce(((r,i)=>Array.isArray(i)?`${r}(${expression(i)})`:!r?i:`${r} ${i}`),"")}function identifier(r,i){return i(r)}r.exports={compileCreateTable:compileCreateTable,compileCreateIndex:compileCreateIndex}},42750:r=>{function s(r,i=(r=>r)){return function({index:c=0,input:u}){let h=c;const d=[];for(const i of r){const r=i({index:h,input:u});if(r.success){h=r.index;d.push(r.ast)}else{return r}}return{success:true,ast:i(d),index:h,input:u}}}function a(r,i=(r=>r)){return function({index:c=0,input:u}){for(const h of r){const r=h({index:c,input:u});if(r.success){return{success:true,ast:i(r.ast),index:r.index,input:u}}}return{success:false,ast:null,index:c,input:u}}}function m(r,i=(r=>r)){return function({index:c=0,input:u}){let h={};let d=c;const p=[];do{h=r({index:d,input:u});if(h.success){d=h.index;p.push(h.ast)}}while(h.success);if(p.length>0){return{success:true,ast:i(p),index:d,input:u}}else{return{success:false,ast:null,index:d,input:u}}}}function o(r,i=(r=>r)){return function({index:c=0,input:u}){const h=r({index:c,input:u});if(h.success){return{success:true,ast:i(h.ast),index:h.index,input:u}}else{return{success:true,ast:i(null),index:c,input:u}}}}function l(r,i=(r=>r)){return function({index:c=0,input:u}){const h=r.do({index:c,input:u});if(h.success){const c=r.next({index:h.index,input:u});if(c.success){return{success:true,ast:i(h.ast),index:h.index,input:u}}}return{success:false,ast:null,index:c,input:u}}}function n(r,i=(r=>r)){return function({index:c=0,input:u}){const h=r.do({index:c,input:u});if(h.success){const d=r.not({index:c,input:u});if(!d.success){return{success:true,ast:i(h.ast),index:h.index,input:u}}}return{success:false,ast:null,index:c,input:u}}}function t(r,i=(r=>r.text)){return function({index:c=0,input:u}){const h=u[c];if(h!==undefined&&(r.type===undefined||r.type===h.type)&&(r.text===undefined||r.text.toUpperCase()===h.text.toUpperCase())){return{success:true,ast:i(h),index:c+1,input:u}}else{return{success:false,ast:null,index:c,input:u}}}}const e=function({index:r=0,input:i}){return{success:true,ast:null,index:r,input:i}};const f=function({index:r=0,input:i}){return{success:r===i.length,ast:null,index:r,input:i}};r.exports={s:s,a:a,m:m,o:o,l:l,n:n,t:t,e:e,f:f}},39322:(r,i,c)=>{const{tokenize:u}=c(35606);const{s:h,a:d,m:p,o:g,l:y,n:b,t:v,e:w,f:C}=c(42750);const E={keyword:/(?:ABORT|ACTION|ADD|AFTER|ALL|ALTER|ALWAYS|ANALYZE|AND|AS|ASC|ATTACH|AUTOINCREMENT|BEFORE|BEGIN|BETWEEN|BY|CASCADE|CASE|CAST|CHECK|COLLATE|COLUMN|COMMIT|CONFLICT|CONSTRAINT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|DATABASE|DEFAULT|DEFERRED|DEFERRABLE|DELETE|DESC|DETACH|DISTINCT|DO|DROP|END|EACH|ELSE|ESCAPE|EXCEPT|EXCLUSIVE|EXCLUDE|EXISTS|EXPLAIN|FAIL|FILTER|FIRST|FOLLOWING|FOR|FOREIGN|FROM|FULL|GENERATED|GLOB|GROUP|GROUPS|HAVING|IF|IGNORE|IMMEDIATE|IN|INDEX|INDEXED|INITIALLY|INNER|INSERT|INSTEAD|INTERSECT|INTO|IS|ISNULL|JOIN|KEY|LAST|LEFT|LIKE|LIMIT|MATCH|MATERIALIZED|NATURAL|NO|NOT|NOTHING|NOTNULL|NULL|NULLS|OF|OFFSET|ON|OR|ORDER|OTHERS|OUTER|OVER|PARTITION|PLAN|PRAGMA|PRECEDING|PRIMARY|QUERY|RAISE|RANGE|RECURSIVE|REFERENCES|REGEXP|REINDEX|RELEASE|RENAME|REPLACE|RESTRICT|RETURNING|RIGHT|ROLLBACK|ROW|ROWS|SAVEPOINT|SELECT|SET|TABLE|TEMP|TEMPORARY|THEN|TIES|TO|TRANSACTION|TRIGGER|UNBOUNDED|UNION|UNIQUE|UPDATE|USING|VACUUM|VALUES|VIEW|VIRTUAL|WHEN|WHERE|WINDOW|WITH|WITHOUT)(?=\s+|-|\(|\)|;|\+|\*|\/|%|==|=|<=|<>|<<|<|>=|>>|>|!=|,|&|~|\|\||\||\.)/,id:/"[^"]*(?:""[^"]*)*"|`[^`]*(?:``[^`]*)*`|\[[^[\]]*\]|[a-z_][a-z0-9_$]*/,string:/'[^']*(?:''[^']*)*'/,blob:/x'(?:[0-9a-f][0-9a-f])+'/,numeric:/(?:\d+(?:\.\d*)?|\.\d+)(?:e(?:\+|-)?\d+)?|0x[0-9a-f]+/,variable:/\?\d*|[@$:][a-z0-9_$]+/,operator:/-|\(|\)|;|\+|\*|\/|%|==|=|<=|<>|<<|<|>=|>>|>|!=|,|&|~|\|\||\||\./,_ws:/\s+/};function parseCreateTable(r){const i=createTable({input:u(r,E)});if(!i.success){throw new Error(`Parsing CREATE TABLE failed at [${i.input.slice(i.index).map((r=>r.text)).join(" ")}] of "${r}"`)}return i.ast}function parseCreateIndex(r){const i=createIndex({input:u(r,E)});if(!i.success){throw new Error(`Parsing CREATE INDEX failed at [${i.input.slice(i.index).map((r=>r.text)).join(" ")}] of "${r}"`)}return i.ast}function createTable(r){return h([v({text:"CREATE"},(r=>null)),temporary,v({text:"TABLE"},(r=>null)),exists,schema,table,v({text:"("},(r=>null)),columnDefinitionList,tableConstraintList,v({text:")"},(r=>null)),rowid,C],(r=>Object.assign({},...r.filter((r=>r!==null)))))(r)}function temporary(r){return d([v({text:"TEMP"}),v({text:"TEMPORARY"}),w],(r=>({temporary:r!==null})))(r)}function rowid(r){return g(h([v({text:"WITHOUT"}),v({text:"ROWID"})]),(r=>({rowid:r!==null})))(r)}function columnDefinitionList(r){return d([h([columnDefinition,v({text:","}),columnDefinitionList],(r=>({columns:[r[0]].concat(r[2].columns)}))),h([columnDefinition],(r=>({columns:[r[0]]})))])(r)}function columnDefinition(r){return h([h([identifier],(r=>({name:r[0]}))),typeName,columnConstraintList],(r=>Object.assign({},...r)))(r)}function typeName(r){return g(h([p(v({type:"id"})),d([h([v({text:"("}),signedNumber,v({text:","}),signedNumber,v({text:")"})],(r=>`(${r[1]}, ${r[3]})`)),h([v({text:"("}),signedNumber,v({text:")"})],(r=>`(${r[1]})`)),w])],(r=>`${r[0].join(" ")}${r[1]||""}`)),(r=>({type:r})))(r)}function columnConstraintList(r){return g(p(columnConstraint),(r=>({constraints:Object.assign({primary:null,notnull:null,null:null,unique:null,check:null,default:null,collate:null,references:null,as:null},...r||[])})))(r)}function columnConstraint(r){return d([primaryColumnConstraint,notnullColumnConstraint,nullColumnConstraint,uniqueColumnConstraint,checkColumnConstraint,defaultColumnConstraint,collateColumnConstraint,referencesColumnConstraint,asColumnConstraint])(r)}function primaryColumnConstraint(r){return h([constraintName,v({text:"PRIMARY"},(r=>null)),v({text:"KEY"},(r=>null)),order,conflictClause,autoincrement],(r=>({primary:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function autoincrement(r){return g(v({text:"AUTOINCREMENT"}),(r=>({autoincrement:r!==null})))(r)}function notnullColumnConstraint(r){return h([constraintName,v({text:"NOT"},(r=>null)),v({text:"NULL"},(r=>null)),conflictClause],(r=>({notnull:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function nullColumnConstraint(r){return h([constraintName,v({text:"NULL"},(r=>null)),conflictClause],(r=>({null:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function uniqueColumnConstraint(r){return h([constraintName,v({text:"UNIQUE"},(r=>null)),conflictClause],(r=>({unique:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function checkColumnConstraint(r){return h([constraintName,v({text:"CHECK"},(r=>null)),v({text:"("},(r=>null)),h([expression],(r=>({expression:r[0]}))),v({text:")"},(r=>null))],(r=>({check:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function defaultColumnConstraint(r){return h([constraintName,v({text:"DEFAULT"},(r=>null)),d([h([v({text:"("}),expression,v({text:")"})],(r=>({value:r[1],expression:true}))),h([literalValue],(r=>({value:r[0],expression:false}))),h([signedNumber],(r=>({value:r[0],expression:false})))])],(r=>({default:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function collateColumnConstraint(r){return h([constraintName,v({text:"COLLATE"},(r=>null)),v({type:"id"},(r=>({collation:r.text})))],(r=>({collate:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function referencesColumnConstraint(r){return h([constraintName,h([foreignKeyClause],(r=>r[0].references))],(r=>({references:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function asColumnConstraint(r){return h([constraintName,g(h([v({text:"GENERATED"}),v({text:"ALWAYS"})]),(r=>({generated:r!==null}))),v({text:"AS"},(r=>null)),v({text:"("},(r=>null)),h([expression],(r=>({expression:r[0]}))),v({text:")"},(r=>null)),d([v({text:"STORED"}),v({text:"VIRTUAL"}),w],(r=>({mode:r?r.toUpperCase():null})))],(r=>({as:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function tableConstraintList(r){return g(p(h([v({text:","}),tableConstraint],(r=>r[1]))),(r=>({constraints:r||[]})))(r)}function tableConstraint(r){return d([primaryTableConstraint,uniqueTableConstraint,checkTableConstraint,foreignTableConstraint])(r)}function primaryTableConstraint(r){return h([constraintName,v({text:"PRIMARY"},(r=>null)),v({text:"KEY"},(r=>null)),v({text:"("},(r=>null)),indexedColumnList,v({text:")"},(r=>null)),conflictClause],(r=>Object.assign({type:"PRIMARY KEY"},...r.filter((r=>r!==null)))))(r)}function uniqueTableConstraint(r){return h([constraintName,v({text:"UNIQUE"},(r=>null)),v({text:"("},(r=>null)),indexedColumnList,v({text:")"},(r=>null)),conflictClause],(r=>Object.assign({type:"UNIQUE"},...r.filter((r=>r!==null)))))(r)}function conflictClause(r){return g(h([v({text:"ON"}),v({text:"CONFLICT"}),d([v({text:"ROLLBACK"}),v({text:"ABORT"}),v({text:"FAIL"}),v({text:"IGNORE"}),v({text:"REPLACE"})])],(r=>r[2])),(r=>({conflict:r?r.toUpperCase():null})))(r)}function checkTableConstraint(r){return h([constraintName,v({text:"CHECK"},(r=>null)),v({text:"("},(r=>null)),h([expression],(r=>({expression:r[0]}))),v({text:")"},(r=>null))],(r=>Object.assign({type:"CHECK"},...r.filter((r=>r!==null)))))(r)}function foreignTableConstraint(r){return h([constraintName,v({text:"FOREIGN"},(r=>null)),v({text:"KEY"},(r=>null)),v({text:"("},(r=>null)),columnNameList,v({text:")"},(r=>null)),foreignKeyClause],(r=>Object.assign({type:"FOREIGN KEY"},...r.filter((r=>r!==null)))))(r)}function foreignKeyClause(r){return h([v({text:"REFERENCES"},(r=>null)),table,columnNameListOptional,g(p(d([deleteReference,updateReference,matchReference])),(r=>Object.assign({delete:null,update:null,match:null},...r||[]))),deferrable],(r=>({references:Object.assign({},...r.filter((r=>r!==null)))})))(r)}function columnNameListOptional(r){return g(h([v({text:"("}),columnNameList,v({text:")"})],(r=>r[1])),(r=>({columns:r?r.columns:[]})))(r)}function columnNameList(r){return h([g(p(h([identifier,v({text:","})],(r=>r[0]))),(r=>r!==null?r:[])),identifier],(r=>({columns:r[0].concat([r[1]])})))(r)}function deleteReference(r){return h([v({text:"ON"}),v({text:"DELETE"}),onAction],(r=>({delete:r[2]})))(r)}function updateReference(r){return h([v({text:"ON"}),v({text:"UPDATE"}),onAction],(r=>({update:r[2]})))(r)}function matchReference(r){return h([v({text:"MATCH"}),d([v({type:"keyword"}),v({type:"id"})])],(r=>({match:r[1]})))(r)}function deferrable(r){return g(h([g(v({text:"NOT"})),v({text:"DEFERRABLE"}),g(h([v({text:"INITIALLY"}),d([v({text:"DEFERRED"}),v({text:"IMMEDIATE"})])],(r=>r[1].toUpperCase())))]),(r=>({deferrable:r?{not:r[0]!==null,initially:r[2]}:null})))(r)}function constraintName(r){return g(h([v({text:"CONSTRAINT"}),identifier],(r=>r[1])),(r=>({name:r})))(r)}function createIndex(r){return h([v({text:"CREATE"},(r=>null)),unique,v({text:"INDEX"},(r=>null)),exists,schema,index,v({text:"ON"},(r=>null)),table,v({text:"("},(r=>null)),indexedColumnList,v({text:")"},(r=>null)),where,C],(r=>Object.assign({},...r.filter((r=>r!==null)))))(r)}function unique(r){return g(v({text:"UNIQUE"}),(r=>({unique:r!==null})))(r)}function exists(r){return g(h([v({text:"IF"}),v({text:"NOT"}),v({text:"EXISTS"})]),(r=>({exists:r!==null})))(r)}function schema(r){return g(h([identifier,v({text:"."})],(r=>r[0])),(r=>({schema:r})))(r)}function index(r){return h([identifier],(r=>({index:r[0]})))(r)}function table(r){return h([identifier],(r=>({table:r[0]})))(r)}function where(r){return g(h([v({text:"WHERE"}),expression],(r=>r[1])),(r=>({where:r})))(r)}function indexedColumnList(r){return d([h([indexedColumn,v({text:","}),indexedColumnList],(r=>({columns:[r[0]].concat(r[2].columns)}))),h([indexedColumnExpression,v({text:","}),indexedColumnList],(r=>({columns:[r[0]].concat(r[2].columns)}))),y({do:indexedColumn,next:v({text:")"})},(r=>({columns:[r]}))),y({do:indexedColumnExpression,next:v({text:")"})},(r=>({columns:[r]})))])(r)}function indexedColumn(r){return h([h([identifier],(r=>({name:r[0],expression:false}))),collation,order],(r=>Object.assign({},...r.filter((r=>r!==null)))))(r)}function indexedColumnExpression(r){return h([h([indexedExpression],(r=>({name:r[0],expression:true}))),collation,order],(r=>Object.assign({},...r.filter((r=>r!==null)))))(r)}function collation(r){return g(h([v({text:"COLLATE"}),v({type:"id"})],(r=>r[1])),(r=>({collation:r})))(r)}function order(r){return d([v({text:"ASC"}),v({text:"DESC"}),w],(r=>({order:r?r.toUpperCase():null})))(r)}function indexedExpression(r){return p(d([b({do:v({type:"keyword"}),not:d([v({text:"COLLATE"}),v({text:"ASC"}),v({text:"DESC"})])}),v({type:"id"}),v({type:"string"}),v({type:"blob"}),v({type:"numeric"}),v({type:"variable"}),b({do:v({type:"operator"}),not:d([v({text:"("}),v({text:")"}),v({text:","})])}),h([v({text:"("}),g(expression),v({text:")"})],(r=>r[1]||[]))]))(r)}function expression(r){return p(d([v({type:"keyword"}),v({type:"id"}),v({type:"string"}),v({type:"blob"}),v({type:"numeric"}),v({type:"variable"}),b({do:v({type:"operator"}),not:d([v({text:"("}),v({text:")"})])}),h([v({text:"("}),g(expression),v({text:")"})],(r=>r[1]||[]))]))(r)}function identifier(r){return d([v({type:"id"}),v({type:"string"})],(r=>/^["`['][^]*["`\]']$/.test(r)?r.substring(1,r.length-1):r))(r)}function onAction(r){return d([h([v({text:"SET"}),v({text:"NULL"})],(r=>`${r[0]} ${r[1]}`)),h([v({text:"SET"}),v({text:"DEFAULT"})],(r=>`${r[0]} ${r[1]}`)),v({text:"CASCADE"}),v({text:"RESTRICT"}),h([v({text:"NO"}),v({text:"ACTION"})],(r=>`${r[0]} ${r[1]}`))],(r=>r.toUpperCase()))(r)}function literalValue(r){return d([v({type:"numeric"}),v({type:"string"}),v({type:"id"}),v({type:"blob"}),v({text:"NULL"}),v({text:"TRUE"}),v({text:"FALSE"}),v({text:"CURRENT_TIME"}),v({text:"CURRENT_DATE"}),v({text:"CURRENT_TIMESTAMP"})])(r)}function signedNumber(r){return h([d([v({text:"+"}),v({text:"-"}),w]),v({type:"numeric"})],(r=>`${r[0]||""}${r[1]}`))(r)}r.exports={parseCreateTable:parseCreateTable,parseCreateIndex:parseCreateIndex}},50866:r=>{function copyData(r,i,c){return`INSERT INTO "${i}" SELECT ${c===undefined?"*":c.map((r=>`"${r}"`)).join(", ")} FROM "${r}";`}function dropOriginal(r){return`DROP TABLE "${r}"`}function renameTable(r,i){return`ALTER TABLE "${r}" RENAME TO "${i}"`}function getTableSql(r){return`SELECT type, sql FROM sqlite_master WHERE (type='table' OR (type='index' AND sql IS NOT NULL)) AND tbl_name='${r}'`}function isForeignCheckEnabled(){return`PRAGMA foreign_keys`}function setForeignCheck(r){return`PRAGMA foreign_keys = ${r?"ON":"OFF"}`}function executeForeignCheck(){return`PRAGMA foreign_key_check`}r.exports={copyData:copyData,dropOriginal:dropOriginal,renameTable:renameTable,getTableSql:getTableSql,isForeignCheckEnabled:isForeignCheckEnabled,setForeignCheck:setForeignCheck,executeForeignCheck:executeForeignCheck}},35606:r=>{function tokenize(r,i){const c=new RegExp(Object.entries(i).map((([r,i])=>`(?<${r}>${i.source})`)).join("|"),"yi");let u=0;const h=[];while(u<r.length){c.lastIndex=u;const i=r.match(c);if(i!==null){const[r,c]=Object.entries(i.groups).find((([r,i])=>i!==undefined));u+=c.length;if(!r.startsWith("_")){h.push({type:r,text:c})}}else{throw new Error(`No matching tokenizer rule found at: [${r.substring(u)}]`)}}return h}r.exports={tokenize:tokenize}},98715:r=>{function isEqualId(r,i){return r.toLowerCase()===i.toLowerCase()}function includesId(r,i){return r.some((r=>isEqualId(r,i)))}r.exports={isEqualId:isEqualId,includesId:includesId}},28848:(r,i,c)=>{const u=c(10208);class ColumnCompiler_SQLite3 extends u{constructor(){super(...arguments);this.modifiers=["nullable","defaultTo"];this._addCheckModifiers()}enu(r){return`text check (${this.formatter.wrap(this.args[0])} in ('${r.join("', '")}'))`}_pushAlterCheckQuery(r,i){throw new Error(`Alter table with to add constraints is not permitted in SQLite`)}checkRegex(r,i){return this._check(`${this.formatter.wrap(this.getColumnName())} REGEXP ${this.client._escapeBinding(r)}`,i)}}ColumnCompiler_SQLite3.prototype.json="json";ColumnCompiler_SQLite3.prototype.jsonb="json";ColumnCompiler_SQLite3.prototype.double=ColumnCompiler_SQLite3.prototype.decimal=ColumnCompiler_SQLite3.prototype.floating="float";ColumnCompiler_SQLite3.prototype.timestamp="datetime";ColumnCompiler_SQLite3.prototype.increments=ColumnCompiler_SQLite3.prototype.bigincrements="integer not null primary key autoincrement";r.exports=ColumnCompiler_SQLite3},96525:(r,i,c)=>{const u=c(3975);const h=c(64365);class SchemaCompiler_SQLite3 extends u{constructor(r,i){super(r,i)}hasTable(r){const i=`select * from sqlite_master `+`where type = 'table' and name = ${this.client.parameter(this.formatter.wrap(r).replace(/`/g,""),this.builder,this.bindingsHolder)}`;this.pushQuery({sql:i,output:r=>r.length>0})}hasColumn(r,i){this.pushQuery({sql:`PRAGMA table_info(${this.formatter.wrap(r)})`,output(r){return h(r,(r=>this.client.wrapIdentifier(r.name.toLowerCase())===this.client.wrapIdentifier(i.toLowerCase())))}})}renameTable(r,i){this.pushQuery(`alter table ${this.formatter.wrap(r)} rename to ${this.formatter.wrap(i)}`)}async generateDdlCommands(){const r=this.builder._sequence;for(let i=0,c=r.length;i<c;i++){const c=r[i];this[c.method].apply(this,c.args)}const i=this.sequence;if(i.length===1&&i[0].statementsProducer){return i[0].statementsProducer()}else{const r=[];for(const c of i){const i=c.sql;if(Array.isArray(i)){r.push(...i)}else{r.push(i)}}return{pre:[],sql:r,check:null,post:[]}}}}r.exports=SchemaCompiler_SQLite3},66332:(r,i,c)=>{const u=c(32317);const h=c(52169);const d=c(54945);const{isObject:p}=c(29706);const g=c(31492);const{formatDefault:y}=c(7646);class TableCompiler_SQLite3 extends g{constructor(){super(...arguments)}createQuery(r,i,c){const u=i?"create table if not exists ":"create table ";let h=u+this.tableName();if(c&&this.tableNameLike()){h+=" as select * from "+this.tableNameLike()+" where 0=1"}else{h+=" ("+r.sql.join(", ");h+=this.foreignKeys()||"";h+=this.primaryKeys()||"";h+=this._addChecks();h+=")"}this.pushQuery(h);if(c){this.addColumns(r,this.addColumnsPrefix)}}addColumns(r,i,c){if(i===this.alterColumnsPrefix){const r=this;const i=c.map((r=>{const i=this.client.customWrapIdentifier(r.getColumnName(),d,r.columnBuilder.queryContext());const c=r.getColumnType();const u=r.modified["defaultTo"]?y(r.modified["defaultTo"][0],c,this.client):null;const h=r.modified["nullable"]&&r.modified["nullable"][0]===false;return{name:i,type:c,defaultTo:u,notNull:h}}));this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer(c,u){return r.client.ddl(r,c,u).alterColumn(i)}})}else{for(let i=0,c=r.sql.length;i<c;i++){this.pushQuery({sql:`alter table ${this.tableName()} add column ${r.sql[i]}`,bindings:r.bindings[i]})}}}dropUnique(r,i){i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);this.pushQuery(`drop index ${i}`)}dropForeign(r,i){const c=this;r=Array.isArray(r)?r:[r];r=r.map((r=>this.client.customWrapIdentifier(r,d)));i=this.client.customWrapIdentifier(i,d);this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(u){return c.client.ddl(c,u,this.connection).dropForeign(r,i)}})}dropPrimary(r){const i=this;r=this.client.customWrapIdentifier(r,d);this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(c){return i.client.ddl(i,c,this.connection).dropPrimary(r)}})}dropIndex(r,i){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);this.pushQuery(`drop index ${i}`)}unique(r,i){let c;if(p(i)){({indexName:i,deferrable:c}=i)}if(c&&c!=="not deferrable"){this.client.logger.warn(`sqlite3: unique index \`${i}\` will not be deferrable ${c} because sqlite3 does not support deferred constraints.`)}i=i?this.formatter.wrap(i):this._indexCommand("unique",this.tableNameRaw,r);r=this.formatter.columnize(r);this.pushQuery(`create unique index ${i} on ${this.tableName()} (${r})`)}index(r,i,c){i=i?this.formatter.wrap(i):this._indexCommand("index",this.tableNameRaw,r);r=this.formatter.columnize(r);let u;if(p(c)){({predicate:u}=c)}const h=u?" "+this.client.queryCompiler(u).where():"";this.pushQuery(`create index ${i} on ${this.tableName()} (${r})${h}`)}primary(r,i){const c=this;r=Array.isArray(r)?r:[r];r=r.map((r=>this.client.customWrapIdentifier(r,d)));let u;if(p(i)){({constraintName:i,deferrable:u}=i)}if(u&&u!=="not deferrable"){this.client.logger.warn(`sqlite3: primary key constraint \`${i}\` will not be deferrable ${u} because sqlite3 does not support deferred constraints.`)}i=this.client.customWrapIdentifier(i,d);if(this.method!=="create"&&this.method!=="createIfNot"){this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(u){return c.client.ddl(c,u,this.connection).primary(r,i)}})}}foreign(r){const i=this;if(this.method!=="create"&&this.method!=="createIfNot"){r.column=Array.isArray(r.column)?r.column:[r.column];r.column=r.column.map((r=>this.client.customWrapIdentifier(r,d)));r.inTable=this.client.customWrapIdentifier(r.inTable,d);r.references=Array.isArray(r.references)?r.references:[r.references];r.references=r.references.map((r=>this.client.customWrapIdentifier(r,d)));this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer(c,u){return i.client.ddl(i,c,u).foreign(r)}})}}primaryKeys(){const r=u(this.grouped.alterTable||[],{method:"primary"});if(r.length>0&&r[0].args.length>0){const i=r[0].args[0];let c=r[0].args[1]||"";if(c){c=" constraint "+this.formatter.wrap(c)}const u=this.grouped.columns.filter((r=>r.builder._type==="increments")).length>0;return`,${c} ${u?"unique":"primary key"} (${this.formatter.columnize(i)})`}}foreignKeys(){let r="";const i=u(this.grouped.alterTable||[],{method:"foreign"});for(let c=0,u=i.length;c<u;c++){const u=i[c].args[0];const h=this.formatter.columnize(u.column);const d=this.formatter.columnize(u.references);const p=this.formatter.wrap(u.inTable);let g=u.keyName||"";if(g){g=" constraint "+this.formatter.wrap(g)}r+=`,${g} foreign key(${h}) references ${p}(${d})`;if(u.onDelete)r+=` on delete ${u.onDelete}`;if(u.onUpdate)r+=` on update ${u.onUpdate}`}return r}createTableBlock(){return this.getColumns().concat().join(",")}renameColumn(r,i){this.pushQuery({sql:`alter table ${this.tableName()} rename ${this.formatter.wrap(r)} to ${this.formatter.wrap(i)}`})}_setNullableState(r,i){const c=this;this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer(u,h){return c.client.ddl(c,u,h).setNullable(r,i)}})}dropColumn(){const r=this;const i=h(arguments);const c=i.map((r=>this.client.customWrapIdentifier(r,d)));this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(i){return r.client.ddl(r,i,this.connection).dropColumn(c)}})}}r.exports=TableCompiler_SQLite3},74080:(r,i,c)=>{const u=c(71822);const{columnize:h}=c(31823);class ViewCompiler_SQLite3 extends u{constructor(r,i){super(r,i)}createOrReplace(){const r=this.columns;const i=this.selectQuery.toString();const c=this.viewName();const u=r?" ("+h(r,this.viewBuilder,this.client,this.bindingsHolder)+")":"";const d=`drop view if exists ${c}`;const p=`create view ${c}${u} as ${i}`;this.pushQuery({sql:d});this.pushQuery({sql:p})}}r.exports=ViewCompiler_SQLite3},55689:(r,i,c)=>{const u=c(94452);const h=c(65922);const d=c(73012);const{isNumber:p}=c(29706);function batchInsert(r,i,c,g=1e3){let y=undefined;let b=null;if(!p(g)||g<1){throw new TypeError(`Invalid chunkSize: ${g}`)}if(!Array.isArray(c)){throw new TypeError(`Invalid batch: Expected array, got ${typeof c}`)}const v=u(c,g);const runInTransaction=i=>{if(b){return i(b)}return r.transaction(i)};return Object.assign(Promise.resolve().then((async()=>{await d(1);return runInTransaction((async r=>{const c=[];for(const u of v){c.push(await r(i).insert(u,y))}return h(c)}))})),{returning(r){y=r;return this},transacting(r){b=r;return this}})}r.exports=batchInsert},73012:r=>{r.exports=r=>new Promise((i=>setTimeout(i,r)))},11564:r=>{function ensureConnectionCallback(r){r.client.emit("start",r.builder);r.builder.emit("start",r.builder);const i=r.builder.toSQL();if(r.builder._debug){r.client.logger.debug(i)}if(Array.isArray(i)){return r.queryArray(i)}return r.query(i)}function ensureConnectionStreamCallback(r,i){try{const c=r.builder.toSQL();if(Array.isArray(c)&&i.hasHandler){throw new Error("The stream may only be used with a single query statement.")}return r.client.stream(r.connection,c,i.stream,i.options)}catch(r){i.stream.emit("error",r);throw r}}r.exports={ensureConnectionCallback:ensureConnectionCallback,ensureConnectionStreamCallback:ensureConnectionStreamCallback}},46421:(r,i,c)=>{const u=c(15087)("knex:query");const h=c(15087)("knex:bindings");const debugQuery=(r,i)=>u(r.replace(/%/g,"%%"),i);const{isString:d}=c(29706);function formatQuery(r,i,c,u){i=i==null?[]:[].concat(i);let h=0;return r.replace(/\\?\?/g,(r=>{if(r==="\\?"){return"?"}if(h===i.length){return r}const d=i[h++];return u._escapeBinding(d,{timeZone:c})}))}function enrichQueryObject(r,i,c){const u=d(i)?{sql:i}:i;u.bindings=c.prepBindings(u.bindings);u.sql=c.positionBindings(u.sql);const{__knexUid:p,__knexTxId:g}=r;c.emit("query",Object.assign({__knexUid:p,__knexTxId:g},u));debugQuery(u.sql,g);h(u.bindings,g);return u}function executeQuery(r,i,c){return c._query(r,i).catch((u=>{u.message=formatQuery(i.sql,i.bindings,undefined,c)+" - "+u.message;c.emit("query-error",u,Object.assign({__knexUid:r.__knexUid,__knexTxId:r.__knexUid},i));throw u}))}r.exports={enrichQueryObject:enrichQueryObject,executeQuery:executeQuery,formatQuery:formatQuery}},33715:(r,i,c)=>{const{KnexTimeoutError:u}=c(77903);const{timeout:h}=c(77903);const{ensureConnectionCallback:d,ensureConnectionStreamCallback:p}=c(11564);let g;class Runner{constructor(r,i){this.client=r;this.builder=i;this.queries=[];this.connection=undefined}async run(){const r=this;try{const i=await this.ensureConnection(d);r.builder.emit("end");return i}catch(i){if(r.builder._events&&r.builder._events.error){r.builder.emit("error",i)}throw i}}stream(r,i){const u=typeof r==="function"&&arguments.length===1;const h=u?{}:r;const d=u?r:i;const y=typeof d==="function";g=g||c(12781).Transform;const b=this.builder.queryContext();const v=new g({objectMode:true,transform:(r,i,c)=>{c(null,this.client.postProcessResponse(r,b))}});v.on("close",(()=>{this.client.releaseConnection(this.connection)}));const w=this.ensureConnection(p,{options:h,hasHandler:y,stream:v}).catch((r=>{if(!this.connection){v.emit("error",r)}}));if(y){d(v);return w}return v}pipe(r,i){return this.stream(i).pipe(r)}async query(r){const{__knexUid:i,__knexTxId:c}=this.connection;this.builder.emit("query",Object.assign({__knexUid:i,__knexTxId:c},r));const d=this;const p=this.builder.queryContext();if(r!==null&&typeof r==="object"){r.queryContext=p}let g=this.client.query(this.connection,r);if(r.timeout){g=h(g,r.timeout)}return g.then((r=>this.client.processResponse(r,d))).then((u=>{const h=this.client.postProcessResponse(u,p);this.builder.emit("query-response",h,Object.assign({__knexUid:i,__knexTxId:c},r),this.builder);this.client.emit("query-response",h,Object.assign({__knexUid:i,__knexTxId:c},r),this.builder);return h})).catch((i=>{if(!(i instanceof u)){return Promise.reject(i)}const{timeout:c,sql:h,bindings:d}=r;let p;if(r.cancelOnTimeout){p=this.client.cancelQuery(this.connection)}else{this.connection.__knex__disposed=i;p=Promise.resolve()}return p.catch((r=>{this.connection.__knex__disposed=i;throw Object.assign(r,{message:`After query timeout of ${c}ms exceeded, cancelling of query failed.`,sql:h,bindings:d,timeout:c})})).then((()=>{throw Object.assign(i,{message:`Defined query timeout of ${c}ms exceeded when running query.`,sql:h,bindings:d,timeout:c})}))})).catch((u=>{this.builder.emit("query-error",u,Object.assign({__knexUid:i,__knexTxId:c,queryContext:p},r));throw u}))}async queryArray(r){if(r.length===1){const i=r[0];if(!i.statementsProducer){return this.query(i)}const c=await i.statementsProducer(undefined,this.connection);const u=c.sql.map((r=>({sql:r,bindings:i.bindings})));const h=c.pre.map((r=>({sql:r,bindings:i.bindings})));const d=c.post.map((r=>({sql:r,bindings:i.bindings})));let p=[];await this.queryArray(h);try{await this.client.transaction((async r=>{const i=new Runner(r.client,this.builder);i.connection=this.connection;p=await i.queryArray(u);if(c.check){const i=await r.raw(c.check);if(i.length>0){throw new Error("FOREIGN KEY constraint failed")}}}),{connection:this.connection})}finally{await this.queryArray(d)}return p}const i=[];for(const c of r){i.push(await this.queryArray([c]))}return i}async ensureConnection(r,i){if(this.builder._connection){this.connection=this.builder._connection}if(this.connection){return r(this,i)}let c;try{c=await this.client.acquireConnection()}catch(r){if(!(r instanceof u)){return Promise.reject(r)}if(this.builder){r.sql=this.builder.sql;r.bindings=this.builder.bindings}throw r}try{this.connection=c;return await r(this,i)}finally{await this.client.releaseConnection(c)}}}r.exports=Runner},21251:(r,i,c)=>{const{EventEmitter:u}=c(82361);const h=c(15087);const d=c(27963);const{callbackify:p}=c(73837);const g=c(88810);const{timeout:y,KnexTimeoutError:b}=c(77903);const v=c(25779);const w=h("knex:tx");function DEFAULT_CONFIG(){return{userParams:{},doNotRejectOnRollback:true}}const C=["read uncommitted","read committed","snapshot","repeatable read","serializable"];class Transaction extends u{constructor(r,i,c=DEFAULT_CONFIG(),u=null){super();this.userParams=c.userParams;this.doNotRejectOnRollback=c.doNotRejectOnRollback;const h=this.txid=d("trx");this.client=r;this.logger=r.logger;this.outerTx=u;this.trxClient=undefined;this._completed=false;this._debug=r.config&&r.config.debug;if(c.isolationLevel){this.setIsolationLevel(c.isolationLevel)}w("%s: Starting %s transaction",h,u?"nested":"top level");this._lastChild=Promise.resolve();const p=u?u._lastChild:Promise.resolve();const g=p.then((()=>this._evaluateContainer(c,i)));this._promise=g.then((r=>r));if(u){u._lastChild=g.catch((()=>{}))}}isCompleted(){return this._completed||this.outerTx&&this.outerTx.isCompleted()||false}begin(r){const i=this.isolationLevel?this.query(r,`SET TRANSACTION ISOLATION LEVEL ${this.isolationLevel};`):Promise.resolve();return i.then((()=>this.query(r,"BEGIN;")))}savepoint(r){return this.query(r,`SAVEPOINT ${this.txid};`)}commit(r,i){return this.query(r,"COMMIT;",1,i)}release(r,i){return this.query(r,`RELEASE SAVEPOINT ${this.txid};`,1,i)}setIsolationLevel(r){if(!C.includes(r)){throw new Error(`Invalid isolationLevel, supported isolation levels are: ${JSON.stringify(C)}`)}this.isolationLevel=r;return this}rollback(r,i){return y(this.query(r,"ROLLBACK",2,i),5e3).catch((r=>{if(!(r instanceof b)){return Promise.reject(r)}this._rejecter(i)}))}rollbackTo(r,i){return y(this.query(r,`ROLLBACK TO SAVEPOINT ${this.txid}`,2,i),5e3).catch((r=>{if(!(r instanceof b)){return Promise.reject(r)}this._rejecter(i)}))}query(r,i,c,u){const h=this.trxClient.query(r,i).catch((r=>{c=2;u=r;this._completed=true;w("%s error running transaction query",this.txid)})).then((r=>{if(c===1){this._resolver(u)}if(c===2){if(u===undefined){if(this.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(i)){this._resolver();return}u=new Error(`Transaction rejected with non-error: ${u}`)}this._rejecter(u)}return r}));if(c===1||c===2){this._completed=true}return h}debug(r){this._debug=arguments.length?r:true;return this}async _evaluateContainer(r,i){return this.acquireConnection(r,(r=>{const c=this.trxClient=makeTxClient(this,this.client,r);const u=this.client.transacting?this.savepoint(r):this.begin(r);const h=new Promise(((r,i)=>{this._resolver=r;this._rejecter=i}));u.then((()=>makeTransactor(this,r,c))).then((r=>{r.executionPromise=h;let c;try{c=i(r)}catch(r){c=Promise.reject(r)}if(c&&c.then&&typeof c.then==="function"){c.then((i=>r.commit(i))).catch((i=>r.rollback(i)))}return null})).catch((r=>this._rejecter(r)));return h}))}async acquireConnection(r,i){const c=r&&r.connection;const u=c||await this.client.acquireConnection();try{u.__knexTxId=this.txid;return await i(u)}finally{if(!c){w("%s: releasing connection",this.txid);this.client.releaseConnection(u)}else{w("%s: not releasing external connection",this.txid)}}}then(r,i){return this._promise.then(r,i)}catch(...r){return this._promise.catch(...r)}asCallback(r){p((()=>this._promise))(r);return this._promise}}v(Transaction.prototype);function makeTransactor(r,i,c){const u=g(c);u.context.withUserParams=()=>{throw new Error("Cannot set user params on a transaction - it can only inherit params from main knex instance")};u.isTransaction=true;u.userParams=r.userParams||{};u.context.transaction=function(i,c){if(!c){c={doNotRejectOnRollback:true}}else if(c.doNotRejectOnRollback===undefined){c.doNotRejectOnRollback=true}return this._transaction(i,c,r)};u.savepoint=function(r,i){return u.transaction(r,i)};if(r.client.transacting){u.commit=c=>r.release(i,c);u.rollback=c=>r.rollbackTo(i,c)}else{u.commit=c=>r.commit(i,c);u.rollback=c=>r.rollback(i,c)}u.isCompleted=()=>r.isCompleted();return u}function makeTxClient(r,i,c){const u=Object.create(i.constructor.prototype);u.version=i.version;u.config=i.config;u.driver=i.driver;u.connectionSettings=i.connectionSettings;u.transacting=true;u.valueForUndefined=i.valueForUndefined;u.logger=i.logger;u.on("start",(function(c){r.emit("start",c);i.emit("start",c)}));u.on("query",(function(c){r.emit("query",c);i.emit("query",c)}));u.on("query-error",(function(c,u){r.emit("query-error",c,u);i.emit("query-error",c,u)}));u.on("query-response",(function(c,u,h){r.emit("query-response",c,u,h);i.emit("query-response",c,u,h)}));const h=u.query;u.query=function(i,d){const p=r.isCompleted();return new Promise((function(g,y){try{if(i!==c)throw new Error("Invalid connection for transaction query.");if(p)completedError(r,d);g(h.call(u,i,d))}catch(r){y(r)}}))};const d=u.stream;u.stream=function(i,h,p,g){const y=r.isCompleted();return new Promise((function(b,v){try{if(i!==c)throw new Error("Invalid connection for transaction query.");if(y)completedError(r,h);b(d.call(u,i,h,p,g))}catch(r){v(r)}}))};u.acquireConnection=function(){return Promise.resolve(c)};u.releaseConnection=function(){return Promise.resolve()};return u}function completedError(r,i){const c=typeof i==="string"?i:i&&i.sql;w("%s: Transaction completed: %s",r.txid,c);throw new Error("Transaction query already complete, run with DEBUG=knex:tx for more info")}r.exports=Transaction},28935:(r,i,c)=>{const{columnize:u,wrap:h}=c(31823);class Formatter{constructor(r,i){this.client=r;this.builder=i;this.bindings=[]}columnize(r){return u(r,this.builder,this.client,this)}wrap(r,i){return h(r,i,this.builder,this.client,this)}}r.exports=Formatter},7646:(r,i,c)=>{const{isObject:u}=c(29706);function compileCallback(r,i,c,u){const h=c.queryBuilder();r.call(h,h);const d=c.queryCompiler(h,u.bindings);return d.toSQL(i||h._method||"select")}function wrapAsIdentifier(r,i,c){const u=i.queryContext();return c.wrapIdentifier((r||"").trim(),u)}function formatDefault(r,i,c){if(r===void 0){return""}else if(r===null){return"null"}else if(r&&r.isRawInstance){return r.toQuery()}else if(i==="bool"){if(r==="false")r=0;return`'${r?1:0}'`}else if((i==="json"||i==="jsonb")&&u(r)){return`'${JSON.stringify(r)}'`}else{return c._escapeBinding(r.toString())}}r.exports={compileCallback:compileCallback,wrapAsIdentifier:wrapAsIdentifier,formatDefault:formatDefault}},40727:(r,i,c)=>{const{columnize:u}=c(31823);function replaceRawArrBindings(r,i){const c={bindings:[]};const h=r;const d=r.bindings.length;const p=r.bindings;let g=0;const y=r.sql.replace(/\\?\?\??/g,(function(r){if(r==="\\?"){return r}const d=p[g++];if(r==="??"){return u(d,h,i,c)}return i.parameter(d,h,c)}));if(d!==g){throw new Error(`Expected ${d} bindings, saw ${g}`)}return{method:"raw",sql:y,bindings:c.bindings}}function replaceKeyBindings(r,i){const c={bindings:[]};const h=r;const d=r.bindings;const p=/\\?(:(\w+):(?=::)|:(\w+):(?!:)|:(\w+))/g;const g=r.sql.replace(p,(function(r,p,g,y,b){if(r!==p){return p}const v=g||y||b;const w=r.trim();const C=w[w.length-1]===":";const E=d[v];if(E===undefined){if(Object.prototype.hasOwnProperty.call(d,v)){c.bindings.push(E)}return r}if(C){return r.replace(p,u(E,h,i,c))}return r.replace(p,i.parameter(E,h,c))}));return{method:"raw",sql:g,bindings:c.bindings}}r.exports={replaceKeyBindings:replaceKeyBindings,replaceRawArrBindings:replaceRawArrBindings}},31823:(r,i,c)=>{const u=c(79396);const h=c(26447);const{compileCallback:d,wrapAsIdentifier:p}=c(7646);const g=["asc","desc"];const y=u(["=","<",">","<=",">=","<>","!=","like","not like","between","not between","ilike","not ilike","exists","not exist","rlike","not rlike","regexp","not regexp","match","&","|","^","<<",">>","~","~=","~*","!~","!~*","#","&&","@>","<@","||","&<","&>","-|-","@@","!!",["?","\\?"],["?|","\\?|"],["?&","\\?&"]],((r,i)=>{if(Array.isArray(i)){r[i[0]]=i[1]}else{r[i]=i}}),{});function columnize(r,i,c,u){const h=Array.isArray(r)?r:[r];let d="",p=-1;while(++p<h.length){if(p>0)d+=", ";d+=wrap(h[p],undefined,i,c,u)}return d}function wrap(r,i,c,u,h){const p=unwrapRaw(r,i,c,u,h);if(p)return p;switch(typeof r){case"function":return outputQuery(d(r,undefined,u,h),true,c,u);case"object":return parseObject(r,c,u,h);case"number":return r;default:return wrapString(r+"",c,u)}}function unwrapRaw(r,i,c,u,d){let p;if(r instanceof h){p=u.queryCompiler(r).toSQL();if(p.bindings){d.bindings.push(...p.bindings)}return outputQuery(p,i,c,u)}if(r&&r.isRawInstance){r.client=u;if(c._queryContext){r.queryContext=()=>c._queryContext}p=r.toSQL();if(p.bindings){d.bindings.push(...p.bindings)}return p.sql}if(i){d.bindings.push(r)}}function operator(r,i,c,u){const h=unwrapRaw(r,undefined,i,c,u);if(h)return h;const d=y[(r||"").toLowerCase()];if(!d){throw new TypeError(`The operator "${r}" is not permitted`)}return d}function wrapString(r,i,c){const u=r.toLowerCase().indexOf(" as ");if(u!==-1){const h=r.slice(0,u);const d=r.slice(u+4);return c.alias(wrapString(h,i,c),p(d,i,c))}const h=[];let d=-1;const g=r.split(".");while(++d<g.length){r=g[d];if(d===0&&g.length>1){h.push(wrapString((r||"").trim(),i,c))}else{h.push(p(r,i,c))}}return h.join(".")}function parseObject(r,i,c,u){const g=[];for(const y in r){const b=r[y];if(typeof b==="function"){const r=d(b,undefined,c,u);r.as=y;g.push(outputQuery(r,true,i,c))}else if(b instanceof h){g.push(c.alias(`(${wrap(b,undefined,i,c,u)})`,p(y,i,c)))}else{g.push(c.alias(wrap(b,undefined,i,c,u),p(y,i,c)))}}return g.join(", ")}function outputQuery(r,i,c,u){let h=r.sql||"";if(h){if((r.method==="select"||r.method==="first")&&(i||r.as)){h=`(${h})`;if(r.as)return u.alias(h,wrapString(r.as,c,u))}}return h}function rawOrFn(r,i,c,u,h){if(typeof r==="function"){return outputQuery(d(r,i,u,h),undefined,c,u)}return unwrapRaw(r,undefined,c,u,h)||""}function direction(r,i,c,u){const h=unwrapRaw(r,undefined,i,c,u);if(h)return h;return g.indexOf((r||"").toLowerCase())!==-1?r:"asc"}r.exports={columnize:columnize,direction:direction,operator:operator,outputQuery:outputQuery,rawOrFn:rawOrFn,unwrapRaw:unwrapRaw,wrap:wrap,wrapString:wrapString}},23161:(r,i,c)=>{const u=c(23507);r.exports=u},44818:r=>{class FunctionHelper{constructor(r){this.client=r}now(r){if(typeof r==="number"){return this.client.raw(`CURRENT_TIMESTAMP(${r})`)}return this.client.raw("CURRENT_TIMESTAMP")}uuidToBin(r,i=true){const c=Buffer.from(r.replace(/-/g,""),"hex");return i?Buffer.concat([c.slice(6,8),c.slice(4,6),c.slice(0,4),c.slice(8,16)]):Buffer.concat([c.slice(0,4),c.slice(4,6),c.slice(6,8),c.slice(8,16)])}binToUuid(r,i=true){const c=Buffer.from(r,"hex");return i?[c.toString("hex",4,8),c.toString("hex",2,4),c.toString("hex",0,2),c.toString("hex",8,10),c.toString("hex",10,16)].join("-"):[c.toString("hex",0,4),c.toString("hex",4,6),c.toString("hex",6,8),c.toString("hex",8,10),c.toString("hex",10,16)].join("-")}}r.exports=FunctionHelper},23507:(r,i,c)=>{const u=c(92776);const h=c(26447);const d=c(4233);const p=c(88810);const{KnexTimeoutError:g}=c(77903);const{resolveConfig:y}=c(67045);const b=c(86968);const v=c(91978);const w=c(20064);const C=c(63670);function knex(r){const{resolvedConfig:i,Dialect:c}=y(...arguments);const u=p(new c(i));if(i.userParams){u.userParams=i.userParams}return u}knex.Client=u;knex.KnexTimeoutError=g;knex.QueryBuilder={extend:function(r,i){h.extend(r,i);d.push(r)}};knex.SchemaBuilder={extend:function(r,i){b.extend(r,i)}};knex.ViewBuilder={extend:function(r,i){v.extend(r,i)}};knex.ColumnBuilder={extend:function(r,i){w.extend(r,i)}};knex.TableBuilder={extend:function(r,i){C.extend(r,i)}};r.exports=knex},67045:(r,i,c)=>{const u=c(92776);const{SUPPORTED_CLIENTS:h}=c(9153);const d=c(95203);const{getDialectByNameOrAlias:p}=c(55496);function resolveConfig(r){let i;let c;const g=typeof r==="string"?Object.assign(d(r),arguments[2]):r;if(arguments.length===0||!g.client&&!g.dialect){i=u}else if(typeof g.client==="function"){i=g.client}else{const r=g.client||g.dialect;if(!h.includes(r)){throw new Error(`knex: Unknown configuration option 'client' value ${r}. Note that it is case-sensitive, check documentation for supported values.`)}i=p(r)}if(typeof g.connection==="string"){c=Object.assign({},g,{connection:d(g.connection).connection})}else{c=Object.assign({},g)}return{resolvedConfig:c,Dialect:i}}r.exports={resolveConfig:resolveConfig}},95203:(r,i,c)=>{const{parse:u}=c(74093);const h=u;const d=process&&process.platform&&process.platform==="win32";function tryParse(r){try{return new URL(r)}catch(r){return null}}r.exports=function parseConnectionString(r){const i=tryParse(r);const c=d&&i&&i.protocol.length===2;if(!i||c){return{client:"sqlite3",connection:{filename:r}}}let{protocol:u}=i;if(u.slice(-1)===":"){u=u.slice(0,-1)}const p=["postgresql","postgres"].includes(u);return{client:u,connection:p?h(r):connectionObject(i)}};function connectionObject(r){const i={};let c=r.pathname;if(c[0]==="/"){c=c.slice(1)}i.database=c;if(r.hostname){if(r.protocol.indexOf("mssql")===0){i.server=r.hostname}else{i.host=r.hostname}}if(r.port){i.port=r.port}if(r.username||r.password){i.user=decodeURIComponent(r.username)}if(r.password){i.password=decodeURIComponent(r.password)}if(r.searchParams){for(const[c,u]of r.searchParams.entries()){const h=["mysql:","mariadb:","mssql:"].includes(r.protocol);if(h){try{i[c]=JSON.parse(u)}catch(r){i[c]=u}}else{i[c]=u}}}return i}},88810:(r,i,c)=>{const{EventEmitter:u}=c(82361);const{Migrator:h}=c(46153);const d=c(89990);const p=c(44818);const g=c(4233);const y=c(67809);const b=c(55689);const{isObject:v}=c(29706);const w={client:{get(){return this.context.client},set(r){this.context.client=r},configurable:true},userParams:{get(){return this.context.userParams},set(r){this.context.userParams=r},configurable:true},schema:{get(){return this.client.schemaBuilder()},configurable:true},migrate:{get(){return new h(this)},configurable:true},seed:{get(){return new d(this)},configurable:true},fn:{get(){return new p(this.client)},configurable:true}};const C=["raw","batchInsert","transaction","transactionProvider","initialize","destroy","ref","withUserParams","queryBuilder","disableProcessing","enableProcessing"];for(const r of C){w[r]={value:function(...i){return this.context[r](...i)},configurable:true}}function makeKnex(r){function knex(r,i){return createQueryBuilder(knex.context,r,i)}redefineProperties(knex,r);return knex}function initContext(r){const i=r.context||{};Object.assign(i,{queryBuilder(){return this.client.queryBuilder()},raw(){return this.client.raw.apply(this.client,arguments)},batchInsert(r,i,c=1e3){return b(this,r,i,c)},transaction(r,i){if(!i&&v(r)){i=r;r=null}const c=Object.assign({},i);c.userParams=this.userParams||{};if(c.doNotRejectOnRollback===undefined){c.doNotRejectOnRollback=true}return this._transaction(r,c)},_transaction(r,i,c=null){if(r){const u=this.client.transaction(r,i,c);return u}else{return new Promise(((r,u)=>{this.client.transaction(r,i,c).catch(u)}))}},transactionProvider(r){let i;return()=>{if(!i){i=this.transaction(undefined,r)}return i}},initialize(r){return this.client.initializePool(r)},destroy(r){return this.client.destroy(r)},ref(r){return this.client.ref(r)},disableProcessing(){if(this.userParams.isProcessingDisabled){return}this.userParams.wrapIdentifier=this.client.config.wrapIdentifier;this.userParams.postProcessResponse=this.client.config.postProcessResponse;this.client.config.wrapIdentifier=null;this.client.config.postProcessResponse=null;this.userParams.isProcessingDisabled=true},enableProcessing(){if(!this.userParams.isProcessingDisabled){return}this.client.config.wrapIdentifier=this.userParams.wrapIdentifier;this.client.config.postProcessResponse=this.userParams.postProcessResponse;this.userParams.isProcessingDisabled=false},withUserParams(i){const c=shallowCloneFunction(r);if(this.client){c.client=Object.create(this.client.constructor.prototype);y(c.client,this.client);c.client.config=Object.assign({},this.client.config)}redefineProperties(c,c.client);_copyEventListeners("query",r,c);_copyEventListeners("query-error",r,c);_copyEventListeners("query-response",r,c);_copyEventListeners("start",r,c);c.userParams=i;return c}});if(!r.context){r.context=i}}function _copyEventListeners(r,i,c){const u=i.listeners(r);u.forEach((i=>{c.on(r,i)}))}function redefineProperties(r,i){for(let i=0;i<g.length;i++){const c=g[i];r[c]=function(){const r=this.queryBuilder();return r[c].apply(r,arguments)}}Object.defineProperties(r,w);initContext(r);r.client=i;r.userParams={};const c=new u;for(const i in c){r[i]=c[i]}if(r._internalListeners){r._internalListeners.forEach((({eventName:i,listener:c})=>{r.client.removeListener(i,c)}))}r._internalListeners=[];_addInternalListener(r,"start",(i=>{r.emit("start",i)}));_addInternalListener(r,"query",(i=>{r.emit("query",i)}));_addInternalListener(r,"query-error",((i,c)=>{r.emit("query-error",i,c)}));_addInternalListener(r,"query-response",((i,c,u)=>{r.emit("query-response",i,c,u)}))}function _addInternalListener(r,i,c){r.client.on(i,c);r._internalListeners.push({eventName:i,listener:c})}function createQueryBuilder(r,i,c){const u=r.queryBuilder();if(!i)r.client.logger.warn("calling knex without a tableName is deprecated. Use knex.queryBuilder() instead.");return i?u.table(i,c):u}function shallowCloneFunction(r){const i=Object.create(Object.getPrototypeOf(r),Object.getOwnPropertyDescriptors(r));const c={};const knexFnWrapper=(r,i)=>createQueryBuilder(c,r,i);const u=knexFnWrapper.bind(i);Object.assign(u,r);u.context=c;return u}r.exports=makeKnex},65561:(r,i,c)=>{const u=c(59449);const{inspect:h}=c(73837);const{isString:d,isFunction:p}=c(29706);class Logger{constructor(r={}){const{log:{debug:i,warn:c,error:u,deprecate:h,inspectionDepth:d,enableColors:p}={}}=r;this._inspectionDepth=d||5;this._enableColors=resolveIsEnabledColors(p);this._debug=i;this._warn=c;this._error=u;this._deprecate=h}_log(r,i,c){if(i!=null&&!p(i)){throw new TypeError("Extensions to knex logger must be functions!")}if(p(i)){i(r);return}if(!d(r)){r=h(r,{depth:this._inspectionDepth,colors:this._enableColors})}console.log(c?c(r):r)}debug(r){this._log(r,this._debug)}warn(r){this._log(r,this._warn,u.yellow)}error(r){this._log(r,this._error,u.red)}deprecate(r,i){const c=`${r} is deprecated, please use ${i}`;this._log(c,this._deprecate,u.yellow)}}function resolveIsEnabledColors(r){if(r!=null){return r}if(process&&process.stdout){return process.stdout.isTTY}return false}r.exports=Logger},97321:(r,i,c)=>{const u=c(71017);const h=Object.freeze([".co",".coffee",".eg",".iced",".js",".cjs",".litcoffee",".ls",".ts"]);class AbstractMigrationsLoader{constructor(r,i,c){this.sortDirsSeparately=i;if(!Array.isArray(r)){r=[r]}this.migrationsPaths=r;this.loadExtensions=c||h}getFile(r){const i=u.resolve(process.cwd(),r.directory);const h=u.join(i,r.file);const d=c(76909);return d(h)}}r.exports={DEFAULT_LOAD_EXTENSIONS:h,AbstractMigrationsLoader:AbstractMigrationsLoader}},49216:(r,i,c)=>{const u=c(71017);const{writeJsFileUsingTemplate:h}=c(84390);const{getMergedConfig:d}=c(25450);const{ensureDirectoryExists:p}=c(92025);const{yyyymmddhhmmss:g}=c(45288);class MigrationGenerator{constructor(r,i){this.config=d(r,undefined,i)}async make(r,i,c){this.config=d(i,this.config,c);if(!r){return Promise.reject(new Error("A name must be specified for the generated migration"))}await this._ensureFolder();const u=await this._writeNewMigration(r);return u}_ensureFolder(){const r=this._absoluteConfigDirs();const i=r.map(p);return Promise.all(i)}_getStubPath(){return this.config.stub||c.ab+"stub1/"+this.config.extension+".stub"}_getNewMigrationName(r){if(r[0]==="-")r=r.slice(1);return g()+"_"+r+"."+this.config.extension.split("-")[0]}_getNewMigrationPath(r){const i=this._getNewMigrationName(r);const c=this._absoluteConfigDirs();const h=c.slice(-1)[0];return u.join(h,i)}async _writeNewMigration(r){const i=this._getNewMigrationPath(r);await h(i,this._getStubPath(),{variable:"d"},this.config.variables||{});return i}_absoluteConfigDirs(){const r=Array.isArray(this.config.directory)?this.config.directory:[this.config.directory];return r.map((r=>{if(!r){console.warn("Failed to resolve config file, knex cannot determine where to generate migrations")}return u.resolve(process.cwd(),r)}))}}r.exports=MigrationGenerator},46153:(r,i,c)=>{const u=c(65402);const h=c(52921);const d=c(26901);const p=c(76218);const{getLockTableName:g,getTable:y,getTableName:b}=c(62435);const{getSchemaBuilder:v}=c(96127);const w=c(63768);const C=c(49216);const{getMergedConfig:E}=c(25450);const{isBoolean:x,isFunction:S}=c(29706);class LockError extends Error{constructor(r){super(r);this.name="MigrationLocked"}}class Migrator{constructor(r){if(S(r)){if(!r.isTransaction){this.knex=r.withUserParams({...r.userParams})}else{this.knex=r}}else{this.knex=Object.assign({},r);this.knex.userParams=this.knex.userParams||{}}this.config=E(this.knex.client.config.migrations,undefined,this.knex.client.logger);this.generator=new C(this.knex.client.config.migrations,this.knex.client.logger);this._activeMigration={fileName:null}}async latest(r){this._disableProcessing();this.config=E(r,this.config,this.knex.client.logger);const i=await w.listAllAndCompleted(this.config,this.knex);if(!this.config.disableMigrationsListValidation){validateMigrationList(this.config.migrationSource,i)}const[c,u]=i;const h=getNewMigrations(this.config.migrationSource,c,u);const d=!this.config.disableTransactions&&!(await Promise.all(h.map((async r=>{const i=await this.config.migrationSource.getMigration(r);return!this._useTransaction(i)})))).some((r=>r));if(d){return this.knex.transaction((r=>this._runBatch(h,"up",r)))}else{return this._runBatch(h,"up")}}async up(r){this._disableProcessing();this.config=E(r,this.config,this.knex.client.logger);const i=await w.listAllAndCompleted(this.config,this.knex);if(!this.config.disableMigrationsListValidation){validateMigrationList(this.config.migrationSource,i)}const[c,u]=i;const h=getNewMigrations(this.config.migrationSource,c,u);let d;const p=this.config.name;if(p){if(!u.includes(p)){d=h.find((r=>this.config.migrationSource.getMigrationName(r)===p));if(!d){throw new Error(`Migration "${p}" not found.`)}}}else{d=h[0]}const g=!d||this._useTransaction(await this.config.migrationSource.getMigration(d));const y=[];if(d){y.push(d)}const b=!this.config.disableTransactions&&(!d||g);if(b){return await this.knex.transaction((r=>this._runBatch(y,"up",r)))}else{return await this._runBatch(y,"up")}}rollback(r,i=false){this._disableProcessing();return new Promise(((c,u)=>{try{this.config=E(r,this.config,this.knex.client.logger)}catch(r){u(r)}w.listAllAndCompleted(this.config,this.knex).then((r=>{if(!this.config.disableMigrationsListValidation){validateMigrationList(this.config.migrationSource,r)}return r})).then((r=>{const[c,u]=r;return i?c.filter((r=>u.map((r=>r.name)).includes(this.config.migrationSource.getMigrationName(r)))).reverse():this._getLastBatch(r)})).then((r=>this._runBatch(r,"down"))).then(c,u)}))}down(r){this._disableProcessing();this.config=E(r,this.config,this.knex.client.logger);return w.listAllAndCompleted(this.config,this.knex).then((r=>{if(!this.config.disableMigrationsListValidation){validateMigrationList(this.config.migrationSource,r)}return r})).then((([r,i])=>{const c=r.filter((r=>i.map((r=>r.name)).includes(this.config.migrationSource.getMigrationName(r))));let u;const h=this.config.name;if(h){u=c.find((r=>this.config.migrationSource.getMigrationName(r)===h));if(!u){throw new Error(`Migration "${h}" was not run.`)}}else{u=c[c.length-1]}const d=[];if(u){d.push(u)}return this._runBatch(d,"down")}))}status(r){this._disableProcessing();this.config=E(r,this.config,this.knex.client.logger);return Promise.all([y(this.knex,this.config.tableName,this.config.schemaName).select("*"),w.listAll(this.config.migrationSource)]).then((([r,i])=>r.length-i.length))}currentVersion(r){this._disableProcessing();this.config=E(r,this.config,this.knex.client.logger);return w.listCompleted(this.config.tableName,this.config.schemaName,this.knex).then((r=>{const i=p(r.map((r=>r.name.split("_")[0])));return i===undefined?"none":i}))}async list(r){this._disableProcessing();this.config=E(r,this.config,this.knex.client.logger);const[i,c]=await w.listAllAndCompleted(this.config,this.knex);if(!this.config.disableMigrationsListValidation){validateMigrationList(this.config.migrationSource,[i,c])}const u=getNewMigrations(this.config.migrationSource,i,c);return[c,u]}async forceFreeMigrationsLock(r){this.config=E(r,this.config,this.knex.client.logger);const{schemaName:i,tableName:c}=this.config;const u=g(c);const{knex:h}=this;const getLockTable=()=>y(h,u,i);const d=await v(h,i).hasTable(u);if(d){await getLockTable().del();await getLockTable().insert({is_locked:0})}}make(r,i){return this.generator.make(r,i,this.knex.client.logger)}_disableProcessing(){if(this.knex.disableProcessing){this.knex.disableProcessing()}}_lockMigrations(r){const i=g(this.config.tableName);return y(this.knex,i,this.config.schemaName).transacting(r).where("is_locked","=",0).update({is_locked:1}).then((r=>{if(r!==1){throw new Error("Migration table is already locked")}}))}_getLock(r){const i=r?i=>i(r):r=>this.knex.transaction(r);return i((r=>this._lockMigrations(r))).catch((r=>{throw new LockError(r.message)}))}_freeLock(r=this.knex){const i=g(this.config.tableName);return y(r,i,this.config.schemaName).update({is_locked:0})}async _runBatch(r,i,c){const u=this.knex.client.driverName!=="cockroachdb";try{await this._getLock(u?c:undefined);const h=c?await w.listCompleted(this.config.tableName,this.config.schemaName,c):[];r=getNewMigrations(this.config.migrationSource,r,h);await Promise.all(r.map(this._validateMigrationStructure.bind(this)));let d=await this._latestBatchNumber(c);if(i==="up")d++;const p=await this._waterfallBatch(d,r,i,c);await this._freeLock(u?c:undefined);return p}catch(r){let i=Promise.resolve();if(r instanceof LockError){this.knex.client.logger.warn(`Can't take lock to run migrations: ${r.message}`);this.knex.client.logger.warn("If you are sure migrations are not running you can release the "+"lock manually by running 'knex migrate:unlock'")}else{if(this._activeMigration.fileName){this.knex.client.logger.warn(`migration file "${this._activeMigration.fileName}" failed`)}this.knex.client.logger.warn(`migration failed with error: ${r.message}`);i=this._freeLock(u?c:undefined)}try{await i}catch(r){}throw r}}async _validateMigrationStructure(r){const i=this.config.migrationSource.getMigrationName(r);const c=await this.config.migrationSource.getMigration(r);if(typeof c.up!=="function"||typeof c.down!=="function"){throw new Error(`Invalid migration: ${i} must have both an up and down function`)}return r}async _getLastBatch([r]){const{tableName:i,schemaName:c}=this.config;const u=await y(this.knex,i,c).where("batch",(function(r){r.max("batch").from(b(i,c))})).orderBy("id","desc");const h=u.map((i=>r.find((r=>this.config.migrationSource.getMigrationName(r)===i.name))));return Promise.all(h)}_latestBatchNumber(r=this.knex){return r.from(b(this.config.tableName,this.config.schemaName)).max("batch as max_batch").then((r=>r[0].max_batch||0))}_useTransaction(r,i){const c=h(r,"config.transaction");return x(c)?c:!i}_waterfallBatch(r,i,c,u){const h=u||this.knex;const{tableName:d,schemaName:p,disableTransactions:g}=this.config;let y=Promise.resolve();const v=[];i.forEach((i=>{const w=this.config.migrationSource.getMigrationName(i);this._activeMigration.fileName=w;const C=this.config.migrationSource.getMigration(i);y=y.then((async()=>await C)).then((r=>{this._activeMigration.fileName=w;if(!u&&this._useTransaction(r,g)){this.knex.enableProcessing();return this._transaction(this.knex,r,c,w)}h.enableProcessing();return checkPromise(this.knex.client.logger,r[c](h),w)})).then((()=>{h.disableProcessing();this.knex.disableProcessing();v.push(w);if(c==="up"){return h.into(b(d,p)).insert({name:w,batch:r,migration_time:new Date})}if(c==="down"){return h.from(b(d,p)).where({name:w}).del()}}))}));return y.then((()=>[r,v]))}_transaction(r,i,c,u){return r.transaction((h=>checkPromise(r.client.logger,i[c](h),u,(()=>{h.commit()}))))}}function validateMigrationList(r,i){const[c,u]=i;const h=getMissingMigrations(r,u,c);if(!d(h)){const r=h.map((r=>r.name));throw new Error(`The migration directory is corrupt, the following files are missing: ${r.join(", ")}`)}}function getMissingMigrations(r,i,c){return u(i,c,((i,c)=>i.name===r.getMigrationName(c)))}function getNewMigrations(r,i,c){return u(i,c,((i,c)=>c.name===r.getMigrationName(i)))}function checkPromise(r,i,c,u){if(!i||typeof i.then!=="function"){r.warn(`migration ${c} did not return a promise`);if(u){u()}}return i}r.exports={Migrator:Migrator}},63768:(r,i,c)=>{const{getTableName:u}=c(62435);const{ensureTable:h}=c(96127);function listAll(r,i){return r.getMigrations(i)}async function listCompleted(r,i,c){await h(r,i,c);return await c.from(u(r,i)).orderBy("id").select("name")}function listAllAndCompleted(r,i){return Promise.all([listAll(r.migrationSource,r.loadExtensions),listCompleted(r.tableName,r.schemaName,i)])}r.exports={listAll:listAll,listAllAndCompleted:listAllAndCompleted,listCompleted:listCompleted}},25450:(r,i,c)=>{const{FsMigrations:u}=c(43424);const h=c(65561);const{DEFAULT_LOAD_EXTENSIONS:d}=c(97321);const p=new h;const g=Object.freeze({extension:"js",loadExtensions:d,tableName:"knex_migrations",schemaName:null,directory:"./migrations",disableTransactions:false,disableMigrationsListValidation:false,sortDirsSeparately:false});function getMergedConfig(r,i,c=p){const h=Object.assign({},g,i||{},r);if(r&&(r.directory||r.sortDirsSeparately!==undefined||r.loadExtensions)){if(r.migrationSource){c.warn("FS-related option specified for migration configuration. This resets migrationSource to default FsMigrations")}h.migrationSource=null}if(!h.migrationSource){h.migrationSource=new u(h.directory,h.sortDirsSeparately,h.loadExtensions)}return h}r.exports={getMergedConfig:getMergedConfig}},43424:(r,i,c)=>{const u=c(71017);const h=c(95276);const{readdir:d}=c(92025);const{AbstractMigrationsLoader:p}=c(97321);class FsMigrations extends p{getMigrations(r){const i=this.migrationsPaths.map((r=>{const i=u.resolve(process.cwd(),r);return d(i).then((c=>({files:c,configDir:r,absoluteDir:i})))}));return Promise.all(i).then((i=>{const c=i.reduce(((r,i)=>{if(this.sortDirsSeparately){i.files=i.files.sort()}i.files.forEach((c=>r.push({file:c,directory:i.configDir})));return r}),[]);if(this.sortDirsSeparately){return filterMigrations(this,c,r||this.loadExtensions)}return filterMigrations(this,h(c,"file"),r||this.loadExtensions)}))}getMigrationName(r){return r.file}getMigration(r){return this.getFile(r)}}function filterMigrations(r,i,c){return i.filter((i=>{const h=r.getMigrationName(i);const d=u.extname(h);return c.includes(d)}))}r.exports={FsMigrations:FsMigrations}},96127:(r,i,c)=>{const{getTable:u,getLockTableName:h,getLockTableNameWithSchema:d,getTableName:p}=c(62435);function ensureTable(r,i,c){const d=h(r);return getSchemaBuilder(c,i).hasTable(r).then((u=>!u&&_createMigrationTable(r,i,c))).then((()=>getSchemaBuilder(c,i).hasTable(d))).then((r=>!r&&_createMigrationLockTable(d,i,c))).then((()=>u(c,d,i).select("*"))).then((u=>!u.length&&_insertLockRowIfNeeded(r,i,c)))}function _createMigrationTable(r,i,c){return getSchemaBuilder(c,i).createTable(p(r),(function(r){r.increments();r.string("name");r.integer("batch");r.timestamp("migration_time")}))}function _createMigrationLockTable(r,i,c){return getSchemaBuilder(c,i).createTable(r,(function(r){r.increments("index").primary();r.integer("is_locked")}))}function _insertLockRowIfNeeded(r,i,c){const u=d(r,i);return c.select("*").from(u).then((r=>!r.length?c.from(u).insert({is_locked:0}):null))}function getSchemaBuilder(r,i){return i?r.schema.withSchema(i):r.schema}r.exports={ensureTable:ensureTable,getSchemaBuilder:getSchemaBuilder}},62435:r=>{function getTableName(r,i){return i?`${i}.${r}`:r}function getTable(r,i,c){return c?r(i).withSchema(c):r(i)}function getLockTableName(r){return r+"_lock"}function getLockTableNameWithSchema(r,i){return i?i+"."+getLockTableName(r):getLockTableName(r)}r.exports={getLockTableName:getLockTableName,getLockTableNameWithSchema:getLockTableNameWithSchema,getTable:getTable,getTableName:getTableName}},89990:(r,i,c)=>{const u=c(71017);const{ensureDirectoryExists:h}=c(92025);const{writeJsFileUsingTemplate:d}=c(84390);const{yyyymmddhhmmss:p}=c(45288);const{getMergedConfig:g}=c(4994);class Seeder{constructor(r){this.knex=r;this.config=this.resolveConfig(r.client.config.seeds)}async run(r){this.config=this.resolveConfig(r);const i=await this.config.seedSource.getSeeds(this.config);return this._runSeeds(i)}async make(r,i){this.config=this.resolveConfig(i);if(!r)throw new Error("A name must be specified for the generated seed");await this._ensureFolder(i);const c=await this._writeNewSeed(r);return c}_ensureFolder(){const r=this.config.seedSource._getConfigDirectories(this.config.logger);const i=r.map(h);return Promise.all(i)}async _runSeeds(r){for(const i of r){await this._validateSeedStructure(i)}return this._waterfallBatch(r)}async _validateSeedStructure(r){const i=await this.config.seedSource.getSeed(r);if(typeof i.seed!=="function"){throw new Error(`Invalid seed file: ${r} must have a seed function`)}return r}_getStubPath(){return this.config.stub||c.ab+"stub/"+this.config.extension+".stub"}_getNewStubFileName(r){if(r[0]==="-")r=r.slice(1);if(this.config.timestampFilenamePrefix===true){r=`${p()}_${r}`}return`${r}.${this.config.extension}`}_getNewStubFilePath(r){const i=this._getNewStubFileName(r);const c=this.config.seedSource._getConfigDirectories(this.config.logger);const h=c.slice(-1)[0];return u.join(h,i)}async _writeNewSeed(r){const i=this._getNewStubFilePath(r);await d(i,this._getStubPath(),{variable:"d"},this.config.variables||{});return i}async _listAll(r){this.config=this.resolveConfig(r);return this.config.seedSource.getSeeds(this.config)}async _waterfallBatch(r){const{knex:i}=this;const c=[];for(const u of r){const r=await this.config.seedSource.getSeed(u);try{await r.seed(i);c.push(u)}catch(r){const i=new Error(`Error while executing "${u}" seed: ${r.message}`);i.original=r;i.stack=i.stack.split("\n").slice(0,2).join("\n")+"\n"+r.stack;throw i}}return[c]}resolveConfig(r){return g(r,this.config,this.knex.client.logger)}}r.exports=Seeder},4994:(r,i,c)=>{const{FsSeeds:u}=c(33789);const h=c(65561);const{DEFAULT_LOAD_EXTENSIONS:d}=c(97321);const p=new h;const g=Object.freeze({extension:"js",directory:"./seeds",loadExtensions:d,specific:null,timestampFilenamePrefix:false,recursive:false,sortDirsSeparately:false});function getMergedConfig(r,i,c=p){const h=Object.assign({},g,i||{},r,{logger:c});if(r&&(r.directory||r.sortDirsSeparately!==undefined||r.loadExtensions)){if(r.seedSource){c.warn("FS-related option specified for seed configuration. This resets seedSource to default FsMigrations")}h.seedSource=null}if(!h.seedSource){h.seedSource=new u(h.directory,h.sortDirsSeparately,h.loadExtensions)}return h}r.exports={getMergedConfig:getMergedConfig}},33789:(r,i,c)=>{const u=c(71017);const h=c(65922);const d=c(69932);const{AbstractMigrationsLoader:p}=c(97321);const{getFilepathsInFolder:g}=c(92025);const filterByLoadExtensions=r=>i=>{const c=u.extname(i);return d(r,c)};class FsSeeds extends p{_getConfigDirectories(r){const i=this.migrationsPaths;return i.map((i=>{if(!i){r.warn("Empty value passed as a directory for Seeder, this is not supported.")}return u.resolve(process.cwd(),i)}))}async getSeeds(r){const{loadExtensions:i,recursive:c,specific:d}=r;const p=h(await Promise.all(this._getConfigDirectories(r.logger).map((r=>g(r,c)))));let y=p.filter(filterByLoadExtensions(i));if(!this.sortDirsSeparately){y.sort()}if(d){y=y.filter((r=>u.basename(r)===d));if(y.length===0){throw new Error(`Invalid argument provided: the specific seed "${d}" does not exist.`)}}return y}async getSeed(r){const i=c(76909);const u=await i(r);return u}}r.exports={FsSeeds:FsSeeds}},92025:(r,i,c)=>{const u=c(57147);const h=c(65922);const d=c(22037);const p=c(71017);const{promisify:g}=c(73837);const y=g(u.stat);const b=g(u.readFile);const v=g(u.writeFile);const w=g(u.readdir);const C=g(u.mkdir);function existsSync(r){try{u.accessSync(r);return true}catch(r){return false}}function createTemp(){return g(u.mkdtemp)(`${d.tmpdir()}${p.sep}`)}function ensureDirectoryExists(r){return y(r).catch((()=>C(r,{recursive:true})))}async function getFilepathsInFolder(r,i=false){const c=await w(r);return h(await Promise.all(c.sort().map((async c=>{const u=p.resolve(r,c);const h=await y(u);if(h&&h.isDirectory()){if(i){return await getFilepathsInFolder(u,true)}return[]}return[u]}))))}r.exports={existsSync:existsSync,stat:y,readdir:w,readFile:b,writeFile:v,createTemp:createTemp,ensureDirectoryExists:ensureDirectoryExists,getFilepathsInFolder:getFilepathsInFolder}},76909:(r,i,c)=>{const u=c(70433);r.exports=async function importFile(r){return await u(r)?c(15252)(c(57310).pathToFileURL(r)):require(r)}},70433:(r,i,c)=>{const u=c(35594);r.exports=async function isModuleType(r){return r.endsWith(".mjs")||!r.endsWith(".cjs")&&await u(r)==="module"}},84390:(r,i,c)=>{const u=c(72470);const{readFile:h,writeFile:d}=c(92025);const jsSourceTemplate=(r,i)=>u(r,{interpolate:/<%=([\s\S]+?)%>/g,...i});const jsFileTemplate=async(r,i)=>{const c=await h(r);return jsSourceTemplate(c.toString(),i)};const writeJsFileUsingTemplate=async(r,i,c,u)=>d(r,(await jsFileTemplate(i,c))(u));r.exports={jsSourceTemplate:jsSourceTemplate,jsFileTemplate:jsFileTemplate,writeJsFileUsingTemplate:writeJsFileUsingTemplate}},45288:r=>{function yyyymmddhhmmss(){const r=new Date;return r.getUTCFullYear().toString()+(r.getUTCMonth()+1).toString().padStart(2,"0")+r.getUTCDate().toString().padStart(2,"0")+r.getUTCHours().toString().padStart(2,"0")+r.getUTCMinutes().toString().padStart(2,"0")+r.getUTCSeconds().toString().padStart(2,"0")}r.exports={yyyymmddhhmmss:yyyymmddhhmmss}},93304:(r,i,c)=>{const u=c(39491);class Analytic{constructor(r,i,c,u,h){this.schema=i;this.type="analytic";this.method=r;this.order=u||[];this.partitions=h||[];this.alias=c;this.and=this;this.grouping="columns"}partitionBy(r,i){u(Array.isArray(r)||typeof r==="string",`The argument to an analytic partitionBy function must be either a string\n            or an array of string.`);if(Array.isArray(r)){this.partitions=this.partitions.concat(r)}else{this.partitions.push({column:r,order:i})}return this}orderBy(r,i){u(Array.isArray(r)||typeof r==="string",`The argument to an analytic orderBy function must be either a string\n            or an array of string.`);if(Array.isArray(r)){this.order=this.order.concat(r)}else{this.order.push({column:r,order:i})}return this}}r.exports=Analytic},65172:r=>{r.exports={lockMode:{forShare:"forShare",forUpdate:"forUpdate",forNoKeyUpdate:"forNoKeyUpdate",forKeyShare:"forKeyShare"},waitMode:{skipLocked:"skipLocked",noWait:"noWait"}}},34279:(r,i,c)=>{const u=c(39491);function getClauseFromArguments(r,i,c,u,h){if(typeof c==="function"){return{type:"onWrapped",value:c,bool:i}}switch(arguments.length){case 3:return{type:"onRaw",value:c,bool:i};case 4:return{type:r,column:c,operator:"=",value:u,bool:i};default:return{type:r,column:c,operator:u,value:h,bool:i}}}class JoinClause{constructor(r,i,c){this.schema=c;this.table=r;this.joinType=i;this.and=this;this.clauses=[]}get or(){return this._bool("or")}on(r){if(typeof r==="object"&&typeof r.toSQL!=="function"){const i=Object.keys(r);let c=-1;const u=this._bool()==="or"?"orOn":"on";while(++c<i.length){this[u](i[c],r[i[c]])}return this}const i=getClauseFromArguments("onBasic",this._bool(),...arguments);if(i){this.clauses.push(i)}return this}orOn(r,i,c){return this._bool("or").on.apply(this,arguments)}onJsonPathEquals(r,i,c,u){this.clauses.push({type:"onJsonPathEquals",columnFirst:r,jsonPathFirst:i,columnSecond:c,jsonPathSecond:u,bool:this._bool(),not:this._not()});return this}orOnJsonPathEquals(r,i,c,u){return this._bool("or").onJsonPathEquals.apply(this,arguments)}using(r){return this.clauses.push({type:"onUsing",column:r,bool:this._bool()})}onVal(r){if(typeof r==="object"&&typeof r.toSQL!=="function"){const i=Object.keys(r);let c=-1;const u=this._bool()==="or"?"orOnVal":"onVal";while(++c<i.length){this[u](i[c],r[i[c]])}return this}const i=getClauseFromArguments("onVal",this._bool(),...arguments);if(i){this.clauses.push(i)}return this}andOnVal(){return this.onVal(...arguments)}orOnVal(){return this._bool("or").onVal(...arguments)}onBetween(r,i){u(Array.isArray(i),"The second argument to onBetween must be an array.");u(i.length===2,"You must specify 2 values for the onBetween clause");this.clauses.push({type:"onBetween",column:r,value:i,bool:this._bool(),not:this._not()});return this}onNotBetween(r,i){return this._not(true).onBetween(r,i)}orOnBetween(r,i){return this._bool("or").onBetween(r,i)}orOnNotBetween(r,i){return this._bool("or")._not(true).onBetween(r,i)}onIn(r,i){if(Array.isArray(i)&&i.length===0)return this.on(1,"=",0);this.clauses.push({type:"onIn",column:r,value:i,not:this._not(),bool:this._bool()});return this}onNotIn(r,i){return this._not(true).onIn(r,i)}orOnIn(r,i){return this._bool("or").onIn(r,i)}orOnNotIn(r,i){return this._bool("or")._not(true).onIn(r,i)}onNull(r){this.clauses.push({type:"onNull",column:r,not:this._not(),bool:this._bool()});return this}orOnNull(r){return this._bool("or").onNull(r)}onNotNull(r){return this._not(true).onNull(r)}orOnNotNull(r){return this._not(true)._bool("or").onNull(r)}onExists(r){this.clauses.push({type:"onExists",value:r,not:this._not(),bool:this._bool()});return this}orOnExists(r){return this._bool("or").onExists(r)}onNotExists(r){return this._not(true).onExists(r)}orOnNotExists(r){return this._not(true)._bool("or").onExists(r)}type(r){this.joinType=r;return this}_bool(r){if(arguments.length===1){this._boolFlag=r;return this}const i=this._boolFlag||"and";this._boolFlag="and";return i}_not(r){if(arguments.length===1){this._notFlag=r;return this}const i=this._notFlag;this._notFlag=false;return i}}Object.assign(JoinClause.prototype,{grouping:"join"});JoinClause.prototype.andOn=JoinClause.prototype.on;JoinClause.prototype.andOnIn=JoinClause.prototype.onIn;JoinClause.prototype.andOnNotIn=JoinClause.prototype.onNotIn;JoinClause.prototype.andOnNull=JoinClause.prototype.onNull;JoinClause.prototype.andOnNotNull=JoinClause.prototype.onNotNull;JoinClause.prototype.andOnExists=JoinClause.prototype.onExists;JoinClause.prototype.andOnNotExists=JoinClause.prototype.onNotExists;JoinClause.prototype.andOnBetween=JoinClause.prototype.onBetween;JoinClause.prototype.andOnNotBetween=JoinClause.prototype.onNotBetween;JoinClause.prototype.andOnJsonPathEquals=JoinClause.prototype.onJsonPathEquals;r.exports=JoinClause},4233:r=>{r.exports=["with","withRecursive","withMaterialized","withNotMaterialized","select","as","columns","column","from","fromJS","fromRaw","into","withSchema","table","distinct","join","joinRaw","innerJoin","leftJoin","leftOuterJoin","rightJoin","rightOuterJoin","outerJoin","fullOuterJoin","crossJoin","where","andWhere","orWhere","whereNot","orWhereNot","whereLike","andWhereLike","orWhereLike","whereILike","andWhereILike","orWhereILike","whereRaw","whereWrapped","havingWrapped","orWhereRaw","whereExists","orWhereExists","whereNotExists","orWhereNotExists","whereIn","orWhereIn","whereNotIn","orWhereNotIn","whereNull","orWhereNull","whereNotNull","orWhereNotNull","whereBetween","whereNotBetween","andWhereBetween","andWhereNotBetween","orWhereBetween","orWhereNotBetween","groupBy","groupByRaw","orderBy","orderByRaw","union","unionAll","intersect","having","havingRaw","orHaving","orHavingRaw","offset","limit","count","countDistinct","min","max","sum","sumDistinct","avg","avgDistinct","increment","decrement","first","debug","pluck","clearSelect","clearWhere","clearGroup","clearOrder","clearHaving","insert","update","returning","del","delete","truncate","transacting","connection","jsonExtract","jsonSet","jsonInsert","jsonRemove","whereJsonObject","orWhereJsonObject","andWhereJsonObject","whereNotJsonObject","orWhereNotJsonObject","andWhereNotJsonObject","whereJsonPath","orWhereJsonPath","andWhereJsonPath","whereJsonSupersetOf","orWhereJsonSupersetOf","andWhereJsonSupersetOf","whereJsonNotSupersetOf","orWhereJsonNotSupersetOf","andWhereJsonNotSupersetOf","whereJsonSubsetOf","orWhereJsonSubsetOf","andWhereJsonSubsetOf","whereJsonNotSubsetOf","orWhereJsonNotSubsetOf","andWhereJsonNotSubsetOf"]},26447:(r,i,c)=>{const u=c(39491);const{EventEmitter:h}=c(82361);const d=c(16215);const p=c(83577);const g=c(22759);const y=c(26901);const b=c(64677);const v=c(78915);const w=c(77222);const C=c(39084);const E=c(74373);const{addQueryContext:x,normalizeArr:S}=c(79362);const k=c(34279);const T=c(93304);const N=c(82927);const{isBoolean:O,isNumber:$,isObject:A,isString:P,isFunction:I}=c(29706);const{lockMode:R,waitMode:j}=c(65172);const{augmentWithBuilderInterface:L}=c(55481);const M=new Set(["pluck","first","select"]);const D=new Set(["with","select","columns","hintComments","where","union","join","group","order","having","limit","offset","counter","counters"]);const q=new Set([R.forShare,R.forUpdate,R.forNoKeyUpdate,R.forKeyShare]);class Builder extends h{constructor(r){super();this.client=r;this.and=this;this._single={};this._statements=[];this._method="select";if(r.config){N(this,5);this._debug=r.config.debug}this._joinFlag="inner";this._boolFlag="and";this._notFlag=false;this._asColumnFlag=false}toString(){return this.toQuery()}toSQL(r,i){return this.client.queryCompiler(this).toSQL(r||this._method,i)}clone(){const r=new this.constructor(this.client);r._method=this._method;r._single=p(this._single);r._statements=p(this._statements);r._debug=this._debug;if(this._options!==undefined){r._options=p(this._options)}if(this._queryContext!==undefined){r._queryContext=p(this._queryContext)}if(this._connection!==undefined){r._connection=this._connection}return r}timeout(r,{cancel:i}={}){if($(r)&&r>0){this._timeout=r;if(i){this.client.assertCanCancelQuery();this._cancelOnTimeout=true}}return this}isValidStatementArg(r){return typeof r==="function"||r instanceof Builder||r&&r.isRawInstance}_validateWithArgs(r,i,c,u){const[h,d]=typeof c==="undefined"?[i,undefined]:[c,i];if(typeof r!=="string"){throw new Error(`${u}() first argument must be a string`)}if(this.isValidStatementArg(h)&&typeof d==="undefined"){return}const p=Array.isArray(d)&&d.length>0&&d.every((r=>typeof r==="string"));if(!p){throw new Error(`${u}() second argument must be a statement or non-empty column name list.`)}if(this.isValidStatementArg(h)){return}throw new Error(`${u}() third argument must be a function / QueryBuilder or a raw when its second argument is a column name list`)}with(r,i,c){this._validateWithArgs(r,i,c,"with");return this.withWrapped(r,i,c)}withMaterialized(r,i,c){throw new Error("With materialized is not supported by this dialect")}withNotMaterialized(r,i,c){throw new Error("With materialized is not supported by this dialect")}withWrapped(r,i,c,u){const[h,d]=typeof c==="undefined"?[i,undefined]:[c,i];const p={grouping:"with",type:"withWrapped",alias:r,columnList:d,value:h};if(u!==undefined){p.materialized=u}this._statements.push(p);return this}withRecursive(r,i,c){this._validateWithArgs(r,i,c,"withRecursive");return this.withRecursiveWrapped(r,i,c)}withRecursiveWrapped(r,i,c){this.withWrapped(r,i,c);this._statements[this._statements.length-1].recursive=true;return this}columns(r){if(!r&&r!==0)return this;this._statements.push({grouping:"columns",value:S(...arguments)});return this}as(r){this._single.as=r;return this}hintComment(r){r=Array.isArray(r)?r:[r];if(r.some((r=>!P(r)))){throw new Error("Hint comment must be a string")}if(r.some((r=>r.includes("/*")||r.includes("*/")))){throw new Error('Hint comment cannot include "/*" or "*/"')}if(r.some((r=>r.includes("?")))){throw new Error('Hint comment cannot include "?"')}this._statements.push({grouping:"hintComments",value:r});return this}withSchema(r){this._single.schema=r;return this}table(r,i={}){this._single.table=r;this._single.only=i.only===true;return this}distinct(...r){this._statements.push({grouping:"columns",value:S(...r),distinct:true});return this}distinctOn(...r){if(y(r)){throw new Error("distinctOn requires at least on argument")}this._statements.push({grouping:"columns",value:S(...r),distinctOn:true});return this}join(r,i,...c){let u;const h=r instanceof Builder||typeof r==="function"?undefined:this._single.schema;const d=this._joinType();if(typeof i==="function"){u=new k(r,d,h);i.call(u,u)}else if(d==="raw"){u=new k(this.client.raw(r,i),"raw")}else{u=new k(r,d,h);if(i){u.on(i,...c)}}this._statements.push(u);return this}using(r){throw new Error("'using' function is only available in PostgreSQL dialect with Delete statements.")}innerJoin(...r){return this._joinType("inner").join(...r)}leftJoin(...r){return this._joinType("left").join(...r)}leftOuterJoin(...r){return this._joinType("left outer").join(...r)}rightJoin(...r){return this._joinType("right").join(...r)}rightOuterJoin(...r){return this._joinType("right outer").join(...r)}outerJoin(...r){return this._joinType("outer").join(...r)}fullOuterJoin(...r){return this._joinType("full outer").join(...r)}crossJoin(...r){return this._joinType("cross").join(...r)}joinRaw(...r){return this._joinType("raw").join(...r)}get or(){return this._bool("or")}get not(){return this._not(true)}where(r,i,c){const u=arguments.length;if(r===false||r===true){return this.where(1,"=",r?1:0)}if(typeof r==="function"){return this.whereWrapped(r)}if(A(r)&&!r.isRawInstance)return this._objectWhere(r);if(r&&r.isRawInstance&&u===1)return this.whereRaw(r);if(u===2){c=i;i="=";if(c===null){return this.whereNull(r)}}const h=`${i}`.toLowerCase().trim();if(u===3){if(h==="in"||h==="not in"){return this._not(h==="not in").whereIn(r,c)}if(h==="between"||h==="not between"){return this._not(h==="not between").whereBetween(r,c)}}if(c===null){if(h==="is"||h==="is not"){return this._not(h==="is not").whereNull(r)}}this._statements.push({grouping:"where",type:"whereBasic",column:r,operator:i,value:c,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag});return this}whereColumn(...r){this._asColumnFlag=true;this.where(...r);this._asColumnFlag=false;return this}orWhere(r,...i){this._bool("or");const c=r;if(A(c)&&!c.isRawInstance){return this.whereWrapped((function(){for(const r in c){this.andWhere(r,c[r])}}))}return this.where(r,...i)}orWhereColumn(r,...i){this._bool("or");const c=r;if(A(c)&&!c.isRawInstance){return this.whereWrapped((function(){for(const r in c){this.andWhereColumn(r,"=",c[r])}}))}return this.whereColumn(r,...i)}whereNot(r,...i){if(i.length>=2){if(i[0]==="in"||i[0]==="between"){this.client.logger.warn('whereNot is not suitable for "in" and "between" type subqueries. You should use "not in" and "not between" instead.')}}return this._not(true).where(r,...i)}whereNotColumn(...r){return this._not(true).whereColumn(...r)}orWhereNot(...r){return this._bool("or").whereNot(...r)}orWhereNotColumn(...r){return this._bool("or").whereNotColumn(...r)}_objectWhere(r){const i=this._bool();const c=this._not()?"Not":"";for(const u in r){this[i+"Where"+c](u,r[u])}return this}whereRaw(r,i){const c=r.isRawInstance?r:this.client.raw(r,i);this._statements.push({grouping:"where",type:"whereRaw",value:c,not:this._not(),bool:this._bool()});return this}orWhereRaw(r,i){return this._bool("or").whereRaw(r,i)}whereWrapped(r){this._statements.push({grouping:"where",type:"whereWrapped",value:r,not:this._not(),bool:this._bool()});return this}whereExists(r){this._statements.push({grouping:"where",type:"whereExists",value:r,not:this._not(),bool:this._bool()});return this}orWhereExists(r){return this._bool("or").whereExists(r)}whereNotExists(r){return this._not(true).whereExists(r)}orWhereNotExists(r){return this._bool("or").whereNotExists(r)}whereIn(r,i){if(Array.isArray(i)&&y(i))return this.where(this._not());this._statements.push({grouping:"where",type:"whereIn",column:r,value:i,not:this._not(),bool:this._bool()});return this}orWhereIn(r,i){return this._bool("or").whereIn(r,i)}whereNotIn(r,i){return this._not(true).whereIn(r,i)}orWhereNotIn(r,i){return this._bool("or")._not(true).whereIn(r,i)}whereNull(r){this._statements.push({grouping:"where",type:"whereNull",column:r,not:this._not(),bool:this._bool()});return this}orWhereNull(r){return this._bool("or").whereNull(r)}whereNotNull(r){return this._not(true).whereNull(r)}orWhereNotNull(r){return this._bool("or").whereNotNull(r)}whereBetween(r,i){u(Array.isArray(i),"The second argument to whereBetween must be an array.");u(i.length===2,"You must specify 2 values for the whereBetween clause");this._statements.push({grouping:"where",type:"whereBetween",column:r,value:i,not:this._not(),bool:this._bool()});return this}whereNotBetween(r,i){return this._not(true).whereBetween(r,i)}orWhereBetween(r,i){return this._bool("or").whereBetween(r,i)}orWhereNotBetween(r,i){return this._bool("or").whereNotBetween(r,i)}_whereLike(r,i,c){this._statements.push({grouping:"where",type:r,column:i,value:c,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag});return this}whereLike(r,i){return this._whereLike("whereLike",r,i)}orWhereLike(r,i){return this._bool("or")._whereLike("whereLike",r,i)}whereILike(r,i){return this._whereLike("whereILike",r,i)}orWhereILike(r,i){return this._bool("or")._whereLike("whereILike",r,i)}groupBy(r){if(r&&r.isRawInstance){return this.groupByRaw.apply(this,arguments)}this._statements.push({grouping:"group",type:"groupByBasic",value:S(...arguments)});return this}groupByRaw(r,i){const c=r.isRawInstance?r:this.client.raw(r,i);this._statements.push({grouping:"group",type:"groupByRaw",value:c});return this}orderBy(r,i,c=""){if(Array.isArray(r)){return this._orderByArray(r)}this._statements.push({grouping:"order",type:"orderByBasic",value:r,direction:i,nulls:c});return this}_orderByArray(r){for(let i=0;i<r.length;i++){const c=r[i];if(A(c)){this._statements.push({grouping:"order",type:"orderByBasic",value:c["column"],direction:c["order"],nulls:c["nulls"]})}else if(P(c)){this._statements.push({grouping:"order",type:"orderByBasic",value:c})}}return this}orderByRaw(r,i){const c=r.isRawInstance?r:this.client.raw(r,i);this._statements.push({grouping:"order",type:"orderByRaw",value:c});return this}_union(r,i){let c=i[0];let u=i[1];if(i.length===1||i.length===2&&O(u)){if(!Array.isArray(c)){c=[c]}for(let i=0,h=c.length;i<h;i++){this._statements.push({grouping:"union",clause:r,value:c[i],wrap:u||false})}}else{c=E(i).slice(0,i.length-1);u=i[i.length-1];if(!O(u)){c.push(u);u=false}this._union(r,[c,u])}return this}union(...r){return this._union("union",r)}unionAll(...r){return this._union("union all",r)}intersect(r,i){if(arguments.length===1||arguments.length===2&&O(i)){if(!Array.isArray(r)){r=[r]}for(let c=0,u=r.length;c<u;c++){this._statements.push({grouping:"union",clause:"intersect",value:r[c],wrap:i||false})}}else{r=E(arguments).slice(0,arguments.length-1);i=arguments[arguments.length-1];if(!O(i)){r.push(i);i=false}this.intersect(r,i)}return this}having(r,i,c){if(r.isRawInstance&&arguments.length===1){return this.havingRaw(r)}if(typeof r==="function"){return this.havingWrapped(r)}this._statements.push({grouping:"having",type:"havingBasic",column:r,operator:i,value:c,bool:this._bool(),not:this._not()});return this}orHaving(r,...i){this._bool("or");const c=r;if(A(c)&&!c.isRawInstance){return this.havingWrapped((function(){for(const r in c){this.andHaving(r,c[r])}}))}return this.having(r,...i)}havingWrapped(r){this._statements.push({grouping:"having",type:"havingWrapped",value:r,bool:this._bool(),not:this._not()});return this}havingNull(r){this._statements.push({grouping:"having",type:"havingNull",column:r,not:this._not(),bool:this._bool()});return this}orHavingNull(r){return this._bool("or").havingNull(r)}havingNotNull(r){return this._not(true).havingNull(r)}orHavingNotNull(r){return this._not(true)._bool("or").havingNull(r)}havingExists(r){this._statements.push({grouping:"having",type:"havingExists",value:r,not:this._not(),bool:this._bool()});return this}orHavingExists(r){return this._bool("or").havingExists(r)}havingNotExists(r){return this._not(true).havingExists(r)}orHavingNotExists(r){return this._not(true)._bool("or").havingExists(r)}havingBetween(r,i){u(Array.isArray(i),"The second argument to havingBetween must be an array.");u(i.length===2,"You must specify 2 values for the havingBetween clause");this._statements.push({grouping:"having",type:"havingBetween",column:r,value:i,not:this._not(),bool:this._bool()});return this}orHavingBetween(r,i){return this._bool("or").havingBetween(r,i)}havingNotBetween(r,i){return this._not(true).havingBetween(r,i)}orHavingNotBetween(r,i){return this._not(true)._bool("or").havingBetween(r,i)}havingIn(r,i){if(Array.isArray(i)&&y(i))return this.where(this._not());this._statements.push({grouping:"having",type:"havingIn",column:r,value:i,not:this._not(),bool:this._bool()});return this}orHavingIn(r,i){return this._bool("or").havingIn(r,i)}havingNotIn(r,i){return this._not(true).havingIn(r,i)}orHavingNotIn(r,i){return this._bool("or")._not(true).havingIn(r,i)}havingRaw(r,i){const c=r.isRawInstance?r:this.client.raw(r,i);this._statements.push({grouping:"having",type:"havingRaw",value:c,bool:this._bool(),not:this._not()});return this}orHavingRaw(r,i){return this._bool("or").havingRaw(r,i)}_setSkipBinding(r,i){let c=i;if(A(i)){c=i.skipBinding}this._single.skipBinding=this._single.skipBinding||{};this._single.skipBinding[r]=c}offset(r,i){if(r==null||r.isRawInstance||r instanceof Builder){this._single.offset=r}else{const i=parseInt(r,10);if(isNaN(i)){this.client.logger.warn("A valid integer must be provided to offset")}else if(i<0){throw new Error(`A non-negative integer must be provided to offset.`)}else{this._single.offset=i}}this._setSkipBinding("offset",i);return this}limit(r,i){const c=parseInt(r,10);if(isNaN(c)){this.client.logger.warn("A valid integer must be provided to limit")}else{this._single.limit=c;this._setSkipBinding("limit",i)}return this}count(r,i){return this._aggregate("count",r||"*",i)}min(r,i){return this._aggregate("min",r,i)}max(r,i){return this._aggregate("max",r,i)}sum(r,i){return this._aggregate("sum",r,i)}avg(r,i){return this._aggregate("avg",r,i)}countDistinct(...r){let i;if(r.length>1&&b(v(r))){[i]=r.splice(r.length-1,1)}if(!r.length){r="*"}else if(r.length===1){r=r[0]}return this._aggregate("count",r,{...i,distinct:true})}sumDistinct(r,i){return this._aggregate("sum",r,{...i,distinct:true})}avgDistinct(r,i){return this._aggregate("avg",r,{...i,distinct:true})}increment(r,i=1){if(A(r)){for(const i in r){this._counter(i,r[i])}return this}return this._counter(r,i)}decrement(r,i=1){if(A(r)){for(const i in r){this._counter(i,-r[i])}return this}return this._counter(r,-i)}clearCounters(){this._single.counter={};return this}first(...r){if(this._method&&this._method!=="select"){throw new Error(`Cannot chain .first() on "${this._method}" query`)}this.select(S(...r));this._method="first";this.limit(1);return this}connection(r){this._connection=r;this.client.processPassedConnection(r);return this}pluck(r){if(this._method&&this._method!=="select"){throw new Error(`Cannot chain .pluck() on "${this._method}" query`)}this._method="pluck";this._single.pluck=r;this._statements.push({grouping:"columns",type:"pluck",value:r});return this}clearSelect(){this._clearGrouping("columns");return this}clearWhere(){this._clearGrouping("where");return this}clearGroup(){this._clearGrouping("group");return this}clearOrder(){this._clearGrouping("order");return this}clearHaving(){this._clearGrouping("having");return this}clear(r){if(!D.has(r))throw new Error(`Knex Error: unknown statement '${r}'`);if(r.startsWith("counter"))return this.clearCounters();if(r==="select"){r="columns"}this._clearGrouping(r);return this}insert(r,i,c){this._method="insert";if(!y(i))this.returning(i,c);this._single.insert=r;return this}update(r,i,c){let u;const h=this._single.update||{};this._method="update";if(P(r)){if(b(i)){h[r]=JSON.stringify(i)}else{h[r]=i}if(arguments.length>2){u=arguments[2]}}else{const i=Object.keys(r);if(this._single.update){this.client.logger.warn("Update called multiple times with objects.")}let c=-1;while(++c<i.length){h[i[c]]=r[i[c]]}u=arguments[1]}if(!y(u))this.returning(u,c);this._single.update=h;return this}returning(r,i){this._single.returning=r;this._single.options=i;return this}onConflict(r){if(typeof r==="string"){r=[r]}return new OnConflictBuilder(this,r||true)}delete(r,i){this._method="del";if(!y(r))this.returning(r,i);return this}truncate(r){this._method="truncate";if(r){this._single.table=r}return this}columnInfo(r){this._method="columnInfo";this._single.columnInfo=r;return this}forUpdate(...r){this._single.lock=R.forUpdate;if(r.length===1&&Array.isArray(r[0])){this._single.lockTables=r[0]}else{this._single.lockTables=r}return this}forShare(...r){this._single.lock=R.forShare;this._single.lockTables=r;return this}forNoKeyUpdate(...r){this._single.lock=R.forNoKeyUpdate;this._single.lockTables=r;return this}forKeyShare(...r){this._single.lock=R.forKeyShare;this._single.lockTables=r;return this}skipLocked(){if(!this._isSelectQuery()){throw new Error(`Cannot chain .skipLocked() on "${this._method}" query!`)}if(!this._hasLockMode()){throw new Error(".skipLocked() can only be used after a call to .forShare() or .forUpdate()!")}if(this._single.waitMode===j.noWait){throw new Error(".skipLocked() cannot be used together with .noWait()!")}this._single.waitMode=j.skipLocked;return this}noWait(){if(!this._isSelectQuery()){throw new Error(`Cannot chain .noWait() on "${this._method}" query!`)}if(!this._hasLockMode()){throw new Error(".noWait() can only be used after a call to .forShare() or .forUpdate()!")}if(this._single.waitMode===j.skipLocked){throw new Error(".noWait() cannot be used together with .skipLocked()!")}this._single.waitMode=j.noWait;return this}fromJS(r){g(r,((r,i)=>{if(typeof this[i]!=="function"){this.client.logger.warn(`Knex Error: unknown key ${i}`)}if(Array.isArray(r)){this[i].apply(this,r)}else{this[i](r)}}));return this}fromRaw(r,i){const c=r.isRawInstance?r:this.client.raw(r,i);return this.from(c)}modify(r){r.apply(this,[this].concat(C(arguments)));return this}upsert(r,i,c){throw new Error(`Upsert is not yet supported for dialect ${this.client.dialect}`)}_json(r,i){this._statements.push({grouping:"columns",type:"json",method:r,params:i});return this}jsonExtract(){const r=arguments[0];let i;let c;let u=true;if(arguments.length>=2){i=arguments[1]}if(arguments.length>=3){c=arguments[2]}if(arguments.length===4){u=arguments[3]}if(arguments.length===2&&Array.isArray(arguments[0])&&O(arguments[1])){u=arguments[1]}return this._json("jsonExtract",{column:r,path:i,alias:c,singleValue:u})}jsonSet(r,i,c,u){return this._json("jsonSet",{column:r,path:i,value:c,alias:u})}jsonInsert(r,i,c,u){return this._json("jsonInsert",{column:r,path:i,value:c,alias:u})}jsonRemove(r,i,c){return this._json("jsonRemove",{column:r,path:i,alias:c})}_isJsonObject(r){return A(r)&&!(r instanceof Builder)}_whereJsonWrappedValue(r,i,c){const u={grouping:"where",type:r,column:i,value:c,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag};if(arguments[3]){u.operator=arguments[3]}if(arguments[4]){u.jsonPath=arguments[4]}this._statements.push(u)}whereJsonObject(r,i){this._whereJsonWrappedValue("whereJsonObject",r,i);return this}orWhereJsonObject(r,i,c){return this._bool("or").whereJsonObject(r,i,c)}whereNotJsonObject(r,i){this._not(true)._whereJsonWrappedValue("whereJsonObject",r,i);return this}orWhereNotJsonObject(r,i,c){return this._not(true)._bool("or").whereJsonObject(r,i,c)}whereJsonPath(r,i,c,u){this._whereJsonWrappedValue("whereJsonPath",r,u,c,i);return this}orWhereJsonPath(r,i,c,u){return this._bool("or").whereJsonPath(r,i,c,u)}whereJsonSupersetOf(r,i){this._whereJsonWrappedValue("whereJsonSupersetOf",r,i);return this}whereJsonNotSupersetOf(r,i){this._not(true).whereJsonSupersetOf(r,i);return this}orWhereJsonSupersetOf(r,i){this._whereJsonWrappedValue("whereJsonSupersetOf",r,i);return this}orWhereJsonNotSupersetOf(r,i){this._not(true)._bool("or").whereJsonSupersetOf(r,i);return this}whereJsonSubsetOf(r,i){this._whereJsonWrappedValue("whereJsonSubsetOf",r,i);return this}whereJsonNotSubsetOf(r,i){this._not(true).whereJsonSubsetOf(r,i);return this}orWhereJsonSubsetOf(r,i){this._whereJsonWrappedValue("whereJsonSubsetOf",r,i);return this}orWhereJsonNotSubsetOf(r,i){this._not(true)._bool("or").whereJsonSubsetOf(r,i);return this}whereJsonHasNone(r,i){this._not(true).whereJsonHasAll(r,i);return this}_analytic(r,i,c){let h;const{schema:d}=this._single;const p=this._analyticMethod();r=typeof r==="string"?r:null;u(typeof i==="function"||i.isRawInstance||Array.isArray(i)||typeof i==="string"||typeof i==="object",`The second argument to an analytic function must be either a function, a raw,\n       an array of string or object, an object or a single string.`);if(c){u(Array.isArray(c)||typeof c==="string"||typeof c==="object","The third argument to an analytic function must be either a string, an array of string or object or an object.")}if(I(i)){h=new T(p,d,r);i.call(h,h)}else if(i.isRawInstance){const c=i;h={grouping:"columns",type:"analytic",method:p,raw:c,alias:r}}else{const u=!Array.isArray(i)?[i]:i;let d=c||[];d=!Array.isArray(d)?[d]:d;h={grouping:"columns",type:"analytic",method:p,order:u,alias:r,partitions:d}}this._statements.push(h);return this}rank(...r){return this._analyticMethod("rank")._analytic(...r)}denseRank(...r){return this._analyticMethod("dense_rank")._analytic(...r)}rowNumber(...r){return this._analyticMethod("row_number")._analytic(...r)}_counter(r,i){i=parseFloat(i);this._method="update";this._single.counter=this._single.counter||{};this._single.counter[r]=i;return this}_bool(r){if(arguments.length===1){this._boolFlag=r;return this}const i=this._boolFlag;this._boolFlag="and";return i}_not(r){if(arguments.length===1){this._notFlag=r;return this}const i=this._notFlag;this._notFlag=false;return i}_joinType(r){if(arguments.length===1){this._joinFlag=r;return this}const i=this._joinFlag||"inner";this._joinFlag="inner";return i}_analyticMethod(r){if(arguments.length===1){this._analyticFlag=r;return this}return this._analyticFlag||"row_number"}_aggregate(r,i,c={}){this._statements.push({grouping:"columns",type:i.isRawInstance?"aggregateRaw":"aggregate",method:r,value:i,aggregateDistinct:c.distinct||false,alias:c.as});return this}_clearGrouping(r){if(r in this._single){this._single[r]=undefined}else{this._statements=w(this._statements,{grouping:r})}}_isSelectQuery(){return M.has(this._method)}_hasLockMode(){return q.has(this._single.lock)}}Builder.prototype.select=Builder.prototype.columns;Builder.prototype.column=Builder.prototype.columns;Builder.prototype.andWhereNot=Builder.prototype.whereNot;Builder.prototype.andWhereNotColumn=Builder.prototype.whereNotColumn;Builder.prototype.andWhere=Builder.prototype.where;Builder.prototype.andWhereColumn=Builder.prototype.whereColumn;Builder.prototype.andWhereRaw=Builder.prototype.whereRaw;Builder.prototype.andWhereBetween=Builder.prototype.whereBetween;Builder.prototype.andWhereNotBetween=Builder.prototype.whereNotBetween;Builder.prototype.andWhereJsonObject=Builder.prototype.whereJsonObject;Builder.prototype.andWhereNotJsonObject=Builder.prototype.whereJsonObject;Builder.prototype.andWhereJsonPath=Builder.prototype.whereJsonPath;Builder.prototype.andWhereLike=Builder.prototype.whereLike;Builder.prototype.andWhereILike=Builder.prototype.whereILike;Builder.prototype.andHaving=Builder.prototype.having;Builder.prototype.andHavingIn=Builder.prototype.havingIn;Builder.prototype.andHavingNotIn=Builder.prototype.havingNotIn;Builder.prototype.andHavingNull=Builder.prototype.havingNull;Builder.prototype.andHavingNotNull=Builder.prototype.havingNotNull;Builder.prototype.andHavingExists=Builder.prototype.havingExists;Builder.prototype.andHavingNotExists=Builder.prototype.havingNotExists;Builder.prototype.andHavingBetween=Builder.prototype.havingBetween;Builder.prototype.andHavingNotBetween=Builder.prototype.havingNotBetween;Builder.prototype.from=Builder.prototype.table;Builder.prototype.into=Builder.prototype.table;Builder.prototype.del=Builder.prototype.delete;L(Builder);x(Builder);Builder.extend=(r,i)=>{if(Object.prototype.hasOwnProperty.call(Builder.prototype,r)){throw new Error(`Can't extend QueryBuilder with existing method ('${r}').`)}d(Builder.prototype,{[r]:i})};class OnConflictBuilder{constructor(r,i){this.builder=r;this._columns=i}ignore(){this.builder._single.onConflict=this._columns;this.builder._single.ignore=true;return this.builder}merge(r){this.builder._single.onConflict=this._columns;this.builder._single.merge={updates:r};return this.builder}then(){throw new Error("Incomplete onConflict clause. .onConflict() must be directly followed by either .merge() or .ignore()")}}r.exports=Builder},8697:(r,i,c)=>{const u=c(79362);const h=c(45114);const d=c(26447);const p=c(34279);const g=c(15087);const y=c(16215);const b=c(14606);const v=c(55954);const w=c(88524);const C=c(26901);const E=c(94328);const x=c(12548);const S=c(28847);const{nanoid:k}=c(81048);const{isString:T,isUndefined:N}=c(29706);const{columnize:O,direction:$,operator:A,wrap:P,unwrapRaw:I,rawOrFn:R}=c(31823);const j=g("knex:bindings");const L=["columns","join","where","union","group","having","order","limit","offset","lock","waitMode"];class QueryCompiler{constructor(r,i,c){this.client=r;this.method=i._method||"select";this.options=i._options;this.single=i._single;this.timeout=i._timeout||false;this.cancelOnTimeout=i._cancelOnTimeout||false;this.grouped=v(i._statements,"grouping");this.formatter=r.formatter(i);this._emptyInsertValue="default values";this.first=this.select;this.bindings=c||[];this.formatter.bindings=this.bindings;this.bindingsHolder=this;this.builder=this.formatter.builder}toSQL(r,i){this._undefinedInWhereClause=false;this.undefinedBindingsInfo=[];r=r||this.method;const c=this[r]()||"";const u={method:r,options:S(this.options,y,{}),timeout:this.timeout,cancelOnTimeout:this.cancelOnTimeout,bindings:this.bindingsHolder.bindings||[],__knexQueryUid:k()};Object.defineProperties(u,{toNative:{value:()=>({sql:this.client.positionBindings(u.sql),bindings:this.client.prepBindings(u.bindings)}),enumerable:false}});if(T(c)){u.sql=c}else{y(u,c)}if(r==="select"||r==="first"){if(this.single.as){u.as=this.single.as}}if(this._undefinedInWhereClause){j(u.bindings);throw new Error(`Undefined binding(s) detected when compiling `+`${r.toUpperCase()}. Undefined column(s): [${this.undefinedBindingsInfo.join(", ")}] query: ${u.sql}`)}return u}select(){let r=this.with();let i="";const c=[];const u=[];L.forEach((r=>{const h=this[r](this);switch(r){case"union":i=h;break;case"columns":case"join":case"where":c.push(h);break;default:u.push(h);break}}));const h=this.grouped.union&&this.grouped.union.map((r=>r.wrap)).some((r=>r));if(this.onlyUnions()){const h=b(c.concat(u)).join(" ");r+=i+(h?" "+h:"")}else{const d=(h?"(":"")+b(c).join(" ")+(h?")":"");const p=b(u).join(" ");r+=d+(i?" "+i:"")+(p?" "+p:p)}return r}pluck(){let r=this.single.pluck;if(r.indexOf(".")!==-1){r=r.split(".").slice(-1)[0]}return{sql:this.select(),pluck:r}}insert(){const r=this.single.insert||[];const i=this.with()+`insert into ${this.tableName} `;const c=this._insertBody(r);return c===""?"":i+c}_onConflictClause(r){return r instanceof h?this.formatter.wrap(r):`(${this.formatter.columnize(r)})`}_buildInsertValues(r){let i="";let c=-1;while(++c<r.values.length){if(c!==0)i+="), (";i+=this.client.parameterize(r.values[c],this.client.valueForUndefined,this.builder,this.bindingsHolder)}return i}_insertBody(r){let i="";if(Array.isArray(r)){if(r.length===0){return""}}else if(typeof r==="object"&&C(r)){return i+this._emptyInsertValue}const c=this._prepInsert(r);if(typeof c==="string"){i+=c}else{if(c.columns.length){i+=`(${O(c.columns,this.builder,this.client,this.bindingsHolder)}`;i+=") values ("+this._buildInsertValues(c)+")"}else if(r.length===1&&r[0]){i+=this._emptyInsertValue}else{i=""}}return i}update(){const r=this.with();const{tableName:i}=this;const c=this._prepUpdate(this.single.update);const u=this.where();return r+`update ${this.single.only?"only ":""}${i}`+" set "+c.join(", ")+(u?` ${u}`:"")}_hintComments(){let r=this.grouped.hintComments||[];r=r.map((r=>b(r.value).join(" ")));r=b(r).join(" ");return r?`/*+ ${r} */ `:""}columns(){let r="";if(this.onlyUnions())return"";const i=this._hintComments();const c=this.grouped.columns||[];let u=-1,h=[];if(c){while(++u<c.length){const i=c[u];if(i.distinct)r="distinct ";if(i.distinctOn){r=this.distinctOn(i.value);continue}if(i.type==="aggregate"){h.push(...this.aggregate(i))}else if(i.type==="aggregateRaw"){h.push(this.aggregateRaw(i))}else if(i.type==="analytic"){h.push(this.analytic(i))}else if(i.type==="json"){h.push(this.json(i))}else if(i.value&&i.value.length>0){h.push(O(i.value,this.builder,this.client,this.bindingsHolder))}}}if(h.length===0)h=["*"];const d=this.onlyJson()?"":"select ";return`${d}${i}${r}`+h.join(", ")+(this.tableName?` from ${this.single.only?"only ":""}${this.tableName}`:"")}_aggregate(r,{aliasSeparator:i=" as ",distinctParentheses:c}={}){const u=r.value;const h=r.method;const d=r.aggregateDistinct?"distinct ":"";const wrap=r=>P(r,undefined,this.builder,this.client,this.bindingsHolder);const addAlias=(r,c)=>{if(c){return r+i+wrap(c)}return r};const aggregateArray=(r,i)=>{let u=r.map(wrap).join(", ");if(d){const r=c?"(":" ";const i=c?")":"";u=d.trim()+r+u+i}const p=`${h}(${u})`;return addAlias(p,i)};const aggregateString=(r,i)=>{const c=`${h}(${d+wrap(r)})`;return addAlias(c,i)};if(Array.isArray(u)){return[aggregateArray(u)]}if(typeof u==="object"){if(r.alias){throw new Error("When using an object explicit alias can not be used")}return Object.entries(u).map((([r,i])=>{if(Array.isArray(i)){return aggregateArray(i,r)}return aggregateString(i,r)}))}const p=u.toLowerCase().indexOf(" as ");let g=u;let{alias:y}=r;if(p!==-1){g=u.slice(0,p);if(y){throw new Error(`Found multiple aliases for same column: ${g}`)}y=u.slice(p+4)}return[aggregateString(g,y)]}aggregate(r){return this._aggregate(r)}aggregateRaw(r){const i=r.aggregateDistinct?"distinct ":"";return`${r.method}(${i+I(r.value,undefined,this.builder,this.client,this.bindingsHolder)})`}_joinTable(r){return r.schema&&!(r.table instanceof h)?`${r.schema}.${r.table}`:r.table}join(){let r="";let i=-1;const c=this.grouped.join;if(!c)return"";while(++i<c.length){const u=c[i];const h=this._joinTable(u);if(i>0)r+=" ";if(u.joinType==="raw"){r+=I(u.table,undefined,this.builder,this.client,this.bindingsHolder)}else{r+=u.joinType+" join "+P(h,undefined,this.builder,this.client,this.bindingsHolder);let i=-1;while(++i<u.clauses.length){const c=u.clauses[i];if(i>0){r+=` ${c.bool} `}else{r+=` ${c.type==="onUsing"?"using":"on"} `}const h=this[c.type](c);if(h){r+=h}}}}return r}onBetween(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+this._not(r,"between")+" "+r.value.map((r=>this.client.parameter(r,this.builder,this.bindingsHolder))).join(" and ")}onNull(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" is "+this._not(r,"null")}onExists(r){return this._not(r,"exists")+" ("+R(r.value,undefined,this.builder,this.client,this.bindingsHolder)+")"}onIn(r){if(Array.isArray(r.column))return this.multiOnIn(r);let i;if(r.value instanceof h){i=this.client.parameter(r.value,this.builder,this.formatter)}else{i=this.client.parameterize(r.value,undefined,this.builder,this.bindingsHolder)}return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+this._not(r,"in ")+this.wrap(i)}multiOnIn(r){let i=-1,c=`(${O(r.column,this.builder,this.client,this.bindingsHolder)}) `;c+=this._not(r,"in ")+"((";while(++i<r.value.length){if(i!==0)c+="),(";c+=this.client.parameterize(r.value[i],undefined,this.builder,this.bindingsHolder)}return c+"))"}where(){const r=this.grouped.where;if(!r)return;const i=[];let c=-1;while(++c<r.length){const h=r[c];if(Object.prototype.hasOwnProperty.call(h,"value")&&u.containsUndefined(h.value)){this.undefinedBindingsInfo.push(h.column);this._undefinedInWhereClause=true}const d=this[h.type](h);if(d){if(i.length===0){i[0]="where"}else{i.push(h.bool)}i.push(d)}}return i.length>1?i.join(" "):""}group(){return this._groupsOrders("group")}order(){return this._groupsOrders("order")}having(){const r=this.grouped.having;if(!r)return"";const i=["having"];for(let c=0,u=r.length;c<u;c++){const u=r[c];const h=this[u.type](u);if(h){if(i.length===0){i[0]="where"}if(i.length>1||i.length===1&&i[0]!=="having"){i.push(u.bool)}i.push(h)}}return i.length>1?i.join(" "):""}havingRaw(r){return this._not(r,"")+I(r.value,undefined,this.builder,this.client,this.bindingsHolder)}havingWrapped(r){const i=R(r.value,"where",this.builder,this.client,this.bindingsHolder);return i&&this._not(r,"")+"("+i.slice(6)+")"||""}havingBasic(r){return this._not(r,"")+P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+A(r.operator,this.builder,this.client,this.bindingsHolder)+" "+this.client.parameter(r.value,this.builder,this.bindingsHolder)}havingNull(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" is "+this._not(r,"null")}havingExists(r){return this._not(r,"exists")+" ("+R(r.value,undefined,this.builder,this.client,this.bindingsHolder)+")"}havingBetween(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+this._not(r,"between")+" "+r.value.map((r=>this.client.parameter(r,this.builder,this.bindingsHolder))).join(" and ")}havingIn(r){if(Array.isArray(r.column))return this.multiHavingIn(r);return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+this._not(r,"in ")+this.wrap(this.client.parameterize(r.value,undefined,this.builder,this.bindingsHolder))}multiHavingIn(r){return this.multiOnIn(r)}union(){const r=this.onlyUnions();const i=this.grouped.union;if(!i)return"";let c="";for(let u=0,h=i.length;u<h;u++){const h=i[u];if(u>0)c+=" ";if(u>0||!r)c+=h.clause+" ";const d=R(h.value,undefined,this.builder,this.client,this.bindingsHolder);if(d){const r=h.wrap;if(r)c+="(";c+=d;if(r)c+=")"}}return c}onlyUnions(){return(!this.grouped.columns||!!this.grouped.columns[0].value)&&this.grouped.union&&!this.tableName}_getValueOrParameterFromAttribute(r,i){if(this.single.skipBinding[r]===true){return i!==undefined&&i!==null?i:this.single[r]}return this.client.parameter(this.single[r],this.builder,this.bindingsHolder)}onlyJson(){return!this.tableName&&this.grouped.columns&&this.grouped.columns.length===1&&this.grouped.columns[0].type==="json"}limit(){const r=!this.single.limit&&this.single.limit!==0;if(r)return"";return`limit ${this._getValueOrParameterFromAttribute("limit")}`}offset(){if(!this.single.offset)return"";return`offset ${this._getValueOrParameterFromAttribute("offset")}`}del(){const{tableName:r}=this;const i=this.with();const c=this.where();const u=this.join();const h=u?r+" ":"";return i+`delete ${h}from ${this.single.only?"only ":""}${r}`+(u?` ${u}`:"")+(c?` ${c}`:"")}truncate(){return`truncate ${this.tableName}`}lock(){if(this.single.lock){return this[this.single.lock]()}}waitMode(){if(this.single.waitMode){return this[this.single.waitMode]()}}skipLocked(){throw new Error(".skipLocked() is currently only supported on MySQL 8.0+ and PostgreSQL 9.5+")}noWait(){throw new Error(".noWait() is currently only supported on MySQL 8.0+, MariaDB 10.3.0+ and PostgreSQL 9.5+")}distinctOn(r){throw new Error(".distinctOn() is currently only supported on PostgreSQL")}onWrapped(r){const i=this;const c=new p;r.value.call(c,c);let u="";for(let r=0;r<c.clauses.length;r++){const h=c.clauses[r];if(r>0){u+=` ${h.bool} `}const d=i[h.type](h);if(d){u+=d}}if(u.length){return`(${u})`}return""}onBasic(r){const i=r.value instanceof d;return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+A(r.operator,this.builder,this.client,this.bindingsHolder)+" "+(i?"(":"")+P(r.value,undefined,this.builder,this.client,this.bindingsHolder)+(i?")":"")}onVal(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+A(r.operator,this.builder,this.client,this.bindingsHolder)+" "+this.client.parameter(r.value,this.builder,this.bindingsHolder)}onRaw(r){return I(r.value,undefined,this.builder,this.client,this.bindingsHolder)}onUsing(r){return"("+O(r.column,this.builder,this.client,this.bindingsHolder)+")"}_valueClause(r){return r.asColumn?P(r.value,undefined,this.builder,this.client,this.bindingsHolder):this.client.parameter(r.value,this.builder,this.bindingsHolder)}_columnClause(r){let i;if(Array.isArray(r.column)){i=`(${O(r.column,this.builder,this.client,this.bindingsHolder)})`}else{i=P(r.column,undefined,this.builder,this.client,this.bindingsHolder)}return i}whereIn(r){const i=this.client.values(r.value,this.builder,this.bindingsHolder);return`${this._columnClause(r)} ${this._not(r,"in ")}${i}`}whereLike(r){return`${this._columnClause(r)} ${this._not(r,"like ")}${this._valueClause(r)}`}whereILike(r){return`${this._columnClause(r)} ${this._not(r,"ilike ")}${this._valueClause(r)}`}whereNull(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" is "+this._not(r,"null")}whereBasic(r){return this._not(r,"")+P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+A(r.operator,this.builder,this.client,this.bindingsHolder)+" "+this._valueClause(r)}whereExists(r){return this._not(r,"exists")+" ("+R(r.value,undefined,this.builder,this.client,this.bindingsHolder)+")"}whereWrapped(r){const i=R(r.value,"where",this.builder,this.client,this.bindingsHolder);return i&&this._not(r,"")+"("+i.slice(6)+")"||""}whereBetween(r){return P(r.column,undefined,this.builder,this.client,this.bindingsHolder)+" "+this._not(r,"between")+" "+r.value.map((r=>this.client.parameter(r,this.builder,this.bindingsHolder))).join(" and ")}whereRaw(r){return this._not(r,"")+I(r.value,undefined,this.builder,this.client,this.bindingsHolder)}_jsonWrapValue(r){if(!this.builder._isJsonObject(r)){try{return JSON.stringify(JSON.parse(r.replace(/\n|\t/g,"")))}catch(i){return r}}return JSON.stringify(r)}_jsonValueClause(r){r.value=this._jsonWrapValue(r.value);return this._valueClause(r)}whereJsonObject(r){return`${this._columnClause(r)} ${r.not?"!=":"="} ${this._jsonValueClause(r)}`}wrap(r){if(r.charAt(0)!=="(")return`(${r})`;return r}json(r){return this[r.method](r.params)}analytic(r){let i="";const c=this;i+=r.method+"() over (";if(r.raw){i+=r.raw}else{if(r.partitions.length){i+="partition by ";i+=E(r.partitions,(function(r){if(T(r)){return c.formatter.columnize(r)}else return c.formatter.columnize(r.column)+(r.order?" "+r.order:"")})).join(", ")+" "}i+="order by ";i+=E(r.order,(function(r){if(T(r)){return c.formatter.columnize(r)}else return c.formatter.columnize(r.column)+(r.order?" "+r.order:"")})).join(", ")}i+=")";if(r.alias){i+=" as "+r.alias}return i}with(){if(!this.grouped.with||!this.grouped.with.length){return""}const r=this.grouped.with;if(!r)return;const i=[];let c=-1;let u=false;while(++c<r.length){const h=r[c];if(h.recursive){u=true}const d=this[h.type](h);i.push(d)}return`with ${u?"recursive ":""}${i.join(", ")} `}withWrapped(r){const i=R(r.value,undefined,this.builder,this.client,this.bindingsHolder);const c=r.columnList?"("+O(r.columnList,this.builder,this.client,this.bindingsHolder)+")":"";const u=r.materialized===undefined?"":r.materialized?"materialized ":"not materialized ";return i&&O(r.alias,this.builder,this.client,this.bindingsHolder)+c+" as "+u+"("+i+")"||""}_not(r,i){if(r.not)return`not ${i}`;return i}_prepInsert(r){const i=R(r,undefined,this.builder,this.client,this.bindingsHolder);if(i)return i;let c=[];const u=[];if(!Array.isArray(r))r=r?[r]:[];let h=-1;while(++h<r.length){if(r[h]==null)break;if(h===0)c=Object.keys(r[h]).sort();const i=new Array(c.length);const d=Object.keys(r[h]);let p=-1;while(++p<d.length){const g=d[p];let y=c.indexOf(g);if(y===-1){c=c.concat(g).sort();y=c.indexOf(g);let r=-1;while(++r<u.length){u[r].splice(y,0,undefined)}i.splice(y,0,undefined)}i[y]=r[h][g]}u.push(i)}return{columns:c,values:u}}_prepUpdate(r={}){const{counter:i={}}=this.single;for(const c of Object.keys(i)){if(w(r,c)){this.client.logger.warn(`increment/decrement called for a column that has already been specified in main .update() call. Ignoring increment/decrement and using value from .update() call.`);continue}let u=i[c];const h=u<0?"-":"+";if(h==="-"){u=-u}r[c]=this.client.raw(`?? ${h} ?`,[c,u])}r=x(r,N);const c=[];const u=Object.keys(r);let h=-1;while(++h<u.length){c.push(P(u[h],undefined,this.builder,this.client,this.bindingsHolder)+" = "+this.client.parameter(r[u[h]],this.builder,this.bindingsHolder))}if(C(c)){throw new Error(["Empty .update() call detected!","Update data does not contain any values to update.","This will result in a faulty query.",this.single.table?`Table: ${this.single.table}.`:"",this.single.update?`Columns: ${Object.keys(this.single.update)}.`:""].join(" "))}return c}_formatGroupsItemValue(r,i){const{formatter:c}=this;let u="";if(i==="last"){u=" is null"}else if(i==="first"){u=" is not null"}let p;if(r instanceof h){p=I(r,undefined,this.builder,this.client,this.bindingsHolder)}else if(r instanceof d||i){p="("+c.columnize(r)+u+")"}else{p=c.columnize(r)}return p}_basicGroupOrder(r,i){const c=this._formatGroupsItemValue(r.value,r.nulls);const u=i==="order"&&r.type!=="orderByRaw"?` ${$(r.direction,this.builder,this.client,this.bindingsHolder)}`:"";return c+u}_groupOrder(r,i){return this._basicGroupOrder(r,i)}_groupOrderNulls(r,i){const c=this._formatGroupsItemValue(r.value);const u=i==="order"&&r.type!=="orderByRaw"?` ${$(r.direction,this.builder,this.client,this.bindingsHolder)}`:"";if(r.nulls&&!(r.value instanceof h)){return`${c}${u?u:""} nulls ${r.nulls}`}return c+u}_groupsOrders(r){const i=this.grouped[r];if(!i)return"";const c=i.map((i=>this._groupOrder(i,r)));return c.length?r+" by "+c.join(", "):""}get tableName(){if(!this._tableName){let r=this.single.table;const i=this.single.schema;if(r&&i){const c=r instanceof d;const u=r instanceof h;const p=typeof r==="function";if(!c&&!u&&!p){r=`${i}.${r}`}}this._tableName=r?P(r,r instanceof d,this.builder,this.client,this.bindingsHolder):""}return this._tableName}_jsonPathWrap(r){return this.client.parameter(r.path||r[1],this.builder,this.bindingsHolder)}_jsonExtract(r,i){let c;if(Array.isArray(i.column)){c=i.column}else{c=[i]}if(!Array.isArray(r)){r=[r]}return c.map((i=>{let c=`${O(i.column||i[0],this.builder,this.client,this.bindingsHolder)}, ${this._jsonPathWrap(i)}`;r.forEach((r=>{c=r+"("+c+")"}));const u=i.alias||i[2];return u?this.client.alias(c,this.formatter.wrap(u)):c})).join(", ")}_jsonSet(r,i){const c=`${r}(${O(i.column,this.builder,this.client,this.bindingsHolder)}, ${this.client.parameter(i.path,this.builder,this.bindingsHolder)}, ${this.client.parameter(i.value,this.builder,this.bindingsHolder)})`;return i.alias?this.client.alias(c,this.formatter.wrap(i.alias)):c}_whereJsonPath(r,i){return`${r}(${this._columnClause(i)}, ${this._jsonPathWrap({path:i.jsonPath})}) ${A(i.operator,this.builder,this.client,this.bindingsHolder)} ${this._jsonValueClause(i)}`}_onJsonPathEquals(r,i){return r+"("+P(i.columnFirst,undefined,this.builder,this.client,this.bindingsHolder)+", "+this.client.parameter(i.jsonPathFirst,this.builder,this.bindingsHolder)+") = "+r+"("+P(i.columnSecond,undefined,this.builder,this.client,this.bindingsHolder)+", "+this.client.parameter(i.jsonPathSecond,this.builder,this.bindingsHolder)+")"}}r.exports=QueryCompiler},45114:(r,i,c)=>{const{EventEmitter:u}=c(82361);const h=c(15087);const d=c(16215);const p=c(64677);const g=c(28847);const{replaceRawArrBindings:y,replaceKeyBindings:b}=c(40727);const v=c(79362);const w=c(82927);const{nanoid:C}=c(81048);const{isNumber:E,isObject:x}=c(29706);const{augmentWithBuilderInterface:S}=c(55481);const k=h("knex:bindings");class Raw extends u{constructor(r){super();this.client=r;this.sql="";this.bindings=[];this._wrappedBefore=undefined;this._wrappedAfter=undefined;if(r&&r.config){this._debug=r.config.debug;w(this,4)}}set(r,i){this.sql=r;this.bindings=x(i)&&!i.toSQL||i===undefined?i:[i];return this}timeout(r,{cancel:i}={}){if(E(r)&&r>0){this._timeout=r;if(i){this.client.assertCanCancelQuery();this._cancelOnTimeout=true}}return this}wrap(r,i){this._wrappedBefore=r;this._wrappedAfter=i;return this}toString(){return this.toQuery()}toSQL(r,i){let c;if(Array.isArray(this.bindings)){c=y(this,this.client)}else if(this.bindings&&p(this.bindings)){c=b(this,this.client)}else{c={method:"raw",sql:this.sql,bindings:this.bindings===undefined?[]:[this.bindings]}}if(this._wrappedBefore){c.sql=this._wrappedBefore+c.sql}if(this._wrappedAfter){c.sql=c.sql+this._wrappedAfter}c.options=g(this._options,d,{});if(this._timeout){c.timeout=this._timeout;if(this._cancelOnTimeout){c.cancelOnTimeout=this._cancelOnTimeout}}c.bindings=c.bindings||[];if(v.containsUndefined(c.bindings)){const r=v.getUndefinedIndices(this.bindings);k(c.bindings);throw new Error(`Undefined binding(s) detected for keys [${r}] when compiling RAW query: ${c.sql}`)}c.__knexQueryUid=C();Object.defineProperties(c,{toNative:{value:()=>({sql:this.client.positionBindings(c.sql),bindings:this.client.prepBindings(c.bindings)}),enumerable:false}});return c}}Raw.prototype.isRawInstance=true;S(Raw);v.addQueryContext(Raw);r.exports=Raw},46605:(r,i,c)=>{const u=c(45114);class Ref extends u{constructor(r,i){super(r);this.ref=i;this._schema=null;this._alias=null}withSchema(r){this._schema=r;return this}as(r){this._alias=r;return this}toSQL(){const r=this._schema?`${this._schema}.${this.ref}`:this.ref;const i=this.client.formatter(this);const c=i.columnize(r);const u=this._alias?`${c} as ${i.wrap(this._alias)}`:c;this.set(u,[]);return super.toSQL(...arguments)}}r.exports=Ref},86968:(r,i,c)=>{const{EventEmitter:u}=c(82361);const h=c(74373);const d=c(16215);const{addQueryContext:p}=c(79362);const g=c(82927);const{augmentWithBuilderInterface:y}=c(55481);class SchemaBuilder extends u{constructor(r){super();this.client=r;this._sequence=[];if(r.config){this._debug=r.config.debug;g(this,4)}}withSchema(r){this._schema=r;return this}toString(){return this.toQuery()}toSQL(){return this.client.schemaCompiler(this).toSQL()}async generateDdlCommands(){return await this.client.schemaCompiler(this).generateDdlCommands()}}["createTable","createTableIfNotExists","createTableLike","createView","createViewOrReplace","createMaterializedView","refreshMaterializedView","dropView","dropViewIfExists","dropMaterializedView","dropMaterializedViewIfExists","createSchema","createSchemaIfNotExists","dropSchema","dropSchemaIfExists","createExtension","createExtensionIfNotExists","dropExtension","dropExtensionIfExists","table","alterTable","view","alterView","hasTable","hasColumn","dropTable","renameTable","renameView","dropTableIfExists","raw"].forEach((function(r){SchemaBuilder.prototype[r]=function(){if(r==="createTableIfNotExists"){this.client.logger.warn(["Use async .hasTable to check if table exists and then use plain .createTable. Since ",'.createTableIfNotExists actually just generates plain "CREATE TABLE IF NOT EXIST..." ',"query it will not work correctly if there are any alter table queries generated for ","columns afterwards. To not break old migrations this function is left untouched for now",", but it should not be used when writing new code and it is removed from documentation."].join(""))}if(r==="table")r="alterTable";if(r==="view")r="alterView";this._sequence.push({method:r,args:h(arguments)});return this}}));SchemaBuilder.extend=(r,i)=>{if(Object.prototype.hasOwnProperty.call(SchemaBuilder.prototype,r)){throw new Error(`Can't extend SchemaBuilder with existing method ('${r}').`)}d(SchemaBuilder.prototype,{[r]:i})};y(SchemaBuilder);p(SchemaBuilder);r.exports=SchemaBuilder},20064:(r,i,c)=>{const u=c(91363);const h=c(16215);const d=c(74373);const{addQueryContext:p}=c(79362);class ColumnBuilder{constructor(r,i,c,h){this.client=r;this._method="add";this._single={};this._modifiers={};this._statements=[];this._type=v[c]||c;this._args=h;this._tableBuilder=i;if(i._method==="alter"){u(this,b)}}references(r){return this._tableBuilder.foreign.call(this._tableBuilder,this._args[0],undefined,this)._columnBuilder(this).references(r)}}const g=["default","defaultsTo","defaultTo","unsigned","nullable","first","after","comment","collate","check","checkPositive","checkNegative","checkIn","checkNotIn","checkBetween","checkLength","checkRegex"];const y={default:"defaultTo",defaultsTo:"defaultTo"};g.forEach((function(r){const i=y[r]||r;ColumnBuilder.prototype[r]=function(){this._modifiers[i]=d(arguments);return this}}));p(ColumnBuilder);ColumnBuilder.prototype.notNull=ColumnBuilder.prototype.notNullable=function notNullable(){return this.nullable(false)};["index","primary","unique"].forEach((function(r){ColumnBuilder.prototype[r]=function(){if(this._type.toLowerCase().indexOf("increments")===-1){this._tableBuilder[r].apply(this._tableBuilder,[this._args[0]].concat(d(arguments)))}return this}}));ColumnBuilder.extend=(r,i)=>{if(Object.prototype.hasOwnProperty.call(ColumnBuilder.prototype,r)){throw new Error(`Can't extend ColumnBuilder with existing method ('${r}').`)}h(ColumnBuilder.prototype,{[r]:i})};const b={};b.drop=function(){this._single.drop=true;return this};b.alterType=function(r){this._statements.push({grouping:"alterType",value:r});return this};b.alter=function({alterNullable:r=true,alterType:i=true}={}){this._method="alter";this.alterNullable=r;this.alterType=i;return this};const v={float:"floating",enum:"enu",boolean:"bool",string:"varchar",bigint:"bigInteger"};r.exports=ColumnBuilder},10208:(r,i,c)=>{const u=c(70217);const h=c(55954);const d=c(12663);const p=c(88524);const g=c(39084);const{toNumber:y}=c(79362);const{formatDefault:b}=c(7646);const{operator:v}=c(31823);class ColumnCompiler{constructor(r,i,c){this.client=r;this.tableCompiler=i;this.columnBuilder=c;this._commonBuilder=this.columnBuilder;this.args=c._args;this.type=c._type.toLowerCase();this.grouped=h(c._statements,"grouping");this.modified=c._modifiers;this.isIncrements=this.type.indexOf("increments")!==-1;this.formatter=r.formatter(c);this.bindings=[];this.formatter.bindings=this.bindings;this.bindingsHolder=this;this.sequence=[];this.modifiers=[];this.checksCount=0}_addCheckModifiers(){this.modifiers.push("check","checkPositive","checkNegative","checkIn","checkNotIn","checkBetween","checkLength","checkRegex")}defaults(r){if(Object.prototype.hasOwnProperty.call(this._defaultMap,r)){return this._defaultMap[r].bind(this)()}else{throw new Error(`There is no default for the specified identifier ${r}`)}}toSQL(){this.pushQuery(this.compileColumn());if(this.sequence.additional){this.sequence=this.sequence.concat(this.sequence.additional)}return this.sequence}compileColumn(){return this.formatter.wrap(this.getColumnName())+" "+this.getColumnType()+this.getModifiers()}getColumnName(){const r=d(this.args);return r||this.defaults("columnName")}getColumnType(){if(!this._columnType){const r=this[this.type];this._columnType=typeof r==="function"?r.apply(this,g(this.args)):r}return this._columnType}getModifiers(){const r=[];for(let i=0,c=this.modifiers.length;i<c;i++){const c=this.modifiers[i];if(!this.isIncrements||this.isIncrements&&c==="comment"){if(p(this.modified,c)){const i=this[c].apply(this,this.modified[c]);if(i)r.push(i)}}}return r.length>0?` ${r.join(" ")}`:""}varchar(r){return`varchar(${y(r,255)})`}floating(r,i){return`float(${y(r,8)}, ${y(i,2)})`}decimal(r,i){if(r===null){throw new Error("Specifying no precision on decimal columns is not supported for that SQL dialect.")}return`decimal(${y(r,8)}, ${y(i,2)})`}specifictype(r){return r}nullable(r){return r===false?"not null":"null"}notNullable(){return this.nullable(false)}defaultTo(r){return`default ${b(r,this.type,this.client)}`}increments(r={primaryKey:true}){return"integer not null"+(this.tableCompiler._canBeAddPrimaryKey(r)?" primary key":"")+" autoincrement"}bigincrements(r={primaryKey:true}){return this.increments(r)}_pushAlterCheckQuery(r,i){let c=i;if(!c){this.checksCount++;c=this.tableCompiler.tableNameRaw+"_"+this.getColumnName()+"_"+this.checksCount}this.pushAdditional((function(){this.pushQuery(`alter table ${this.tableCompiler.tableName()} add constraint ${c} check(${r})`)}))}_checkConstraintName(r){return r?`constraint ${r} `:""}_check(r,i){if(this.columnBuilder._method==="alter"){this._pushAlterCheckQuery(r,i);return""}return`${this._checkConstraintName(i)}check (${r})`}checkPositive(r){return this._check(`${this.formatter.wrap(this.getColumnName())} ${v(">",this.columnBuilder,this.bindingsHolder)} 0`,r)}checkNegative(r){return this._check(`${this.formatter.wrap(this.getColumnName())} ${v("<",this.columnBuilder,this.bindingsHolder)} 0`,r)}_checkIn(r,i,c){return this._check(`${this.formatter.wrap(this.getColumnName())} ${c?"not ":""}in (${r.map((r=>this.client._escapeBinding(r))).join(",")})`,i)}checkIn(r,i){return this._checkIn(r,i)}checkNotIn(r,i){return this._checkIn(r,i,true)}checkBetween(r,i){if(r.length===2&&!Array.isArray(r[0])&&!Array.isArray(r[1])){r=[r]}const c=r.map((r=>`${this.formatter.wrap(this.getColumnName())} between ${this.client._escapeBinding(r[0])} and ${this.client._escapeBinding(r[1])}`)).join(" or ");return this._check(c,i)}checkLength(r,i,c){return this._check(`length(${this.formatter.wrap(this.getColumnName())}) ${v(r,this.columnBuilder,this.bindingsHolder)} ${y(i)}`,c)}}ColumnCompiler.prototype.binary="blob";ColumnCompiler.prototype.bool="boolean";ColumnCompiler.prototype.date="date";ColumnCompiler.prototype.datetime="datetime";ColumnCompiler.prototype.time="time";ColumnCompiler.prototype.timestamp="timestamp";ColumnCompiler.prototype.geometry="geometry";ColumnCompiler.prototype.geography="geography";ColumnCompiler.prototype.point="point";ColumnCompiler.prototype.enu="varchar";ColumnCompiler.prototype.bit=ColumnCompiler.prototype.json="text";ColumnCompiler.prototype.uuid=({useBinaryUuid:r=false,primaryKey:i=false}={})=>r?"binary(16)":"char(36)";ColumnCompiler.prototype.integer=ColumnCompiler.prototype.smallint=ColumnCompiler.prototype.mediumint="integer";ColumnCompiler.prototype.biginteger="bigint";ColumnCompiler.prototype.text="text";ColumnCompiler.prototype.tinyint="tinyint";ColumnCompiler.prototype.pushQuery=u.pushQuery;ColumnCompiler.prototype.pushAdditional=u.pushAdditional;ColumnCompiler.prototype.unshiftQuery=u.unshiftQuery;ColumnCompiler.prototype._defaultMap={columnName:function(){if(!this.isIncrements){throw new Error(`You did not specify a column name for the ${this.type} column.`)}return"id"}};r.exports=ColumnCompiler},3975:(r,i,c)=>{const{pushQuery:u,pushAdditional:h,unshiftQuery:d}=c(70217);class SchemaCompiler{constructor(r,i){this.builder=i;this._commonBuilder=this.builder;this.client=r;this.schema=i._schema;this.bindings=[];this.bindingsHolder=this;this.formatter=r.formatter(i);this.formatter.bindings=this.bindings;this.sequence=[]}createSchema(){throwOnlyPGError("createSchema")}createSchemaIfNotExists(){throwOnlyPGError("createSchemaIfNotExists")}dropSchema(){throwOnlyPGError("dropSchema")}dropSchemaIfExists(){throwOnlyPGError("dropSchemaIfExists")}dropTable(r){this.pushQuery(this.dropTablePrefix+this.formatter.wrap(prefixedTableName(this.schema,r)))}dropTableIfExists(r){this.pushQuery(this.dropTablePrefix+"if exists "+this.formatter.wrap(prefixedTableName(this.schema,r)))}dropView(r){this._dropView(r,false,false)}dropViewIfExists(r){this._dropView(r,true,false)}dropMaterializedView(r){throw new Error("materialized views are not supported by this dialect.")}dropMaterializedViewIfExists(r){throw new Error("materialized views are not supported by this dialect.")}renameView(r,i){throw new Error("rename view is not supported by this dialect (instead drop then create another view).")}refreshMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}_dropView(r,i,c){this.pushQuery((c?this.dropMaterializedViewPrefix:this.dropViewPrefix)+(i?"if exists ":"")+this.formatter.wrap(prefixedTableName(this.schema,r)))}raw(r,i){this.sequence.push(this.client.raw(r,i).toSQL())}toSQL(){const r=this.builder._sequence;for(let i=0,c=r.length;i<c;i++){const c=r[i];this[c.method].apply(this,c.args)}return this.sequence}async generateDdlCommands(){const r=this.toSQL();return{pre:[],sql:Array.isArray(r)?r:[r],check:null,post:[]}}}SchemaCompiler.prototype.dropTablePrefix="drop table ";SchemaCompiler.prototype.dropViewPrefix="drop view ";SchemaCompiler.prototype.dropMaterializedViewPrefix="drop materialized view ";SchemaCompiler.prototype.alterViewPrefix="alter view ";SchemaCompiler.prototype.alterTable=buildTable("alter");SchemaCompiler.prototype.createTable=buildTable("create");SchemaCompiler.prototype.createTableIfNotExists=buildTable("createIfNot");SchemaCompiler.prototype.createTableLike=buildTable("createLike");SchemaCompiler.prototype.createView=buildView("create");SchemaCompiler.prototype.createViewOrReplace=buildView("createOrReplace");SchemaCompiler.prototype.createMaterializedView=buildView("createMaterializedView");SchemaCompiler.prototype.alterView=buildView("alter");SchemaCompiler.prototype.pushQuery=u;SchemaCompiler.prototype.pushAdditional=h;SchemaCompiler.prototype.unshiftQuery=d;function build(r){const i=this.builder.queryContext();if(i!==undefined&&r.queryContext()===undefined){r.queryContext(i)}r.setSchema(this.schema);const c=r.toSQL();for(let r=0,i=c.length;r<i;r++){this.sequence.push(c[r])}}function buildTable(r){if(r==="createLike"){return function(i,c,u){const h=this.client.tableBuilder(r,i,c,u);build.call(this,h)}}else{return function(i,c){const u=this.client.tableBuilder(r,i,null,c);build.call(this,u)}}}function buildView(r){return function(i,c){const u=this.client.viewBuilder(r,i,c);build.call(this,u)}}function prefixedTableName(r,i){return r?`${r}.${i}`:i}function throwOnlyPGError(r){throw new Error(`${r} is not supported for this dialect (only PostgreSQL supports it currently).`)}r.exports=SchemaCompiler},70217:(r,i,c)=>{const u=c(39084);const{isString:h}=c(29706);function pushQuery(r){if(!r)return;if(h(r)){r={sql:r}}if(!r.bindings){r.bindings=this.bindingsHolder.bindings}this.sequence.push(r);this.formatter=this.client.formatter(this._commonBuilder);this.bindings=[];this.formatter.bindings=this.bindings}function pushAdditional(r){const i=new this.constructor(this.client,this.tableCompiler,this.columnBuilder);r.call(i,u(arguments));this.sequence.additional=(this.sequence.additional||[]).concat(i.sequence)}function unshiftQuery(r){if(!r)return;if(h(r)){r={sql:r}}if(!r.bindings){r.bindings=this.bindingsHolder.bindings}this.sequence.unshift(r);this.formatter=this.client.formatter(this._commonBuilder);this.bindings=[];this.formatter.bindings=this.bindings}r.exports={pushAdditional:pushAdditional,pushQuery:pushQuery,unshiftQuery:unshiftQuery}},63670:(r,i,c)=>{const u=c(22759);const h=c(91363);const d=c(16215);const p=c(74373);const g=c(79362);const{isString:y,isFunction:b,isObject:v}=c(29706);class TableBuilder{constructor(r,i,c,u,h){this.client=r;this._fn=h;this._method=i;this._schemaName=undefined;this._tableName=c;this._tableNameLike=u;this._statements=[];this._single={};if(!u&&!b(this._fn)){throw new TypeError("A callback function must be supplied to calls against `.createTable` "+"and `.table`")}}setSchema(r){this._schemaName=r}toSQL(){if(this._method==="alter"){h(this,E)}if(this._fn){this._fn.call(this,this)}return this.client.tableCompiler(this).toSQL()}timestamps(r,i,c){if(v(r)){({useTimestamps:r,defaultToNow:i,useCamelCase:c}=r)}const u=r===true?"timestamp":"datetime";const h=this[u](c?"createdAt":"created_at");const d=this[u](c?"updatedAt":"updated_at");if(i===true){const r=this.client.raw("CURRENT_TIMESTAMP");h.notNullable().defaultTo(r);d.notNullable().defaultTo(r)}}comment(r){if(typeof r!=="string"){throw new TypeError("Table comment must be string")}this._single.comment=r}foreign(r,i){const c={column:r,keyName:i};this._statements.push({grouping:"alterTable",method:"foreign",args:[c]});let u={references(r){let i;if(y(r)){i=r.split(".")}if(!i||i.length===1){c.references=i?i[0]:r;return{on(r){if(typeof r!=="string"){throw new TypeError(`Expected tableName to be a string, got: ${typeof r}`)}c.inTable=r;return u},inTable(){return this.on.apply(this,arguments)}}}c.inTable=i[0];c.references=i[1];return u},withKeyName(r){c.keyName=r;return u},onUpdate(r){c.onUpdate=r;return u},onDelete(r){c.onDelete=r;return u},deferrable:r=>{const i=["mysql","mssql","redshift","mysql2","oracledb"];if(i.indexOf(this.client.dialect)!==-1){throw new Error(`${this.client.dialect} does not support deferrable`)}c.deferrable=r;return u},_columnBuilder(r){h(r,u);u=r;return r}};return u}check(r,i,c){this._statements.push({grouping:"checks",args:[r,i,c]});return this}}["index","primary","unique","dropPrimary","dropUnique","dropIndex","dropForeign"].forEach((r=>{TableBuilder.prototype[r]=function(){this._statements.push({grouping:"alterTable",method:r,args:p(arguments)});return this}}));const w={mysql:["engine","charset","collate"],postgresql:["inherits"]};u(w,(function(r,i){r.forEach((function(r){TableBuilder.prototype[r]=function(c){if(this.client.dialect!==i){throw new Error(`Knex only supports ${r} statement with ${i}.`)}if(this._method==="alter"){throw new Error(`Knex does not support altering the ${r} outside of create `+`table, please use knex.raw statement.`)}this._single[r]=c}}))}));g.addQueryContext(TableBuilder);const C=["tinyint","smallint","mediumint","int","bigint","decimal","float","double","real","bit","boolean","serial","date","datetime","timestamp","time","year","geometry","geography","point","char","varchar","tinytext","tinyText","text","mediumtext","mediumText","longtext","longText","binary","varbinary","tinyblob","tinyBlob","mediumblob","mediumBlob","blob","longblob","longBlob","enum","set","bool","dateTime","increments","bigincrements","bigIncrements","integer","biginteger","bigInteger","string","json","jsonb","uuid","enu","specificType"];C.forEach((r=>{TableBuilder.prototype[r]=function(){const i=p(arguments);const c=this.client.columnBuilder(this,r,i);this._statements.push({grouping:"columns",builder:c});return c}}));const E={renameColumn(r,i){this._statements.push({grouping:"alterTable",method:"renameColumn",args:[r,i]});return this},dropTimestamps(){return this.dropColumns(arguments[0]===true?["createdAt","updatedAt"]:["created_at","updated_at"])},setNullable(r){this._statements.push({grouping:"alterTable",method:"setNullable",args:[r]});return this},check(r,i,c){this._statements.push({grouping:"alterTable",method:"check",args:[r,i,c]})},dropChecks(){this._statements.push({grouping:"alterTable",method:"dropChecks",args:p(arguments)})},dropNullable(r){this._statements.push({grouping:"alterTable",method:"dropNullable",args:[r]});return this}};E.dropColumn=E.dropColumns=function(){this._statements.push({grouping:"alterTable",method:"dropColumn",args:p(arguments)});return this};TableBuilder.extend=(r,i)=>{if(Object.prototype.hasOwnProperty.call(TableBuilder.prototype,r)){throw new Error(`Can't extend TableBuilder with existing method ('${r}').`)}d(TableBuilder.prototype,{[r]:i})};r.exports=TableBuilder},31492:(r,i,c)=>{const{pushAdditional:u,pushQuery:h,unshiftQuery:d}=c(70217);const p=c(79362);const g=c(55954);const y=c(23024);const b=c(26901);const v=c(39084);const{normalizeArr:w}=c(79362);class TableCompiler{constructor(r,i){this.client=r;this.tableBuilder=i;this._commonBuilder=this.tableBuilder;this.method=i._method;this.schemaNameRaw=i._schemaName;this.tableNameRaw=i._tableName;this.tableNameLikeRaw=i._tableNameLike;this.single=i._single;this.grouped=g(i._statements,"grouping");this.formatter=r.formatter(i);this.bindings=[];this.formatter.bindings=this.bindings;this.bindingsHolder=this;this.sequence=[];this._formatting=r.config&&r.config.formatting;this.checksCount=0}toSQL(){this[this.method]();return this.sequence}create(r,i){const c=this.getColumns();const u=c.map((r=>r.toSQL()));const h=this.getColumnTypes(u);if(this.createAlterTableMethods){this.alterTableForCreate(h)}this.createQuery(h,r,i);this.columnQueries(u);delete this.single.comment;this.alterTable()}createIfNot(){this.create(true)}createLike(){this.create(false,true)}createLikeIfNot(){this.create(true,true)}alter(){const r=this.getColumns();const i=r.map((r=>r.toSQL()));const c=this.getColumns("alter");const u=c.map((r=>r.toSQL()));const h=this.getColumnTypes(i);const d=this.getColumnTypes(u);this.addColumns(h);this.alterColumns(d,c);this.columnQueries(i);this.columnQueries(u);this.alterTable()}foreign(r){if(r.inTable&&r.references){const i=r.keyName?this.formatter.wrap(r.keyName):this._indexCommand("foreign",this.tableNameRaw,r.column);const c=this.formatter.columnize(r.column);const u=this.formatter.columnize(r.references);const h=this.formatter.wrap(r.inTable);const d=r.onUpdate?(this.lowerCase?" on update ":" ON UPDATE ")+r.onUpdate:"";const p=r.onDelete?(this.lowerCase?" on delete ":" ON DELETE ")+r.onDelete:"";const g=r.deferrable?this.lowerCase?` deferrable initially ${r.deferrable.toLowerCase()} `:` DEFERRABLE INITIALLY ${r.deferrable.toUpperCase()} `:"";if(this.lowerCase){this.pushQuery((!this.forCreate?`alter table ${this.tableName()} add `:"")+"constraint "+i+" "+"foreign key ("+c+") references "+h+" ("+u+")"+d+p+g)}else{this.pushQuery((!this.forCreate?`ALTER TABLE ${this.tableName()} ADD `:"")+"CONSTRAINT "+i+" "+"FOREIGN KEY ("+c+") REFERENCES "+h+" ("+u+")"+d+p+g)}}}getColumnTypes(r){return r.reduce((function(r,i){const c=i[0];r.sql.push(c.sql);r.bindings.concat(c.bindings);return r}),{sql:[],bindings:[]})}columnQueries(r){const i=r.reduce((function(r,i){const c=v(i);if(!b(c))return r.concat(c);return r}),[]);for(const r of i){this.pushQuery(r)}}addColumns(r,i){i=i||this.addColumnsPrefix;if(r.sql.length>0){const c=r.sql.map((r=>i+r));this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+c.join(", "),bindings:r.bindings})}}alterColumns(r,i){if(r.sql.length>0){this.addColumns(r,this.alterColumnsPrefix,i)}}getColumns(r){const i=this.grouped.columns||[];r=r||"add";const c=this.tableBuilder.queryContext();return i.filter((i=>i.builder._method===r)).map((r=>{if(c!==undefined&&r.builder.queryContext()===undefined){r.builder.queryContext(c)}return this.client.columnCompiler(this,r.builder)}))}tableName(){const r=this.schemaNameRaw?`${this.schemaNameRaw}.${this.tableNameRaw}`:this.tableNameRaw;return this.formatter.wrap(r)}tableNameLike(){const r=this.schemaNameRaw?`${this.schemaNameRaw}.${this.tableNameLikeRaw}`:this.tableNameLikeRaw;return this.formatter.wrap(r)}alterTable(){const r=this.grouped.alterTable||[];for(let i=0,c=r.length;i<c;i++){const c=r[i];if(this[c.method]){this[c.method].apply(this,c.args)}else{this.client.logger.error(`Debug: ${c.method} does not exist`)}}for(const r in this.single){if(typeof this[r]==="function")this[r](this.single[r])}}alterTableForCreate(r){this.forCreate=true;const i=this.sequence;const c=this.grouped.alterTable||[];this.grouped.alterTable=[];for(let i=0,u=c.length;i<u;i++){const u=c[i];if(y(this.createAlterTableMethods,u.method)<0){this.grouped.alterTable.push(u);continue}if(this[u.method]){this.sequence=[];this[u.method].apply(this,u.args);r.sql.push(this.sequence[0].sql)}else{this.client.logger.error(`Debug: ${u.method} does not exist`)}}this.sequence=i;this.forCreate=false}dropIndex(r){this.pushQuery(`drop index${r}`)}dropUnique(){throw new Error("Method implemented in the dialect driver")}dropForeign(){throw new Error("Method implemented in the dialect driver")}dropColumn(){const r=p.normalizeArr.apply(null,arguments);const i=(Array.isArray(r)?r:[r]).map((r=>this.dropColumnPrefix+this.formatter.wrap(r)));this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+i.join(", "))}_setNullableState(r,i){const c=this.tableName();const u=this.formatter.columnize(r);const h=this.alterColumnsPrefix;return this.pushQuery({sql:"SELECT 1",output:()=>this.client.queryBuilder().from(this.tableNameRaw).columnInfo(r).then((r=>{if(b(r)){throw new Error(`.setNullable: Column ${u} does not exist in table ${c}.`)}const d=i?"null":"not null";const p=r.type+(r.maxLength?`(${r.maxLength})`:"");const g=r.defaultValue!==null&&r.defaultValue!==void 0?`default '${r.defaultValue}'`:"";const y=`alter table ${c} ${h} ${u} ${p} ${d} ${g}`;return this.client.raw(y)}))})}setNullable(r){return this._setNullableState(r,true)}dropNullable(r){return this._setNullableState(r,false)}dropChecks(r){if(r===undefined)return"";r=w(r);const i=this.tableName();const c=`alter table ${i} ${r.map((r=>`drop constraint ${r}`)).join(", ")}`;this.pushQuery(c)}check(r,i,c){const u=this.tableName();let h=c;if(!h){this.checksCount++;h=u+"_"+this.checksCount}const d=`alter table ${u} add constraint ${h} check(${r})`;this.pushQuery(d)}_addChecks(){if(this.grouped.checks){return", "+this.grouped.checks.map((r=>`${r.args[2]?"constraint "+r.args[2]+" ":""}check (${this.client.raw(r.args[0],r.args[1])})`)).join(", ")}return""}_indexCommand(r,i,c){if(!Array.isArray(c))c=c?[c]:[];const u=i.replace(/\.|-/g,"_");const h=(u+"_"+c.join("_")+"_"+r).toLowerCase();return this.formatter.wrap(h)}_getPrimaryKeys(){return(this.grouped.alterTable||[]).filter((r=>r.method==="primary")).flatMap((r=>r.args)).flat()}_canBeAddPrimaryKey(r){return r.primaryKey&&this._getPrimaryKeys().length===0}_getIncrementsColumnNames(){return this.grouped.columns.filter((r=>r.builder._type==="increments")).map((r=>r.builder._args[0]))}}TableCompiler.prototype.pushQuery=h;TableCompiler.prototype.pushAdditional=u;TableCompiler.prototype.unshiftQuery=d;TableCompiler.prototype.lowerCase=true;TableCompiler.prototype.createAlterTableMethods=null;TableCompiler.prototype.addColumnsPrefix="add column ";TableCompiler.prototype.alterColumnsPrefix="alter column ";TableCompiler.prototype.modifyColumnPrefix="modify column ";TableCompiler.prototype.dropColumnPrefix="drop column ";r.exports=TableCompiler},91978:(r,i,c)=>{const u=c(79362);const h=c(91363);const d=c(16215);class ViewBuilder{constructor(r,i,c,u){this.client=r;this._method=i;this._schemaName=undefined;this._columns=undefined;this._fn=u;this._viewName=c;this._statements=[];this._single={}}setSchema(r){this._schemaName=r}columns(r){this._columns=r}as(r){this._selectQuery=r}checkOption(){throw new Error("check option definition is not supported by this dialect.")}localCheckOption(){throw new Error("check option definition is not supported by this dialect.")}cascadedCheckOption(){throw new Error("check option definition is not supported by this dialect.")}toSQL(){if(this._method==="alter"){h(this,p)}this._fn.call(this,this);return this.client.viewCompiler(this).toSQL()}}const p={column(r){const i=this;return{rename:function(c){i._statements.push({grouping:"alterView",method:"renameColumn",args:[r,c]});return this},defaultTo:function(c){i._statements.push({grouping:"alterView",method:"defaultTo",args:[r,c]});return this}}}};u.addQueryContext(ViewBuilder);ViewBuilder.extend=(r,i)=>{if(Object.prototype.hasOwnProperty.call(ViewBuilder.prototype,r)){throw new Error(`Can't extend ViewBuilder with existing method ('${r}').`)}d(ViewBuilder.prototype,{[r]:i})};r.exports=ViewBuilder},71822:(r,i,c)=>{const{pushQuery:u}=c(70217);const h=c(55954);const{columnize:d}=c(31823);class ViewCompiler{constructor(r,i){this.client=r;this.viewBuilder=i;this._commonBuilder=this.viewBuilder;this.method=i._method;this.schemaNameRaw=i._schemaName;this.viewNameRaw=i._viewName;this.single=i._single;this.selectQuery=i._selectQuery;this.columns=i._columns;this.grouped=h(i._statements,"grouping");this.formatter=r.formatter(i);this.bindings=[];this.formatter.bindings=this.bindings;this.bindingsHolder=this;this.sequence=[]}toSQL(){this[this.method]();return this.sequence}create(){this.createQuery(this.columns,this.selectQuery)}createOrReplace(){throw new Error("replace views is not supported by this dialect.")}createMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}createQuery(r,i,c,u){const h="create "+(c?"materialized ":"")+(u?"or replace ":"")+"view ";const p=r?" ("+d(r,this.viewBuilder,this.client,this.bindingsHolder)+")":"";let g=h+this.viewName()+p;g+=" as ";g+=i.toString();switch(this.single.checkOption){case"default_option":g+=" with check option";break;case"local":g+=" with local check option";break;case"cascaded":g+=" with cascaded check option";break;default:break}this.pushQuery({sql:g})}renameView(r,i){throw new Error("rename view is not supported by this dialect (instead drop, then create another view).")}refreshMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}alter(){this.alterView()}alterView(){const r=this.grouped.alterView||[];for(let i=0,c=r.length;i<c;i++){const c=r[i];if(this[c.method]){this[c.method].apply(this,c.args)}else{this.client.logger.error(`Debug: ${c.method} does not exist`)}}for(const r in this.single){if(typeof this[r]==="function")this[r](this.single[r])}}renameColumn(r,i){throw new Error("rename column of views is not supported by this dialect.")}defaultTo(r,i){throw new Error("change default values of views is not supported by this dialect.")}viewName(){const r=this.schemaNameRaw?`${this.schemaNameRaw}.${this.viewNameRaw}`:this.viewNameRaw;return this.formatter.wrap(r)}}ViewCompiler.prototype.pushQuery=u;r.exports=ViewCompiler},25779:(r,i,c)=>{const u=c(70654);const finallyMixin=r=>Object.assign(r,{finally(r){return this.then().finally(r)}});r.exports=Promise.prototype.finally?finallyMixin:u},79362:(r,i,c)=>{const u=c(64677);const h=c(2683);const{CLIENT_ALIASES:d}=c(9153);const{isFunction:p}=c(29706);function normalizeArr(...r){if(Array.isArray(r[0])){return r[0]}return r}function containsUndefined(r){let i=false;if(h(r))return false;if(r&&p(r.toSQL)){return i}if(Array.isArray(r)){for(let c=0;c<r.length;c++){if(i)break;i=containsUndefined(r[c])}}else if(u(r)){Object.keys(r).forEach((c=>{if(!i){i=containsUndefined(r[c])}}))}else{i=r===undefined}return i}function getUndefinedIndices(r){const i=[];if(Array.isArray(r)){r.forEach(((r,c)=>{if(containsUndefined(r)){i.push(c)}}))}else if(u(r)){Object.keys(r).forEach((c=>{if(containsUndefined(r[c])){i.push(c)}}))}else{i.push(0)}return i}function addQueryContext(r){r.prototype.queryContext=function(r){if(r===undefined){return this._queryContext}this._queryContext=r;return this}}function resolveClientNameWithAliases(r){return d[r]||r}function toNumber(r,i){if(r===undefined||r===null)return i;const c=parseInt(r,10);return isNaN(c)?i:c}r.exports={addQueryContext:addQueryContext,containsUndefined:containsUndefined,getUndefinedIndices:getUndefinedIndices,normalizeArr:normalizeArr,resolveClientNameWithAliases:resolveClientNameWithAliases,toNumber:toNumber}},29706:r=>{function isString(r){return typeof r==="string"}function isNumber(r){return typeof r==="number"}function isBoolean(r){return typeof r==="boolean"}function isUndefined(r){return typeof r==="undefined"}function isObject(r){return typeof r==="object"&&r!==null}function isFunction(r){return typeof r==="function"}r.exports={isString:isString,isNumber:isNumber,isBoolean:isBoolean,isUndefined:isUndefined,isObject:isObject,isFunction:isFunction}},81048:r=>{const i="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";const c="0123456789";function nanoid(r=21){let c="";let u=r;while(u--){c+=i[Math.random()*64|0]}return c}function nanonum(r=21){let i="";let u=r;while(u--){i+=c[Math.random()*10|0]}return i}r.exports={nanoid:nanoid,nanonum:nanonum}},70654:r=>{r.exports=function(){}},82927:r=>{r.exports=function saveAsyncStack(r,i){if(r.client.config.asyncStackTraces){r._asyncStack={error:new Error,lines:i}}}},93835:r=>{const i=/[\0\b\t\n\r\x1a"'\\]/g;const c={"\0":"\\0","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};function wrapEscape(r){return function finalEscape(i,c={}){return r(i,finalEscape,c)}}function makeEscape(r={}){const i=r.escapeDate||dateToString;const c=r.escapeArray||arrayToList;const u=r.escapeBuffer||bufferToString;const h=r.escapeString||escapeString;const d=r.escapeObject||escapeObject;const p=r.wrap||wrapEscape;function escapeFn(r,p,g){if(r===undefined||r===null){return"NULL"}switch(typeof r){case"boolean":return r?"true":"false";case"number":return r+"";case"object":if(r instanceof Date){r=i(r,p,g)}else if(Array.isArray(r)){return c(r,p,g)}else if(Buffer.isBuffer(r)){return u(r,p,g)}else{return d(r,p,g)}}return h(r,p,g)}return p?p(escapeFn):escapeFn}function escapeObject(r,i,c){if(r&&typeof r.toSQL==="function"){return r.toSQL(c)}else{return JSON.stringify(r)}}function arrayToList(r,i,c){let u="";for(let h=0;h<r.length;h++){const d=r[h];if(Array.isArray(d)){u+=(h===0?"":", ")+"("+arrayToList(d,i,c)+")"}else{u+=(h===0?"":", ")+i(d,c)}}return u}function bufferToString(r){return"X"+escapeString(r.toString("hex"))}function escapeString(r,u,h){let d=i.lastIndex=0;let p="";let g;while(g=i.exec(r)){p+=r.slice(d,g.index)+c[g[0]];d=i.lastIndex}if(d===0){return"'"+r+"'"}if(d<r.length){return"'"+p+r.slice(d)+"'"}return"'"+p+"'"}function dateToString(r,i,c={}){const u=c.timeZone||"local";const h=new Date(r);let d;let p;let g;let y;let b;let v;let w;if(u==="local"){d=h.getFullYear();p=h.getMonth()+1;g=h.getDate();y=h.getHours();b=h.getMinutes();v=h.getSeconds();w=h.getMilliseconds()}else{const r=convertTimezone(u);if(r!==false&&r!==0){h.setTime(h.getTime()+r*6e4)}d=h.getUTCFullYear();p=h.getUTCMonth()+1;g=h.getUTCDate();y=h.getUTCHours();b=h.getUTCMinutes();v=h.getUTCSeconds();w=h.getUTCMilliseconds()}return zeroPad(d,4)+"-"+zeroPad(p,2)+"-"+zeroPad(g,2)+" "+zeroPad(y,2)+":"+zeroPad(b,2)+":"+zeroPad(v,2)+"."+zeroPad(w,3)}function zeroPad(r,i){r=r.toString();while(r.length<i){r="0"+r}return r}function convertTimezone(r){if(r==="Z"){return 0}const i=r.match(/([+\-\s])(\d\d):?(\d\d)?/);if(i){return(i[1]=="-"?-1:1)*(parseInt(i[2],10)+(i[3]?parseInt(i[3],10):0)/60)*60}return false}r.exports={arrayToList:arrayToList,bufferToString:bufferToString,dateToString:dateToString,escapeString:escapeString,charsRegex:i,charsMap:c,escapeObject:escapeObject,makeEscape:makeEscape}},77903:r=>{class KnexTimeoutError extends Error{constructor(r){super(r);this.name="KnexTimeoutError"}}function timeout(r,i){return new Promise((function(c,u){const h=setTimeout((function(){u(new KnexTimeoutError("operation timed out"))}),i);function wrappedResolve(r){clearTimeout(h);c(r)}function wrappedReject(r){clearTimeout(h);u(r)}r.then(wrappedResolve,wrappedReject)}))}r.exports.KnexTimeoutError=KnexTimeoutError;r.exports.timeout=timeout},83591:(r,i,c)=>{var u=c(43175),h=c(69134);var d=u(h,"DataView");r.exports=d},52145:(r,i,c)=>{var u=c(4489),h=c(33530),d=c(22925),p=c(54573),g=c(48791);function Hash(r){var i=-1,c=r==null?0:r.length;this.clear();while(++i<c){var u=r[i];this.set(u[0],u[1])}}Hash.prototype.clear=u;Hash.prototype["delete"]=h;Hash.prototype.get=d;Hash.prototype.has=p;Hash.prototype.set=g;r.exports=Hash},17710:(r,i,c)=>{var u=c(86998),h=c(46725),d=c(39341),p=c(16180),g=c(67924);function ListCache(r){var i=-1,c=r==null?0:r.length;this.clear();while(++i<c){var u=r[i];this.set(u[0],u[1])}}ListCache.prototype.clear=u;ListCache.prototype["delete"]=h;ListCache.prototype.get=d;ListCache.prototype.has=p;ListCache.prototype.set=g;r.exports=ListCache},22609:(r,i,c)=>{var u=c(43175),h=c(69134);var d=u(h,"Map");r.exports=d},72833:(r,i,c)=>{var u=c(19589),h=c(89679),d=c(56702),p=c(85815),g=c(54449);function MapCache(r){var i=-1,c=r==null?0:r.length;this.clear();while(++i<c){var u=r[i];this.set(u[0],u[1])}}MapCache.prototype.clear=u;MapCache.prototype["delete"]=h;MapCache.prototype.get=d;MapCache.prototype.has=p;MapCache.prototype.set=g;r.exports=MapCache},67617:(r,i,c)=>{var u=c(43175),h=c(69134);var d=u(h,"Promise");r.exports=d},27857:(r,i,c)=>{var u=c(43175),h=c(69134);var d=u(h,"Set");r.exports=d},7840:(r,i,c)=>{var u=c(72833),h=c(10595),d=c(87188);function SetCache(r){var i=-1,c=r==null?0:r.length;this.__data__=new u;while(++i<c){this.add(r[i])}}SetCache.prototype.add=SetCache.prototype.push=h;SetCache.prototype.has=d;r.exports=SetCache},24572:(r,i,c)=>{var u=c(17710),h=c(12426),d=c(96288),p=c(56145),g=c(6968),y=c(90950);function Stack(r){var i=this.__data__=new u(r);this.size=i.size}Stack.prototype.clear=h;Stack.prototype["delete"]=d;Stack.prototype.get=p;Stack.prototype.has=g;Stack.prototype.set=y;r.exports=Stack},13775:(r,i,c)=>{var u=c(69134);var h=u.Symbol;r.exports=h},38061:(r,i,c)=>{var u=c(69134);var h=u.Uint8Array;r.exports=h},13525:(r,i,c)=>{var u=c(43175),h=c(69134);var d=u(h,"WeakMap");r.exports=d},41735:r=>{function apply(r,i,c){switch(c.length){case 0:return r.call(i);case 1:return r.call(i,c[0]);case 2:return r.call(i,c[0],c[1]);case 3:return r.call(i,c[0],c[1],c[2])}return r.apply(i,c)}r.exports=apply},83688:r=>{function arrayAggregator(r,i,c,u){var h=-1,d=r==null?0:r.length;while(++h<d){var p=r[h];i(u,p,c(p),r)}return u}r.exports=arrayAggregator},52205:r=>{function arrayEach(r,i){var c=-1,u=r==null?0:r.length;while(++c<u){if(i(r[c],c,r)===false){break}}return r}r.exports=arrayEach},92604:r=>{function arrayFilter(r,i){var c=-1,u=r==null?0:r.length,h=0,d=[];while(++c<u){var p=r[c];if(i(p,c,r)){d[h++]=p}}return d}r.exports=arrayFilter},13327:(r,i,c)=>{var u=c(51018);function arrayIncludes(r,i){var c=r==null?0:r.length;return!!c&&u(r,i,0)>-1}r.exports=arrayIncludes},98874:r=>{function arrayIncludesWith(r,i,c){var u=-1,h=r==null?0:r.length;while(++u<h){if(c(i,r[u])){return true}}return false}r.exports=arrayIncludesWith},10573:(r,i,c)=>{var u=c(6541),h=c(33833),d=c(63708),p=c(75025),g=c(79015),y=c(2683);var b=Object.prototype;var v=b.hasOwnProperty;function arrayLikeKeys(r,i){var c=d(r),b=!c&&h(r),w=!c&&!b&&p(r),C=!c&&!b&&!w&&y(r),E=c||b||w||C,x=E?u(r.length,String):[],S=x.length;for(var k in r){if((i||v.call(r,k))&&!(E&&(k=="length"||w&&(k=="offset"||k=="parent")||C&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||g(k,S)))){x.push(k)}}return x}r.exports=arrayLikeKeys},57018:r=>{function arrayMap(r,i){var c=-1,u=r==null?0:r.length,h=Array(u);while(++c<u){h[c]=i(r[c],c,r)}return h}r.exports=arrayMap},62479:r=>{function arrayPush(r,i){var c=-1,u=i.length,h=r.length;while(++c<u){r[h+c]=i[c]}return r}r.exports=arrayPush},28434:r=>{function arrayReduce(r,i,c,u){var h=-1,d=r==null?0:r.length;if(u&&d){c=r[++h]}while(++h<d){c=i(c,r[h],h,r)}return c}r.exports=arrayReduce},5198:r=>{function arraySome(r,i){var c=-1,u=r==null?0:r.length;while(++c<u){if(i(r[c],c,r)){return true}}return false}r.exports=arraySome},83672:r=>{function asciiToArray(r){return r.split("")}r.exports=asciiToArray},18263:(r,i,c)=>{var u=c(722),h=c(63995);function assignMergeValue(r,i,c){if(c!==undefined&&!h(r[i],c)||c===undefined&&!(i in r)){u(r,i,c)}}r.exports=assignMergeValue},36041:(r,i,c)=>{var u=c(722),h=c(63995);var d=Object.prototype;var p=d.hasOwnProperty;function assignValue(r,i,c){var d=r[i];if(!(p.call(r,i)&&h(d,c))||c===undefined&&!(i in r)){u(r,i,c)}}r.exports=assignValue},10594:(r,i,c)=>{var u=c(63995);function assocIndexOf(r,i){var c=r.length;while(c--){if(u(r[c][0],i)){return c}}return-1}r.exports=assocIndexOf},6092:(r,i,c)=>{var u=c(15736);function baseAggregator(r,i,c,h){u(r,(function(r,u,d){i(h,r,c(r),d)}));return h}r.exports=baseAggregator},38521:(r,i,c)=>{var u=c(78729),h=c(64992);function baseAssign(r,i){return r&&u(i,h(i),r)}r.exports=baseAssign},35264:(r,i,c)=>{var u=c(78729),h=c(33180);function baseAssignIn(r,i){return r&&u(i,h(i),r)}r.exports=baseAssignIn},722:(r,i,c)=>{var u=c(31413);function baseAssignValue(r,i,c){if(i=="__proto__"&&u){u(r,i,{configurable:true,enumerable:true,value:c,writable:true})}else{r[i]=c}}r.exports=baseAssignValue},92216:(r,i,c)=>{var u=c(24572),h=c(52205),d=c(36041),p=c(38521),g=c(35264),y=c(67593),b=c(73947),v=c(24530),w=c(9913),C=c(18094),E=c(71757),x=c(62238),S=c(49709),k=c(83731),T=c(75577),N=c(63708),O=c(75025),$=c(83833),A=c(49491),P=c(32655),I=c(64992),R=c(33180);var j=1,L=2,M=4;var D="[object Arguments]",q="[object Array]",F="[object Boolean]",B="[object Date]",U="[object Error]",V="[object Function]",Q="[object GeneratorFunction]",H="[object Map]",G="[object Number]",K="[object Object]",W="[object RegExp]",z="[object Set]",J="[object String]",Y="[object Symbol]",X="[object WeakMap]";var Z="[object ArrayBuffer]",ee="[object DataView]",te="[object Float32Array]",re="[object Float64Array]",ne="[object Int8Array]",se="[object Int16Array]",ie="[object Int32Array]",oe="[object Uint8Array]",ae="[object Uint8ClampedArray]",ce="[object Uint16Array]",le="[object Uint32Array]";var ue={};ue[D]=ue[q]=ue[Z]=ue[ee]=ue[F]=ue[B]=ue[te]=ue[re]=ue[ne]=ue[se]=ue[ie]=ue[H]=ue[G]=ue[K]=ue[W]=ue[z]=ue[J]=ue[Y]=ue[oe]=ue[ae]=ue[ce]=ue[le]=true;ue[U]=ue[V]=ue[X]=false;function baseClone(r,i,c,q,F,B){var U,H=i&j,G=i&L,W=i&M;if(c){U=F?c(r,q,F,B):c(r)}if(U!==undefined){return U}if(!A(r)){return r}var z=N(r);if(z){U=S(r);if(!H){return b(r,U)}}else{var J=x(r),Y=J==V||J==Q;if(O(r)){return y(r,H)}if(J==K||J==D||Y&&!F){U=G||Y?{}:T(r);if(!H){return G?w(r,g(U,r)):v(r,p(U,r))}}else{if(!ue[J]){return F?r:{}}U=k(r,J,H)}}B||(B=new u);var X=B.get(r);if(X){return X}B.set(r,U);if(P(r)){r.forEach((function(u){U.add(baseClone(u,i,c,u,r,B))}))}else if($(r)){r.forEach((function(u,h){U.set(h,baseClone(u,i,c,h,r,B))}))}var Z=W?G?E:C:G?R:I;var ee=z?undefined:Z(r);h(ee||r,(function(u,h){if(ee){h=u;u=r[h]}d(U,h,baseClone(u,i,c,h,r,B))}));return U}r.exports=baseClone},13730:(r,i,c)=>{var u=c(49491);var h=Object.create;var d=function(){function object(){}return function(r){if(!u(r)){return{}}if(h){return h(r)}object.prototype=r;var i=new object;object.prototype=undefined;return i}}();r.exports=d},10487:r=>{var i="Expected a function";function baseDelay(r,c,u){if(typeof r!="function"){throw new TypeError(i)}return setTimeout((function(){r.apply(undefined,u)}),c)}r.exports=baseDelay},68002:(r,i,c)=>{var u=c(7840),h=c(13327),d=c(98874),p=c(57018),g=c(10826),y=c(66497);var b=200;function baseDifference(r,i,c,v){var w=-1,C=h,E=true,x=r.length,S=[],k=i.length;if(!x){return S}if(c){i=p(i,g(c))}if(v){C=d;E=false}else if(i.length>=b){C=y;E=false;i=new u(i)}e:while(++w<x){var T=r[w],N=c==null?T:c(T);T=v||T!==0?T:0;if(E&&N===N){var O=k;while(O--){if(i[O]===N){continue e}}S.push(T)}else if(!C(i,N,v)){S.push(T)}}return S}r.exports=baseDifference},15736:(r,i,c)=>{var u=c(79444),h=c(69961);var d=h(u);r.exports=d},72066:(r,i,c)=>{var u=c(70702);function baseExtremum(r,i,c){var h=-1,d=r.length;while(++h<d){var p=r[h],g=i(p);if(g!=null&&(y===undefined?g===g&&!u(g):c(g,y))){var y=g,b=p}}return b}r.exports=baseExtremum},23086:(r,i,c)=>{var u=c(15736);function baseFilter(r,i){var c=[];u(r,(function(r,u,h){if(i(r,u,h)){c.push(r)}}));return c}r.exports=baseFilter},17314:r=>{function baseFindIndex(r,i,c,u){var h=r.length,d=c+(u?1:-1);while(u?d--:++d<h){if(i(r[d],d,r)){return d}}return-1}r.exports=baseFindIndex},21605:(r,i,c)=>{var u=c(62479),h=c(17208);function baseFlatten(r,i,c,d,p){var g=-1,y=r.length;c||(c=h);p||(p=[]);while(++g<y){var b=r[g];if(i>0&&c(b)){if(i>1){baseFlatten(b,i-1,c,d,p)}else{u(p,b)}}else if(!d){p[p.length]=b}}return p}r.exports=baseFlatten},27:(r,i,c)=>{var u=c(33751);var h=u();r.exports=h},79444:(r,i,c)=>{var u=c(27),h=c(64992);function baseForOwn(r,i){return r&&u(r,i,h)}r.exports=baseForOwn},27157:(r,i,c)=>{var u=c(97444),h=c(8363);function baseGet(r,i){i=u(i,r);var c=0,d=i.length;while(r!=null&&c<d){r=r[h(i[c++])]}return c&&c==d?r:undefined}r.exports=baseGet},10618:(r,i,c)=>{var u=c(62479),h=c(63708);function baseGetAllKeys(r,i,c){var d=i(r);return h(r)?d:u(d,c(r))}r.exports=baseGetAllKeys},35562:(r,i,c)=>{var u=c(13775),h=c(33051),d=c(49754);var p="[object Null]",g="[object Undefined]";var y=u?u.toStringTag:undefined;function baseGetTag(r){if(r==null){return r===undefined?g:p}return y&&y in Object(r)?h(r):d(r)}r.exports=baseGetTag},35491:r=>{function baseGt(r,i){return r>i}r.exports=baseGt},58282:r=>{var i=Object.prototype;var c=i.hasOwnProperty;function baseHas(r,i){return r!=null&&c.call(r,i)}r.exports=baseHas},39240:r=>{function baseHasIn(r,i){return r!=null&&i in Object(r)}r.exports=baseHasIn},51018:(r,i,c)=>{var u=c(17314),h=c(28711),d=c(88672);function baseIndexOf(r,i,c){return i===i?d(r,i,c):u(r,h,c)}r.exports=baseIndexOf},22547:(r,i,c)=>{var u=c(35562),h=c(56551);var d="[object Arguments]";function baseIsArguments(r){return h(r)&&u(r)==d}r.exports=baseIsArguments},43841:(r,i,c)=>{var u=c(42236),h=c(56551);function baseIsEqual(r,i,c,d,p){if(r===i){return true}if(r==null||i==null||!h(r)&&!h(i)){return r!==r&&i!==i}return u(r,i,c,d,baseIsEqual,p)}r.exports=baseIsEqual},42236:(r,i,c)=>{var u=c(24572),h=c(81042),d=c(62856),p=c(46032),g=c(62238),y=c(63708),b=c(75025),v=c(2683);var w=1;var C="[object Arguments]",E="[object Array]",x="[object Object]";var S=Object.prototype;var k=S.hasOwnProperty;function baseIsEqualDeep(r,i,c,S,T,N){var O=y(r),$=y(i),A=O?E:g(r),P=$?E:g(i);A=A==C?x:A;P=P==C?x:P;var I=A==x,R=P==x,j=A==P;if(j&&b(r)){if(!b(i)){return false}O=true;I=false}if(j&&!I){N||(N=new u);return O||v(r)?h(r,i,c,S,T,N):d(r,i,A,c,S,T,N)}if(!(c&w)){var L=I&&k.call(r,"__wrapped__"),M=R&&k.call(i,"__wrapped__");if(L||M){var D=L?r.value():r,q=M?i.value():i;N||(N=new u);return T(D,q,c,S,N)}}if(!j){return false}N||(N=new u);return p(r,i,c,S,T,N)}r.exports=baseIsEqualDeep},36223:(r,i,c)=>{var u=c(62238),h=c(56551);var d="[object Map]";function baseIsMap(r){return h(r)&&u(r)==d}r.exports=baseIsMap},15774:(r,i,c)=>{var u=c(24572),h=c(43841);var d=1,p=2;function baseIsMatch(r,i,c,g){var y=c.length,b=y,v=!g;if(r==null){return!b}r=Object(r);while(y--){var w=c[y];if(v&&w[2]?w[1]!==r[w[0]]:!(w[0]in r)){return false}}while(++y<b){w=c[y];var C=w[0],E=r[C],x=w[1];if(v&&w[2]){if(E===undefined&&!(C in r)){return false}}else{var S=new u;if(g){var k=g(E,x,C,r,i,S)}if(!(k===undefined?h(x,E,d|p,g,S):k)){return false}}}return true}r.exports=baseIsMatch},28711:r=>{function baseIsNaN(r){return r!==r}r.exports=baseIsNaN},53553:(r,i,c)=>{var u=c(59414),h=c(53666),d=c(49491),p=c(82783);var g=/[\\^$.*+?()[\]{}|]/g;var y=/^\[object .+?Constructor\]$/;var b=Function.prototype,v=Object.prototype;var w=b.toString;var C=v.hasOwnProperty;var E=RegExp("^"+w.call(C).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(r){if(!d(r)||h(r)){return false}var i=u(r)?E:y;return i.test(p(r))}r.exports=baseIsNative},66128:(r,i,c)=>{var u=c(62238),h=c(56551);var d="[object Set]";function baseIsSet(r){return h(r)&&u(r)==d}r.exports=baseIsSet},7517:(r,i,c)=>{var u=c(35562),h=c(57566),d=c(56551);var p="[object Arguments]",g="[object Array]",y="[object Boolean]",b="[object Date]",v="[object Error]",w="[object Function]",C="[object Map]",E="[object Number]",x="[object Object]",S="[object RegExp]",k="[object Set]",T="[object String]",N="[object WeakMap]";var O="[object ArrayBuffer]",$="[object DataView]",A="[object Float32Array]",P="[object Float64Array]",I="[object Int8Array]",R="[object Int16Array]",j="[object Int32Array]",L="[object Uint8Array]",M="[object Uint8ClampedArray]",D="[object Uint16Array]",q="[object Uint32Array]";var F={};F[A]=F[P]=F[I]=F[R]=F[j]=F[L]=F[M]=F[D]=F[q]=true;F[p]=F[g]=F[O]=F[y]=F[$]=F[b]=F[v]=F[w]=F[C]=F[E]=F[x]=F[S]=F[k]=F[T]=F[N]=false;function baseIsTypedArray(r){return d(r)&&h(r.length)&&!!F[u(r)]}r.exports=baseIsTypedArray},47850:(r,i,c)=>{var u=c(8264),h=c(97968),d=c(54945),p=c(63708),g=c(99194);function baseIteratee(r){if(typeof r=="function"){return r}if(r==null){return d}if(typeof r=="object"){return p(r)?h(r[0],r[1]):u(r)}return g(r)}r.exports=baseIteratee},15500:(r,i,c)=>{var u=c(38200),h=c(84725);var d=Object.prototype;var p=d.hasOwnProperty;function baseKeys(r){if(!u(r)){return h(r)}var i=[];for(var c in Object(r)){if(p.call(r,c)&&c!="constructor"){i.push(c)}}return i}r.exports=baseKeys},28680:(r,i,c)=>{var u=c(49491),h=c(38200),d=c(8178);var p=Object.prototype;var g=p.hasOwnProperty;function baseKeysIn(r){if(!u(r)){return d(r)}var i=h(r),c=[];for(var p in r){if(!(p=="constructor"&&(i||!g.call(r,p)))){c.push(p)}}return c}r.exports=baseKeysIn},58187:(r,i,c)=>{var u=c(15736),h=c(74362);function baseMap(r,i){var c=-1,d=h(r)?Array(r.length):[];u(r,(function(r,u,h){d[++c]=i(r,u,h)}));return d}r.exports=baseMap},8264:(r,i,c)=>{var u=c(15774),h=c(99880),d=c(43136);function baseMatches(r){var i=h(r);if(i.length==1&&i[0][2]){return d(i[0][0],i[0][1])}return function(c){return c===r||u(c,r,i)}}r.exports=baseMatches},97968:(r,i,c)=>{var u=c(43841),h=c(52921),d=c(70890),p=c(32982),g=c(58568),y=c(43136),b=c(8363);var v=1,w=2;function baseMatchesProperty(r,i){if(p(r)&&g(i)){return y(b(r),i)}return function(c){var p=h(c,r);return p===undefined&&p===i?d(c,r):u(i,p,v|w)}}r.exports=baseMatchesProperty},78410:(r,i,c)=>{var u=c(24572),h=c(18263),d=c(27),p=c(87303),g=c(49491),y=c(33180),b=c(17122);function baseMerge(r,i,c,v,w){if(r===i){return}d(i,(function(d,y){w||(w=new u);if(g(d)){p(r,i,y,c,baseMerge,v,w)}else{var C=v?v(b(r,y),d,y+"",r,i,w):undefined;if(C===undefined){C=d}h(r,y,C)}}),y)}r.exports=baseMerge},87303:(r,i,c)=>{var u=c(18263),h=c(67593),d=c(69111),p=c(73947),g=c(75577),y=c(33833),b=c(63708),v=c(51622),w=c(75025),C=c(59414),E=c(49491),x=c(64677),S=c(2683),k=c(17122),T=c(15469);function baseMergeDeep(r,i,c,N,O,$,A){var P=k(r,c),I=k(i,c),R=A.get(I);if(R){u(r,c,R);return}var j=$?$(P,I,c+"",r,i,A):undefined;var L=j===undefined;if(L){var M=b(I),D=!M&&w(I),q=!M&&!D&&S(I);j=I;if(M||D||q){if(b(P)){j=P}else if(v(P)){j=p(P)}else if(D){L=false;j=h(I,true)}else if(q){L=false;j=d(I,true)}else{j=[]}}else if(x(I)||y(I)){j=P;if(y(P)){j=T(P)}else if(!E(P)||C(P)){j=g(I)}}else{L=false}}if(L){A.set(I,j);O(j,I,N,$,A);A["delete"](I)}u(r,c,j)}r.exports=baseMergeDeep},24787:(r,i,c)=>{var u=c(57018),h=c(27157),d=c(47850),p=c(58187),g=c(34039),y=c(10826),b=c(60544),v=c(54945),w=c(63708);function baseOrderBy(r,i,c){if(i.length){i=u(i,(function(r){if(w(r)){return function(i){return h(i,r.length===1?r[0]:r)}}return r}))}else{i=[v]}var C=-1;i=u(i,y(d));var E=p(r,(function(r,c,h){var d=u(i,(function(i){return i(r)}));return{criteria:d,index:++C,value:r}}));return g(E,(function(r,i){return b(r,i,c)}))}r.exports=baseOrderBy},42152:(r,i,c)=>{var u=c(27157),h=c(58231),d=c(97444);function basePickBy(r,i,c){var p=-1,g=i.length,y={};while(++p<g){var b=i[p],v=u(r,b);if(c(v,b)){h(y,d(b,r),v)}}return y}r.exports=basePickBy},44693:r=>{function baseProperty(r){return function(i){return i==null?undefined:i[r]}}r.exports=baseProperty},81126:(r,i,c)=>{var u=c(27157);function basePropertyDeep(r){return function(i){return u(i,r)}}r.exports=basePropertyDeep},99196:r=>{function basePropertyOf(r){return function(i){return r==null?undefined:r[i]}}r.exports=basePropertyOf},85236:r=>{function baseReduce(r,i,c,u,h){h(r,(function(r,h,d){c=u?(u=false,r):i(c,r,h,d)}));return c}r.exports=baseReduce},29576:(r,i,c)=>{var u=c(54945),h=c(21230),d=c(30768);function baseRest(r,i){return d(h(r,i,u),r+"")}r.exports=baseRest},58231:(r,i,c)=>{var u=c(36041),h=c(97444),d=c(79015),p=c(49491),g=c(8363);function baseSet(r,i,c,y){if(!p(r)){return r}i=h(i,r);var b=-1,v=i.length,w=v-1,C=r;while(C!=null&&++b<v){var E=g(i[b]),x=c;if(E==="__proto__"||E==="constructor"||E==="prototype"){return r}if(b!=w){var S=C[E];x=y?y(S,E,C):undefined;if(x===undefined){x=p(S)?S:d(i[b+1])?[]:{}}}u(C,E,x);C=C[E]}return r}r.exports=baseSet},58529:(r,i,c)=>{var u=c(55028),h=c(31413),d=c(54945);var p=!h?d:function(r,i){return h(r,"toString",{configurable:true,enumerable:false,value:u(i),writable:true})};r.exports=p},95972:r=>{function baseSlice(r,i,c){var u=-1,h=r.length;if(i<0){i=-i>h?0:h+i}c=c>h?h:c;if(c<0){c+=h}h=i>c?0:c-i>>>0;i>>>=0;var d=Array(h);while(++u<h){d[u]=r[u+i]}return d}r.exports=baseSlice},90370:(r,i,c)=>{var u=c(15736);function baseSome(r,i){var c;u(r,(function(r,u,h){c=i(r,u,h);return!c}));return!!c}r.exports=baseSome},34039:r=>{function baseSortBy(r,i){var c=r.length;r.sort(i);while(c--){r[c]=r[c].value}return r}r.exports=baseSortBy},6541:r=>{function baseTimes(r,i){var c=-1,u=Array(r);while(++c<r){u[c]=i(c)}return u}r.exports=baseTimes},99017:(r,i,c)=>{var u=c(13775),h=c(57018),d=c(63708),p=c(70702);var g=1/0;var y=u?u.prototype:undefined,b=y?y.toString:undefined;function baseToString(r){if(typeof r=="string"){return r}if(d(r)){return h(r,baseToString)+""}if(p(r)){return b?b.call(r):""}var i=r+"";return i=="0"&&1/r==-g?"-0":i}r.exports=baseToString},2433:(r,i,c)=>{var u=c(32233);var h=/^\s+/;function baseTrim(r){return r?r.slice(0,u(r)+1).replace(h,""):r}r.exports=baseTrim},10826:r=>{function baseUnary(r){return function(i){return r(i)}}r.exports=baseUnary},13623:(r,i,c)=>{var u=c(7840),h=c(13327),d=c(98874),p=c(66497),g=c(6097),y=c(58539);var b=200;function baseUniq(r,i,c){var v=-1,w=h,C=r.length,E=true,x=[],S=x;if(c){E=false;w=d}else if(C>=b){var k=i?null:g(r);if(k){return y(k)}E=false;w=p;S=new u}else{S=i?[]:x}e:while(++v<C){var T=r[v],N=i?i(T):T;T=c||T!==0?T:0;if(E&&N===N){var O=S.length;while(O--){if(S[O]===N){continue e}}if(i){S.push(N)}x.push(T)}else if(!w(S,N,c)){if(S!==x){S.push(N)}x.push(T)}}return x}r.exports=baseUniq},99866:(r,i,c)=>{var u=c(57018);function baseValues(r,i){return u(i,(function(i){return r[i]}))}r.exports=baseValues},66497:r=>{function cacheHas(r,i){return r.has(i)}r.exports=cacheHas},42032:(r,i,c)=>{var u=c(54945);function castFunction(r){return typeof r=="function"?r:u}r.exports=castFunction},97444:(r,i,c)=>{var u=c(63708),h=c(32982),d=c(27480),p=c(61914);function castPath(r,i){if(u(r)){return r}return h(r,i)?[r]:d(p(r))}r.exports=castPath},7042:(r,i,c)=>{var u=c(38061);function cloneArrayBuffer(r){var i=new r.constructor(r.byteLength);new u(i).set(new u(r));return i}r.exports=cloneArrayBuffer},67593:(r,i,c)=>{r=c.nmd(r);var u=c(69134);var h=true&&i&&!i.nodeType&&i;var d=h&&"object"=="object"&&r&&!r.nodeType&&r;var p=d&&d.exports===h;var g=p?u.Buffer:undefined,y=g?g.allocUnsafe:undefined;function cloneBuffer(r,i){if(i){return r.slice()}var c=r.length,u=y?y(c):new r.constructor(c);r.copy(u);return u}r.exports=cloneBuffer},42941:(r,i,c)=>{var u=c(7042);function cloneDataView(r,i){var c=i?u(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}r.exports=cloneDataView},34085:r=>{var i=/\w*$/;function cloneRegExp(r){var c=new r.constructor(r.source,i.exec(r));c.lastIndex=r.lastIndex;return c}r.exports=cloneRegExp},85051:(r,i,c)=>{var u=c(13775);var h=u?u.prototype:undefined,d=h?h.valueOf:undefined;function cloneSymbol(r){return d?Object(d.call(r)):{}}r.exports=cloneSymbol},69111:(r,i,c)=>{var u=c(7042);function cloneTypedArray(r,i){var c=i?u(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}r.exports=cloneTypedArray},72954:(r,i,c)=>{var u=c(70702);function compareAscending(r,i){if(r!==i){var c=r!==undefined,h=r===null,d=r===r,p=u(r);var g=i!==undefined,y=i===null,b=i===i,v=u(i);if(!y&&!v&&!p&&r>i||p&&g&&b&&!y&&!v||h&&g&&b||!c&&b||!d){return 1}if(!h&&!p&&!v&&r<i||v&&c&&d&&!h&&!p||y&&c&&d||!g&&d||!b){return-1}}return 0}r.exports=compareAscending},60544:(r,i,c)=>{var u=c(72954);function compareMultiple(r,i,c){var h=-1,d=r.criteria,p=i.criteria,g=d.length,y=c.length;while(++h<g){var b=u(d[h],p[h]);if(b){if(h>=y){return b}var v=c[h];return b*(v=="desc"?-1:1)}}return r.index-i.index}r.exports=compareMultiple},73947:r=>{function copyArray(r,i){var c=-1,u=r.length;i||(i=Array(u));while(++c<u){i[c]=r[c]}return i}r.exports=copyArray},78729:(r,i,c)=>{var u=c(36041),h=c(722);function copyObject(r,i,c,d){var p=!c;c||(c={});var g=-1,y=i.length;while(++g<y){var b=i[g];var v=d?d(c[b],r[b],b,c,r):undefined;if(v===undefined){v=r[b]}if(p){h(c,b,v)}else{u(c,b,v)}}return c}r.exports=copyObject},24530:(r,i,c)=>{var u=c(78729),h=c(20264);function copySymbols(r,i){return u(r,h(r),i)}r.exports=copySymbols},9913:(r,i,c)=>{var u=c(78729),h=c(81838);function copySymbolsIn(r,i){return u(r,h(r),i)}r.exports=copySymbolsIn},12947:(r,i,c)=>{var u=c(69134);var h=u["__core-js_shared__"];r.exports=h},37134:(r,i,c)=>{var u=c(83688),h=c(6092),d=c(47850),p=c(63708);function createAggregator(r,i){return function(c,g){var y=p(c)?u:h,b=i?i():{};return y(c,r,d(g,2),b)}}r.exports=createAggregator},94409:(r,i,c)=>{var u=c(29576),h=c(4399);function createAssigner(r){return u((function(i,c){var u=-1,d=c.length,p=d>1?c[d-1]:undefined,g=d>2?c[2]:undefined;p=r.length>3&&typeof p=="function"?(d--,p):undefined;if(g&&h(c[0],c[1],g)){p=d<3?undefined:p;d=1}i=Object(i);while(++u<d){var y=c[u];if(y){r(i,y,u,p)}}return i}))}r.exports=createAssigner},69961:(r,i,c)=>{var u=c(74362);function createBaseEach(r,i){return function(c,h){if(c==null){return c}if(!u(c)){return r(c,h)}var d=c.length,p=i?d:-1,g=Object(c);while(i?p--:++p<d){if(h(g[p],p,g)===false){break}}return c}}r.exports=createBaseEach},33751:r=>{function createBaseFor(r){return function(i,c,u){var h=-1,d=Object(i),p=u(i),g=p.length;while(g--){var y=p[r?g:++h];if(c(d[y],y,d)===false){break}}return i}}r.exports=createBaseFor},6097:(r,i,c)=>{var u=c(27857),h=c(39080),d=c(58539);var p=1/0;var g=!(u&&1/d(new u([,-0]))[1]==p)?h:function(r){return new u(r)};r.exports=g},90698:(r,i,c)=>{var u=c(63995);var h=Object.prototype;var d=h.hasOwnProperty;function customDefaultsAssignIn(r,i,c,p){if(r===undefined||u(r,h[c])&&!d.call(p,c)){return i}return r}r.exports=customDefaultsAssignIn},31413:(r,i,c)=>{var u=c(43175);var h=function(){try{var r=u(Object,"defineProperty");r({},"",{});return r}catch(r){}}();r.exports=h},81042:(r,i,c)=>{var u=c(7840),h=c(5198),d=c(66497);var p=1,g=2;function equalArrays(r,i,c,y,b,v){var w=c&p,C=r.length,E=i.length;if(C!=E&&!(w&&E>C)){return false}var x=v.get(r);var S=v.get(i);if(x&&S){return x==i&&S==r}var k=-1,T=true,N=c&g?new u:undefined;v.set(r,i);v.set(i,r);while(++k<C){var O=r[k],$=i[k];if(y){var A=w?y($,O,k,i,r,v):y(O,$,k,r,i,v)}if(A!==undefined){if(A){continue}T=false;break}if(N){if(!h(i,(function(r,i){if(!d(N,i)&&(O===r||b(O,r,c,y,v))){return N.push(i)}}))){T=false;break}}else if(!(O===$||b(O,$,c,y,v))){T=false;break}}v["delete"](r);v["delete"](i);return T}r.exports=equalArrays},62856:(r,i,c)=>{var u=c(13775),h=c(38061),d=c(63995),p=c(81042),g=c(124),y=c(58539);var b=1,v=2;var w="[object Boolean]",C="[object Date]",E="[object Error]",x="[object Map]",S="[object Number]",k="[object RegExp]",T="[object Set]",N="[object String]",O="[object Symbol]";var $="[object ArrayBuffer]",A="[object DataView]";var P=u?u.prototype:undefined,I=P?P.valueOf:undefined;function equalByTag(r,i,c,u,P,R,j){switch(c){case A:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset){return false}r=r.buffer;i=i.buffer;case $:if(r.byteLength!=i.byteLength||!R(new h(r),new h(i))){return false}return true;case w:case C:case S:return d(+r,+i);case E:return r.name==i.name&&r.message==i.message;case k:case N:return r==i+"";case x:var L=g;case T:var M=u&b;L||(L=y);if(r.size!=i.size&&!M){return false}var D=j.get(r);if(D){return D==i}u|=v;j.set(r,i);var q=p(L(r),L(i),u,P,R,j);j["delete"](r);return q;case O:if(I){return I.call(r)==I.call(i)}}return false}r.exports=equalByTag},46032:(r,i,c)=>{var u=c(18094);var h=1;var d=Object.prototype;var p=d.hasOwnProperty;function equalObjects(r,i,c,d,g,y){var b=c&h,v=u(r),w=v.length,C=u(i),E=C.length;if(w!=E&&!b){return false}var x=w;while(x--){var S=v[x];if(!(b?S in i:p.call(i,S))){return false}}var k=y.get(r);var T=y.get(i);if(k&&T){return k==i&&T==r}var N=true;y.set(r,i);y.set(i,r);var O=b;while(++x<w){S=v[x];var $=r[S],A=i[S];if(d){var P=b?d(A,$,S,i,r,y):d($,A,S,r,i,y)}if(!(P===undefined?$===A||g($,A,c,d,y):P)){N=false;break}O||(O=S=="constructor")}if(N&&!O){var I=r.constructor,R=i.constructor;if(I!=R&&("constructor"in r&&"constructor"in i)&&!(typeof I=="function"&&I instanceof I&&typeof R=="function"&&R instanceof R)){N=false}}y["delete"](r);y["delete"](i);return N}r.exports=equalObjects},27538:(r,i,c)=>{var u=c(99196);var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var d=u(h);r.exports=d},57891:r=>{var i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar(r){return"\\"+i[r]}r.exports=escapeStringChar},49503:r=>{var i=typeof global=="object"&&global&&global.Object===Object&&global;r.exports=i},18094:(r,i,c)=>{var u=c(10618),h=c(20264),d=c(64992);function getAllKeys(r){return u(r,d,h)}r.exports=getAllKeys},71757:(r,i,c)=>{var u=c(10618),h=c(81838),d=c(33180);function getAllKeysIn(r){return u(r,d,h)}r.exports=getAllKeysIn},22583:(r,i,c)=>{var u=c(9825);function getMapData(r,i){var c=r.__data__;return u(i)?c[typeof i=="string"?"string":"hash"]:c.map}r.exports=getMapData},99880:(r,i,c)=>{var u=c(58568),h=c(64992);function getMatchData(r){var i=h(r),c=i.length;while(c--){var d=i[c],p=r[d];i[c]=[d,p,u(p)]}return i}r.exports=getMatchData},43175:(r,i,c)=>{var u=c(53553),h=c(87080);function getNative(r,i){var c=h(r,i);return u(c)?c:undefined}r.exports=getNative},8660:(r,i,c)=>{var u=c(71376);var h=u(Object.getPrototypeOf,Object);r.exports=h},33051:(r,i,c)=>{var u=c(13775);var h=Object.prototype;var d=h.hasOwnProperty;var p=h.toString;var g=u?u.toStringTag:undefined;function getRawTag(r){var i=d.call(r,g),c=r[g];try{r[g]=undefined;var u=true}catch(r){}var h=p.call(r);if(u){if(i){r[g]=c}else{delete r[g]}}return h}r.exports=getRawTag},20264:(r,i,c)=>{var u=c(92604),h=c(32871);var d=Object.prototype;var p=d.propertyIsEnumerable;var g=Object.getOwnPropertySymbols;var y=!g?h:function(r){if(r==null){return[]}r=Object(r);return u(g(r),(function(i){return p.call(r,i)}))};r.exports=y},81838:(r,i,c)=>{var u=c(62479),h=c(8660),d=c(20264),p=c(32871);var g=Object.getOwnPropertySymbols;var y=!g?p:function(r){var i=[];while(r){u(i,d(r));r=h(r)}return i};r.exports=y},62238:(r,i,c)=>{var u=c(83591),h=c(22609),d=c(67617),p=c(27857),g=c(13525),y=c(35562),b=c(82783);var v="[object Map]",w="[object Object]",C="[object Promise]",E="[object Set]",x="[object WeakMap]";var S="[object DataView]";var k=b(u),T=b(h),N=b(d),O=b(p),$=b(g);var A=y;if(u&&A(new u(new ArrayBuffer(1)))!=S||h&&A(new h)!=v||d&&A(d.resolve())!=C||p&&A(new p)!=E||g&&A(new g)!=x){A=function(r){var i=y(r),c=i==w?r.constructor:undefined,u=c?b(c):"";if(u){switch(u){case k:return S;case T:return v;case N:return C;case O:return E;case $:return x}}return i}}r.exports=A},87080:r=>{function getValue(r,i){return r==null?undefined:r[i]}r.exports=getValue},65822:(r,i,c)=>{var u=c(97444),h=c(33833),d=c(63708),p=c(79015),g=c(57566),y=c(8363);function hasPath(r,i,c){i=u(i,r);var b=-1,v=i.length,w=false;while(++b<v){var C=y(i[b]);if(!(w=r!=null&&c(r,C))){break}r=r[C]}if(w||++b!=v){return w}v=r==null?0:r.length;return!!v&&g(v)&&p(C,v)&&(d(r)||h(r))}r.exports=hasPath},75717:r=>{var i="\\ud800-\\udfff",c="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",h="\\u20d0-\\u20ff",d=c+u+h,p="\\ufe0e\\ufe0f";var g="\\u200d";var y=RegExp("["+g+i+d+p+"]");function hasUnicode(r){return y.test(r)}r.exports=hasUnicode},4489:(r,i,c)=>{var u=c(22098);function hashClear(){this.__data__=u?u(null):{};this.size=0}r.exports=hashClear},33530:r=>{function hashDelete(r){var i=this.has(r)&&delete this.__data__[r];this.size-=i?1:0;return i}r.exports=hashDelete},22925:(r,i,c)=>{var u=c(22098);var h="__lodash_hash_undefined__";var d=Object.prototype;var p=d.hasOwnProperty;function hashGet(r){var i=this.__data__;if(u){var c=i[r];return c===h?undefined:c}return p.call(i,r)?i[r]:undefined}r.exports=hashGet},54573:(r,i,c)=>{var u=c(22098);var h=Object.prototype;var d=h.hasOwnProperty;function hashHas(r){var i=this.__data__;return u?i[r]!==undefined:d.call(i,r)}r.exports=hashHas},48791:(r,i,c)=>{var u=c(22098);var h="__lodash_hash_undefined__";function hashSet(r,i){var c=this.__data__;this.size+=this.has(r)?0:1;c[r]=u&&i===undefined?h:i;return this}r.exports=hashSet},49709:r=>{var i=Object.prototype;var c=i.hasOwnProperty;function initCloneArray(r){var i=r.length,u=new r.constructor(i);if(i&&typeof r[0]=="string"&&c.call(r,"index")){u.index=r.index;u.input=r.input}return u}r.exports=initCloneArray},83731:(r,i,c)=>{var u=c(7042),h=c(42941),d=c(34085),p=c(85051),g=c(69111);var y="[object Boolean]",b="[object Date]",v="[object Map]",w="[object Number]",C="[object RegExp]",E="[object Set]",x="[object String]",S="[object Symbol]";var k="[object ArrayBuffer]",T="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",$="[object Int8Array]",A="[object Int16Array]",P="[object Int32Array]",I="[object Uint8Array]",R="[object Uint8ClampedArray]",j="[object Uint16Array]",L="[object Uint32Array]";function initCloneByTag(r,i,c){var M=r.constructor;switch(i){case k:return u(r);case y:case b:return new M(+r);case T:return h(r,c);case N:case O:case $:case A:case P:case I:case R:case j:case L:return g(r,c);case v:return new M;case w:case x:return new M(r);case C:return d(r);case E:return new M;case S:return p(r)}}r.exports=initCloneByTag},75577:(r,i,c)=>{var u=c(13730),h=c(8660),d=c(38200);function initCloneObject(r){return typeof r.constructor=="function"&&!d(r)?u(h(r)):{}}r.exports=initCloneObject},17208:(r,i,c)=>{var u=c(13775),h=c(33833),d=c(63708);var p=u?u.isConcatSpreadable:undefined;function isFlattenable(r){return d(r)||h(r)||!!(p&&r&&r[p])}r.exports=isFlattenable},79015:r=>{var i=9007199254740991;var c=/^(?:0|[1-9]\d*)$/;function isIndex(r,u){var h=typeof r;u=u==null?i:u;return!!u&&(h=="number"||h!="symbol"&&c.test(r))&&(r>-1&&r%1==0&&r<u)}r.exports=isIndex},4399:(r,i,c)=>{var u=c(63995),h=c(74362),d=c(79015),p=c(49491);function isIterateeCall(r,i,c){if(!p(c)){return false}var g=typeof i;if(g=="number"?h(c)&&d(i,c.length):g=="string"&&i in c){return u(c[i],r)}return false}r.exports=isIterateeCall},32982:(r,i,c)=>{var u=c(63708),h=c(70702);var d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/;function isKey(r,i){if(u(r)){return false}var c=typeof r;if(c=="number"||c=="symbol"||c=="boolean"||r==null||h(r)){return true}return p.test(r)||!d.test(r)||i!=null&&r in Object(i)}r.exports=isKey},9825:r=>{function isKeyable(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}r.exports=isKeyable},53666:(r,i,c)=>{var u=c(12947);var h=function(){var r=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function isMasked(r){return!!h&&h in r}r.exports=isMasked},38200:r=>{var i=Object.prototype;function isPrototype(r){var c=r&&r.constructor,u=typeof c=="function"&&c.prototype||i;return r===u}r.exports=isPrototype},58568:(r,i,c)=>{var u=c(49491);function isStrictComparable(r){return r===r&&!u(r)}r.exports=isStrictComparable},95498:r=>{function iteratorToArray(r){var i,c=[];while(!(i=r.next()).done){c.push(i.value)}return c}r.exports=iteratorToArray},86998:r=>{function listCacheClear(){this.__data__=[];this.size=0}r.exports=listCacheClear},46725:(r,i,c)=>{var u=c(10594);var h=Array.prototype;var d=h.splice;function listCacheDelete(r){var i=this.__data__,c=u(i,r);if(c<0){return false}var h=i.length-1;if(c==h){i.pop()}else{d.call(i,c,1)}--this.size;return true}r.exports=listCacheDelete},39341:(r,i,c)=>{var u=c(10594);function listCacheGet(r){var i=this.__data__,c=u(i,r);return c<0?undefined:i[c][1]}r.exports=listCacheGet},16180:(r,i,c)=>{var u=c(10594);function listCacheHas(r){return u(this.__data__,r)>-1}r.exports=listCacheHas},67924:(r,i,c)=>{var u=c(10594);function listCacheSet(r,i){var c=this.__data__,h=u(c,r);if(h<0){++this.size;c.push([r,i])}else{c[h][1]=i}return this}r.exports=listCacheSet},19589:(r,i,c)=>{var u=c(52145),h=c(17710),d=c(22609);function mapCacheClear(){this.size=0;this.__data__={hash:new u,map:new(d||h),string:new u}}r.exports=mapCacheClear},89679:(r,i,c)=>{var u=c(22583);function mapCacheDelete(r){var i=u(this,r)["delete"](r);this.size-=i?1:0;return i}r.exports=mapCacheDelete},56702:(r,i,c)=>{var u=c(22583);function mapCacheGet(r){return u(this,r).get(r)}r.exports=mapCacheGet},85815:(r,i,c)=>{var u=c(22583);function mapCacheHas(r){return u(this,r).has(r)}r.exports=mapCacheHas},54449:(r,i,c)=>{var u=c(22583);function mapCacheSet(r,i){var c=u(this,r),h=c.size;c.set(r,i);this.size+=c.size==h?0:1;return this}r.exports=mapCacheSet},124:r=>{function mapToArray(r){var i=-1,c=Array(r.size);r.forEach((function(r,u){c[++i]=[u,r]}));return c}r.exports=mapToArray},43136:r=>{function matchesStrictComparable(r,i){return function(c){if(c==null){return false}return c[r]===i&&(i!==undefined||r in Object(c))}}r.exports=matchesStrictComparable},99867:(r,i,c)=>{var u=c(77061);var h=500;function memoizeCapped(r){var i=u(r,(function(r){if(c.size===h){c.clear()}return r}));var c=i.cache;return i}r.exports=memoizeCapped},22098:(r,i,c)=>{var u=c(43175);var h=u(Object,"create");r.exports=h},84725:(r,i,c)=>{var u=c(71376);var h=u(Object.keys,Object);r.exports=h},8178:r=>{function nativeKeysIn(r){var i=[];if(r!=null){for(var c in Object(r)){i.push(c)}}return i}r.exports=nativeKeysIn},56018:(r,i,c)=>{r=c.nmd(r);var u=c(49503);var h=true&&i&&!i.nodeType&&i;var d=h&&"object"=="object"&&r&&!r.nodeType&&r;var p=d&&d.exports===h;var g=p&&u.process;var y=function(){try{var r=d&&d.require&&d.require("util").types;if(r){return r}return g&&g.binding&&g.binding("util")}catch(r){}}();r.exports=y},49754:r=>{var i=Object.prototype;var c=i.toString;function objectToString(r){return c.call(r)}r.exports=objectToString},71376:r=>{function overArg(r,i){return function(c){return r(i(c))}}r.exports=overArg},21230:(r,i,c)=>{var u=c(41735);var h=Math.max;function overRest(r,i,c){i=h(i===undefined?r.length-1:i,0);return function(){var d=arguments,p=-1,g=h(d.length-i,0),y=Array(g);while(++p<g){y[p]=d[i+p]}p=-1;var b=Array(i+1);while(++p<i){b[p]=d[p]}b[i]=c(y);return u(r,this,b)}}r.exports=overRest},31782:r=>{var i=/<%-([\s\S]+?)%>/g;r.exports=i},84921:r=>{var i=/<%([\s\S]+?)%>/g;r.exports=i},54421:r=>{var i=/<%=([\s\S]+?)%>/g;r.exports=i},69134:(r,i,c)=>{var u=c(49503);var h=typeof self=="object"&&self&&self.Object===Object&&self;var d=u||h||Function("return this")();r.exports=d},17122:r=>{function safeGet(r,i){if(i==="constructor"&&typeof r[i]==="function"){return}if(i=="__proto__"){return}return r[i]}r.exports=safeGet},10595:r=>{var i="__lodash_hash_undefined__";function setCacheAdd(r){this.__data__.set(r,i);return this}r.exports=setCacheAdd},87188:r=>{function setCacheHas(r){return this.__data__.has(r)}r.exports=setCacheHas},58539:r=>{function setToArray(r){var i=-1,c=Array(r.size);r.forEach((function(r){c[++i]=r}));return c}r.exports=setToArray},30768:(r,i,c)=>{var u=c(58529),h=c(72922);var d=h(u);r.exports=d},72922:r=>{var i=800,c=16;var u=Date.now;function shortOut(r){var h=0,d=0;return function(){var p=u(),g=c-(p-d);d=p;if(g>0){if(++h>=i){return arguments[0]}}else{h=0}return r.apply(undefined,arguments)}}r.exports=shortOut},12426:(r,i,c)=>{var u=c(17710);function stackClear(){this.__data__=new u;this.size=0}r.exports=stackClear},96288:r=>{function stackDelete(r){var i=this.__data__,c=i["delete"](r);this.size=i.size;return c}r.exports=stackDelete},56145:r=>{function stackGet(r){return this.__data__.get(r)}r.exports=stackGet},6968:r=>{function stackHas(r){return this.__data__.has(r)}r.exports=stackHas},90950:(r,i,c)=>{var u=c(17710),h=c(22609),d=c(72833);var p=200;function stackSet(r,i){var c=this.__data__;if(c instanceof u){var g=c.__data__;if(!h||g.length<p-1){g.push([r,i]);this.size=++c.size;return this}c=this.__data__=new d(g)}c.set(r,i);this.size=c.size;return this}r.exports=stackSet},88672:r=>{function strictIndexOf(r,i,c){var u=c-1,h=r.length;while(++u<h){if(r[u]===i){return u}}return-1}r.exports=strictIndexOf},4274:(r,i,c)=>{var u=c(83672),h=c(75717),d=c(33964);function stringToArray(r){return h(r)?d(r):u(r)}r.exports=stringToArray},27480:(r,i,c)=>{var u=c(99867);var h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var d=/\\(\\)?/g;var p=u((function(r){var i=[];if(r.charCodeAt(0)===46){i.push("")}r.replace(h,(function(r,c,u,h){i.push(u?h.replace(d,"$1"):c||r)}));return i}));r.exports=p},8363:(r,i,c)=>{var u=c(70702);var h=1/0;function toKey(r){if(typeof r=="string"||u(r)){return r}var i=r+"";return i=="0"&&1/r==-h?"-0":i}r.exports=toKey},82783:r=>{var i=Function.prototype;var c=i.toString;function toSource(r){if(r!=null){try{return c.call(r)}catch(r){}try{return r+""}catch(r){}}return""}r.exports=toSource},32233:r=>{var i=/\s/;function trimmedEndIndex(r){var c=r.length;while(c--&&i.test(r.charAt(c))){}return c}r.exports=trimmedEndIndex},33964:r=>{var i="\\ud800-\\udfff",c="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",h="\\u20d0-\\u20ff",d=c+u+h,p="\\ufe0e\\ufe0f";var g="["+i+"]",y="["+d+"]",b="\\ud83c[\\udffb-\\udfff]",v="(?:"+y+"|"+b+")",w="[^"+i+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d";var S=v+"?",k="["+p+"]?",T="(?:"+x+"(?:"+[w,C,E].join("|")+")"+k+S+")*",N=k+S+T,O="(?:"+[w+y+"?",y,C,E,g].join("|")+")";var $=RegExp(b+"(?="+b+")|"+O+N,"g");function unicodeToArray(r){return r.match($)||[]}r.exports=unicodeToArray},16215:(r,i,c)=>{var u=c(36041),h=c(78729),d=c(94409),p=c(74362),g=c(38200),y=c(64992);var b=Object.prototype;var v=b.hasOwnProperty;var w=d((function(r,i){if(g(i)||p(i)){h(i,y(i),r);return}for(var c in i){if(v.call(i,c)){u(r,c,i[c])}}}));r.exports=w},24026:(r,i,c)=>{var u=c(78729),h=c(94409),d=c(33180);var p=h((function(r,i){u(i,d(i),r)}));r.exports=p},66670:(r,i,c)=>{var u=c(78729),h=c(94409),d=c(33180);var p=h((function(r,i,c,h){u(i,d(i),r,h)}));r.exports=p},64002:(r,i,c)=>{var u=c(41735),h=c(29576),d=c(32311);var p=h((function(r,i){try{return u(r,undefined,i)}catch(r){return d(r)?r:new Error(r)}}));r.exports=p},94452:(r,i,c)=>{var u=c(95972),h=c(4399),d=c(10156);var p=Math.ceil,g=Math.max;function chunk(r,i,c){if(c?h(r,i,c):i===undefined){i=1}else{i=g(d(i),0)}var y=r==null?0:r.length;if(!y||i<1){return[]}var b=0,v=0,w=Array(p(y/i));while(b<y){w[v++]=u(r,b,b+=i)}return w}r.exports=chunk},83577:(r,i,c)=>{var u=c(92216);var h=4;function clone(r){return u(r,h)}r.exports=clone},96321:(r,i,c)=>{var u=c(92216);var h=1,d=4;function cloneDeep(r){return u(r,h|d)}r.exports=cloneDeep},14606:r=>{function compact(r){var i=-1,c=r==null?0:r.length,u=0,h=[];while(++i<c){var d=r[i];if(d){h[u++]=d}}return h}r.exports=compact},55028:r=>{function constant(r){return function(){return r}}r.exports=constant},73614:(r,i,c)=>{var u=c(29576),h=c(63995),d=c(4399),p=c(33180);var g=Object.prototype;var y=g.hasOwnProperty;var b=u((function(r,i){r=Object(r);var c=-1;var u=i.length;var b=u>2?i[2]:undefined;if(b&&d(i[0],i[1],b)){u=1}while(++c<u){var v=i[c];var w=p(v);var C=-1;var E=w.length;while(++C<E){var x=w[C];var S=r[x];if(S===undefined||h(S,g[x])&&!y.call(r,x)){r[x]=v[x]}}}return r}));r.exports=b},78581:(r,i,c)=>{var u=c(10487),h=c(29576);var d=h((function(r,i){return u(r,1,i)}));r.exports=d},65402:(r,i,c)=>{var u=c(68002),h=c(21605),d=c(29576),p=c(51622),g=c(78915);var y=d((function(r,i){var c=g(i);if(p(c)){c=undefined}return p(r)?u(r,h(i,1,p,true),undefined,c):[]}));r.exports=y},22759:(r,i,c)=>{r.exports=c(17518)},63995:r=>{function eq(r,i){return r===i||r!==r&&i!==i}r.exports=eq},65832:(r,i,c)=>{var u=c(27538),h=c(61914);var d=/[&<>"']/g,p=RegExp(d.source);function escape(r){r=h(r);return r&&p.test(r)?r.replace(d,u):r}r.exports=escape},91363:(r,i,c)=>{r.exports=c(24026)},32317:(r,i,c)=>{var u=c(92604),h=c(23086),d=c(47850),p=c(63708);function filter(r,i){var c=p(r)?u:h;return c(r,d(i,3))}r.exports=filter},12663:(r,i,c)=>{r.exports=c(47228)},65922:(r,i,c)=>{var u=c(21605);function flatten(r){var i=r==null?0:r.length;return i?u(r,1):[]}r.exports=flatten},17518:(r,i,c)=>{var u=c(52205),h=c(15736),d=c(42032),p=c(63708);function forEach(r,i){var c=p(r)?u:h;return c(r,d(i))}r.exports=forEach},52921:(r,i,c)=>{var u=c(27157);function get(r,i,c){var h=r==null?undefined:u(r,i);return h===undefined?c:h}r.exports=get},55954:(r,i,c)=>{var u=c(722),h=c(37134);var d=Object.prototype;var p=d.hasOwnProperty;var g=h((function(r,i,c){if(p.call(r,c)){r[c].push(i)}else{u(r,c,[i])}}));r.exports=g},88524:(r,i,c)=>{var u=c(58282),h=c(65822);function has(r,i){return r!=null&&h(r,i,u)}r.exports=has},70890:(r,i,c)=>{var u=c(39240),h=c(65822);function hasIn(r,i){return r!=null&&h(r,i,u)}r.exports=hasIn},47228:r=>{function head(r){return r&&r.length?r[0]:undefined}r.exports=head},54945:r=>{function identity(r){return r}r.exports=identity},69932:(r,i,c)=>{var u=c(51018),h=c(74362),d=c(74973),p=c(10156),g=c(52169);var y=Math.max;function includes(r,i,c,b){r=h(r)?r:g(r);c=c&&!b?p(c):0;var v=r.length;if(c<0){c=y(v+c,0)}return d(r)?c<=v&&r.indexOf(i,c)>-1:!!v&&u(r,i,c)>-1}r.exports=includes},23024:(r,i,c)=>{var u=c(51018),h=c(10156);var d=Math.max;function indexOf(r,i,c){var p=r==null?0:r.length;if(!p){return-1}var g=c==null?0:h(c);if(g<0){g=d(p+g,0)}return u(r,i,g)}r.exports=indexOf},33833:(r,i,c)=>{var u=c(22547),h=c(56551);var d=Object.prototype;var p=d.hasOwnProperty;var g=d.propertyIsEnumerable;var y=u(function(){return arguments}())?u:function(r){return h(r)&&p.call(r,"callee")&&!g.call(r,"callee")};r.exports=y},63708:r=>{var i=Array.isArray;r.exports=i},74362:(r,i,c)=>{var u=c(59414),h=c(57566);function isArrayLike(r){return r!=null&&h(r.length)&&!u(r)}r.exports=isArrayLike},51622:(r,i,c)=>{var u=c(74362),h=c(56551);function isArrayLikeObject(r){return h(r)&&u(r)}r.exports=isArrayLikeObject},75025:(r,i,c)=>{r=c.nmd(r);var u=c(69134),h=c(6107);var d=true&&i&&!i.nodeType&&i;var p=d&&"object"=="object"&&r&&!r.nodeType&&r;var g=p&&p.exports===d;var y=g?u.Buffer:undefined;var b=y?y.isBuffer:undefined;var v=b||h;r.exports=v},26901:(r,i,c)=>{var u=c(15500),h=c(62238),d=c(33833),p=c(63708),g=c(74362),y=c(75025),b=c(38200),v=c(2683);var w="[object Map]",C="[object Set]";var E=Object.prototype;var x=E.hasOwnProperty;function isEmpty(r){if(r==null){return true}if(g(r)&&(p(r)||typeof r=="string"||typeof r.splice=="function"||y(r)||v(r)||d(r))){return!r.length}var i=h(r);if(i==w||i==C){return!r.size}if(b(r)){return!u(r).length}for(var c in r){if(x.call(r,c)){return false}}return true}r.exports=isEmpty},32311:(r,i,c)=>{var u=c(35562),h=c(56551),d=c(64677);var p="[object DOMException]",g="[object Error]";function isError(r){if(!h(r)){return false}var i=u(r);return i==g||i==p||typeof r.message=="string"&&typeof r.name=="string"&&!d(r)}r.exports=isError},59414:(r,i,c)=>{var u=c(35562),h=c(49491);var d="[object AsyncFunction]",p="[object Function]",g="[object GeneratorFunction]",y="[object Proxy]";function isFunction(r){if(!h(r)){return false}var i=u(r);return i==p||i==g||i==d||i==y}r.exports=isFunction},57566:r=>{var i=9007199254740991;function isLength(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=i}r.exports=isLength},83833:(r,i,c)=>{var u=c(36223),h=c(10826),d=c(56018);var p=d&&d.isMap;var g=p?h(p):u;r.exports=g},13270:r=>{function isNil(r){return r==null}r.exports=isNil},49491:r=>{function isObject(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}r.exports=isObject},56551:r=>{function isObjectLike(r){return r!=null&&typeof r=="object"}r.exports=isObjectLike},64677:(r,i,c)=>{var u=c(35562),h=c(8660),d=c(56551);var p="[object Object]";var g=Function.prototype,y=Object.prototype;var b=g.toString;var v=y.hasOwnProperty;var w=b.call(Object);function isPlainObject(r){if(!d(r)||u(r)!=p){return false}var i=h(r);if(i===null){return true}var c=v.call(i,"constructor")&&i.constructor;return typeof c=="function"&&c instanceof c&&b.call(c)==w}r.exports=isPlainObject},32655:(r,i,c)=>{var u=c(66128),h=c(10826),d=c(56018);var p=d&&d.isSet;var g=p?h(p):u;r.exports=g},74973:(r,i,c)=>{var u=c(35562),h=c(63708),d=c(56551);var p="[object String]";function isString(r){return typeof r=="string"||!h(r)&&d(r)&&u(r)==p}r.exports=isString},70702:(r,i,c)=>{var u=c(35562),h=c(56551);var d="[object Symbol]";function isSymbol(r){return typeof r=="symbol"||h(r)&&u(r)==d}r.exports=isSymbol},2683:(r,i,c)=>{var u=c(7517),h=c(10826),d=c(56018);var p=d&&d.isTypedArray;var g=p?h(p):u;r.exports=g},64992:(r,i,c)=>{var u=c(10573),h=c(15500),d=c(74362);function keys(r){return d(r)?u(r):h(r)}r.exports=keys},33180:(r,i,c)=>{var u=c(10573),h=c(28680),d=c(74362);function keysIn(r){return d(r)?u(r,true):h(r)}r.exports=keysIn},78915:r=>{function last(r){var i=r==null?0:r.length;return i?r[i-1]:undefined}r.exports=last},94328:(r,i,c)=>{var u=c(57018),h=c(47850),d=c(58187),p=c(63708);function map(r,i){var c=p(r)?u:d;return c(r,h(i,3))}r.exports=map},76218:(r,i,c)=>{var u=c(72066),h=c(35491),d=c(54945);function max(r){return r&&r.length?u(r,d,h):undefined}r.exports=max},77061:(r,i,c)=>{var u=c(72833);var h="Expected a function";function memoize(r,i){if(typeof r!="function"||i!=null&&typeof i!="function"){throw new TypeError(h)}var memoized=function(){var c=arguments,u=i?i.apply(this,c):c[0],h=memoized.cache;if(h.has(u)){return h.get(u)}var d=r.apply(this,c);memoized.cache=h.set(u,d)||h;return d};memoized.cache=new(memoize.Cache||u);return memoized}memoize.Cache=u;r.exports=memoize},67809:(r,i,c)=>{var u=c(78410),h=c(94409);var d=h((function(r,i,c){u(r,i,c)}));r.exports=d},11724:r=>{var i="Expected a function";function negate(r){if(typeof r!="function"){throw new TypeError(i)}return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}r.exports=negate},39080:r=>{function noop(){}r.exports=noop},12548:(r,i,c)=>{var u=c(47850),h=c(11724),d=c(25655);function omitBy(r,i){return d(r,h(u(i)))}r.exports=omitBy},25655:(r,i,c)=>{var u=c(57018),h=c(47850),d=c(42152),p=c(71757);function pickBy(r,i){if(r==null){return{}}var c=u(p(r),(function(r){return[r]}));i=h(i);return d(r,c,(function(r,c){return i(r,c[0])}))}r.exports=pickBy},99194:(r,i,c)=>{var u=c(44693),h=c(81126),d=c(32982),p=c(8363);function property(r){return d(r)?u(p(r)):h(r)}r.exports=property},28847:(r,i,c)=>{var u=c(28434),h=c(15736),d=c(47850),p=c(85236),g=c(63708);function reduce(r,i,c){var y=g(r)?u:p,b=arguments.length<3;return y(r,d(i,4),c,b,h)}r.exports=reduce},77222:(r,i,c)=>{var u=c(92604),h=c(23086),d=c(47850),p=c(63708),g=c(11724);function reject(r,i){var c=p(r)?u:h;return c(r,g(d(i,3)))}r.exports=reject},64365:(r,i,c)=>{var u=c(5198),h=c(47850),d=c(90370),p=c(63708),g=c(4399);function some(r,i,c){var y=p(r)?u:d;if(c&&g(r,i,c)){i=undefined}return y(r,h(i,3))}r.exports=some},95276:(r,i,c)=>{var u=c(21605),h=c(24787),d=c(29576),p=c(4399);var g=d((function(r,i){if(r==null){return[]}var c=i.length;if(c>1&&p(r,i[0],i[1])){i=[]}else if(c>2&&p(i[0],i[1],i[2])){i=[i[0]]}return h(r,u(i,1),[])}));r.exports=g},32871:r=>{function stubArray(){return[]}r.exports=stubArray},6107:r=>{function stubFalse(){return false}r.exports=stubFalse},39084:(r,i,c)=>{var u=c(95972);function tail(r){var i=r==null?0:r.length;return i?u(r,1,i):[]}r.exports=tail},72470:(r,i,c)=>{var u=c(66670),h=c(64002),d=c(99866),p=c(90698),g=c(57891),y=c(32311),b=c(4399),v=c(64992),w=c(54421),C=c(33870),E=c(61914);var x="Invalid `variable` option passed into `_.template`";var S=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var N=/[()=,{}\[\]\/\s]/;var O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var $=/($^)/;var A=/['\n\r\u2028\u2029\\]/g;var P=Object.prototype;var I=P.hasOwnProperty;function template(r,i,c){var P=C.imports._.templateSettings||C;if(c&&b(r,i,c)){i=undefined}r=E(r);i=u({},i,P,p);var R=u({},i.imports,P.imports,p),j=v(R),L=d(R,j);var M,D,q=0,F=i.interpolate||$,B="__p += '";var U=RegExp((i.escape||$).source+"|"+F.source+"|"+(F===w?O:$).source+"|"+(i.evaluate||$).source+"|$","g");var V=I.call(i,"sourceURL")?"//# sourceURL="+(i.sourceURL+"").replace(/\s/g," ")+"\n":"";r.replace(U,(function(i,c,u,h,d,p){u||(u=h);B+=r.slice(q,p).replace(A,g);if(c){M=true;B+="' +\n__e("+c+") +\n'"}if(d){D=true;B+="';\n"+d+";\n__p += '"}if(u){B+="' +\n((__t = ("+u+")) == null ? '' : __t) +\n'"}q=p+i.length;return i}));B+="';\n";var Q=I.call(i,"variable")&&i.variable;if(!Q){B="with (obj) {\n"+B+"\n}\n"}else if(N.test(Q)){throw new Error(x)}B=(D?B.replace(S,""):B).replace(k,"$1").replace(T,"$1;");B="function("+(Q||"obj")+") {\n"+(Q?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(M?", __e = _.escape":"")+(D?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+B+"return __p\n}";var H=h((function(){return Function(j,V+"return "+B).apply(undefined,L)}));H.source=B;if(y(H)){throw H}return H}r.exports=template},33870:(r,i,c)=>{var u=c(65832),h=c(31782),d=c(84921),p=c(54421);var g={escape:h,evaluate:d,interpolate:p,variable:"",imports:{_:{escape:u}}};r.exports=g},74373:(r,i,c)=>{var u=c(13775),h=c(73947),d=c(62238),p=c(74362),g=c(74973),y=c(95498),b=c(124),v=c(58539),w=c(4274),C=c(52169);var E="[object Map]",x="[object Set]";var S=u?u.iterator:undefined;function toArray(r){if(!r){return[]}if(p(r)){return g(r)?w(r):h(r)}if(S&&r[S]){return y(r[S]())}var i=d(r),c=i==E?b:i==x?v:C;return c(r)}r.exports=toArray},67155:(r,i,c)=>{var u=c(36446);var h=1/0,d=17976931348623157e292;function toFinite(r){if(!r){return r===0?r:0}r=u(r);if(r===h||r===-h){var i=r<0?-1:1;return i*d}return r===r?r:0}r.exports=toFinite},10156:(r,i,c)=>{var u=c(67155);function toInteger(r){var i=u(r),c=i%1;return i===i?c?i-c:i:0}r.exports=toInteger},36446:(r,i,c)=>{var u=c(2433),h=c(49491),d=c(70702);var p=0/0;var g=/^[-+]0x[0-9a-f]+$/i;var y=/^0b[01]+$/i;var b=/^0o[0-7]+$/i;var v=parseInt;function toNumber(r){if(typeof r=="number"){return r}if(d(r)){return p}if(h(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=h(i)?i+"":i}if(typeof r!="string"){return r===0?r:+r}r=u(r);var c=y.test(r);return c||b.test(r)?v(r.slice(2),c?2:8):g.test(r)?p:+r}r.exports=toNumber},15469:(r,i,c)=>{var u=c(78729),h=c(33180);function toPlainObject(r){return u(r,h(r))}r.exports=toPlainObject},61914:(r,i,c)=>{var u=c(99017);function toString(r){return r==null?"":u(r)}r.exports=toString},79396:(r,i,c)=>{var u=c(52205),h=c(13730),d=c(79444),p=c(47850),g=c(8660),y=c(63708),b=c(75025),v=c(59414),w=c(49491),C=c(2683);function transform(r,i,c){var E=y(r),x=E||b(r)||C(r);i=p(i,4);if(c==null){var S=r&&r.constructor;if(x){c=E?new S:[]}else if(w(r)){c=v(S)?h(g(r)):{}}else{c={}}}(x?u:d)(r,(function(r,u,h){return i(c,r,u,h)}));return c}r.exports=transform},783:(r,i,c)=>{var u=c(13623);function uniq(r){return r&&r.length?u(r):[]}r.exports=uniq},27963:(r,i,c)=>{var u=c(61914);var h=0;function uniqueId(r){var i=++h;return u(r)+i}r.exports=uniqueId},52169:(r,i,c)=>{var u=c(99866),h=c(64992);function values(r){return r==null?[]:u(r,h(r))}r.exports=values},88923:(r,i,c)=>{r.exports=minimatch;minimatch.Minimatch=Minimatch;var u=function(){try{return c(71017)}catch(r){}}()||{sep:"/"};minimatch.sep=u.sep;var h=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var d=c(54800);var p={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var g="[^/]";var y=g+"*?";var b="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var v="(?:(?!(?:\\/|^)\\.).)*?";var w=charSet("().*{}+?[]^$\\!");function charSet(r){return r.split("").reduce((function(r,i){r[i]=true;return r}),{})}var C=/\/+/;minimatch.filter=filter;function filter(r,i){i=i||{};return function(c,u,h){return minimatch(c,r,i)}}function ext(r,i){i=i||{};var c={};Object.keys(r).forEach((function(i){c[i]=r[i]}));Object.keys(i).forEach((function(r){c[r]=i[r]}));return c}minimatch.defaults=function(r){if(!r||typeof r!=="object"||!Object.keys(r).length){return minimatch}var i=minimatch;var c=function minimatch(c,u,h){return i(c,u,ext(r,h))};c.Minimatch=function Minimatch(c,u){return new i.Minimatch(c,ext(r,u))};c.Minimatch.defaults=function defaults(c){return i.defaults(ext(r,c)).Minimatch};c.filter=function filter(c,u){return i.filter(c,ext(r,u))};c.defaults=function defaults(c){return i.defaults(ext(r,c))};c.makeRe=function makeRe(c,u){return i.makeRe(c,ext(r,u))};c.braceExpand=function braceExpand(c,u){return i.braceExpand(c,ext(r,u))};c.match=function(c,u,h){return i.match(c,u,ext(r,h))};return c};Minimatch.defaults=function(r){return minimatch.defaults(r).Minimatch};function minimatch(r,i,c){assertValidPattern(i);if(!c)c={};if(!c.nocomment&&i.charAt(0)==="#"){return false}return new Minimatch(i,c).match(r)}function Minimatch(r,i){if(!(this instanceof Minimatch)){return new Minimatch(r,i)}assertValidPattern(r);if(!i)i={};r=r.trim();if(!i.allowWindowsEscape&&u.sep!=="/"){r=r.split(u.sep).join("/")}this.options=i;this.set=[];this.pattern=r;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.partial=!!i.partial;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){var r=this.pattern;var i=this.options;if(!i.nocomment&&r.charAt(0)==="#"){this.comment=true;return}if(!r){this.empty=true;return}this.parseNegate();var c=this.globSet=this.braceExpand();if(i.debug)this.debug=function debug(){console.error.apply(console,arguments)};this.debug(this.pattern,c);c=this.globParts=c.map((function(r){return r.split(C)}));this.debug(this.pattern,c);c=c.map((function(r,i,c){return r.map(this.parse,this)}),this);this.debug(this.pattern,c);c=c.filter((function(r){return r.indexOf(false)===-1}));this.debug(this.pattern,c);this.set=c}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var r=this.pattern;var i=false;var c=this.options;var u=0;if(c.nonegate)return;for(var h=0,d=r.length;h<d&&r.charAt(h)==="!";h++){i=!i;u++}if(u)this.pattern=r.substr(u);this.negate=i}minimatch.braceExpand=function(r,i){return braceExpand(r,i)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(r,i){if(!i){if(this instanceof Minimatch){i=this.options}else{i={}}}r=typeof r==="undefined"?this.pattern:r;assertValidPattern(r);if(i.nobrace||!/\{(?:(?!\{).)*\}/.test(r)){return[r]}return d(r)}var E=1024*64;var assertValidPattern=function(r){if(typeof r!=="string"){throw new TypeError("invalid pattern")}if(r.length>E){throw new TypeError("pattern is too long")}};Minimatch.prototype.parse=parse;var x={};function parse(r,i){assertValidPattern(r);var c=this.options;if(r==="**"){if(!c.noglobstar)return h;else r="*"}if(r==="")return"";var u="";var d=!!c.nocase;var b=false;var v=[];var C=[];var E;var S=false;var k=-1;var T=-1;var N=r.charAt(0)==="."?"":c.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var O=this;function clearStateChar(){if(E){switch(E){case"*":u+=y;d=true;break;case"?":u+=g;d=true;break;default:u+="\\"+E;break}O.debug("clearStateChar %j %j",E,u);E=false}}for(var $=0,A=r.length,P;$<A&&(P=r.charAt($));$++){this.debug("%s\t%s %s %j",r,$,u,P);if(b&&w[P]){u+="\\"+P;b=false;continue}switch(P){case"/":{return false}case"\\":clearStateChar();b=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",r,$,u,P);if(S){this.debug("  in class");if(P==="!"&&$===T+1)P="^";u+=P;continue}O.debug("call clearStateChar %j",E);clearStateChar();E=P;if(c.noext)clearStateChar();continue;case"(":if(S){u+="(";continue}if(!E){u+="\\(";continue}v.push({type:E,start:$-1,reStart:u.length,open:p[E].open,close:p[E].close});u+=E==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",E,u);E=false;continue;case")":if(S||!v.length){u+="\\)";continue}clearStateChar();d=true;var I=v.pop();u+=I.close;if(I.type==="!"){C.push(I)}I.reEnd=u.length;continue;case"|":if(S||!v.length||b){u+="\\|";b=false;continue}clearStateChar();u+="|";continue;case"[":clearStateChar();if(S){u+="\\"+P;continue}S=true;T=$;k=u.length;u+=P;continue;case"]":if($===T+1||!S){u+="\\"+P;b=false;continue}var R=r.substring(T+1,$);try{RegExp("["+R+"]")}catch(r){var j=this.parse(R,x);u=u.substr(0,k)+"\\["+j[0]+"\\]";d=d||j[1];S=false;continue}d=true;S=false;u+=P;continue;default:clearStateChar();if(b){b=false}else if(w[P]&&!(P==="^"&&S)){u+="\\"}u+=P}}if(S){R=r.substr(T+1);j=this.parse(R,x);u=u.substr(0,k)+"\\["+j[0];d=d||j[1]}for(I=v.pop();I;I=v.pop()){var L=u.slice(I.reStart+I.open.length);this.debug("setting tail",u,I);L=L.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(r,i,c){if(!c){c="\\"}return i+i+c+"|"}));this.debug("tail=%j\n   %s",L,L,I,u);var M=I.type==="*"?y:I.type==="?"?g:"\\"+I.type;d=true;u=u.slice(0,I.reStart)+M+"\\("+L}clearStateChar();if(b){u+="\\\\"}var D=false;switch(u.charAt(0)){case"[":case".":case"(":D=true}for(var q=C.length-1;q>-1;q--){var F=C[q];var B=u.slice(0,F.reStart);var U=u.slice(F.reStart,F.reEnd-8);var V=u.slice(F.reEnd-8,F.reEnd);var Q=u.slice(F.reEnd);V+=Q;var H=B.split("(").length-1;var G=Q;for($=0;$<H;$++){G=G.replace(/\)[+*?]?/,"")}Q=G;var K="";if(Q===""&&i!==x){K="$"}var W=B+U+Q+K+V;u=W}if(u!==""&&d){u="(?=.)"+u}if(D){u=N+u}if(i===x){return[u,d]}if(!d){return globUnescape(r)}var z=c.nocase?"i":"";try{var J=new RegExp("^"+u+"$",z)}catch(r){return new RegExp("$.")}J._glob=r;J._src=u;return J}minimatch.makeRe=function(r,i){return new Minimatch(r,i||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var r=this.set;if(!r.length){this.regexp=false;return this.regexp}var i=this.options;var c=i.noglobstar?y:i.dot?b:v;var u=i.nocase?"i":"";var d=r.map((function(r){return r.map((function(r){return r===h?c:typeof r==="string"?regExpEscape(r):r._src})).join("\\/")})).join("|");d="^(?:"+d+")$";if(this.negate)d="^(?!"+d+").*$";try{this.regexp=new RegExp(d,u)}catch(r){this.regexp=false}return this.regexp}minimatch.match=function(r,i,c){c=c||{};var u=new Minimatch(i,c);r=r.filter((function(r){return u.match(r)}));if(u.options.nonull&&!r.length){r.push(i)}return r};Minimatch.prototype.match=function match(r,i){if(typeof i==="undefined")i=this.partial;this.debug("match",r,this.pattern);if(this.comment)return false;if(this.empty)return r==="";if(r==="/"&&i)return true;var c=this.options;if(u.sep!=="/"){r=r.split(u.sep).join("/")}r=r.split(C);this.debug(this.pattern,"split",r);var h=this.set;this.debug(this.pattern,"set",h);var d;var p;for(p=r.length-1;p>=0;p--){d=r[p];if(d)break}for(p=0;p<h.length;p++){var g=h[p];var y=r;if(c.matchBase&&g.length===1){y=[d]}var b=this.matchOne(y,g,i);if(b){if(c.flipNegate)return true;return!this.negate}}if(c.flipNegate)return false;return this.negate};Minimatch.prototype.matchOne=function(r,i,c){var u=this.options;this.debug("matchOne",{this:this,file:r,pattern:i});this.debug("matchOne",r.length,i.length);for(var d=0,p=0,g=r.length,y=i.length;d<g&&p<y;d++,p++){this.debug("matchOne loop");var b=i[p];var v=r[d];this.debug(i,b,v);if(b===false)return false;if(b===h){this.debug("GLOBSTAR",[i,b,v]);var w=d;var C=p+1;if(C===y){this.debug("** at the end");for(;d<g;d++){if(r[d]==="."||r[d]===".."||!u.dot&&r[d].charAt(0)===".")return false}return true}while(w<g){var E=r[w];this.debug("\nglobstar while",r,w,i,C,E);if(this.matchOne(r.slice(w),i.slice(C),c)){this.debug("globstar found match!",w,g,E);return true}else{if(E==="."||E===".."||!u.dot&&E.charAt(0)==="."){this.debug("dot detected!",r,w,i,C);break}this.debug("globstar swallow a segment, and continue");w++}}if(c){this.debug("\n>>> no match, partial?",r,w,i,C);if(w===g)return true}return false}var x;if(typeof b==="string"){x=v===b;this.debug("string match",b,v,x)}else{x=v.match(b);this.debug("pattern match",b,v,x)}if(!x)return false}if(d===g&&p===y){return true}else if(d===g){return c}else if(p===y){return d===g-1&&r[d]===""}throw new Error("wtf?")};function globUnescape(r){return r.replace(/\\(.)/g,"$1")}function regExpEscape(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},73079:r=>{var i=1e3;var c=i*60;var u=c*60;var h=u*24;var d=h*7;var p=h*365.25;r.exports=function(r,i){i=i||{};var c=typeof r;if(c==="string"&&r.length>0){return parse(r)}else if(c==="number"&&isFinite(r)){return i.long?fmtLong(r):fmtShort(r)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function parse(r){r=String(r);if(r.length>100){return}var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!g){return}var y=parseFloat(g[1]);var b=(g[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return y*p;case"weeks":case"week":case"w":return y*d;case"days":case"day":case"d":return y*h;case"hours":case"hour":case"hrs":case"hr":case"h":return y*u;case"minutes":case"minute":case"mins":case"min":case"m":return y*c;case"seconds":case"second":case"secs":case"sec":case"s":return y*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return undefined}}function fmtShort(r){var d=Math.abs(r);if(d>=h){return Math.round(r/h)+"d"}if(d>=u){return Math.round(r/u)+"h"}if(d>=c){return Math.round(r/c)+"m"}if(d>=i){return Math.round(r/i)+"s"}return r+"ms"}function fmtLong(r){var d=Math.abs(r);if(d>=h){return plural(r,d,h,"day")}if(d>=u){return plural(r,d,u,"hour")}if(d>=c){return plural(r,d,c,"minute")}if(d>=i){return plural(r,d,i,"second")}return r+" ms"}function plural(r,i,c,u){var h=i>=c*1.5;return Math.round(r/c)+" "+u+(h?"s":"")}},29852:(r,i,c)=>{var u=c(83270);r.exports=u(once);r.exports.strict=u(onceStrict);once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:true})}));function once(r){var f=function(){if(f.called)return f.value;f.called=true;return f.value=r.apply(this,arguments)};f.called=false;return f}function onceStrict(r){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=r.apply(this,arguments)};var i=r.name||"Function wrapped with `once`";f.onceError=i+" shouldn't be called more than once";f.called=false;return f}},26230:r=>{"use strict";function posix(r){return r.charAt(0)==="/"}function win32(r){var i=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var c=i.exec(r);var u=c[1]||"";var h=Boolean(u&&u.charAt(1)!==":");return Boolean(c[2]||h)}r.exports=process.platform==="win32"?win32:posix;r.exports.posix=posix;r.exports.win32=win32},74093:(r,i,c)=>{"use strict";var u=c(57310);var h=c(57147);function parse(r){if(r.charAt(0)==="/"){var i=r.split(" ");return{host:i[0],database:i[1]}}var c=u.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(r)?encodeURI(r).replace(/\%25(\d\d)/g,"%$1"):r,true);var i=c.query;for(var d in i){if(Array.isArray(i[d])){i[d]=i[d][i[d].length-1]}}var p=(c.auth||":").split(":");i.user=p[0];i.password=p.splice(1).join(":");i.port=c.port;if(c.protocol=="socket:"){i.host=decodeURI(c.pathname);i.database=c.query.db;i.client_encoding=c.query.encoding;return i}if(!i.host){i.host=c.hostname}var g=c.pathname;if(!i.host&&g&&/^%2f/i.test(g)){var y=g.split("/");i.host=decodeURIComponent(y[0]);g=y.splice(1).join("/")}if(g&&g.charAt(0)==="/"){g=g.slice(1)||null}i.database=g&&decodeURI(g);if(i.ssl==="true"||i.ssl==="1"){i.ssl=true}if(i.ssl==="0"){i.ssl=false}if(i.sslcert||i.sslkey||i.sslrootcert||i.sslmode){i.ssl={}}if(i.sslcert){i.ssl.cert=h.readFileSync(i.sslcert).toString()}if(i.sslkey){i.ssl.key=h.readFileSync(i.sslkey).toString()}if(i.sslrootcert){i.ssl.ca=h.readFileSync(i.sslrootcert).toString()}switch(i.sslmode){case"disable":{i.ssl=false;break}case"prefer":case"require":case"verify-ca":case"verify-full":{break}case"no-verify":{i.ssl.rejectUnauthorized=false;break}}return i}r.exports=parse;parse.parse=parse},34703:r=>{r.exports=["cat","cd","chmod","cp","dirs","echo","exec","find","grep","head","ln","ls","mkdir","mv","pwd","rm","sed","set","sort","tail","tempdir","test","to","toEnd","touch","uniq","which"]},27429:(r,i,c)=>{function __ncc_wildcard$0(r){if(r==="cat.js"||r==="cat")return c(56480);else if(r==="cd.js"||r==="cd")return c(80720);else if(r==="chmod.js"||r==="chmod")return c(63737);else if(r==="common.js"||r==="common")return c(2730);else if(r==="cp.js"||r==="cp")return c(46229);else if(r==="dirs.js"||r==="dirs")return c(24251);else if(r==="echo.js"||r==="echo")return c(97432);else if(r==="error.js"||r==="error")return c(54815);else if(r==="exec-child.js"||r==="exec-child")return c(68648);else if(r==="exec.js"||r==="exec")return c(83373);else if(r==="find.js"||r==="find")return c(74874);else if(r==="grep.js"||r==="grep")return c(57511);else if(r==="head.js"||r==="head")return c(89617);else if(r==="ln.js"||r==="ln")return c(31147);else if(r==="ls.js"||r==="ls")return c(19220);else if(r==="mkdir.js"||r==="mkdir")return c(24150);else if(r==="mv.js"||r==="mv")return c(85642);else if(r==="popd.js"||r==="popd")return c(39983);else if(r==="pushd.js"||r==="pushd")return c(50758);else if(r==="pwd.js"||r==="pwd")return c(82101);else if(r==="rm.js"||r==="rm")return c(12418);else if(r==="sed.js"||r==="sed")return c(67752);else if(r==="set.js"||r==="set")return c(97464);else if(r==="sort.js"||r==="sort")return c(23446);else if(r==="tail.js"||r==="tail")return c(62672);else if(r==="tempdir.js"||r==="tempdir")return c(31249);else if(r==="test.js"||r==="test")return c(63829);else if(r==="to.js"||r==="to")return c(40338);else if(r==="toEnd.js"||r==="toEnd")return c(80157);else if(r==="touch.js"||r==="touch")return c(92779);else if(r==="uniq.js"||r==="uniq")return c(61619);else if(r==="which.js"||r==="which")return c(71133)}var u=c(2730);c(34703).forEach((function(r){__ncc_wildcard$0(r)}));i.exit=process.exit;i.error=c(54815);i.ShellString=u.ShellString;i.env=process.env;i.config=u.config},56480:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("cat",_cat,{canReceivePipe:true,cmdOptions:{n:"number"}});function _cat(r,i){var c=u.readFromPipe();if(!i&&!c)u.error("no paths given");i=[].slice.call(arguments,1);i.forEach((function(r){if(!h.existsSync(r)){u.error("no such file or directory: "+r)}else if(u.statFollowLinks(r).isDirectory()){u.error(r+": Is a directory")}c+=h.readFileSync(r,"utf8")}));if(r.number){c=addNumbers(c)}return c}r.exports=_cat;function addNumbers(r){var i=r.split("\n");var c=i.pop();i=i.map((function(r,i){return numberedLine(i+1,r)}));if(c.length){c=numberedLine(i.length+1,c)}i.push(c);return i.join("\n")}function numberedLine(r,i){var c=("     "+r).slice(-6)+"\t";return c+i}},80720:(r,i,c)=>{var u=c(22037);var h=c(2730);h.register("cd",_cd,{});function _cd(r,i){if(!i)i=u.homedir();if(i==="-"){if(!process.env.OLDPWD){h.error("could not find previous directory")}else{i=process.env.OLDPWD}}try{var c=process.cwd();process.chdir(i);process.env.OLDPWD=c}catch(r){var d;try{h.statFollowLinks(i);d="not a directory: "+i}catch(r){d="no such file or directory: "+i}if(d)h.error(d)}return""}r.exports=_cd},63737:(r,i,c)=>{var u=c(2730);var h=c(57147);var d=c(71017);var p=function(r){return{OTHER_EXEC:r.EXEC,OTHER_WRITE:r.WRITE,OTHER_READ:r.READ,GROUP_EXEC:r.EXEC<<3,GROUP_WRITE:r.WRITE<<3,GROUP_READ:r.READ<<3,OWNER_EXEC:r.EXEC<<6,OWNER_WRITE:r.WRITE<<6,OWNER_READ:r.READ<<6,STICKY:parseInt("01000",8),SETGID:parseInt("02000",8),SETUID:parseInt("04000",8),TYPE_MASK:parseInt("0770000",8)}}({EXEC:1,WRITE:2,READ:4});u.register("chmod",_chmod,{});function _chmod(r,i,c){if(!c){if(r.length>0&&r.charAt(0)==="-"){[].unshift.call(arguments,"")}else{u.error("You must specify a file.")}}r=u.parseOptions(r,{R:"recursive",c:"changes",v:"verbose"});c=[].slice.call(arguments,2);var g;if(r.recursive){g=[];c.forEach((function addFile(r){var i=u.statNoFollowLinks(r);if(!i.isSymbolicLink()){g.push(r);if(i.isDirectory()){h.readdirSync(r).forEach((function(i){addFile(r+"/"+i)}))}}}))}else{g=c}g.forEach((function innerChmod(c){c=d.resolve(c);if(!h.existsSync(c)){u.error("File not found: "+c)}if(r.recursive&&u.statNoFollowLinks(c).isSymbolicLink()){return}var g=u.statFollowLinks(c);var y=g.isDirectory();var b=g.mode;var v=b&p.TYPE_MASK;var w=b;if(isNaN(parseInt(i,8))){i.split(",").forEach((function(i){var d=/([ugoa]*)([=\+-])([rwxXst]*)/i;var g=d.exec(i);if(g){var C=g[1];var E=g[2];var x=g[3];var S=C.indexOf("u")!==-1||C==="a"||C==="";var k=C.indexOf("g")!==-1||C==="a"||C==="";var T=C.indexOf("o")!==-1||C==="a"||C==="";var N=x.indexOf("r")!==-1;var O=x.indexOf("w")!==-1;var $=x.indexOf("x")!==-1;var A=x.indexOf("X")!==-1;var P=x.indexOf("t")!==-1;var I=x.indexOf("s")!==-1;if(A&&y){$=true}var R=0;if(S){R|=(N?p.OWNER_READ:0)+(O?p.OWNER_WRITE:0)+($?p.OWNER_EXEC:0)+(I?p.SETUID:0)}if(k){R|=(N?p.GROUP_READ:0)+(O?p.GROUP_WRITE:0)+($?p.GROUP_EXEC:0)+(I?p.SETGID:0)}if(T){R|=(N?p.OTHER_READ:0)+(O?p.OTHER_WRITE:0)+($?p.OTHER_EXEC:0)}if(P){R|=p.STICKY}switch(E){case"+":w|=R;break;case"-":w&=~R;break;case"=":w=v+R;if(u.statFollowLinks(c).isDirectory()){w|=p.SETUID+p.SETGID&b}break;default:u.error("Could not recognize operator: `"+E+"`")}if(r.verbose){console.log(c+" -> "+w.toString(8))}if(b!==w){if(!r.verbose&&r.changes){console.log(c+" -> "+w.toString(8))}h.chmodSync(c,w);b=w}}else{u.error("Invalid symbolic mode change: "+i)}}))}else{w=v+parseInt(i,8);if(u.statFollowLinks(c).isDirectory()){w|=p.SETUID+p.SETGID&b}h.chmodSync(c,w)}}));return""}r.exports=_chmod},2730:(r,i,c)=>{"use strict";var u=c(22037);var h=c(57147);var d=c(74991);var p=c(27429);var g=Object.create(p);i.extend=Object.assign;var y=Boolean(process.versions.electron);var b={fatal:false,globOptions:{},maxdepth:255,noglob:false,silent:false,verbose:false,execPath:null,bufLength:64*1024};var v={reset:function(){Object.assign(this,b);if(!y){this.execPath=process.execPath}},resetForTesting:function(){this.reset();this.silent=true}};v.reset();i.config=v;var w={error:null,errorCode:0,currentCmd:"shell.js"};i.state=w;delete process.env.OLDPWD;function isObject(r){return typeof r==="object"&&r!==null}i.isObject=isObject;function log(){if(!v.silent){console.error.apply(console,arguments)}}i.log=log;function convertErrorOutput(r){if(typeof r!=="string"){throw new TypeError("input must be a string")}return r.replace(/\\/g,"/")}i.convertErrorOutput=convertErrorOutput;function error(r,i,c){if(typeof r!=="string")throw new Error("msg must be a string");var u={continue:false,code:1,prefix:w.currentCmd+": ",silent:false};if(typeof i==="number"&&isObject(c)){c.code=i}else if(isObject(i)){c=i}else if(typeof i==="number"){c={code:i}}else if(typeof i!=="number"){c={}}c=Object.assign({},u,c);if(!w.errorCode)w.errorCode=c.code;var h=convertErrorOutput(c.prefix+r);w.error=w.error?w.error+"\n":"";w.error+=h;if(v.fatal)throw new Error(h);if(r.length>0&&!c.silent)log(h);if(!c.continue){throw{msg:"earlyExit",retValue:new ShellString("",w.error,w.errorCode)}}}i.error=error;function ShellString(r,i,c){var u;if(r instanceof Array){u=r;u.stdout=r.join("\n");if(r.length>0)u.stdout+="\n"}else{u=new String(r);u.stdout=r}u.stderr=i;u.code=c;x.forEach((function(r){u[r]=g[r].bind(u)}));return u}i.ShellString=ShellString;function parseOptions(r,i,c){if(typeof r!=="string"&&!isObject(r)){throw new Error("options must be strings or key-value pairs")}else if(!isObject(i)){throw new Error("parseOptions() internal error: map must be an object")}else if(c&&!isObject(c)){throw new Error("parseOptions() internal error: errorOptions must be object")}if(r==="--"){return{}}var u={};Object.keys(i).forEach((function(r){var c=i[r];if(c[0]!=="!"){u[c]=false}}));if(r==="")return u;if(typeof r==="string"){if(r[0]!=="-"){throw new Error("Options string must start with a '-'")}var h=r.slice(1).split("");h.forEach((function(r){if(r in i){var h=i[r];if(h[0]==="!"){u[h.slice(1)]=false}else{u[h]=true}}else{error("option not recognized: "+r,c||{})}}))}else{Object.keys(r).forEach((function(h){var d=h[1];if(d in i){var p=i[d];u[p]=r[h]}else{error("option not recognized: "+d,c||{})}}))}return u}i.parseOptions=parseOptions;function expand(r){if(!Array.isArray(r)){throw new TypeError("must be an array")}var i=[];r.forEach((function(r){if(typeof r!=="string"){i.push(r)}else{var c;try{c=d.sync(r,v.globOptions);c=c.length>0?c:[r]}catch(i){c=[r]}i=i.concat(c)}}));return i}i.expand=expand;var C=typeof Buffer.alloc==="function"?function(r){return Buffer.alloc(r||v.bufLength)}:function(r){return new Buffer(r||v.bufLength)};i.buffer=C;function unlinkSync(r){try{h.unlinkSync(r)}catch(i){if(i.code==="EPERM"){h.chmodSync(r,"0666");h.unlinkSync(r)}else{throw i}}}i.unlinkSync=unlinkSync;function statFollowLinks(){return h.statSync.apply(h,arguments)}i.statFollowLinks=statFollowLinks;function statNoFollowLinks(){return h.lstatSync.apply(h,arguments)}i.statNoFollowLinks=statNoFollowLinks;function randomFileName(){function randomHash(r){if(r===1){return parseInt(16*Math.random(),10).toString(16)}var i="";for(var c=0;c<r;c++){i+=randomHash(1)}return i}return"shelljs_"+randomHash(20)}i.randomFileName=randomFileName;function wrap(r,i,c){c=c||{};return function(){var h=null;w.currentCmd=r;w.error=null;w.errorCode=0;try{var d=[].slice.call(arguments,0);if(v.verbose){console.error.apply(console,[r].concat(d))}w.pipedValue=this&&typeof this.stdout==="string"?this.stdout:"";if(c.unix===false){h=i.apply(this,d)}else{if(isObject(d[0])&&d[0].constructor.name==="Object"){}else if(d.length===0||typeof d[0]!=="string"||d[0].length<=1||d[0][0]!=="-"){d.unshift("")}d=d.reduce((function(r,i){if(Array.isArray(i)){return r.concat(i)}r.push(i);return r}),[]);d=d.map((function(r){if(isObject(r)&&r.constructor.name==="String"){return r.toString()}return r}));var p=u.homedir();d=d.map((function(r){if(typeof r==="string"&&r.slice(0,2)==="~/"||r==="~"){return r.replace(/^~/,p)}return r}));if(!v.noglob&&c.allowGlobbing===true){d=d.slice(0,c.globStart).concat(expand(d.slice(c.globStart)))}try{if(isObject(c.cmdOptions)){d[0]=parseOptions(d[0],c.cmdOptions)}h=i.apply(this,d)}catch(r){if(r.msg==="earlyExit"){h=r.retValue}else{throw r}}}}catch(r){if(!w.error){r.name="ShellJSInternalError";throw r}if(v.fatal)throw r}if(c.wrapOutput&&(typeof h==="string"||Array.isArray(h))){h=new ShellString(h,w.error,w.errorCode)}w.currentCmd="shell.js";return h}}i.wrap=wrap;function _readFromPipe(){return w.pipedValue}i.readFromPipe=_readFromPipe;var E={allowGlobbing:true,canReceivePipe:false,cmdOptions:null,globStart:1,pipeOnly:false,wrapOutput:true,unix:true};var x=[];function _register(r,i,c){c=c||{};Object.keys(c).forEach((function(r){if(!E.hasOwnProperty(r)){throw new Error("Unknown option '"+r+"'")}if(typeof c[r]!==typeof E[r]){throw new TypeError("Unsupported type '"+typeof c[r]+"' for option '"+r+"'")}}));c=Object.assign({},E,c);if(p.hasOwnProperty(r)){throw new Error("Command `"+r+"` already exists")}if(c.pipeOnly){c.canReceivePipe=true;g[r]=wrap(r,i,c)}else{p[r]=wrap(r,i,c)}if(c.canReceivePipe){x.push(r)}}i.register=_register},46229:(r,i,c)=>{var u=c(57147);var h=c(71017);var d=c(2730);d.register("cp",_cp,{cmdOptions:{f:"!no_force",n:"no_force",u:"update",R:"recursive",r:"recursive",L:"followsymlink",P:"noFollowsymlink"},wrapOutput:false});function copyFileSync(r,i,c){if(!u.existsSync(r)){d.error("copyFileSync: no such file or directory: "+r)}var h=process.platform==="win32";try{if(c.update&&d.statFollowLinks(r).mtime<u.statSync(i).mtime){return}}catch(r){}if(d.statNoFollowLinks(r).isSymbolicLink()&&!c.followsymlink){try{d.statNoFollowLinks(i);d.unlinkSync(i)}catch(r){}var p=u.readlinkSync(r);u.symlinkSync(p,i,h?"junction":null)}else{var g=d.buffer();var y=g.length;var b=y;var v=0;var w=null;var C=null;try{w=u.openSync(r,"r")}catch(i){d.error("copyFileSync: could not read src file ("+r+")")}try{C=u.openSync(i,"w")}catch(r){d.error("copyFileSync: could not write to dest file (code="+r.code+"):"+i)}while(b===y){b=u.readSync(w,g,0,y,v);u.writeSync(C,g,0,b);v+=b}u.closeSync(w);u.closeSync(C);u.chmodSync(i,d.statFollowLinks(r).mode)}}function cpdirSyncRecursive(r,i,c,h){if(!h)h={};if(c>=d.config.maxdepth)return;c++;var p=process.platform==="win32";try{u.mkdirSync(i)}catch(r){if(r.code!=="EEXIST")throw r}var g=u.readdirSync(r);for(var y=0;y<g.length;y++){var b=r+"/"+g[y];var v=i+"/"+g[y];var w=d.statNoFollowLinks(b);var C;if(h.followsymlink){if(cpcheckcycle(r,b)){console.error("Cycle link found.");C=u.readlinkSync(b);u.symlinkSync(C,v,p?"junction":null);continue}}if(w.isDirectory()){cpdirSyncRecursive(b,v,c,h)}else if(w.isSymbolicLink()&&!h.followsymlink){C=u.readlinkSync(b);try{d.statNoFollowLinks(v);d.unlinkSync(v)}catch(r){}u.symlinkSync(C,v,p?"junction":null)}else if(w.isSymbolicLink()&&h.followsymlink){w=d.statFollowLinks(b);if(w.isDirectory()){cpdirSyncRecursive(b,v,c,h)}else{copyFileSync(b,v,h)}}else{if(u.existsSync(v)&&h.no_force){d.log("skipping existing file: "+g[y])}else{copyFileSync(b,v,h)}}}var E=d.statFollowLinks(r);u.chmodSync(i,E.mode)}function checkRecentCreated(r,i){var c=r[i];return r.slice(0,i).some((function(r){return h.basename(r)===h.basename(c)}))}function cpcheckcycle(r,i){var c=d.statNoFollowLinks(i);if(c.isSymbolicLink()){var h=d.statFollowLinks(i);if(h.isDirectory()){var p=u.realpathSync(r);var g=u.realpathSync(i);var y=new RegExp(g);if(y.test(p)){return true}}}return false}function _cp(r,i,c){if(r.followsymlink){r.noFollowsymlink=false}if(!r.recursive&&!r.noFollowsymlink){r.followsymlink=true}if(arguments.length<3){d.error("missing <source> and/or <dest>")}else{i=[].slice.call(arguments,1,arguments.length-1);c=arguments[arguments.length-1]}var p=u.existsSync(c);var g=p&&d.statFollowLinks(c);if((!p||!g.isDirectory())&&i.length>1){d.error("dest is not a directory (too many sources)")}if(p&&g.isFile()&&r.no_force){return new d.ShellString("","",0)}i.forEach((function(p,y){if(!u.existsSync(p)){if(p==="")p="''";d.error("no such file or directory: "+p,{continue:true});return}var b=d.statFollowLinks(p);if(!r.noFollowsymlink&&b.isDirectory()){if(!r.recursive){d.error("omitting directory '"+p+"'",{continue:true})}else{var v=g&&g.isDirectory()?h.join(c,h.basename(p)):c;try{d.statFollowLinks(h.dirname(c));cpdirSyncRecursive(p,v,0,{no_force:r.no_force,followsymlink:r.followsymlink})}catch(r){d.error("cannot create directory '"+c+"': No such file or directory")}}}else{var w=c;if(g&&g.isDirectory()){w=h.normalize(c+"/"+h.basename(p))}var C=u.existsSync(w);if(C&&checkRecentCreated(i,y)){if(!r.no_force){d.error("will not overwrite just-created '"+w+"' with '"+p+"'",{continue:true})}return}if(C&&r.no_force){return}if(h.relative(p,w)===""){d.error("'"+w+"' and '"+p+"' are the same file",{continue:true});return}copyFileSync(p,w,r)}}));return new d.ShellString("",d.state.error,d.state.errorCode)}r.exports=_cp},24251:(r,i,c)=>{var u=c(2730);var h=c(80720);var d=c(71017);u.register("dirs",_dirs,{wrapOutput:false});u.register("pushd",_pushd,{wrapOutput:false});u.register("popd",_popd,{wrapOutput:false});var p=[];function _isStackIndex(r){return/^[\-+]\d+$/.test(r)}function _parseStackIndex(r){if(_isStackIndex(r)){if(Math.abs(r)<p.length+1){return/^-/.test(r)?Number(r)-1:Number(r)}u.error(r+": directory stack index out of range")}else{u.error(r+": invalid number")}}function _actualDirStack(){return[process.cwd()].concat(p)}function _pushd(r,i){if(_isStackIndex(r)){i=r;r=""}r=u.parseOptions(r,{n:"no-cd",q:"quiet"});var c=_actualDirStack();if(i==="+0"){return c}else if(!i){if(c.length>1){c=c.splice(1,1).concat(c)}else{return u.error("no other directory")}}else if(_isStackIndex(i)){var g=_parseStackIndex(i);c=c.slice(g).concat(c.slice(0,g))}else{if(r["no-cd"]){c.splice(1,0,i)}else{c.unshift(i)}}if(r["no-cd"]){c=c.slice(1)}else{i=d.resolve(c.shift());h("",i)}p=c;return _dirs(r.quiet?"-q":"")}i.pushd=_pushd;function _popd(r,i){if(_isStackIndex(r)){i=r;r=""}r=u.parseOptions(r,{n:"no-cd",q:"quiet"});if(!p.length){return u.error("directory stack empty")}i=_parseStackIndex(i||"+0");if(r["no-cd"]||i>0||p.length+i===0){i=i>0?i-1:i;p.splice(i,1)}else{var c=d.resolve(p.shift());h("",c)}return _dirs(r.quiet?"-q":"")}i.popd=_popd;function _dirs(r,i){if(_isStackIndex(r)){i=r;r=""}r=u.parseOptions(r,{c:"clear",q:"quiet"});if(r.clear){p=[];return p}var c=_actualDirStack();if(i){i=_parseStackIndex(i);if(i<0){i=c.length+i}if(!r.quiet){u.log(c[i])}return c[i]}if(!r.quiet){u.log(c.join(" "))}return c}i.dirs=_dirs},97432:(r,i,c)=>{var u=c(73837).format;var h=c(2730);h.register("echo",_echo,{allowGlobbing:false});function _echo(r){var i=[].slice.call(arguments,r?0:1);var c={};try{c=h.parseOptions(i[0],{e:"escapes",n:"no_newline"},{silent:true});if(i[0]){i.shift()}}catch(r){h.state.error=null}var d=u.apply(null,i);if(!c.no_newline){d+="\n"}process.stdout.write(d);return d}r.exports=_echo},54815:(r,i,c)=>{var u=c(2730);function error(){return u.state.error}r.exports=error},68648:(r,i,c)=>{r=c.nmd(r);if(require.main!==r){throw new Error("This file should not be required")}var u=c(32081);var h=c(57147);var d=process.argv[2];var p=h.readFileSync(d,"utf8");var g=JSON.parse(p);var y=g.command;var b=g.execOptions;var v=g.pipe;var w=g.stdoutFile;var C=g.stderrFile;var E=u.exec(y,b,(function(r){if(!r){process.exitCode=0}else if(r.code===undefined){process.exitCode=1}else{process.exitCode=r.code}}));var x=h.createWriteStream(w);var S=h.createWriteStream(C);E.stdout.pipe(x);E.stderr.pipe(S);E.stdout.pipe(process.stdout);E.stderr.pipe(process.stderr);if(v){E.stdin.end(v)}},83373:(r,i,c)=>{var u=c(2730);var h=c(31249).tempDir;var d=c(82101);var p=c(71017);var g=c(57147);var y=c(32081);var b=20*1024*1024;var v=1;u.register("exec",_exec,{unix:false,canReceivePipe:true,wrapOutput:false});function execSync(r,i,w){if(!u.config.execPath){u.error("Unable to find a path to the node binary. Please manually set config.execPath")}var C=h();var E=p.resolve(C+"/"+u.randomFileName());var x=p.resolve(C+"/"+u.randomFileName());var S=p.resolve(C+"/"+u.randomFileName());i=u.extend({silent:u.config.silent,cwd:d().toString(),env:process.env,maxBuffer:b,encoding:"utf8"},i);if(g.existsSync(E))u.unlinkSync(E);if(g.existsSync(x))u.unlinkSync(x);if(g.existsSync(S))u.unlinkSync(S);i.cwd=p.resolve(i.cwd);var k={command:r,execOptions:i,pipe:w,stdoutFile:S,stderrFile:x};function writeFileLockedDown(r,i){g.writeFileSync(r,i,{encoding:"utf8",mode:parseInt("600",8)})}writeFileLockedDown(S,"");writeFileLockedDown(x,"");writeFileLockedDown(E,JSON.stringify(k));var T=[c.ab+"exec-child.js",E];if(i.silent){i.stdio="ignore"}else{i.stdio=[0,1,2]}var N=0;try{delete i.shell;y.execFileSync(u.config.execPath,T,i)}catch(r){N=r.status||v}var O="";var $="";if(i.encoding==="buffer"){O=g.readFileSync(S);$=g.readFileSync(x)}else{O=g.readFileSync(S,i.encoding);$=g.readFileSync(x,i.encoding)}try{u.unlinkSync(E)}catch(r){}try{u.unlinkSync(x)}catch(r){}try{u.unlinkSync(S)}catch(r){}if(N!==0){u.error($,N,{continue:true,silent:true})}var A=u.ShellString(O,$,N);return A}function execAsync(r,i,c,h){i=u.extend({silent:u.config.silent,cwd:d().toString(),env:process.env,maxBuffer:b,encoding:"utf8"},i);var p=y.exec(r,i,(function(r,i,c){if(h){if(!r){h(0,i,c)}else if(r.code===undefined){h(1,i,c)}else{h(r.code,i,c)}}}));if(c)p.stdin.end(c);if(!i.silent){p.stdout.pipe(process.stdout);p.stderr.pipe(process.stderr)}return p}function _exec(r,i,c){i=i||{};if(!r)u.error("must specify command");var h=u.readFromPipe();if(typeof i==="function"){c=i;i={async:true}}if(typeof i==="object"&&typeof c==="function"){i.async=true}i=u.extend({silent:u.config.silent,async:false},i);if(i.async){return execAsync(r,i,h,c)}else{return execSync(r,i,h)}}r.exports=_exec},74874:(r,i,c)=>{var u=c(71017);var h=c(2730);var d=c(19220);h.register("find",_find,{});function _find(r,i){if(!i){h.error("no path specified")}else if(typeof i==="string"){i=[].slice.call(arguments,1)}var c=[];function pushFile(r){if(process.platform==="win32"){r=r.replace(/\\/g,"/")}c.push(r)}i.forEach((function(r){var i;try{i=h.statFollowLinks(r)}catch(i){h.error("no such file or directory: "+r)}pushFile(r);if(i.isDirectory()){d({recursive:true,all:true},r).forEach((function(i){pushFile(u.join(r,i))}))}}));return c}r.exports=_find},57511:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("grep",_grep,{globStart:2,canReceivePipe:true,cmdOptions:{v:"inverse",l:"nameOnly",i:"ignoreCase"}});function _grep(r,i,c){var d=u.readFromPipe();if(!c&&!d)u.error("no paths given",2);c=[].slice.call(arguments,2);if(d){c.unshift("-")}var p=[];if(r.ignoreCase){i=new RegExp(i,"i")}c.forEach((function(c){if(!h.existsSync(c)&&c!=="-"){u.error("no such file or directory: "+c,2,{continue:true});return}var g=c==="-"?d:h.readFileSync(c,"utf8");if(r.nameOnly){if(g.match(i)){p.push(c)}}else{var y=g.split("\n");y.forEach((function(c){var u=c.match(i);if(r.inverse&&!u||!r.inverse&&u){p.push(c)}}))}}));return p.join("\n")+"\n"}r.exports=_grep},89617:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("head",_head,{canReceivePipe:true,cmdOptions:{n:"numLines"}});function readSomeLines(r,i){var c=u.buffer();var d=c.length;var p=d;var g=0;var y=h.openSync(r,"r");var b=0;var v="";while(p===d&&b<i){p=h.readSync(y,c,0,d,g);var w=c.toString("utf8",0,p);b+=w.split("\n").length-1;v+=w;g+=p}h.closeSync(y);return v}function _head(r,i){var c=[];var d=u.readFromPipe();if(!i&&!d)u.error("no paths given");var p=1;if(r.numLines===true){p=2;r.numLines=Number(arguments[1])}else if(r.numLines===false){r.numLines=10}i=[].slice.call(arguments,p);if(d){i.unshift("-")}var g=false;i.forEach((function(i){if(i!=="-"){if(!h.existsSync(i)){u.error("no such file or directory: "+i,{continue:true});return}else if(u.statFollowLinks(i).isDirectory()){u.error("error reading '"+i+"': Is a directory",{continue:true});return}}var p;if(i==="-"){p=d}else if(r.numLines<0){p=h.readFileSync(i,"utf8")}else{p=readSomeLines(i,r.numLines)}var y=p.split("\n");var b=y[y.length-1]==="";if(b){y.pop()}g=b||r.numLines<y.length;c=c.concat(y.slice(0,r.numLines))}));if(g){c.push("")}return c.join("\n")}r.exports=_head},31147:(r,i,c)=>{var u=c(57147);var h=c(71017);var d=c(2730);d.register("ln",_ln,{cmdOptions:{s:"symlink",f:"force"}});function _ln(r,i,c){if(!i||!c){d.error("Missing <source> and/or <dest>")}i=String(i);var p=h.normalize(i).replace(RegExp(h.sep+"$"),"");var g=h.resolve(i)===p;c=h.resolve(process.cwd(),String(c));if(u.existsSync(c)){if(!r.force){d.error("Destination file exists",{continue:true})}u.unlinkSync(c)}if(r.symlink){var y=process.platform==="win32";var b=y?"file":null;var v=g?p:h.resolve(process.cwd(),h.dirname(c),i);if(!u.existsSync(v)){d.error("Source file does not exist",{continue:true})}else if(y&&d.statFollowLinks(v).isDirectory()){b="junction"}try{u.symlinkSync(b==="junction"?v:i,c,b)}catch(r){d.error(r.message)}}else{if(!u.existsSync(i)){d.error("Source file does not exist",{continue:true})}try{u.linkSync(i,c)}catch(r){d.error(r.message)}}return""}r.exports=_ln},19220:(r,i,c)=>{var u=c(71017);var h=c(57147);var d=c(2730);var p=c(74991);var g=u.sep+"**";d.register("ls",_ls,{cmdOptions:{R:"recursive",A:"all",L:"link",a:"all_deprecated",d:"directory",l:"long"}});function _ls(r,i){if(r.all_deprecated){d.log("ls: Option -a is deprecated. Use -A instead");r.all=true}if(!i){i=["."]}else{i=[].slice.call(arguments,1)}var c=[];function pushFile(i,u,h){if(process.platform==="win32"){u=u.replace(/\\/g,"/")}if(r.long){h=h||(r.link?d.statFollowLinks(i):d.statNoFollowLinks(i));c.push(addLsAttributes(u,h))}else{c.push(u)}}i.forEach((function(i){var c;try{c=r.link?d.statFollowLinks(i):d.statNoFollowLinks(i);if(c.isSymbolicLink()){try{var y=d.statFollowLinks(i);if(y.isDirectory()){c=y}}catch(r){}}}catch(r){d.error("no such file or directory: "+i,2,{continue:true});return}if(c.isDirectory()&&!r.directory){if(r.recursive){p.sync(i+g,{dot:r.all,follow:r.link}).forEach((function(r){if(u.relative(i,r)){pushFile(r,u.relative(i,r))}}))}else if(r.all){h.readdirSync(i).forEach((function(r){pushFile(u.join(i,r),r)}))}else{h.readdirSync(i).forEach((function(r){if(r[0]!=="."){pushFile(u.join(i,r),r)}}))}}else{pushFile(i,i,c)}}));return c}function addLsAttributes(r,i){i.name=r;i.toString=function(){return[this.mode,this.nlink,this.uid,this.gid,this.size,this.mtime,this.name].join(" ")};return i}r.exports=_ls},24150:(r,i,c)=>{var u=c(2730);var h=c(57147);var d=c(71017);u.register("mkdir",_mkdir,{cmdOptions:{p:"fullpath"}});function mkdirSyncRecursive(r){var i=d.dirname(r);if(i===r){u.error("dirname() failed: ["+r+"]")}if(h.existsSync(i)){h.mkdirSync(r,parseInt("0777",8));return}mkdirSyncRecursive(i);h.mkdirSync(r,parseInt("0777",8))}function _mkdir(r,i){if(!i)u.error("no paths given");if(typeof i==="string"){i=[].slice.call(arguments,1)}i.forEach((function(i){try{var c=u.statNoFollowLinks(i);if(!r.fullpath){u.error("path already exists: "+i,{continue:true})}else if(c.isFile()){u.error("cannot create directory "+i+": File exists",{continue:true})}return}catch(r){}var p=d.dirname(i);if(!h.existsSync(p)&&!r.fullpath){u.error("no such file or directory: "+p,{continue:true});return}try{if(r.fullpath){mkdirSyncRecursive(d.resolve(i))}else{h.mkdirSync(i,parseInt("0777",8))}}catch(r){var g;if(r.code==="EACCES"){g="Permission denied"}else if(r.code==="ENOTDIR"||r.code==="ENOENT"){g="Not a directory"}else{throw r}u.error("cannot create directory "+i+": "+g,{continue:true})}}));return""}r.exports=_mkdir},85642:(r,i,c)=>{var u=c(57147);var h=c(71017);var d=c(2730);var p=c(46229);var g=c(12418);d.register("mv",_mv,{cmdOptions:{f:"!no_force",n:"no_force"}});function checkRecentCreated(r,i){var c=r[i];return r.slice(0,i).some((function(r){return h.basename(r)===h.basename(c)}))}function _mv(r,i,c){if(arguments.length<3){d.error("missing <source> and/or <dest>")}else if(arguments.length>3){i=[].slice.call(arguments,1,arguments.length-1);c=arguments[arguments.length-1]}else if(typeof i==="string"){i=[i]}else{d.error("invalid arguments")}var y=u.existsSync(c);var b=y&&d.statFollowLinks(c);if((!y||!b.isDirectory())&&i.length>1){d.error("dest is not a directory (too many sources)")}if(y&&b.isFile()&&r.no_force){d.error("dest file already exists: "+c)}i.forEach((function(y,b){if(!u.existsSync(y)){d.error("no such file or directory: "+y,{continue:true});return}var v=c;if(u.existsSync(c)&&d.statFollowLinks(c).isDirectory()){v=h.normalize(c+"/"+h.basename(y))}var w=u.existsSync(v);if(w&&checkRecentCreated(i,b)){if(!r.no_force){d.error("will not overwrite just-created '"+v+"' with '"+y+"'",{continue:true})}return}if(u.existsSync(v)&&r.no_force){d.error("dest file already exists: "+v,{continue:true});return}if(h.resolve(y)===h.dirname(h.resolve(v))){d.error("cannot move to self: "+y,{continue:true});return}try{u.renameSync(y,v)}catch(r){if(r.code==="EXDEV"){p("-r",y,v);g("-rf",y)}}}));return""}r.exports=_mv},39983:()=>{},50758:()=>{},82101:(r,i,c)=>{var u=c(71017);var h=c(2730);h.register("pwd",_pwd,{allowGlobbing:false});function _pwd(){var r=u.resolve(process.cwd());return r}r.exports=_pwd},12418:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("rm",_rm,{cmdOptions:{f:"force",r:"recursive",R:"recursive"}});function rmdirSyncRecursive(r,i,c){var d;d=h.readdirSync(r);for(var p=0;p<d.length;p++){var g=r+"/"+d[p];var y=u.statNoFollowLinks(g);if(y.isDirectory()){rmdirSyncRecursive(g,i)}else{if(i||isWriteable(g)){try{u.unlinkSync(g)}catch(r){u.error("could not remove file (code "+r.code+"): "+g,{continue:true})}}}}if(c)return;var b;try{var v=Date.now();for(;;){try{b=h.rmdirSync(r);if(h.existsSync(r))throw{code:"EAGAIN"};break}catch(r){if(process.platform==="win32"&&(r.code==="ENOTEMPTY"||r.code==="EBUSY"||r.code==="EPERM"||r.code==="EAGAIN")){if(Date.now()-v>1e3)throw r}else if(r.code==="ENOENT"){break}else{throw r}}}}catch(i){u.error("could not remove directory (code "+i.code+"): "+r,{continue:true})}return b}function isWriteable(r){var i=true;try{var c=h.openSync(r,"a");h.closeSync(c)}catch(r){i=false}return i}function handleFile(r,i){if(i.force||isWriteable(r)){u.unlinkSync(r)}else{u.error("permission denied: "+r,{continue:true})}}function handleDirectory(r,i){if(i.recursive){rmdirSyncRecursive(r,i.force)}else{u.error("path is a directory",{continue:true})}}function handleSymbolicLink(r,i){var c;try{c=u.statFollowLinks(r)}catch(i){u.unlinkSync(r);return}if(c.isFile()){u.unlinkSync(r)}else if(c.isDirectory()){if(r[r.length-1]==="/"){if(i.recursive){var h=true;rmdirSyncRecursive(r,i.force,h)}else{u.error("path is a directory",{continue:true})}}else{u.unlinkSync(r)}}}function handleFIFO(r){u.unlinkSync(r)}function _rm(r,i){if(!i)u.error("no paths given");i=[].slice.call(arguments,1);i.forEach((function(i){var c;try{var h=i[i.length-1]==="/"?i.slice(0,-1):i;c=u.statNoFollowLinks(h)}catch(c){if(!r.force){u.error("no such file or directory: "+i,{continue:true})}return}if(c.isFile()){handleFile(i,r)}else if(c.isDirectory()){handleDirectory(i,r)}else if(c.isSymbolicLink()){handleSymbolicLink(i,r)}else if(c.isFIFO()){handleFIFO(i)}}));return""}r.exports=_rm},67752:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("sed",_sed,{globStart:3,canReceivePipe:true,cmdOptions:{i:"inplace"}});function _sed(r,i,c,d){var p=u.readFromPipe();if(typeof c!=="string"&&typeof c!=="function"){if(typeof c==="number"){c=c.toString()}else{u.error("invalid replacement string")}}if(typeof i==="string"){i=RegExp(i)}if(!d&&!p){u.error("no files given")}d=[].slice.call(arguments,3);if(p){d.unshift("-")}var g=[];d.forEach((function(d){if(!h.existsSync(d)&&d!=="-"){u.error("no such file or directory: "+d,2,{continue:true});return}var y=d==="-"?p:h.readFileSync(d,"utf8");var b=y.split("\n");var v=b.map((function(r){return r.replace(i,c)})).join("\n");g.push(v);if(r.inplace){h.writeFileSync(d,v,"utf8")}}));return g.join("\n")}r.exports=_sed},97464:(r,i,c)=>{var u=c(2730);u.register("set",_set,{allowGlobbing:false,wrapOutput:false});function _set(r){if(!r){var i=[].slice.call(arguments,0);if(i.length<2)u.error("must provide an argument");r=i[1]}var c=r[0]==="+";if(c){r="-"+r.slice(1)}r=u.parseOptions(r,{e:"fatal",v:"verbose",f:"noglob"});if(c){Object.keys(r).forEach((function(i){r[i]=!r[i]}))}Object.keys(r).forEach((function(i){if(c!==r[i]){u.config[i]=r[i]}}));return}r.exports=_set},23446:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("sort",_sort,{canReceivePipe:true,cmdOptions:{r:"reverse",n:"numerical"}});function parseNumber(r){var i=r.match(/^\s*(\d*)\s*(.*)$/);return{num:Number(i[1]),value:i[2]}}function unixCmp(r,i){var c=r.toLowerCase();var u=i.toLowerCase();return c===u?-1*r.localeCompare(i):c.localeCompare(u)}function numericalCmp(r,i){var c=parseNumber(r);var u=parseNumber(i);if(c.hasOwnProperty("num")&&u.hasOwnProperty("num")){return c.num!==u.num?c.num-u.num:unixCmp(c.value,u.value)}else{return unixCmp(c.value,u.value)}}function _sort(r,i){var c=u.readFromPipe();if(!i&&!c)u.error("no files given");i=[].slice.call(arguments,1);if(c){i.unshift("-")}var d=i.reduce((function(r,i){if(i!=="-"){if(!h.existsSync(i)){u.error("no such file or directory: "+i,{continue:true});return r}else if(u.statFollowLinks(i).isDirectory()){u.error("read failed: "+i+": Is a directory",{continue:true});return r}}var d=i==="-"?c:h.readFileSync(i,"utf8");return r.concat(d.trimRight().split("\n"))}),[]);var p=d.sort(r.numerical?numericalCmp:unixCmp);if(r.reverse){p=p.reverse()}return p.join("\n")+"\n"}r.exports=_sort},62672:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("tail",_tail,{canReceivePipe:true,cmdOptions:{n:"numLines"}});function _tail(r,i){var c=[];var d=u.readFromPipe();if(!i&&!d)u.error("no paths given");var p=1;if(r.numLines===true){p=2;r.numLines=Number(arguments[1])}else if(r.numLines===false){r.numLines=10}r.numLines=-1*Math.abs(r.numLines);i=[].slice.call(arguments,p);if(d){i.unshift("-")}var g=false;i.forEach((function(i){if(i!=="-"){if(!h.existsSync(i)){u.error("no such file or directory: "+i,{continue:true});return}else if(u.statFollowLinks(i).isDirectory()){u.error("error reading '"+i+"': Is a directory",{continue:true});return}}var p=i==="-"?d:h.readFileSync(i,"utf8");var y=p.split("\n");if(y[y.length-1]===""){y.pop();g=true}else{g=false}c=c.concat(y.slice(r.numLines))}));if(g){c.push("")}return c.join("\n")}r.exports=_tail},31249:(r,i,c)=>{var u=c(2730);var h=c(22037);var d=c(57147);u.register("tempdir",_tempDir,{allowGlobbing:false,wrapOutput:false});function writeableDir(r){if(!r||!d.existsSync(r))return false;if(!u.statFollowLinks(r).isDirectory())return false;var i=r+"/"+u.randomFileName();try{d.writeFileSync(i," ");u.unlinkSync(i);return r}catch(r){return false}}var p;function _tempDir(){if(p)return p;p=writeableDir(h.tmpdir())||writeableDir(process.env.TMPDIR)||writeableDir(process.env.TEMP)||writeableDir(process.env.TMP)||writeableDir(process.env.Wimp$ScrapDir)||writeableDir("C:\\TEMP")||writeableDir("C:\\TMP")||writeableDir("\\TEMP")||writeableDir("\\TMP")||writeableDir("/tmp")||writeableDir("/var/tmp")||writeableDir("/usr/tmp")||writeableDir(".");return p}function isCached(){return p}function clearCache(){p=undefined}r.exports.tempDir=_tempDir;r.exports.isCached=isCached;r.exports.clearCache=clearCache},63829:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("test",_test,{cmdOptions:{b:"block",c:"character",d:"directory",e:"exists",f:"file",L:"link",p:"pipe",S:"socket"},wrapOutput:false,allowGlobbing:false});function _test(r,i){if(!i)u.error("no path given");var c=false;Object.keys(r).forEach((function(i){if(r[i]===true){c=true}}));if(!c)u.error("could not interpret expression");if(r.link){try{return u.statNoFollowLinks(i).isSymbolicLink()}catch(r){return false}}if(!h.existsSync(i))return false;if(r.exists)return true;var d=u.statFollowLinks(i);if(r.block)return d.isBlockDevice();if(r.character)return d.isCharacterDevice();if(r.directory)return d.isDirectory();if(r.file)return d.isFile();if(r.pipe)return d.isFIFO();if(r.socket)return d.isSocket();return false}r.exports=_test},40338:(r,i,c)=>{var u=c(2730);var h=c(57147);var d=c(71017);u.register("to",_to,{pipeOnly:true,wrapOutput:false});function _to(r,i){if(!i)u.error("wrong arguments");if(!h.existsSync(d.dirname(i))){u.error("no such file or directory: "+d.dirname(i))}try{h.writeFileSync(i,this.stdout||this.toString(),"utf8");return this}catch(r){u.error("could not write to file (code "+r.code+"): "+i,{continue:true})}}r.exports=_to},80157:(r,i,c)=>{var u=c(2730);var h=c(57147);var d=c(71017);u.register("toEnd",_toEnd,{pipeOnly:true,wrapOutput:false});function _toEnd(r,i){if(!i)u.error("wrong arguments");if(!h.existsSync(d.dirname(i))){u.error("no such file or directory: "+d.dirname(i))}try{h.appendFileSync(i,this.stdout||this.toString(),"utf8");return this}catch(r){u.error("could not append to file (code "+r.code+"): "+i,{continue:true})}}r.exports=_toEnd},92779:(r,i,c)=>{var u=c(2730);var h=c(57147);u.register("touch",_touch,{cmdOptions:{a:"atime_only",c:"no_create",d:"date",m:"mtime_only",r:"reference"}});function _touch(r,i){if(!i){u.error("no files given")}else if(typeof i==="string"){i=[].slice.call(arguments,1)}else{u.error("file arg should be a string file path or an Array of string file paths")}i.forEach((function(i){touchFile(r,i)}));return""}function touchFile(r,i){var c=tryStatFile(i);if(c&&c.isDirectory()){return}if(!c&&r.no_create){return}h.closeSync(h.openSync(i,"a"));var d=new Date;var p=r.date||d;var g=r.date||d;if(r.reference){var y=tryStatFile(r.reference);if(!y){u.error("failed to get attributess of "+r.reference)}p=y.mtime;g=y.atime}else if(r.date){p=r.date;g=r.date}if(r.atime_only&&r.mtime_only){}else if(r.atime_only){p=c.mtime}else if(r.mtime_only){g=c.atime}h.utimesSync(i,g,p)}r.exports=_touch;function tryStatFile(r){try{return u.statFollowLinks(r)}catch(r){return null}}},61619:(r,i,c)=>{var u=c(2730);var h=c(57147);function lpad(r,i){var c=""+i;if(c.length<r){c=Array(r-c.length+1).join(" ")+c}return c}u.register("uniq",_uniq,{canReceivePipe:true,cmdOptions:{i:"ignoreCase",c:"count",d:"duplicates"}});function _uniq(r,i,c){var d=u.readFromPipe();if(!d){if(!i)u.error("no input given");if(!h.existsSync(i)){u.error(i+": No such file or directory")}else if(u.statFollowLinks(i).isDirectory()){u.error("error reading '"+i+"'")}}if(c&&h.existsSync(c)&&u.statFollowLinks(c).isDirectory()){u.error(c+": Is a directory")}var p=(i?h.readFileSync(i,"utf8"):d).trimRight().split("\n");var compare=function(i,c){return r.ignoreCase?i.toLocaleLowerCase().localeCompare(c.toLocaleLowerCase()):i.localeCompare(c)};var g=p.reduceRight((function(r,i){if(r.length===0){return[{count:1,ln:i}]}else if(compare(r[0].ln,i)===0){return[{count:r[0].count+1,ln:i}].concat(r.slice(1))}else{return[{count:1,ln:i}].concat(r)}}),[]).filter((function(i){return r.duplicates?i.count>1:true})).map((function(i){return(r.count?lpad(7,i.count)+" ":"")+i.ln})).join("\n")+"\n";if(c){new u.ShellString(g).to(c);return""}else{return g}}r.exports=_uniq},71133:(r,i,c)=>{var u=c(2730);var h=c(57147);var d=c(71017);u.register("which",_which,{allowGlobbing:false,cmdOptions:{a:"all"}});var p=".com;.exe;.bat;.cmd;.vbs;.vbe;.js;.jse;.wsf;.wsh";var g=1;function isWindowsPlatform(){return process.platform==="win32"}function splitPath(r){return r?r.split(d.delimiter):[]}function isExecutable(r){try{h.accessSync(r,g)}catch(r){return false}return true}function checkPath(r){return h.existsSync(r)&&!u.statFollowLinks(r).isDirectory()&&(isWindowsPlatform()||isExecutable(r))}function _which(r,i){if(!i)u.error("must specify command");var c=isWindowsPlatform();var h=splitPath(process.env.PATH);var g=[];if(i.indexOf("/")===-1){var y=[""];if(c){var b=process.env.PATHEXT||p;y=splitPath(b.toUpperCase())}for(var v=0;v<h.length;v++){if(g.length>0&&!r.all)break;var w=d.resolve(h[v],i);if(c){w=w.toUpperCase()}var C=w.match(/\.[^<>:"/\|?*.]+$/);if(C&&y.indexOf(C[0])>=0){if(checkPath(w)){g.push(w);break}}else{for(var E=0;E<y.length;E++){var x=y[E];var S=w+x;if(checkPath(S)){g.push(S);break}}}}}else if(checkPath(i)){g.push(d.resolve(i))}if(g.length>0){return r.all?g:g[0]}return r.all?[]:null}r.exports=_which},82793:(r,i,c)=>{"use strict";const u=c(22037);const h=c(76224);const d=c(41914);const{env:p}=process;let g;if(d("no-color")||d("no-colors")||d("color=false")||d("color=never")){g=0}else if(d("color")||d("colors")||d("color=true")||d("color=always")){g=1}if("FORCE_COLOR"in p){if(p.FORCE_COLOR==="true"){g=1}else if(p.FORCE_COLOR==="false"){g=0}else{g=p.FORCE_COLOR.length===0?1:Math.min(parseInt(p.FORCE_COLOR,10),3)}}function translateLevel(r){if(r===0){return false}return{level:r,hasBasic:true,has256:r>=2,has16m:r>=3}}function supportsColor(r,i){if(g===0){return 0}if(d("color=16m")||d("color=full")||d("color=truecolor")){return 3}if(d("color=256")){return 2}if(r&&!i&&g===undefined){return 0}const c=g||0;if(p.TERM==="dumb"){return c}if(process.platform==="win32"){const r=u.release().split(".");if(Number(r[0])>=10&&Number(r[2])>=10586){return Number(r[2])>=14931?3:2}return 1}if("CI"in p){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((r=>r in p))||p.CI_NAME==="codeship"){return 1}return c}if("TEAMCITY_VERSION"in p){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(p.TEAMCITY_VERSION)?1:0}if(p.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in p){const r=parseInt((p.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(p.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(p.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(p.TERM)){return 1}if("COLORTERM"in p){return 1}return c}function getSupportLevel(r){const i=supportsColor(r,r&&r.isTTY);return translateLevel(i)}r.exports={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,h.isatty(1))),stderr:translateLevel(supportsColor(true,h.isatty(2)))}},894:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(27306);const h=c(24737);class PendingOperation{constructor(r){this.timeoutMillis=r;this.deferred=h.defer();this.possibleTimeoutCause=null;this.isRejected=false;this.promise=timeout(this.deferred.promise,r).catch((r=>{if(r instanceof u.TimeoutError){if(this.possibleTimeoutCause){r=new u.TimeoutError(this.possibleTimeoutCause.message)}else{r=new u.TimeoutError("operation timed out for an unknown reason")}}this.isRejected=true;return Promise.reject(r)}))}abort(){this.reject(new Error("aborted"))}reject(r){this.deferred.reject(r)}resolve(r){this.deferred.resolve(r)}}i.PendingOperation=PendingOperation;function timeout(r,i){return new Promise(((c,h)=>{const d=setTimeout((()=>h(new u.TimeoutError)),i);r.then((r=>{clearTimeout(d);c(r)})).catch((r=>{clearTimeout(d);h(r)}))}))}},32377:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(894);const h=c(94525);const d=c(24737);const p=c(82361);const g=c(39512);class Pool{constructor(r){this.destroyed=false;this.emitter=new p.EventEmitter;r=r||{};if(!r.create){throw new Error("Tarn: opt.create function most be provided")}if(!r.destroy){throw new Error("Tarn: opt.destroy function most be provided")}if(typeof r.min!=="number"||r.min<0||r.min!==Math.round(r.min)){throw new Error("Tarn: opt.min must be an integer >= 0")}if(typeof r.max!=="number"||r.max<=0||r.max!==Math.round(r.max)){throw new Error("Tarn: opt.max must be an integer > 0")}if(r.min>r.max){throw new Error("Tarn: opt.max is smaller than opt.min")}if(!d.checkOptionalTime(r.acquireTimeoutMillis)){throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(r.acquireTimeoutMillis))}if(!d.checkOptionalTime(r.createTimeoutMillis)){throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(r.createTimeoutMillis))}if(!d.checkOptionalTime(r.destroyTimeoutMillis)){throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(r.destroyTimeoutMillis))}if(!d.checkOptionalTime(r.idleTimeoutMillis)){throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(r.idleTimeoutMillis))}if(!d.checkOptionalTime(r.reapIntervalMillis)){throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(r.reapIntervalMillis))}if(!d.checkOptionalTime(r.createRetryIntervalMillis)){throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(r.createRetryIntervalMillis))}const i={create:true,validate:true,destroy:true,log:true,min:true,max:true,acquireTimeoutMillis:true,createTimeoutMillis:true,destroyTimeoutMillis:true,idleTimeoutMillis:true,reapIntervalMillis:true,createRetryIntervalMillis:true,propagateCreateError:true};for(const c of Object.keys(r)){if(!i[c]){throw new Error(`Tarn: unsupported option opt.${c}`)}}this.creator=r.create;this.destroyer=r.destroy;this.validate=typeof r.validate==="function"?r.validate:()=>true;this.log=r.log||(()=>{});this.acquireTimeoutMillis=r.acquireTimeoutMillis||3e4;this.createTimeoutMillis=r.createTimeoutMillis||3e4;this.destroyTimeoutMillis=r.destroyTimeoutMillis||5e3;this.idleTimeoutMillis=r.idleTimeoutMillis||3e4;this.reapIntervalMillis=r.reapIntervalMillis||1e3;this.createRetryIntervalMillis=r.createRetryIntervalMillis||200;this.propagateCreateError=!!r.propagateCreateError;this.min=r.min;this.max=r.max;this.used=[];this.free=[];this.pendingCreates=[];this.pendingAcquires=[];this.pendingDestroys=[];this.pendingValidations=[];this.destroyed=false;this.interval=null;this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){const r=this.eventId++;this._executeEventHandlers("acquireRequest",r);const i=new u.PendingOperation(this.acquireTimeoutMillis);this.pendingAcquires.push(i);i.promise=i.promise.then((i=>{this._executeEventHandlers("acquireSuccess",r,i);return i})).catch((c=>{this._executeEventHandlers("acquireFail",r,c);remove(this.pendingAcquires,i);return Promise.reject(c)}));this._tryAcquireOrCreate();return i}release(r){this._executeEventHandlers("release",r);for(let i=0,c=this.used.length;i<c;++i){const c=this.used[i];if(c.resource===r){this.used.splice(i,1);this.free.push(c.resolve());this._tryAcquireOrCreate();return true}}return false}isEmpty(){return[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce(((r,i)=>r+i))===0}check(){const r=d.now();const i=[];const c=this.min-this.used.length;const u=this.free.length-c;let h=0;this.free.forEach((c=>{if(d.duration(r,c.timestamp)>=this.idleTimeoutMillis&&h<u){h++;this._destroy(c.resource)}else{i.push(c)}}));this.free=i;if(this.isEmpty()){this._stopReaping()}}destroy(){const r=this.eventId++;this._executeEventHandlers("poolDestroyRequest",r);this._stopReaping();this.destroyed=true;return d.reflect(Promise.all(this.pendingCreates.map((r=>d.reflect(r.promise)))).then((()=>new Promise(((r,i)=>{if(this.numPendingValidations()===0){r();return}const c=setInterval((()=>{if(this.numPendingValidations()===0){g.clearInterval(c);r()}}),100)})))).then((()=>Promise.all(this.used.map((r=>d.reflect(r.promise)))))).then((()=>Promise.all(this.pendingAcquires.map((r=>{r.abort();return d.reflect(r.promise)}))))).then((()=>Promise.all(this.free.map((r=>d.reflect(this._destroy(r.resource))))))).then((()=>Promise.all(this.pendingDestroys.map((r=>r.promise))))).then((()=>{this.free=[];this.pendingAcquires=[]}))).then((i=>{this._executeEventHandlers("poolDestroySuccess",r);this.emitter.removeAllListeners();return i}))}on(r,i){this.emitter.on(r,i)}removeListener(r,i){this.emitter.removeListener(r,i)}removeAllListeners(r){this.emitter.removeAllListeners(r)}_tryAcquireOrCreate(){if(this.destroyed){return}if(this._hasFreeResources()){this._doAcquire()}else if(this._shouldCreateMoreResources()){this._doCreate()}}_hasFreeResources(){return this.free.length>0}_doAcquire(){while(this._canAcquire()){const r=this.pendingAcquires.shift();const i=this.free.pop();if(i===undefined||r===undefined){const r="this.free was empty while trying to acquire resource";this.log(`Tarn: ${r}`,"warn");throw new Error(`Internal error, should never happen. ${r}`)}this.pendingValidations.push(r);this.used.push(i);const c=new u.PendingOperation(this.acquireTimeoutMillis);r.promise.catch((r=>{c.abort()}));c.promise.catch((r=>{this.log("Tarn: resource validator threw an exception "+r.stack,"warn");return false})).then((c=>{try{if(c&&!r.isRejected){this._startReaping();r.resolve(i.resource)}else{remove(this.used,i);if(!c){this._destroy(i.resource);setTimeout((()=>{this._tryAcquireOrCreate()}),0)}else{this.free.push(i)}if(!r.isRejected){this.pendingAcquires.unshift(r)}}}finally{remove(this.pendingValidations,r)}}));this._validateResource(i.resource).then((r=>{c.resolve(r)})).catch((r=>{c.reject(r)}))}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource(r){try{return Promise.resolve(this.validate(r))}catch(r){return Promise.reject(r)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){const r=this.pendingAcquires.slice();const i=this._create();i.promise.then((()=>{this._tryAcquireOrCreate();return null})).catch((i=>{if(this.propagateCreateError&&this.pendingAcquires.length!==0){this.pendingAcquires[0].reject(i)}r.forEach((r=>{r.possibleTimeoutCause=i}));d.delay(this.createRetryIntervalMillis).then((()=>this._tryAcquireOrCreate()))}))}_create(){const r=this.eventId++;this._executeEventHandlers("createRequest",r);const i=new u.PendingOperation(this.createTimeoutMillis);i.promise=i.promise.catch((c=>{if(remove(this.pendingCreates,i)){this._executeEventHandlers("createFail",r,c)}throw c}));this.pendingCreates.push(i);callbackOrPromise(this.creator).then((c=>{if(i.isRejected){this.destroyer(c);return null}remove(this.pendingCreates,i);this.free.push(new h.Resource(c));i.resolve(c);this._executeEventHandlers("createSuccess",r,c);return null})).catch((c=>{if(i.isRejected){return null}if(remove(this.pendingCreates,i)){this._executeEventHandlers("createFail",r,c)}i.reject(c);return null}));return i}_destroy(r){const i=this.eventId++;this._executeEventHandlers("destroyRequest",i,r);const c=new u.PendingOperation(this.destroyTimeoutMillis);const h=Promise.resolve().then((()=>this.destroyer(r)));h.then((()=>{c.resolve(r)})).catch((r=>{c.reject(r)}));this.pendingDestroys.push(c);return c.promise.then((c=>{this._executeEventHandlers("destroySuccess",i,r);return c})).catch((c=>this._logDestroyerError(i,r,c))).then((r=>{const i=this.pendingDestroys.findIndex((r=>r===c));this.pendingDestroys.splice(i,1);return r}))}_logDestroyerError(r,i,c){this._executeEventHandlers("destroyFail",r,i,c);this.log("Tarn: resource destroyer threw an exception "+c.stack,"warn")}_startReaping(){if(!this.interval){this._executeEventHandlers("startReaping");this.interval=setInterval((()=>this.check()),this.reapIntervalMillis)}}_stopReaping(){if(this.interval!==null){this._executeEventHandlers("stopReaping");g.clearInterval(this.interval)}this.interval=null}_executeEventHandlers(r,...i){const c=this.emitter.listeners(r);c.forEach((c=>{try{c(...i)}catch(i){this.log(`Tarn: event handler "${r}" threw an exception ${i.stack}`,"warn")}}))}}i.Pool=Pool;function remove(r,i){const c=r.indexOf(i);if(c===-1){return false}else{r.splice(c,1);return true}}function callbackOrPromise(r){return new Promise(((i,c)=>{const callback=(r,u)=>{if(r){c(r)}else{i(u)}};d.tryPromise((()=>r(callback))).then((r=>{if(r){i(r)}})).catch((r=>{c(r)}))}))}},19622:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});class PromiseInspection{constructor(r){this._value=r.value;this._error=r.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}i.PromiseInspection=PromiseInspection},94525:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(24737);class Resource{constructor(r){this.resource=r;this.resource=r;this.timestamp=u.now();this.deferred=u.defer()}get promise(){return this.deferred.promise}resolve(){this.deferred.resolve(undefined);return new Resource(this.resource)}}i.Resource=Resource},27306:(r,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});class TimeoutError extends Error{}i.TimeoutError=TimeoutError},56821:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(32377);i.Pool=u.Pool;const h=c(27306);i.TimeoutError=h.TimeoutError;r.exports={Pool:u.Pool,TimeoutError:h.TimeoutError}},24737:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});const u=c(19622);function defer(){let r=null;let i=null;const c=new Promise(((c,u)=>{r=c;i=u}));return{promise:c,resolve:r,reject:i}}i.defer=defer;function now(){return Date.now()}i.now=now;function duration(r,i){return Math.abs(i-r)}i.duration=duration;function checkOptionalTime(r){if(typeof r==="undefined"){return true}return checkRequiredTime(r)}i.checkOptionalTime=checkOptionalTime;function checkRequiredTime(r){return typeof r==="number"&&r===Math.round(r)&&r>0}i.checkRequiredTime=checkRequiredTime;function delay(r){return new Promise((i=>setTimeout(i,r)))}i.delay=delay;function reflect(r){return r.then((r=>new u.PromiseInspection({value:r}))).catch((r=>new u.PromiseInspection({error:r})))}i.reflect=reflect;function tryPromise(r){try{const i=r();return Promise.resolve(i)}catch(r){return Promise.reject(r)}}i.tryPromise=tryPromise},14856:function(r,i){
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
(function(r,c){true?c(i):0})(this,(function(r){"use strict";function merge(){for(var r=arguments.length,i=Array(r),c=0;c<r;c++){i[c]=arguments[c]}if(i.length>1){i[0]=i[0].slice(0,-1);var u=i.length-1;for(var h=1;h<u;++h){i[h]=i[h].slice(1,-1)}i[u]=i[u].slice(1);return i.join("")}else{return i[0]}}function subexp(r){return"(?:"+r+")"}function typeOf(r){return r===undefined?"undefined":r===null?"null":Object.prototype.toString.call(r).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(r){return r.toUpperCase()}function toArray(r){return r!==undefined&&r!==null?r instanceof Array?r:typeof r.length!=="number"||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[]}function assign(r,i){var c=r;if(i){for(var u in i){c[u]=i[u]}}return c}function buildExps(r){var i="[A-Za-z]",c="[\\x0D]",u="[0-9]",h="[\\x22]",d=merge(u,"[A-Fa-f]"),p="[\\x0A]",g="[\\x20]",y=subexp(subexp("%[EFef]"+d+"%"+d+d+"%"+d+d)+"|"+subexp("%[89A-Fa-f]"+d+"%"+d+d)+"|"+subexp("%"+d+d)),b="[\\:\\/\\?\\#\\[\\]\\@]",v="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",w=merge(b,v),C=r?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",E=r?"[\\uE000-\\uF8FF]":"[]",x=merge(i,u,"[\\-\\.\\_\\~]",C),S=subexp(i+merge(i,u,"[\\+\\-\\.]")+"*"),k=subexp(subexp(y+"|"+merge(x,v,"[\\:]"))+"*"),T=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+u)+"|"+subexp("1"+u+u)+"|"+subexp("[1-9]"+u)+"|"+u),N=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+u)+"|"+subexp("1"+u+u)+"|"+subexp("0?[1-9]"+u)+"|0?0?"+u),O=subexp(N+"\\."+N+"\\."+N+"\\."+N),$=subexp(d+"{1,4}"),A=subexp(subexp($+"\\:"+$)+"|"+O),P=subexp(subexp($+"\\:")+"{6}"+A),I=subexp("\\:\\:"+subexp($+"\\:")+"{5}"+A),R=subexp(subexp($)+"?\\:\\:"+subexp($+"\\:")+"{4}"+A),j=subexp(subexp(subexp($+"\\:")+"{0,1}"+$)+"?\\:\\:"+subexp($+"\\:")+"{3}"+A),L=subexp(subexp(subexp($+"\\:")+"{0,2}"+$)+"?\\:\\:"+subexp($+"\\:")+"{2}"+A),M=subexp(subexp(subexp($+"\\:")+"{0,3}"+$)+"?\\:\\:"+$+"\\:"+A),D=subexp(subexp(subexp($+"\\:")+"{0,4}"+$)+"?\\:\\:"+A),q=subexp(subexp(subexp($+"\\:")+"{0,5}"+$)+"?\\:\\:"+$),F=subexp(subexp(subexp($+"\\:")+"{0,6}"+$)+"?\\:\\:"),B=subexp([P,I,R,j,L,M,D,q,F].join("|")),U=subexp(subexp(x+"|"+y)+"+"),V=subexp(B+"\\%25"+U),Q=subexp(B+subexp("\\%25|\\%(?!"+d+"{2})")+U),H=subexp("[vV]"+d+"+\\."+merge(x,v,"[\\:]")+"+"),G=subexp("\\["+subexp(Q+"|"+B+"|"+H)+"\\]"),K=subexp(subexp(y+"|"+merge(x,v))+"*"),W=subexp(G+"|"+O+"(?!"+K+")"+"|"+K),z=subexp(u+"*"),J=subexp(subexp(k+"@")+"?"+W+subexp("\\:"+z)+"?"),Y=subexp(y+"|"+merge(x,v,"[\\:\\@]")),X=subexp(Y+"*"),Z=subexp(Y+"+"),ee=subexp(subexp(y+"|"+merge(x,v,"[\\@]"))+"+"),te=subexp(subexp("\\/"+X)+"*"),re=subexp("\\/"+subexp(Z+te)+"?"),ne=subexp(ee+te),se=subexp(Z+te),ie="(?!"+Y+")",oe=subexp(te+"|"+re+"|"+ne+"|"+se+"|"+ie),ae=subexp(subexp(Y+"|"+merge("[\\/\\?]",E))+"*"),ce=subexp(subexp(Y+"|[\\/\\?]")+"*"),le=subexp(subexp("\\/\\/"+J+te)+"|"+re+"|"+se+"|"+ie),ue=subexp(S+"\\:"+le+subexp("\\?"+ae)+"?"+subexp("\\#"+ce)+"?"),he=subexp(subexp("\\/\\/"+J+te)+"|"+re+"|"+ne+"|"+ie),fe=subexp(he+subexp("\\?"+ae)+"?"+subexp("\\#"+ce)+"?"),de=subexp(ue+"|"+fe),pe=subexp(S+"\\:"+le+subexp("\\?"+ae)+"?"),me="^("+S+")\\:"+subexp(subexp("\\/\\/("+subexp("("+k+")@")+"?("+W+")"+subexp("\\:("+z+")")+"?)")+"?("+te+"|"+re+"|"+se+"|"+ie+")")+subexp("\\?("+ae+")")+"?"+subexp("\\#("+ce+")")+"?$",ge="^(){0}"+subexp(subexp("\\/\\/("+subexp("("+k+")@")+"?("+W+")"+subexp("\\:("+z+")")+"?)")+"?("+te+"|"+re+"|"+ne+"|"+ie+")")+subexp("\\?("+ae+")")+"?"+subexp("\\#("+ce+")")+"?$",ye="^("+S+")\\:"+subexp(subexp("\\/\\/("+subexp("("+k+")@")+"?("+W+")"+subexp("\\:("+z+")")+"?)")+"?("+te+"|"+re+"|"+se+"|"+ie+")")+subexp("\\?("+ae+")")+"?$",be="^"+subexp("\\#("+ce+")")+"?$",ve="^"+subexp("("+k+")@")+"?("+W+")"+subexp("\\:("+z+")")+"?$";return{NOT_SCHEME:new RegExp(merge("[^]",i,u,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",x,v),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",x,v),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",x,v),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",x,v),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",x,v,"[\\:\\@\\/\\?]",E),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",x,v,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",x,v),"g"),UNRESERVED:new RegExp(x,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",x,w),"g"),PCT_ENCODED:new RegExp(y,"g"),IPV4ADDRESS:new RegExp("^("+O+")$"),IPV6ADDRESS:new RegExp("^\\[?("+B+")"+subexp(subexp("\\%25|\\%(?!"+d+"{2})")+"("+U+")")+"?\\]?$")}}var i=buildExps(false);var c=buildExps(true);var u=function(){function sliceIterator(r,i){var c=[];var u=true;var h=false;var d=undefined;try{for(var p=r[Symbol.iterator](),g;!(u=(g=p.next()).done);u=true){c.push(g.value);if(i&&c.length===i)break}}catch(r){h=true;d=r}finally{try{if(!u&&p["return"])p["return"]()}finally{if(h)throw d}}return c}return function(r,i){if(Array.isArray(r)){return r}else if(Symbol.iterator in Object(r)){return sliceIterator(r,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var toConsumableArray=function(r){if(Array.isArray(r)){for(var i=0,c=Array(r.length);i<r.length;i++)c[i]=r[i];return c}else{return Array.from(r)}};var h=2147483647;var d=36;var p=1;var g=26;var y=38;var b=700;var v=72;var w=128;var C="-";var E=/^xn--/;var x=/[^\0-\x7E]/;var S=/[\x2E\u3002\uFF0E\uFF61]/g;var k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"};var T=d-p;var N=Math.floor;var O=String.fromCharCode;function error$1(r){throw new RangeError(k[r])}function map(r,i){var c=[];var u=r.length;while(u--){c[u]=i(r[u])}return c}function mapDomain(r,i){var c=r.split("@");var u="";if(c.length>1){u=c[0]+"@";r=c[1]}r=r.replace(S,".");var h=r.split(".");var d=map(h,i).join(".");return u+d}function ucs2decode(r){var i=[];var c=0;var u=r.length;while(c<u){var h=r.charCodeAt(c++);if(h>=55296&&h<=56319&&c<u){var d=r.charCodeAt(c++);if((d&64512)==56320){i.push(((h&1023)<<10)+(d&1023)+65536)}else{i.push(h);c--}}else{i.push(h)}}return i}var $=function ucs2encode(r){return String.fromCodePoint.apply(String,toConsumableArray(r))};var A=function basicToDigit(r){if(r-48<10){return r-22}if(r-65<26){return r-65}if(r-97<26){return r-97}return d};var P=function digitToBasic(r,i){return r+22+75*(r<26)-((i!=0)<<5)};var I=function adapt(r,i,c){var u=0;r=c?N(r/b):r>>1;r+=N(r/i);for(;r>T*g>>1;u+=d){r=N(r/T)}return N(u+(T+1)*r/(r+y))};var R=function decode(r){var i=[];var c=r.length;var u=0;var y=w;var b=v;var E=r.lastIndexOf(C);if(E<0){E=0}for(var x=0;x<E;++x){if(r.charCodeAt(x)>=128){error$1("not-basic")}i.push(r.charCodeAt(x))}for(var S=E>0?E+1:0;S<c;){var k=u;for(var T=1,O=d;;O+=d){if(S>=c){error$1("invalid-input")}var $=A(r.charCodeAt(S++));if($>=d||$>N((h-u)/T)){error$1("overflow")}u+=$*T;var P=O<=b?p:O>=b+g?g:O-b;if($<P){break}var R=d-P;if(T>N(h/R)){error$1("overflow")}T*=R}var j=i.length+1;b=I(u-k,j,k==0);if(N(u/j)>h-y){error$1("overflow")}y+=N(u/j);u%=j;i.splice(u++,0,y)}return String.fromCodePoint.apply(String,i)};var j=function encode(r){var i=[];r=ucs2decode(r);var c=r.length;var u=w;var y=0;var b=v;var E=true;var x=false;var S=undefined;try{for(var k=r[Symbol.iterator](),T;!(E=(T=k.next()).done);E=true){var $=T.value;if($<128){i.push(O($))}}}catch(r){x=true;S=r}finally{try{if(!E&&k.return){k.return()}}finally{if(x){throw S}}}var A=i.length;var R=A;if(A){i.push(C)}while(R<c){var j=h;var L=true;var M=false;var D=undefined;try{for(var q=r[Symbol.iterator](),F;!(L=(F=q.next()).done);L=true){var B=F.value;if(B>=u&&B<j){j=B}}}catch(r){M=true;D=r}finally{try{if(!L&&q.return){q.return()}}finally{if(M){throw D}}}var U=R+1;if(j-u>N((h-y)/U)){error$1("overflow")}y+=(j-u)*U;u=j;var V=true;var Q=false;var H=undefined;try{for(var G=r[Symbol.iterator](),K;!(V=(K=G.next()).done);V=true){var W=K.value;if(W<u&&++y>h){error$1("overflow")}if(W==u){var z=y;for(var J=d;;J+=d){var Y=J<=b?p:J>=b+g?g:J-b;if(z<Y){break}var X=z-Y;var Z=d-Y;i.push(O(P(Y+X%Z,0)));z=N(X/Z)}i.push(O(P(z,0)));b=I(y,U,R==A);y=0;++R}}}catch(r){Q=true;H=r}finally{try{if(!V&&G.return){G.return()}}finally{if(Q){throw H}}}++y;++u}return i.join("")};var L=function toUnicode(r){return mapDomain(r,(function(r){return E.test(r)?R(r.slice(4).toLowerCase()):r}))};var M=function toASCII(r){return mapDomain(r,(function(r){return x.test(r)?"xn--"+j(r):r}))};var D={version:"2.1.0",ucs2:{decode:ucs2decode,encode:$},decode:R,encode:j,toASCII:M,toUnicode:L};var q={};function pctEncChar(r){var i=r.charCodeAt(0);var c=void 0;if(i<16)c="%0"+i.toString(16).toUpperCase();else if(i<128)c="%"+i.toString(16).toUpperCase();else if(i<2048)c="%"+(i>>6|192).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase();else c="%"+(i>>12|224).toString(16).toUpperCase()+"%"+(i>>6&63|128).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase();return c}function pctDecChars(r){var i="";var c=0;var u=r.length;while(c<u){var h=parseInt(r.substr(c+1,2),16);if(h<128){i+=String.fromCharCode(h);c+=3}else if(h>=194&&h<224){if(u-c>=6){var d=parseInt(r.substr(c+4,2),16);i+=String.fromCharCode((h&31)<<6|d&63)}else{i+=r.substr(c,6)}c+=6}else if(h>=224){if(u-c>=9){var p=parseInt(r.substr(c+4,2),16);var g=parseInt(r.substr(c+7,2),16);i+=String.fromCharCode((h&15)<<12|(p&63)<<6|g&63)}else{i+=r.substr(c,9)}c+=9}else{i+=r.substr(c,3);c+=3}}return i}function _normalizeComponentEncoding(r,i){function decodeUnreserved(r){var c=pctDecChars(r);return!c.match(i.UNRESERVED)?r:c}if(r.scheme)r.scheme=String(r.scheme).replace(i.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(i.NOT_SCHEME,"");if(r.userinfo!==undefined)r.userinfo=String(r.userinfo).replace(i.PCT_ENCODED,decodeUnreserved).replace(i.NOT_USERINFO,pctEncChar).replace(i.PCT_ENCODED,toUpperCase);if(r.host!==undefined)r.host=String(r.host).replace(i.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(i.NOT_HOST,pctEncChar).replace(i.PCT_ENCODED,toUpperCase);if(r.path!==undefined)r.path=String(r.path).replace(i.PCT_ENCODED,decodeUnreserved).replace(r.scheme?i.NOT_PATH:i.NOT_PATH_NOSCHEME,pctEncChar).replace(i.PCT_ENCODED,toUpperCase);if(r.query!==undefined)r.query=String(r.query).replace(i.PCT_ENCODED,decodeUnreserved).replace(i.NOT_QUERY,pctEncChar).replace(i.PCT_ENCODED,toUpperCase);if(r.fragment!==undefined)r.fragment=String(r.fragment).replace(i.PCT_ENCODED,decodeUnreserved).replace(i.NOT_FRAGMENT,pctEncChar).replace(i.PCT_ENCODED,toUpperCase);return r}function _stripLeadingZeros(r){return r.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(r,i){var c=r.match(i.IPV4ADDRESS)||[];var h=u(c,2),d=h[1];if(d){return d.split(".").map(_stripLeadingZeros).join(".")}else{return r}}function _normalizeIPv6(r,i){var c=r.match(i.IPV6ADDRESS)||[];var h=u(c,3),d=h[1],p=h[2];if(d){var g=d.toLowerCase().split("::").reverse(),y=u(g,2),b=y[0],v=y[1];var w=v?v.split(":").map(_stripLeadingZeros):[];var C=b.split(":").map(_stripLeadingZeros);var E=i.IPV4ADDRESS.test(C[C.length-1]);var x=E?7:8;var S=C.length-x;var k=Array(x);for(var T=0;T<x;++T){k[T]=w[T]||C[S+T]||""}if(E){k[x-1]=_normalizeIPv4(k[x-1],i)}var N=k.reduce((function(r,i,c){if(!i||i==="0"){var u=r[r.length-1];if(u&&u.index+u.length===c){u.length++}else{r.push({index:c,length:1})}}return r}),[]);var O=N.sort((function(r,i){return i.length-r.length}))[0];var $=void 0;if(O&&O.length>1){var A=k.slice(0,O.index);var P=k.slice(O.index+O.length);$=A.join(":")+"::"+P.join(":")}else{$=k.join(":")}if(p){$+="%"+p}return $}else{return r}}var F=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;var B="".match(/(){0}/)[1]===undefined;function parse(r){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var h={};var d=u.iri!==false?c:i;if(u.reference==="suffix")r=(u.scheme?u.scheme+":":"")+"//"+r;var p=r.match(F);if(p){if(B){h.scheme=p[1];h.userinfo=p[3];h.host=p[4];h.port=parseInt(p[5],10);h.path=p[6]||"";h.query=p[7];h.fragment=p[8];if(isNaN(h.port)){h.port=p[5]}}else{h.scheme=p[1]||undefined;h.userinfo=r.indexOf("@")!==-1?p[3]:undefined;h.host=r.indexOf("//")!==-1?p[4]:undefined;h.port=parseInt(p[5],10);h.path=p[6]||"";h.query=r.indexOf("?")!==-1?p[7]:undefined;h.fragment=r.indexOf("#")!==-1?p[8]:undefined;if(isNaN(h.port)){h.port=r.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?p[4]:undefined}}if(h.host){h.host=_normalizeIPv6(_normalizeIPv4(h.host,d),d)}if(h.scheme===undefined&&h.userinfo===undefined&&h.host===undefined&&h.port===undefined&&!h.path&&h.query===undefined){h.reference="same-document"}else if(h.scheme===undefined){h.reference="relative"}else if(h.fragment===undefined){h.reference="absolute"}else{h.reference="uri"}if(u.reference&&u.reference!=="suffix"&&u.reference!==h.reference){h.error=h.error||"URI is not a "+u.reference+" reference."}var g=q[(u.scheme||h.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!g||!g.unicodeSupport)){if(h.host&&(u.domainHost||g&&g.domainHost)){try{h.host=D.toASCII(h.host.replace(d.PCT_ENCODED,pctDecChars).toLowerCase())}catch(r){h.error=h.error||"Host's domain name can not be converted to ASCII via punycode: "+r}}_normalizeComponentEncoding(h,i)}else{_normalizeComponentEncoding(h,d)}if(g&&g.parse){g.parse(h,u)}}else{h.error=h.error||"URI can not be parsed."}return h}function _recomposeAuthority(r,u){var h=u.iri!==false?c:i;var d=[];if(r.userinfo!==undefined){d.push(r.userinfo);d.push("@")}if(r.host!==undefined){d.push(_normalizeIPv6(_normalizeIPv4(String(r.host),h),h).replace(h.IPV6ADDRESS,(function(r,i,c){return"["+i+(c?"%25"+c:"")+"]"})))}if(typeof r.port==="number"||typeof r.port==="string"){d.push(":");d.push(String(r.port))}return d.length?d.join(""):undefined}var U=/^\.\.?\//;var V=/^\/\.(\/|$)/;var Q=/^\/\.\.(\/|$)/;var H=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(r){var i=[];while(r.length){if(r.match(U)){r=r.replace(U,"")}else if(r.match(V)){r=r.replace(V,"/")}else if(r.match(Q)){r=r.replace(Q,"/");i.pop()}else if(r==="."||r===".."){r=""}else{var c=r.match(H);if(c){var u=c[0];r=r.slice(u.length);i.push(u)}else{throw new Error("Unexpected dot segment condition")}}}return i.join("")}function serialize(r){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var h=u.iri?c:i;var d=[];var p=q[(u.scheme||r.scheme||"").toLowerCase()];if(p&&p.serialize)p.serialize(r,u);if(r.host){if(h.IPV6ADDRESS.test(r.host)){}else if(u.domainHost||p&&p.domainHost){try{r.host=!u.iri?D.toASCII(r.host.replace(h.PCT_ENCODED,pctDecChars).toLowerCase()):D.toUnicode(r.host)}catch(i){r.error=r.error||"Host's domain name can not be converted to "+(!u.iri?"ASCII":"Unicode")+" via punycode: "+i}}}_normalizeComponentEncoding(r,h);if(u.reference!=="suffix"&&r.scheme){d.push(r.scheme);d.push(":")}var g=_recomposeAuthority(r,u);if(g!==undefined){if(u.reference!=="suffix"){d.push("//")}d.push(g);if(r.path&&r.path.charAt(0)!=="/"){d.push("/")}}if(r.path!==undefined){var y=r.path;if(!u.absolutePath&&(!p||!p.absolutePath)){y=removeDotSegments(y)}if(g===undefined){y=y.replace(/^\/\//,"/%2F")}d.push(y)}if(r.query!==undefined){d.push("?");d.push(r.query)}if(r.fragment!==undefined){d.push("#");d.push(r.fragment)}return d.join("")}function resolveComponents(r,i){var c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var u=arguments[3];var h={};if(!u){r=parse(serialize(r,c),c);i=parse(serialize(i,c),c)}c=c||{};if(!c.tolerant&&i.scheme){h.scheme=i.scheme;h.userinfo=i.userinfo;h.host=i.host;h.port=i.port;h.path=removeDotSegments(i.path||"");h.query=i.query}else{if(i.userinfo!==undefined||i.host!==undefined||i.port!==undefined){h.userinfo=i.userinfo;h.host=i.host;h.port=i.port;h.path=removeDotSegments(i.path||"");h.query=i.query}else{if(!i.path){h.path=r.path;if(i.query!==undefined){h.query=i.query}else{h.query=r.query}}else{if(i.path.charAt(0)==="/"){h.path=removeDotSegments(i.path)}else{if((r.userinfo!==undefined||r.host!==undefined||r.port!==undefined)&&!r.path){h.path="/"+i.path}else if(!r.path){h.path=i.path}else{h.path=r.path.slice(0,r.path.lastIndexOf("/")+1)+i.path}h.path=removeDotSegments(h.path)}h.query=i.query}h.userinfo=r.userinfo;h.host=r.host;h.port=r.port}h.scheme=r.scheme}h.fragment=i.fragment;return h}function resolve(r,i,c){var u=assign({scheme:"null"},c);return serialize(resolveComponents(parse(r,u),parse(i,u),u,true),u)}function normalize(r,i){if(typeof r==="string"){r=serialize(parse(r,i),i)}else if(typeOf(r)==="object"){r=parse(serialize(r,i),i)}return r}function equal(r,i,c){if(typeof r==="string"){r=serialize(parse(r,c),c)}else if(typeOf(r)==="object"){r=serialize(r,c)}if(typeof i==="string"){i=serialize(parse(i,c),c)}else if(typeOf(i)==="object"){i=serialize(i,c)}return r===i}function escapeComponent(r,u){return r&&r.toString().replace(!u||!u.iri?i.ESCAPE:c.ESCAPE,pctEncChar)}function unescapeComponent(r,u){return r&&r.toString().replace(!u||!u.iri?i.PCT_ENCODED:c.PCT_ENCODED,pctDecChars)}var G={scheme:"http",domainHost:true,parse:function parse(r,i){if(!r.host){r.error=r.error||"HTTP URIs must have a host."}return r},serialize:function serialize(r,i){var c=String(r.scheme).toLowerCase()==="https";if(r.port===(c?443:80)||r.port===""){r.port=undefined}if(!r.path){r.path="/"}return r}};var K={scheme:"https",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize};function isSecure(r){return typeof r.secure==="boolean"?r.secure:String(r.scheme).toLowerCase()==="wss"}var W={scheme:"ws",domainHost:true,parse:function parse(r,i){var c=r;c.secure=isSecure(c);c.resourceName=(c.path||"/")+(c.query?"?"+c.query:"");c.path=undefined;c.query=undefined;return c},serialize:function serialize(r,i){if(r.port===(isSecure(r)?443:80)||r.port===""){r.port=undefined}if(typeof r.secure==="boolean"){r.scheme=r.secure?"wss":"ws";r.secure=undefined}if(r.resourceName){var c=r.resourceName.split("?"),h=u(c,2),d=h[0],p=h[1];r.path=d&&d!=="/"?d:undefined;r.query=p;r.resourceName=undefined}r.fragment=undefined;return r}};var z={scheme:"wss",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize};var J={};var Y=true;var X="[A-Za-z0-9\\-\\.\\_\\~"+(Y?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]";var Z="[0-9A-Fa-f]";var ee=subexp(subexp("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+subexp("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+subexp("%"+Z+Z));var te="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]";var re="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]";var ne=merge(re,'[\\"\\\\]');var se="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]";var ie=new RegExp(X,"g");var oe=new RegExp(ee,"g");var ae=new RegExp(merge("[^]",te,"[\\.]",'[\\"]',ne),"g");var ce=new RegExp(merge("[^]",X,se),"g");var le=ce;function decodeUnreserved(r){var i=pctDecChars(r);return!i.match(ie)?r:i}var ue={scheme:"mailto",parse:function parse$$1(r,i){var c=r;var u=c.to=c.path?c.path.split(","):[];c.path=undefined;if(c.query){var h=false;var d={};var p=c.query.split("&");for(var g=0,y=p.length;g<y;++g){var b=p[g].split("=");switch(b[0]){case"to":var v=b[1].split(",");for(var w=0,C=v.length;w<C;++w){u.push(v[w])}break;case"subject":c.subject=unescapeComponent(b[1],i);break;case"body":c.body=unescapeComponent(b[1],i);break;default:h=true;d[unescapeComponent(b[0],i)]=unescapeComponent(b[1],i);break}}if(h)c.headers=d}c.query=undefined;for(var E=0,x=u.length;E<x;++E){var S=u[E].split("@");S[0]=unescapeComponent(S[0]);if(!i.unicodeSupport){try{S[1]=D.toASCII(unescapeComponent(S[1],i).toLowerCase())}catch(r){c.error=c.error||"Email address's domain name can not be converted to ASCII via punycode: "+r}}else{S[1]=unescapeComponent(S[1],i).toLowerCase()}u[E]=S.join("@")}return c},serialize:function serialize$$1(r,i){var c=r;var u=toArray(r.to);if(u){for(var h=0,d=u.length;h<d;++h){var p=String(u[h]);var g=p.lastIndexOf("@");var y=p.slice(0,g).replace(oe,decodeUnreserved).replace(oe,toUpperCase).replace(ae,pctEncChar);var b=p.slice(g+1);try{b=!i.iri?D.toASCII(unescapeComponent(b,i).toLowerCase()):D.toUnicode(b)}catch(r){c.error=c.error||"Email address's domain name can not be converted to "+(!i.iri?"ASCII":"Unicode")+" via punycode: "+r}u[h]=y+"@"+b}c.path=u.join(",")}var v=r.headers=r.headers||{};if(r.subject)v["subject"]=r.subject;if(r.body)v["body"]=r.body;var w=[];for(var C in v){if(v[C]!==J[C]){w.push(C.replace(oe,decodeUnreserved).replace(oe,toUpperCase).replace(ce,pctEncChar)+"="+v[C].replace(oe,decodeUnreserved).replace(oe,toUpperCase).replace(le,pctEncChar))}}if(w.length){c.query=w.join("&")}return c}};var he=/^([^\:]+)\:(.*)/;var fe={scheme:"urn",parse:function parse$$1(r,i){var c=r.path&&r.path.match(he);var u=r;if(c){var h=i.scheme||u.scheme||"urn";var d=c[1].toLowerCase();var p=c[2];var g=h+":"+(i.nid||d);var y=q[g];u.nid=d;u.nss=p;u.path=undefined;if(y){u=y.parse(u,i)}}else{u.error=u.error||"URN can not be parsed."}return u},serialize:function serialize$$1(r,i){var c=i.scheme||r.scheme||"urn";var u=r.nid;var h=c+":"+(i.nid||u);var d=q[h];if(d){r=d.serialize(r,i)}var p=r;var g=r.nss;p.path=(u||i.nid)+":"+g;return p}};var de=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;var pe={scheme:"urn:uuid",parse:function parse(r,i){var c=r;c.uuid=c.nss;c.nss=undefined;if(!i.tolerant&&(!c.uuid||!c.uuid.match(de))){c.error=c.error||"UUID is not valid."}return c},serialize:function serialize(r,i){var c=r;c.nss=(r.uuid||"").toLowerCase();return c}};q[G.scheme]=G;q[K.scheme]=K;q[W.scheme]=W;q[z.scheme]=z;q[ue.scheme]=ue;q[fe.scheme]=fe;q[pe.scheme]=pe;r.SCHEMES=q;r.pctEncChar=pctEncChar;r.pctDecChars=pctDecChars;r.parse=parse;r.removeDotSegments=removeDotSegments;r.serialize=serialize;r.resolveComponents=resolveComponents;r.resolve=resolve;r.normalize=normalize;r.equal=equal;r.escapeComponent=escapeComponent;r.unescapeComponent=unescapeComponent;Object.defineProperty(r,"__esModule",{value:true})}))},83270:r=>{r.exports=wrappy;function wrappy(r,i){if(r&&i)return wrappy(r)(i);if(typeof r!=="function")throw new TypeError("need wrapper function");Object.keys(r).forEach((function(i){wrapper[i]=r[i]}));return wrapper;function wrapper(){var i=new Array(arguments.length);for(var c=0;c<i.length;c++){i[c]=arguments[c]}var u=r.apply(this,i);var h=i[i.length-1];if(typeof u==="function"&&u!==h){Object.keys(h).forEach((function(r){u[r]=h[r]}))}return u}}},24941:(r,i,c)=>{"use strict";c.r(i);var u=c(10345);const{program:h,createCommand:d,createArgument:p,createOption:g,CommanderError:y,InvalidArgumentError:b,InvalidOptionArgumentError:v,Command:w,Argument:C,Option:E,Help:x}=u;var S=c(16314);var k=c.n(S);const T=require("node:fs");var N=c.n(T);const O=require("node:path");var $=c.n(O);var A=c(90102);var P=c.n(A);var I=c(27429);var R=c(18369);var j=c.n(R);var L=undefined&&undefined.__awaiter||function(r,i,c,u){function adopt(r){return r instanceof c?r:new c((function(i){i(r)}))}return new(c||(c=Promise))((function(c,h){function fulfilled(r){try{step(u.next(r))}catch(r){h(r)}}function rejected(r){try{step(u["throw"](r))}catch(r){h(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())}))};function initDBInstance(){const r=process.env.DB_NAME||"data.sqlite.db";const i={client:"better-sqlite3",connection:{filename:r},useNullAsDefault:true};return j()(i)}function initDB(r){return L(this,void 0,void 0,(function*(){if(!(yield r.schema.hasTable("projects"))){yield r.schema.createTable("projects",(i=>{i.increments("id");i.string("repoPath");i.string("branch");i.string("dirName");i.string("subWorkDir");i.string("appName");i.string("subdomainStatic");i.string("buildPath");i.string("stage");i.string("runMode");i.timestamp("created_at").defaultTo(r.fn.now());i.timestamp("updated_at").defaultTo(r.fn.now())}))}}))}var M=c(96775);var D=c(15087);var q=c(32081);var F=c(38625);var B=Object.defineProperty;var U=Object.defineProperties;var V=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertyNames;var G=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty;var W=Object.prototype.propertyIsEnumerable;var __defNormalProp=(r,i,c)=>i in r?B(r,i,{enumerable:true,configurable:true,writable:true,value:c}):r[i]=c;var __spreadValues=(r,i)=>{for(var c in i||(i={}))if(K.call(i,c))__defNormalProp(r,c,i[c]);if(G)for(var c of G(i)){if(W.call(i,c))__defNormalProp(r,c,i[c])}return r};var __spreadProps=(r,i)=>U(r,Q(i));var __markAsModule=r=>B(r,"__esModule",{value:true});var __esm=(r,i)=>function __init(){return r&&(i=(0,r[H(r)[0]])(r=0)),i};var __commonJS=(r,i)=>function __require(){return i||(0,r[H(r)[0]])((i={exports:{}}).exports,i),i.exports};var __export=(r,i)=>{for(var c in i)B(r,c,{get:i[c],enumerable:true})};var __reExport=(r,i,c,u)=>{if(i&&typeof i==="object"||typeof i==="function"){for(let h of H(i))if(!K.call(r,h)&&(c||h!=="default"))B(r,h,{get:()=>i[h],enumerable:!(u=V(i,h))||u.enumerable})}return r};var z=(r=>(i,c)=>r&&r.get(i)||(c=__reExport(__markAsModule({}),i,1),r&&r.set(i,c),c))(typeof WeakMap!=="undefined"?new WeakMap:0);var __async=(r,i,c)=>new Promise(((u,h)=>{var fulfilled=r=>{try{step(c.next(r))}catch(r){h(r)}};var rejected=r=>{try{step(c.throw(r))}catch(r){h(r)}};var step=r=>r.done?u(r.value):Promise.resolve(r.value).then(fulfilled,rejected);step((c=c.apply(r,i)).next())}));var J;var Y=__esm({"src/lib/errors/git-error.ts"(){J=class extends Error{constructor(r,i){super(i);this.task=r;Object.setPrototypeOf(this,new.target.prototype)}}}});var X;var Z=__esm({"src/lib/errors/git-response-error.ts"(){Y();X=class extends J{constructor(r,i){super(void 0,i||String(r));this.git=r}}}});var ee;var te=__esm({"src/lib/errors/task-configuration-error.ts"(){Y();ee=class extends J{constructor(r){super(void 0,r)}}}});function asFunction(r){return typeof r==="function"?r:ne}function isUserFunction(r){return typeof r==="function"&&r!==ne}function splitOn(r,i){const c=r.indexOf(i);if(c<=0){return[r,""]}return[r.substr(0,c),r.substr(c+1)]}function first(r,i=0){return isArrayLike(r)&&r.length>i?r[i]:void 0}function last(r,i=0){if(isArrayLike(r)&&r.length>i){return r[r.length-1-i]}}function isArrayLike(r){return!!(r&&typeof r.length==="number")}function toLinesWithContent(r="",i=true,c="\n"){return r.split(c).reduce(((r,c)=>{const u=i?c.trim():c;if(u){r.push(u)}return r}),[])}function forEachLineWithContent(r,i){return toLinesWithContent(r,true).map((r=>i(r)))}function folderExists(r){return(0,M.exists)(r,M.FOLDER)}function append(r,i){if(Array.isArray(r)){if(!r.includes(i)){r.push(i)}}else{r.add(i)}return i}function including(r,i){if(Array.isArray(r)&&!r.includes(i)){r.push(i)}return r}function remove(r,i){if(Array.isArray(r)){const c=r.indexOf(i);if(c>=0){r.splice(c,1)}}else{r.delete(i)}return i}function asArray(r){return Array.isArray(r)?r:[r]}function asStringArray(r){return asArray(r).map(String)}function asNumber(r,i=0){if(r==null){return i}const c=parseInt(r,10);return isNaN(c)?i:c}function prefixedArray(r,i){const c=[];for(let u=0,h=r.length;u<h;u++){c.push(i,r[u])}return c}function bufferToString(r){return(Array.isArray(r)?Buffer.concat(r):r).toString("utf-8")}function pick(r,i){return Object.assign({},...i.map((i=>i in r?{[i]:r[i]}:{})))}function delay(r=0){return new Promise((i=>setTimeout(i,r)))}var re,ne,se;var ie=__esm({"src/lib/utils/util.ts"(){re="\0";ne=()=>{};se=Object.prototype.toString.call.bind(Object.prototype.toString)}});function filterType(r,i,c){if(i(r)){return r}return arguments.length>2?c:void 0}function filterPrimitives(r,i){return/number|string|boolean/.test(typeof r)&&(!i||!i.includes(typeof r))}function filterPlainObject(r){return!!r&&se(r)==="[object Object]"}function filterFunction(r){return typeof r==="function"}var oe,ae,ce,le,ue;var he=__esm({"src/lib/utils/argument-filters.ts"(){ie();oe=r=>Array.isArray(r);ae=r=>typeof r==="string";ce=r=>Array.isArray(r)&&r.every(ae);le=r=>ae(r)||Array.isArray(r)&&r.every(ae);ue=r=>{if(r==null||"number|boolean|function".includes(typeof r)){return false}return Array.isArray(r)||typeof r==="string"||typeof r.length==="number"}}});var fe;var de=__esm({"src/lib/utils/exit-codes.ts"(){fe=(r=>{r[r["SUCCESS"]=0]="SUCCESS";r[r["ERROR"]=1]="ERROR";r[r["NOT_FOUND"]=-2]="NOT_FOUND";r[r["UNCLEAN"]=128]="UNCLEAN";return r})(fe||{})}});var pe;var me=__esm({"src/lib/utils/git-output-streams.ts"(){pe=class{constructor(r,i){this.stdOut=r;this.stdErr=i}asStrings(){return new pe(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}});var ge,ye;var be=__esm({"src/lib/utils/line-parser.ts"(){ge=class{constructor(r,i){this.matches=[];this.parse=(r,i)=>{this.resetMatches();if(!this._regExp.every(((i,c)=>this.addMatch(i,c,r(c))))){return false}return this.useMatches(i,this.prepareMatches())!==false};this._regExp=Array.isArray(r)?r:[r];if(i){this.useMatches=i}}useMatches(r,i){throw new Error(`LineParser:useMatches not implemented`)}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(r,i,c){const u=c&&r.exec(c);if(u){this.pushMatch(i,u)}return!!u}pushMatch(r,i){this.matches.push(...i.slice(1))}};ye=class extends ge{addMatch(r,i,c){return/^remote:\s/.test(String(c))&&super.addMatch(r,i,c)}pushMatch(r,i){if(r>0||i.length>1){super.pushMatch(r,i)}}}}});function createInstanceConfig(...r){const i=process.cwd();const c=Object.assign(__spreadValues({baseDir:i},ve),...r.filter((r=>typeof r==="object"&&r)));c.baseDir=c.baseDir||i;c.trimmed=c.trimmed===true;return c}var ve;var we=__esm({"src/lib/utils/simple-git-options.ts"(){ve={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:false}}});function appendTaskOptions(r,i=[]){if(!filterPlainObject(r)){return i}return Object.keys(r).reduce(((i,c)=>{const u=r[c];if(filterPrimitives(u,["boolean"])){i.push(c+"="+u)}else{i.push(c)}return i}),i)}function getTrailingOptions(r,i=0,c=false){const u=[];for(let c=0,h=i<0?r.length:i;c<h;c++){if("string|number".includes(typeof r[c])){u.push(String(r[c]))}}appendTaskOptions(trailingOptionsArgument(r),u);if(!c){u.push(...trailingArrayArgument(r))}return u}function trailingArrayArgument(r){const i=typeof last(r)==="function";return filterType(last(r,i?1:0),oe,[])}function trailingOptionsArgument(r){const i=filterFunction(last(r));return filterType(last(r,i?1:0),filterPlainObject)}function trailingFunctionArgument(r,i=true){const c=asFunction(last(r));return i||isUserFunction(c)?c:void 0}var _e=__esm({"src/lib/utils/task-options.ts"(){he();ie()}});function callTaskParser(r,i){return r(i.stdOut,i.stdErr)}function parseStringResponse(r,i,c,u=true){asArray(c).forEach((c=>{for(let h=toLinesWithContent(c,u),d=0,p=h.length;d<p;d++){const line=(r=0)=>{if(d+r>=p){return}return h[d+r]};i.some((({parse:i})=>i(line,r)))}}));return r}var Ce=__esm({"src/lib/utils/task-parser.ts"(){ie()}});var Ee={};__export(Ee,{ExitCodes:()=>fe,GitOutputStreams:()=>pe,LineParser:()=>ge,NOOP:()=>ne,NULL:()=>re,RemoteLineParser:()=>ye,append:()=>append,appendTaskOptions:()=>appendTaskOptions,asArray:()=>asArray,asFunction:()=>asFunction,asNumber:()=>asNumber,asStringArray:()=>asStringArray,bufferToString:()=>bufferToString,callTaskParser:()=>callTaskParser,createInstanceConfig:()=>createInstanceConfig,delay:()=>delay,filterArray:()=>oe,filterFunction:()=>filterFunction,filterHasLength:()=>ue,filterPlainObject:()=>filterPlainObject,filterPrimitives:()=>filterPrimitives,filterString:()=>ae,filterStringArray:()=>ce,filterStringOrStringArray:()=>le,filterType:()=>filterType,first:()=>first,folderExists:()=>folderExists,forEachLineWithContent:()=>forEachLineWithContent,getTrailingOptions:()=>getTrailingOptions,including:()=>including,isUserFunction:()=>isUserFunction,last:()=>last,objectToString:()=>se,parseStringResponse:()=>parseStringResponse,pick:()=>pick,prefixedArray:()=>prefixedArray,remove:()=>remove,splitOn:()=>splitOn,toLinesWithContent:()=>toLinesWithContent,trailingFunctionArgument:()=>trailingFunctionArgument,trailingOptionsArgument:()=>trailingOptionsArgument});var xe=__esm({"src/lib/utils/index.ts"(){he();de();me();be();we();_e();Ce();ie()}});var Se={};__export(Se,{CheckRepoActions:()=>ke,checkIsBareRepoTask:()=>checkIsBareRepoTask,checkIsRepoRootTask:()=>checkIsRepoRootTask,checkIsRepoTask:()=>checkIsRepoTask});function checkIsRepoTask(r){switch(r){case"bare":return checkIsBareRepoTask();case"root":return checkIsRepoRootTask()}const i=["rev-parse","--is-inside-work-tree"];return{commands:i,format:"utf-8",onError:Te,parser:Ne}}function checkIsRepoRootTask(){const r=["rev-parse","--git-dir"];return{commands:r,format:"utf-8",onError:Te,parser(r){return/^\.(git)?$/.test(r.trim())}}}function checkIsBareRepoTask(){const r=["rev-parse","--is-bare-repository"];return{commands:r,format:"utf-8",onError:Te,parser:Ne}}function isNotRepoMessage(r){return/(Not a git repository|Kein Git-Repository)/i.test(String(r))}var ke,Te,Ne;var Oe=__esm({"src/lib/tasks/check-is-repo.ts"(){xe();ke=(r=>{r["BARE"]="bare";r["IN_TREE"]="tree";r["IS_REPO_ROOT"]="root";return r})(ke||{});Te=({exitCode:r},i,c,u)=>{if(r===128&&isNotRepoMessage(i)){return c(Buffer.from("false"))}u(i)};Ne=r=>r.trim()==="true"}});function cleanSummaryParser(r,i){const c=new $e(r);const u=r?Pe:Ae;toLinesWithContent(i).forEach((r=>{const i=r.replace(u,"");c.paths.push(i);(Ie.test(i)?c.folders:c.files).push(i)}));return c}var $e,Ae,Pe,Ie;var Re=__esm({"src/lib/responses/CleanSummary.ts"(){xe();$e=class{constructor(r){this.dryRun=r;this.paths=[];this.files=[];this.folders=[]}};Ae=/^[a-z]+\s*/i;Pe=/^[a-z]+\s+[a-z]+\s*/i;Ie=/\/$/}});var je={};__export(je,{EMPTY_COMMANDS:()=>Le,adhocExecTask:()=>adhocExecTask,configurationErrorTask:()=>configurationErrorTask,isBufferTask:()=>isBufferTask,isEmptyTask:()=>isEmptyTask,straightThroughBufferTask:()=>straightThroughBufferTask,straightThroughStringTask:()=>straightThroughStringTask});function adhocExecTask(r){return{commands:Le,format:"empty",parser:r}}function configurationErrorTask(r){return{commands:Le,format:"empty",parser(){throw typeof r==="string"?new ee(r):r}}}function straightThroughStringTask(r,i=false){return{commands:r,format:"utf-8",parser(r){return i?String(r).trim():r}}}function straightThroughBufferTask(r){return{commands:r,format:"buffer",parser(r){return r}}}function isBufferTask(r){return r.format==="buffer"}function isEmptyTask(r){return r.format==="empty"||!r.commands.length}var Le;var Me=__esm({"src/lib/tasks/task.ts"(){te();Le=[]}});var De={};__export(De,{CONFIG_ERROR_INTERACTIVE_MODE:()=>qe,CONFIG_ERROR_MODE_REQUIRED:()=>Fe,CONFIG_ERROR_UNKNOWN_OPTION:()=>Be,CleanOptions:()=>Ue,cleanTask:()=>cleanTask,cleanWithOptionsTask:()=>cleanWithOptionsTask,isCleanOptionsArray:()=>isCleanOptionsArray});function cleanWithOptionsTask(r,i){const{cleanMode:c,options:u,valid:h}=getCleanOptions(r);if(!c){return configurationErrorTask(Fe)}if(!h.options){return configurationErrorTask(Be+JSON.stringify(r))}u.push(...i);if(u.some(isInteractiveMode)){return configurationErrorTask(qe)}return cleanTask(c,u)}function cleanTask(r,i){const c=["clean",`-${r}`,...i];return{commands:c,format:"utf-8",parser(i){return cleanSummaryParser(r==="n",i)}}}function isCleanOptionsArray(r){return Array.isArray(r)&&r.every((r=>Ve.has(r)))}function getCleanOptions(r){let i;let c=[];let u={cleanMode:false,options:true};r.replace(/[^a-z]i/g,"").split("").forEach((r=>{if(isCleanMode(r)){i=r;u.cleanMode=true}else{u.options=u.options&&isKnownOption(c[c.length]=`-${r}`)}}));return{cleanMode:i,options:c,valid:u}}function isCleanMode(r){return r==="f"||r==="n"}function isKnownOption(r){return/^-[a-z]$/i.test(r)&&Ve.has(r.charAt(1))}function isInteractiveMode(r){if(/^-[^\-]/.test(r)){return r.indexOf("i")>0}return r==="--interactive"}var qe,Fe,Be,Ue,Ve;var Qe=__esm({"src/lib/tasks/clean.ts"(){Re();xe();Me();qe="Git clean interactive mode is not supported";Fe='Git clean mode parameter ("n" or "f") is required';Be="Git clean unknown option found in: ";Ue=(r=>{r["DRY_RUN"]="n";r["FORCE"]="f";r["IGNORED_INCLUDED"]="x";r["IGNORED_ONLY"]="X";r["EXCLUDING"]="e";r["QUIET"]="q";r["RECURSIVE"]="d";return r})(Ue||{});Ve=new Set(["i",...asStringArray(Object.values(Ue))])}});function configListParser(r){const i=new He;for(const c of configParser(r)){i.addValue(c.file,String(c.key),c.value)}return i}function configGetParser(r,i){let c=null;const u=[];const h=new Map;for(const d of configParser(r,i)){if(d.key!==i){continue}u.push(c=d.value);if(!h.has(d.file)){h.set(d.file,[])}h.get(d.file).push(c)}return{key:i,paths:Array.from(h.keys()),scopes:h,value:c,values:u}}function configFilePath(r){return r.replace(/^(file):/,"")}function*configParser(r,i=null){const c=r.split("\0");for(let r=0,u=c.length-1;r<u;){const u=configFilePath(c[r++]);let h=c[r++];let d=i;if(h.includes("\n")){const r=splitOn(h,"\n");d=r[0];h=r[1]}yield{file:u,key:d,value:h}}}var He;var Ge=__esm({"src/lib/responses/ConfigList.ts"(){xe();He=class{constructor(){this.files=[];this.values=Object.create(null)}get all(){if(!this._all){this._all=this.files.reduce(((r,i)=>Object.assign(r,this.values[i])),{})}return this._all}addFile(r){if(!(r in this.values)){const i=last(this.files);this.values[r]=i?Object.create(this.values[i]):{};this.files.push(r)}return this.values[r]}addValue(r,i,c){const u=this.addFile(r);if(!u.hasOwnProperty(i)){u[i]=c}else if(Array.isArray(u[i])){u[i].push(c)}else{u[i]=[u[i],c]}this._all=void 0}}}});function asConfigScope(r,i){if(typeof r==="string"&&Ke.hasOwnProperty(r)){return r}return i}function addConfigTask(r,i,c,u){const h=["config",`--${u}`];if(c){h.push("--add")}h.push(r,i);return{commands:h,format:"utf-8",parser(r){return r}}}function getConfigTask(r,i){const c=["config","--null","--show-origin","--get-all",r];if(i){c.splice(1,0,`--${i}`)}return{commands:c,format:"utf-8",parser(i){return configGetParser(i,r)}}}function listConfigTask(r){const i=["config","--list","--show-origin","--null"];if(r){i.push(`--${r}`)}return{commands:i,format:"utf-8",parser(r){return configListParser(r)}}}function config_default(){return{addConfig(r,i,...c){return this._runTask(addConfigTask(r,i,c[0]===true,asConfigScope(c[1],"local")),trailingFunctionArgument(arguments))},getConfig(r,i){return this._runTask(getConfigTask(r,asConfigScope(i,void 0)),trailingFunctionArgument(arguments))},listConfig(...r){return this._runTask(listConfigTask(asConfigScope(r[0],void 0)),trailingFunctionArgument(arguments))}}}var Ke;var We=__esm({"src/lib/tasks/config.ts"(){Ge();xe();Ke=(r=>{r["system"]="system";r["global"]="global";r["local"]="local";r["worktree"]="worktree";return r})(Ke||{})}});function grepQueryBuilder(...r){return(new Xe).param(...r)}function parseGrep(r){const i=new Set;const c={};forEachLineWithContent(r,(r=>{const[u,h,d]=r.split(re);i.add(u);(c[u]=c[u]||[]).push({line:asNumber(h),path:u,preview:d})}));return{paths:i,results:c}}function grep_default(){return{grep(r){const i=trailingFunctionArgument(arguments);const c=getTrailingOptions(arguments);for(const r of ze){if(c.includes(r)){return this._runTask(configurationErrorTask(`git.grep: use of "${r}" is not supported.`),i)}}if(typeof r==="string"){r=grepQueryBuilder().param(r)}const u=["grep","--null","-n","--full-name",...c,...r];return this._runTask({commands:u,format:"utf-8",parser(r){return parseGrep(r)}},i)}}}var ze,Je,Ye,Xe;var Ze=__esm({"src/lib/tasks/grep.ts"(){xe();Me();ze=["-h"];Je=Symbol("grepQuery");Xe=class{constructor(){this[Ye]=[]}*[(Ye=Je,Symbol.iterator)](){for(const r of this[Je]){yield r}}and(...r){r.length&&this[Je].push("--and","(",...prefixedArray(r,"-e"),")");return this}param(...r){this[Je].push(...prefixedArray(r,"-e"));return this}}}});var et={};__export(et,{ResetMode:()=>tt,getResetMode:()=>getResetMode,resetTask:()=>resetTask});function resetTask(r,i){const c=["reset"];if(isValidResetMode(r)){c.push(`--${r}`)}c.push(...i);return straightThroughStringTask(c)}function getResetMode(r){if(isValidResetMode(r)){return r}switch(typeof r){case"string":case"undefined":return"soft"}return}function isValidResetMode(r){return rt.includes(r)}var tt,rt;var nt=__esm({"src/lib/tasks/reset.ts"(){Me();tt=(r=>{r["MIXED"]="mixed";r["SOFT"]="soft";r["HARD"]="hard";r["MERGE"]="merge";r["KEEP"]="keep";return r})(tt||{});rt=Array.from(Object.values(tt))}});function createLog(){return D("simple-git")}function prefixedLogger(r,i,c){if(!i||!String(i).replace(/\s*/,"")){return!c?r:(i,...u)=>{r(i,...u);c(i,...u)}}return(u,...h)=>{r(`%s ${u}`,i,...h);if(c){c(u,...h)}}}function childLoggerName(r,i,{namespace:c}){if(typeof r==="string"){return r}const u=i&&i.namespace||"";if(u.startsWith(c)){return u.substr(c.length+1)}return u||c}function createLogger(r,i,c,u=createLog()){const h=r&&`[${r}]`||"";const d=[];const p=typeof i==="string"?u.extend(i):i;const g=childLoggerName(filterType(i,ae),p,u);return step(c);function sibling(i,c){return append(d,createLogger(r,g.replace(/^[^:]+/,i),c,u))}function step(i){const c=i&&`[${i}]`||"";const d=p&&prefixedLogger(p,c)||ne;const g=prefixedLogger(u,`${h} ${c}`,d);return Object.assign(p?d:g,{label:r,sibling:sibling,info:g,step:step})}}var st=__esm({"src/lib/git-logger.ts"(){xe();D.formatters.L=r=>String(ue(r)?r.length:"-");D.formatters.B=r=>{if(Buffer.isBuffer(r)){return r.toString("utf8")}return se(r)}}});var it,ot;var at=__esm({"src/lib/runners/tasks-pending-queue.ts"(){Y();st();it=class{constructor(r="GitExecutor"){this.logLabel=r;this._queue=new Map}withProgress(r){return this._queue.get(r)}createProgress(r){const i=it.getName(r.commands[0]);const c=createLogger(this.logLabel,i);return{task:r,logger:c,name:i}}push(r){const i=this.createProgress(r);i.logger("Adding task to the queue, commands = %o",r.commands);this._queue.set(r,i);return i}fatal(r){for(const[i,{logger:c}]of Array.from(this._queue.entries())){if(i===r.task){c.info(`Failed %o`,r);c(`Fatal exception, any as-yet un-started tasks run through this executor will not be attempted`)}else{c.info(`A fatal exception occurred in a previous task, the queue has been purged: %o`,r.message)}this.complete(i)}if(this._queue.size!==0){throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}}complete(r){const i=this.withProgress(r);if(i){this._queue.delete(r)}}attempt(r){const i=this.withProgress(r);if(!i){throw new J(void 0,"TasksPendingQueue: attempt called for an unknown task")}i.logger("Starting task");return i}static getName(r="empty"){return`task:${r}:${++it.counter}`}};ot=it;ot.counter=0}});function pluginContext(r,i){return{method:first(r.commands)||"",commands:i}}function onErrorReceived(r,i){return c=>{i(`[ERROR] child process exception %o`,c);r.push(Buffer.from(String(c.stack),"ascii"))}}function onDataReceived(r,i,c,u){return h=>{c(`%s received %L bytes`,i,h);u(`%B`,h);r.push(h)}}var ct;var lt=__esm({"src/lib/runners/git-executor-chain.ts"(){Y();Me();xe();at();ct=class{constructor(r,i,c){this._executor=r;this._scheduler=i;this._plugins=c;this._chain=Promise.resolve();this._queue=new ot}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(r){this._cwd=r}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(r){this._queue.push(r);return this._chain=this._chain.then((()=>this.attemptTask(r)))}attemptTask(r){return __async(this,null,(function*(){const i=yield this._scheduler.next();const onQueueComplete=()=>this._queue.complete(r);try{const{logger:c}=this._queue.attempt(r);return yield isEmptyTask(r)?this.attemptEmptyTask(r,c):this.attemptRemoteTask(r,c)}catch(i){throw this.onFatalException(r,i)}finally{onQueueComplete();i()}}))}onFatalException(r,i){const c=i instanceof J?Object.assign(i,{task:r}):new J(r,i&&String(i));this._chain=Promise.resolve();this._queue.fatal(c);return c}attemptRemoteTask(r,i){return __async(this,null,(function*(){const c=this._plugins.exec("spawn.args",[...r.commands],pluginContext(r,r.commands));const u=yield this.gitResponse(r,this.binary,c,this.outputHandler,i.step("SPAWN"));const h=yield this.handleTaskData(r,c,u,i.step("HANDLE"));i(`passing response to task's parser as a %s`,r.format);if(isBufferTask(r)){return callTaskParser(r.parser,h)}return callTaskParser(r.parser,h.asStrings())}))}attemptEmptyTask(r,i){return __async(this,null,(function*(){i(`empty task bypassing child process to call to task's parser`);return r.parser(this)}))}handleTaskData(r,i,c,u){const{exitCode:h,rejection:d,stdOut:p,stdErr:g}=c;return new Promise(((y,b)=>{u(`Preparing to handle process response exitCode=%d stdOut=`,h);const{error:v}=this._plugins.exec("task.error",{error:d},__spreadValues(__spreadValues({},pluginContext(r,i)),c));if(v&&r.onError){u.info(`exitCode=%s handling with custom error handler`);return r.onError(c,v,(r=>{u.info(`custom error handler treated as success`);u(`custom error returned a %s`,se(r));y(new pe(Array.isArray(r)?Buffer.concat(r):r,Buffer.concat(g)))}),b)}if(v){u.info(`handling as error: exitCode=%s stdErr=%s rejection=%o`,h,g.length,d);return b(v)}u.info(`retrieving task output complete`);y(new pe(Buffer.concat(p),Buffer.concat(g)))}))}gitResponse(r,i,c,u,h){return __async(this,null,(function*(){const d=h.sibling("output");const p=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:true},pluginContext(r,r.commands));return new Promise((g=>{const y=[];const b=[];h.info(`%s %o`,i,c);h("%O",p);let v=this._beforeSpawn(r,c);if(v){return g({stdOut:y,stdErr:b,exitCode:9901,rejection:v})}this._plugins.exec("spawn.before",void 0,__spreadProps(__spreadValues({},pluginContext(r,c)),{kill(r){v=r||v}}));const w=(0,q.spawn)(i,c,p);w.stdout.on("data",onDataReceived(y,"stdOut",h,d.step("stdOut")));w.stderr.on("data",onDataReceived(b,"stdErr",h,d.step("stdErr")));w.on("error",onErrorReceived(b,h));if(u){h(`Passing child process stdOut/stdErr to custom outputHandler`);u(i,w.stdout,w.stderr,[...c])}this._plugins.exec("spawn.after",void 0,__spreadProps(__spreadValues({},pluginContext(r,c)),{spawned:w,close(r,i){g({stdOut:y,stdErr:b,exitCode:r,rejection:v||i})},kill(r){if(w.killed){return}v=r;w.kill("SIGINT")}}))}))}))}_beforeSpawn(r,i){let c;this._plugins.exec("spawn.before",void 0,__spreadProps(__spreadValues({},pluginContext(r,i)),{kill(r){c=r||c}}));return c}}}});var ut={};__export(ut,{GitExecutor:()=>ht});var ht;var ft=__esm({"src/lib/runners/git-executor.ts"(){lt();ht=class{constructor(r="git",i,c,u){this.binary=r;this.cwd=i;this._scheduler=c;this._plugins=u;this._chain=new ct(this,this._scheduler,this._plugins)}chain(){return new ct(this,this._scheduler,this._plugins)}push(r){return this._chain.push(r)}}}});function taskCallback(r,i,c=ne){const onSuccess=r=>{c(null,r)};const onError2=i=>{if((i==null?void 0:i.task)===r){c(i instanceof X?addDeprecationNoticeToError(i):i,void 0)}};i.then(onSuccess,onError2)}function addDeprecationNoticeToError(r){let log=r=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${r} should be GitResponseError.git.${r}, this will no longer be available in version 3`);log=ne};return Object.create(r,Object.getOwnPropertyNames(r.git).reduce(descriptorReducer,{}));function descriptorReducer(i,c){if(c in r){return i}i[c]={enumerable:false,configurable:false,get(){log(c);return r.git[c]}};return i}}var dt=__esm({"src/lib/task-callback.ts"(){Z();xe()}});function changeWorkingDirectoryTask(r,i){return adhocExecTask((c=>{if(!folderExists(r)){throw new Error(`Git.cwd: cannot change to non-directory "${r}"`)}return(i||c).cwd=r}))}var pt=__esm({"src/lib/tasks/change-working-directory.ts"(){xe();Me()}});function parseCommitResult(r){const i={author:null,branch:"",commit:"",root:false,summary:{changes:0,insertions:0,deletions:0}};return parseStringResponse(i,mt,r)}var mt;var gt=__esm({"src/lib/parsers/parse-commit.ts"(){xe();mt=[new ge(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,((r,[i,c,u])=>{r.branch=i;r.commit=u;r.root=!!c})),new ge(/\s*Author:\s(.+)/i,((r,[i])=>{const c=i.split("<");const u=c.pop();if(!u||!u.includes("@")){return}r.author={email:u.substr(0,u.length-1),name:c.join("<").trim()}})),new ge(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,((r,[i,c,u])=>{r.summary.changes=parseInt(i,10)||0;r.summary.insertions=parseInt(c,10)||0;r.summary.deletions=parseInt(u,10)||0})),new ge(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,((r,[i,c,u])=>{r.summary.changes=parseInt(i,10)||0;const h=parseInt(c,10)||0;if(u==="-"){r.summary.deletions=h}else if(u==="+"){r.summary.insertions=h}}))]}});var yt={};__export(yt,{commitTask:()=>commitTask,default:()=>commit_default});function commitTask(r,i,c){const u=["-c","core.abbrev=40","commit",...prefixedArray(r,"-m"),...i,...c];return{commands:u,format:"utf-8",parser:parseCommitResult}}function commit_default(){return{commit(r,...i){const c=trailingFunctionArgument(arguments);const u=rejectDeprecatedSignatures(r)||commitTask(asArray(r),asArray(filterType(i[0],le,[])),[...filterType(i[1],oe,[]),...getTrailingOptions(arguments,0,true)]);return this._runTask(u,c)}};function rejectDeprecatedSignatures(r){return!le(r)&&configurationErrorTask(`git.commit: requires the commit message to be supplied as a string/string[]`)}}var bt=__esm({"src/lib/tasks/commit.ts"(){gt();xe();Me()}});function hashObjectTask(r,i){const c=["hash-object",r];if(i){c.push("-w")}return straightThroughStringTask(c,true)}var vt=__esm({"src/lib/tasks/hash-object.ts"(){Me()}});function parseInit(r,i,c){const u=String(c).trim();let h;if(h=_t.exec(u)){return new wt(r,i,false,h[1])}if(h=Ct.exec(u)){return new wt(r,i,true,h[1])}let d="";const p=u.split(" ");while(p.length){const r=p.shift();if(r==="in"){d=p.join(" ");break}}return new wt(r,i,/^re/i.test(u),d)}var wt,_t,Ct;var Et=__esm({"src/lib/responses/InitSummary.ts"(){wt=class{constructor(r,i,c,u){this.bare=r;this.path=i;this.existing=c;this.gitDir=u}};_t=/^Init.+ repository in (.+)$/;Ct=/^Rein.+ in (.+)$/}});function hasBareCommand(r){return r.includes(xt)}function initTask(r=false,i,c){const u=["init",...c];if(r&&!hasBareCommand(u)){u.splice(1,0,xt)}return{commands:u,format:"utf-8",parser(r){return parseInit(u.includes("--bare"),i,r)}}}var xt;var St=__esm({"src/lib/tasks/init.ts"(){Et();xt="--bare"}});function logFormatFromCommand(r){for(let i=0;i<r.length;i++){const c=kt.exec(r[i]);if(c){return`--${c[1]}`}}return""}function isLogFormat(r){return kt.test(r)}var kt;var Tt=__esm({"src/lib/args/log-format.ts"(){kt=/^--(stat|numstat|name-only|name-status)(=|$)/}});var Nt;var Ot=__esm({"src/lib/responses/DiffSummary.ts"(){Nt=class{constructor(){this.changed=0;this.deletions=0;this.insertions=0;this.files=[]}}}});function getDiffParser(r=""){const i=Rt[r];return r=>parseStringResponse(new Nt,i,r,false)}var $t,At,Pt,It,Rt;var jt=__esm({"src/lib/parsers/parse-diff-summary.ts"(){Tt();Ot();xe();$t=[new ge(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,((r,[i,c,u=""])=>{r.files.push({file:i.trim(),changes:asNumber(c),insertions:u.replace(/[^+]/g,"").length,deletions:u.replace(/[^-]/g,"").length,binary:false})})),new ge(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,((r,[i,c,u])=>{r.files.push({file:i.trim(),before:asNumber(c),after:asNumber(u),binary:true})})),new ge(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,((r,[i,c])=>{const u=/(\d+) i/.exec(c);const h=/(\d+) d/.exec(c);r.changed=asNumber(i);r.insertions=asNumber(u==null?void 0:u[1]);r.deletions=asNumber(h==null?void 0:h[1])}))];At=[new ge(/(\d+)\t(\d+)\t(.+)$/,((r,[i,c,u])=>{const h=asNumber(i);const d=asNumber(c);r.changed++;r.insertions+=h;r.deletions+=d;r.files.push({file:u,changes:h+d,insertions:h,deletions:d,binary:false})})),new ge(/-\t-\t(.+)$/,((r,[i])=>{r.changed++;r.files.push({file:i,after:0,before:0,binary:true})}))];Pt=[new ge(/(.+)$/,((r,[i])=>{r.changed++;r.files.push({file:i,changes:0,insertions:0,deletions:0,binary:false})}))];It=[new ge(/([ACDMRTUXB])\s*(.+)$/,((r,[i,c])=>{r.changed++;r.files.push({file:c,changes:0,insertions:0,deletions:0,binary:false})}))];Rt={[""]:$t,["--stat"]:$t,["--numstat"]:At,["--name-status"]:It,["--name-only"]:Pt}}});function lineBuilder(r,i){return i.reduce(((i,c,u)=>{i[c]=r[u]||"";return i}),Object.create({diff:null}))}function createListLogSummaryParser(r=Dt,i=qt,c=""){const u=getDiffParser(c);return function(c){const h=toLinesWithContent(c,true,Lt).map((function(c){const h=c.trim().split(Mt);const d=lineBuilder(h[0].trim().split(r),i);if(h.length>1&&!!h[1].trim()){d.diff=u(h[1])}return d}));return{all:h,latest:h.length&&h[0]||null,total:h.length}}}var Lt,Mt,Dt,qt;var Ft=__esm({"src/lib/parsers/parse-list-log-summary.ts"(){xe();jt();Tt();Lt="òòòòòò ";Mt=" òò";Dt=" ò ";qt=["hash","date","message","refs","author_name","author_email"]}});var Bt={};__export(Bt,{diffSummaryTask:()=>diffSummaryTask,validateLogFormatConfig:()=>validateLogFormatConfig});function diffSummaryTask(r){let i=logFormatFromCommand(r);const c=["diff"];if(i===""){i="--stat";c.push("--stat=4096")}c.push(...r);return validateLogFormatConfig(c)||{commands:c,format:"utf-8",parser:getDiffParser(i)}}function validateLogFormatConfig(r){const i=r.filter(isLogFormat);if(i.length>1){return configurationErrorTask(`Summary flags are mutually exclusive - pick one of ${i.join(",")}`)}if(i.length&&r.includes("-z")){return configurationErrorTask(`Summary flag ${i} parsing is not compatible with null termination option '-z'`)}}var Ut=__esm({"src/lib/tasks/diff.ts"(){Tt();jt();Me()}});function prettyFormat(r,i){const c=[];const u=[];Object.keys(r).forEach((i=>{c.push(i);u.push(String(r[i]))}));return[c,u.join(i)]}function userOptions(r){return Object.keys(r).reduce(((i,c)=>{if(!(c in Vt)){i[c]=r[c]}return i}),{})}function parseLogOptions(r={},i=[]){const c=filterType(r.splitter,ae,Dt);const u=!filterPrimitives(r.format)&&r.format?r.format:{hash:"%H",date:r.strictDate===false?"%ai":"%aI",message:"%s",refs:"%D",body:r.multiLine?"%B":"%b",author_name:r.mailMap!==false?"%aN":"%an",author_email:r.mailMap!==false?"%aE":"%ae"};const[h,d]=prettyFormat(u,c);const p=[];const g=[`--pretty=format:${Lt}${d}${Mt}`,...i];const y=r.n||r["max-count"]||r.maxCount;if(y){g.push(`--max-count=${y}`)}if(r.from||r.to){const i=r.symmetric!==false?"...":"..";p.push(`${r.from||""}${i}${r.to||""}`)}if(ae(r.file)){p.push("--follow",r.file)}appendTaskOptions(userOptions(r),g);return{fields:h,splitter:c,commands:[...g,...p]}}function logTask(r,i,c){const u=createListLogSummaryParser(r,i,logFormatFromCommand(c));return{commands:["log",...c],format:"utf-8",parser:u}}function log_default(){return{log(...r){const i=trailingFunctionArgument(arguments);const c=parseLogOptions(trailingOptionsArgument(arguments),filterType(arguments[0],oe));const u=rejectDeprecatedSignatures(...r)||validateLogFormatConfig(c.commands)||createLogTask(c);return this._runTask(u,i)}};function createLogTask(r){return logTask(r.splitter,r.fields,r.commands)}function rejectDeprecatedSignatures(r,i){return ae(r)&&ae(i)&&configurationErrorTask(`git.log(string, string) should be replaced with git.log({ from: string, to: string })`)}}var Vt;var Qt=__esm({"src/lib/tasks/log.ts"(){Tt();Ft();xe();Me();Ut();Vt=(r=>{r[r["--pretty"]=0]="--pretty";r[r["max-count"]=1]="max-count";r[r["maxCount"]=2]="maxCount";r[r["n"]=3]="n";r[r["file"]=4]="file";r[r["format"]=5]="format";r[r["from"]=6]="from";r[r["to"]=7]="to";r[r["splitter"]=8]="splitter";r[r["symmetric"]=9]="symmetric";r[r["mailMap"]=10]="mailMap";r[r["multiLine"]=11]="multiLine";r[r["strictDate"]=12]="strictDate";return r})(Vt||{})}});var Ht,Gt;var Kt=__esm({"src/lib/responses/MergeSummary.ts"(){Ht=class{constructor(r,i=null,c){this.reason=r;this.file=i;this.meta=c}toString(){return`${this.file}:${this.reason}`}};Gt=class{constructor(){this.conflicts=[];this.merges=[];this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){if(this.conflicts.length){return`CONFLICTS: ${this.conflicts.join(", ")}`}return"OK"}}}});var Wt,zt;var Jt=__esm({"src/lib/responses/PullSummary.ts"(){Wt=class{constructor(){this.remoteMessages={all:[]};this.created=[];this.deleted=[];this.files=[];this.deletions={};this.insertions={};this.summary={changes:0,deletions:0,insertions:0}}};zt=class{constructor(){this.remote="";this.hash={local:"",remote:""};this.branch={local:"",remote:""};this.message=""}toString(){return this.message}}}});function objectEnumerationResult(r){return r.objects=r.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function asObjectCount(r){const i=/^\s*(\d+)/.exec(r);const c=/delta (\d+)/i.exec(r);return{count:asNumber(i&&i[1]||"0"),delta:asNumber(c&&c[1]||"0")}}var Yt;var Xt=__esm({"src/lib/parsers/parse-remote-objects.ts"(){xe();Yt=[new ye(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,((r,[i,c])=>{const u=i.toLowerCase();const h=objectEnumerationResult(r.remoteMessages);Object.assign(h,{[u]:asNumber(c)})})),new ye(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,((r,[i,c])=>{const u=i.toLowerCase();const h=objectEnumerationResult(r.remoteMessages);Object.assign(h,{[u]:asNumber(c)})})),new ye(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,((r,[i,c,u])=>{const h=objectEnumerationResult(r.remoteMessages);h.total=asObjectCount(i);h.reused=asObjectCount(c);h.packReused=asNumber(u)}))]}});function parseRemoteMessages(r,i){return parseStringResponse({remoteMessages:new er},Zt,i)}var Zt,er;var tr=__esm({"src/lib/parsers/parse-remote-messages.ts"(){xe();Xt();Zt=[new ye(/^remote:\s*(.+)$/,((r,[i])=>{r.remoteMessages.all.push(i.trim());return false})),...Yt,new ye([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],((r,[i])=>{r.remoteMessages.pullRequestUrl=i})),new ye([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],((r,[i,c,u])=>{r.remoteMessages.vulnerabilities={count:asNumber(i),summary:c,url:u}}))];er=class{constructor(){this.all=[]}}}});function parsePullErrorResult(r,i){const c=parseStringResponse(new zt,ar,[r,i]);return c.message&&c}var rr,nr,sr,ir,ar,cr,lr;var ur=__esm({"src/lib/parsers/parse-pull.ts"(){Jt();xe();tr();rr=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/;nr=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/;sr=/^(create|delete) mode \d+ (.+)/;ir=[new ge(rr,((r,[i,c,u])=>{r.files.push(i);if(c){r.insertions[i]=c.length}if(u){r.deletions[i]=u.length}})),new ge(nr,((r,[i,,c,,u])=>{if(c!==void 0||u!==void 0){r.summary.changes=+i||0;r.summary.insertions=+c||0;r.summary.deletions=+u||0;return true}return false})),new ge(sr,((r,[i,c])=>{append(r.files,c);append(i==="create"?r.created:r.deleted,c)}))];ar=[new ge(/^from\s(.+)$/i,((r,[i])=>void(r.remote=i))),new ge(/^fatal:\s(.+)$/,((r,[i])=>void(r.message=i))),new ge(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,((r,[i,c,u,h])=>{r.branch.local=u;r.hash.local=i;r.branch.remote=h;r.hash.remote=c}))];cr=(r,i)=>parseStringResponse(new Wt,ir,[r,i]);lr=(r,i)=>Object.assign(new Wt,cr(r,i),parseRemoteMessages(r,i))}});var hr,fr,dr;var pr=__esm({"src/lib/parsers/parse-merge.ts"(){Kt();xe();ur();hr=[new ge(/^Auto-merging\s+(.+)$/,((r,[i])=>{r.merges.push(i)})),new ge(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,((r,[i,c])=>{r.conflicts.push(new Ht(i,c))})),new ge(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,((r,[i,c,u])=>{r.conflicts.push(new Ht(i,c,{deleteRef:u}))})),new ge(/^CONFLICT\s+\((.+)\):/,((r,[i])=>{r.conflicts.push(new Ht(i,null))})),new ge(/^Automatic merge failed;\s+(.+)$/,((r,[i])=>{r.result=i}))];fr=(r,i)=>Object.assign(dr(r,i),lr(r,i));dr=r=>parseStringResponse(new Gt,hr,r)}});function mergeTask(r){if(!r.length){return configurationErrorTask("Git.merge requires at least one option")}return{commands:["merge",...r],format:"utf-8",parser(r,i){const c=fr(r,i);if(c.failed){throw new X(c)}return c}}}var mr=__esm({"src/lib/tasks/merge.ts"(){Z();pr();Me()}});function pushResultPushedItem(r,i,c){const u=c.includes("deleted");const h=c.includes("tag")||/^refs\/tags/.test(r);const d=!c.includes("new");return{deleted:u,tag:h,branch:!h,new:!d,alreadyUpdated:d,local:r,remote:i}}var gr,yr,br;var vr=__esm({"src/lib/parsers/parse-push.ts"(){xe();tr();gr=[new ge(/^Pushing to (.+)$/,((r,[i])=>{r.repo=i})),new ge(/^updating local tracking ref '(.+)'/,((r,[i])=>{r.ref=__spreadProps(__spreadValues({},r.ref||{}),{local:i})})),new ge(/^[*-=]\s+([^:]+):(\S+)\s+\[(.+)]$/,((r,[i,c,u])=>{r.pushed.push(pushResultPushedItem(i,c,u))})),new ge(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,((r,[i,c,u])=>{r.branch=__spreadProps(__spreadValues({},r.branch||{}),{local:i,remote:c,remoteName:u})})),new ge(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,((r,[i,c,u,h])=>{r.update={head:{local:i,remote:c},hash:{from:u,to:h}}}))];yr=(r,i)=>{const c=br(r,i);const u=parseRemoteMessages(r,i);return __spreadValues(__spreadValues({},c),u)};br=(r,i)=>parseStringResponse({pushed:[]},gr,[r,i])}});var wr={};__export(wr,{pushTagsTask:()=>pushTagsTask,pushTask:()=>pushTask});function pushTagsTask(r={},i){append(i,"--tags");return pushTask(r,i)}function pushTask(r={},i){const c=["push",...i];if(r.branch){c.splice(1,0,r.branch)}if(r.remote){c.splice(1,0,r.remote)}remove(c,"-v");append(c,"--verbose");append(c,"--porcelain");return{commands:c,format:"utf-8",parser:yr}}var _r=__esm({"src/lib/tasks/push.ts"(){vr();xe()}});var Cr,Er;var xr=__esm({"src/lib/responses/FileStatusSummary.ts"(){Cr=/^(.+) -> (.+)$/;Er=class{constructor(r,i,c){this.path=r;this.index=i;this.working_dir=c;if(i+c==="R"){const i=Cr.exec(r)||[null,r,r];this.from=i[1]||"";this.path=i[2]||""}}}}});function renamedFile(r){const[i,c]=r.split(re);return{from:c||i,to:i}}function parser2(r,i,c){return[`${r}${i}`,c]}function conflicts(r,...i){return i.map((i=>parser2(r,i,((r,i)=>append(r.conflicted,i)))))}function splitLine(r,i){const c=i.trim();switch(" "){case c.charAt(2):return data(c.charAt(0),c.charAt(1),c.substr(3));case c.charAt(1):return data(" ",c.charAt(0),c.substr(2));default:return}function data(i,c,u){const h=`${i}${c}`;const d=kr.get(h);if(d){d(r,u)}if(h!=="##"&&h!=="!!"){r.files.push(new Er(u.replace(/\0.+$/,""),i,c))}}}var Sr,kr,Tr;var Nr=__esm({"src/lib/responses/StatusSummary.ts"(){xe();xr();Sr=class{constructor(){this.not_added=[];this.conflicted=[];this.created=[];this.deleted=[];this.ignored=void 0;this.modified=[];this.renamed=[];this.files=[];this.staged=[];this.ahead=0;this.behind=0;this.current=null;this.tracking=null;this.detached=false;this.isClean=()=>!this.files.length}};kr=new Map([parser2(" ","A",((r,i)=>append(r.created,i))),parser2(" ","D",((r,i)=>append(r.deleted,i))),parser2(" ","M",((r,i)=>append(r.modified,i))),parser2("A"," ",((r,i)=>append(r.created,i)&&append(r.staged,i))),parser2("A","M",((r,i)=>append(r.created,i)&&append(r.staged,i)&&append(r.modified,i))),parser2("D"," ",((r,i)=>append(r.deleted,i)&&append(r.staged,i))),parser2("M"," ",((r,i)=>append(r.modified,i)&&append(r.staged,i))),parser2("M","M",((r,i)=>append(r.modified,i)&&append(r.staged,i))),parser2("R"," ",((r,i)=>{append(r.renamed,renamedFile(i))})),parser2("R","M",((r,i)=>{const c=renamedFile(i);append(r.renamed,c);append(r.modified,c.to)})),parser2("!","!",((r,i)=>{append(r.ignored=r.ignored||[],i)})),parser2("?","?",((r,i)=>append(r.not_added,i))),...conflicts("A","A","U"),...conflicts("D","D","U"),...conflicts("U","A","D","U"),["##",(r,i)=>{const c=/ahead (\d+)/;const u=/behind (\d+)/;const h=/^(.+?(?=(?:\.{3}|\s|$)))/;const d=/\.{3}(\S*)/;const p=/\son\s([\S]+)$/;let g;g=c.exec(i);r.ahead=g&&+g[1]||0;g=u.exec(i);r.behind=g&&+g[1]||0;g=h.exec(i);r.current=g&&g[1];g=d.exec(i);r.tracking=g&&g[1];g=p.exec(i);r.current=g&&g[1]||r.current;r.detached=/\(no branch\)/.test(i)}]]);Tr=function(r){const i=r.split(re);const c=new Sr;for(let r=0,u=i.length;r<u;){let u=i[r++].trim();if(!u){continue}if(u.charAt(0)==="R"){u+=re+(i[r++]||"")}splitLine(c,u)}return c}}});function statusTask(r){const i=["status","--porcelain","-b","-u","--null",...r.filter((r=>!Or.includes(r)))];return{format:"utf-8",commands:i,parser(r){return Tr(r)}}}var Or;var $r=__esm({"src/lib/tasks/status.ts"(){Nr();Or=["--null","-z"]}});function versionResponse(r=0,i=0,c=0,u="",h=true){return Object.defineProperty({major:r,minor:i,patch:c,agent:u,installed:h},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:false,enumerable:false})}function notInstalledResponse(){return versionResponse(0,0,0,"",false)}function version_default(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:versionParser,onError(r,i,c,u){if(r.exitCode===-2){return c(Buffer.from(Ar))}u(i)}})}}}function versionParser(r){if(r===Ar){return notInstalledResponse()}return parseStringResponse(versionResponse(0,0,0,r),Pr,r)}var Ar,Pr;var Ir=__esm({"src/lib/tasks/version.ts"(){xe();Ar="installed=false";Pr=[new ge(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,((r,[i,c,u,h=""])=>{Object.assign(r,versionResponse(asNumber(i),asNumber(c),asNumber(u),h))})),new ge(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,((r,[i,c,u,h=""])=>{Object.assign(r,versionResponse(asNumber(i),asNumber(c),u,h))}))]}});var Rr={};__export(Rr,{SimpleGitApi:()=>jr});var jr;var Lr=__esm({"src/lib/simple-git-api.ts"(){dt();pt();bt();We();Ze();vt();St();Qt();mr();_r();$r();Me();Ir();xe();jr=class{constructor(r){this._executor=r}_runTask(r,i){const c=this._executor.chain();const u=c.push(r);if(i){taskCallback(r,u,i)}return Object.create(this,{then:{value:u.then.bind(u)},catch:{value:u.catch.bind(u)},_executor:{value:c}})}add(r){return this._runTask(straightThroughStringTask(["add",...asArray(r)]),trailingFunctionArgument(arguments))}cwd(r){const i=trailingFunctionArgument(arguments);if(typeof r==="string"){return this._runTask(changeWorkingDirectoryTask(r,this._executor),i)}if(typeof(r==null?void 0:r.path)==="string"){return this._runTask(changeWorkingDirectoryTask(r.path,r.root&&this._executor||void 0),i)}return this._runTask(configurationErrorTask("Git.cwd: workingDirectory must be supplied as a string"),i)}hashObject(r,i){return this._runTask(hashObjectTask(r,i===true),trailingFunctionArgument(arguments))}init(r){return this._runTask(initTask(r===true,this._executor.cwd,getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}merge(){return this._runTask(mergeTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}mergeFromTo(r,i){if(!(ae(r)&&ae(i))){return this._runTask(configurationErrorTask(`Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings`))}return this._runTask(mergeTask([r,i,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments,false))}outputHandler(r){this._executor.outputHandler=r;return this}push(){const r=pushTask({remote:filterType(arguments[0],ae),branch:filterType(arguments[1],ae)},getTrailingOptions(arguments));return this._runTask(r,trailingFunctionArgument(arguments))}stash(){return this._runTask(straightThroughStringTask(["stash",...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))}status(){return this._runTask(statusTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}};Object.assign(jr.prototype,commit_default(),config_default(),grep_default(),log_default(),version_default())}});var Mr={};__export(Mr,{Scheduler:()=>qr});var Dr,qr;var Fr=__esm({"src/lib/runners/scheduler.ts"(){xe();st();Dr=(()=>{let r=0;return()=>{r++;const{promise:i,done:c}=(0,F.dD)();return{promise:i,done:c,id:r}}})();qr=class{constructor(r=2){this.concurrency=r;this.logger=createLogger("","scheduler");this.pending=[];this.running=[];this.logger(`Constructed, concurrency=%s`,r)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger(`Schedule attempt ignored, pending=%s running=%s concurrency=%s`,this.pending.length,this.running.length,this.concurrency);return}const r=append(this.running,this.pending.shift());this.logger(`Attempting id=%s`,r.id);r.done((()=>{this.logger(`Completing id=`,r.id);remove(this.running,r);this.schedule()}))}next(){const{promise:r,id:i}=append(this.pending,Dr());this.logger(`Scheduling id=%s`,i);this.schedule();return r}}}});var Br={};__export(Br,{applyPatchTask:()=>applyPatchTask});function applyPatchTask(r,i){return straightThroughStringTask(["apply",...i,...r])}var Ur=__esm({"src/lib/tasks/apply-patch.ts"(){Me()}});function branchDeletionSuccess(r,i){return{branch:r,hash:i,success:true}}function branchDeletionFailure(r){return{branch:r,hash:null,success:false}}var Vr;var Qr=__esm({"src/lib/responses/BranchDeleteSummary.ts"(){Vr=class{constructor(){this.all=[];this.branches={};this.errors=[]}get success(){return!this.errors.length}}}});function hasBranchDeletionError(r,i){return i===1&&Gr.test(r)}var Hr,Gr,Kr,Wr;var zr=__esm({"src/lib/parsers/parse-branch-delete.ts"(){Qr();xe();Hr=/(\S+)\s+\(\S+\s([^)]+)\)/;Gr=/^error[^']+'([^']+)'/m;Kr=[new ge(Hr,((r,[i,c])=>{const u=branchDeletionSuccess(i,c);r.all.push(u);r.branches[i]=u})),new ge(Gr,((r,[i])=>{const c=branchDeletionFailure(i);r.errors.push(c);r.all.push(c);r.branches[i]=c}))];Wr=(r,i)=>parseStringResponse(new Vr,Kr,[r,i])}});var Jr;var Yr=__esm({"src/lib/responses/BranchSummary.ts"(){Jr=class{constructor(){this.all=[];this.branches={};this.current="";this.detached=false}push(r,i,c,u,h){if(r==="*"){this.detached=i;this.current=c}this.all.push(c);this.branches[c]={current:r==="*",linkedWorkTree:r==="+",name:c,commit:u,label:h}}}}});function branchStatus(r){return r?r.charAt(0):""}function parseBranchSummary(r){return parseStringResponse(new Jr,Xr,r)}var Xr;var Zr=__esm({"src/lib/parsers/parse-branch.ts"(){Yr();xe();Xr=[new ge(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,((r,[i,c,u,h])=>{r.push(branchStatus(i),true,c,u,h)})),new ge(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,((r,[i,c,u,h])=>{r.push(branchStatus(i),false,c,u,h)}))]}});var en={};__export(en,{branchLocalTask:()=>branchLocalTask,branchTask:()=>branchTask,containsDeleteBranchCommand:()=>containsDeleteBranchCommand,deleteBranchTask:()=>deleteBranchTask,deleteBranchesTask:()=>deleteBranchesTask});function containsDeleteBranchCommand(r){const i=["-d","-D","--delete"];return r.some((r=>i.includes(r)))}function branchTask(r){const i=containsDeleteBranchCommand(r);const c=["branch",...r];if(c.length===1){c.push("-a")}if(!c.includes("-v")){c.splice(1,0,"-v")}return{format:"utf-8",commands:c,parser(r,c){if(i){return Wr(r,c).all[0]}return parseBranchSummary(r)}}}function branchLocalTask(){const r=parseBranchSummary;return{format:"utf-8",commands:["branch","-v"],parser:r}}function deleteBranchesTask(r,i=false){return{format:"utf-8",commands:["branch","-v",i?"-D":"-d",...r],parser(r,i){return Wr(r,i)},onError({exitCode:r,stdOut:i},c,u,h){if(!hasBranchDeletionError(String(c),r)){return h(c)}u(i)}}}function deleteBranchTask(r,i=false){const c={format:"utf-8",commands:["branch","-v",i?"-D":"-d",r],parser(i,c){return Wr(i,c).branches[r]},onError({exitCode:r,stdErr:i,stdOut:u},h,d,p){if(!hasBranchDeletionError(String(h),r)){return p(h)}throw new X(c.parser(bufferToString(u),bufferToString(i)),String(h))}};return c}var tn=__esm({"src/lib/tasks/branch.ts"(){Z();zr();Zr();xe()}});var rn;var nn=__esm({"src/lib/responses/CheckIgnore.ts"(){rn=r=>r.split(/\n/g).map((r=>r.trim())).filter((r=>!!r))}});var sn={};__export(sn,{checkIgnoreTask:()=>checkIgnoreTask});function checkIgnoreTask(r){return{commands:["check-ignore",...r],format:"utf-8",parser:rn}}var on=__esm({"src/lib/tasks/check-ignore.ts"(){nn()}});var an={};__export(an,{cloneMirrorTask:()=>cloneMirrorTask,cloneTask:()=>cloneTask});function disallowedCommand(r){return/^--upload-pack(=|$)/.test(r)}function cloneTask(r,i,c){const u=["clone",...c];ae(r)&&u.push(r);ae(i)&&u.push(i);const h=u.find(disallowedCommand);if(h){return configurationErrorTask(`git.fetch: potential exploit argument blocked.`)}return straightThroughStringTask(u)}function cloneMirrorTask(r,i,c){append(c,"--mirror");return cloneTask(r,i,c)}var cn=__esm({"src/lib/tasks/clone.ts"(){Me();xe()}});function parseFetchResult(r,i){const c={raw:r,remote:null,branches:[],tags:[],updated:[],deleted:[]};return parseStringResponse(c,ln,[r,i])}var ln;var un=__esm({"src/lib/parsers/parse-fetch.ts"(){xe();ln=[new ge(/From (.+)$/,((r,[i])=>{r.remote=i})),new ge(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,((r,[i,c])=>{r.branches.push({name:i,tracking:c})})),new ge(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,((r,[i,c])=>{r.tags.push({name:i,tracking:c})})),new ge(/- \[deleted]\s+\S+\s*-> (.+)$/,((r,[i])=>{r.deleted.push({tracking:i})})),new ge(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,((r,[i,c,u,h])=>{r.updated.push({name:u,tracking:h,to:c,from:i})}))]}});var hn={};__export(hn,{fetchTask:()=>fetchTask});function disallowedCommand2(r){return/^--upload-pack(=|$)/.test(r)}function fetchTask(r,i,c){const u=["fetch",...c];if(r&&i){u.push(r,i)}const h=u.find(disallowedCommand2);if(h){return configurationErrorTask(`git.fetch: potential exploit argument blocked.`)}return{commands:u,format:"utf-8",parser:parseFetchResult}}var fn=__esm({"src/lib/tasks/fetch.ts"(){un();Me()}});function parseMoveResult(r){return parseStringResponse({moves:[]},dn,r)}var dn;var pn=__esm({"src/lib/parsers/parse-move.ts"(){xe();dn=[new ge(/^Renaming (.+) to (.+)$/,((r,[i,c])=>{r.moves.push({from:i,to:c})}))]}});var mn={};__export(mn,{moveTask:()=>moveTask});function moveTask(r,i){return{commands:["mv","-v",...asArray(r),i],format:"utf-8",parser:parseMoveResult}}var gn=__esm({"src/lib/tasks/move.ts"(){pn();xe()}});var yn={};__export(yn,{pullTask:()=>pullTask});function pullTask(r,i,c){const u=["pull",...c];if(r&&i){u.splice(1,0,r,i)}return{commands:u,format:"utf-8",parser(r,i){return lr(r,i)},onError(r,i,c,u){const h=parsePullErrorResult(bufferToString(r.stdOut),bufferToString(r.stdErr));if(h){return u(new X(h))}u(i)}}}var bn=__esm({"src/lib/tasks/pull.ts"(){Z();ur();xe()}});function parseGetRemotes(r){const i={};forEach(r,(([r])=>i[r]={name:r}));return Object.values(i)}function parseGetRemotesVerbose(r){const i={};forEach(r,(([r,c,u])=>{if(!i.hasOwnProperty(r)){i[r]={name:r,refs:{fetch:"",push:""}}}if(u&&c){i[r].refs[u.replace(/[^a-z]/g,"")]=c}}));return Object.values(i)}function forEach(r,i){forEachLineWithContent(r,(r=>i(r.split(/\s+/))))}var vn=__esm({"src/lib/responses/GetRemoteSummary.ts"(){xe()}});var wn={};__export(wn,{addRemoteTask:()=>addRemoteTask,getRemotesTask:()=>getRemotesTask,listRemotesTask:()=>listRemotesTask,remoteTask:()=>remoteTask,removeRemoteTask:()=>removeRemoteTask});function addRemoteTask(r,i,c=[]){return straightThroughStringTask(["remote","add",...c,r,i])}function getRemotesTask(r){const i=["remote"];if(r){i.push("-v")}return{commands:i,format:"utf-8",parser:r?parseGetRemotesVerbose:parseGetRemotes}}function listRemotesTask(r=[]){const i=[...r];if(i[0]!=="ls-remote"){i.unshift("ls-remote")}return straightThroughStringTask(i)}function remoteTask(r=[]){const i=[...r];if(i[0]!=="remote"){i.unshift("remote")}return straightThroughStringTask(i)}function removeRemoteTask(r){return straightThroughStringTask(["remote","remove",r])}var _n=__esm({"src/lib/tasks/remote.ts"(){vn();Me()}});var Cn={};__export(Cn,{stashListTask:()=>stashListTask});function stashListTask(r={},i){const c=parseLogOptions(r);const u=["stash","list",...c.commands,...i];const h=createListLogSummaryParser(c.splitter,c.fields,logFormatFromCommand(u));return validateLogFormatConfig(u)||{commands:u,format:"utf-8",parser:h}}var En=__esm({"src/lib/tasks/stash-list.ts"(){Tt();Ft();Ut();Qt()}});var xn={};__export(xn,{addSubModuleTask:()=>addSubModuleTask,initSubModuleTask:()=>initSubModuleTask,subModuleTask:()=>subModuleTask,updateSubModuleTask:()=>updateSubModuleTask});function addSubModuleTask(r,i){return subModuleTask(["add",r,i])}function initSubModuleTask(r){return subModuleTask(["init",...r])}function subModuleTask(r){const i=[...r];if(i[0]!=="submodule"){i.unshift("submodule")}return straightThroughStringTask(i)}function updateSubModuleTask(r){return subModuleTask(["update",...r])}var Sn=__esm({"src/lib/tasks/sub-module.ts"(){Me()}});function singleSorted(r,i){const c=isNaN(r);const u=isNaN(i);if(c!==u){return c?1:-1}return c?sorted(r,i):0}function sorted(r,i){return r===i?0:r>i?1:-1}function trimmed(r){return r.trim()}function toNumber(r){if(typeof r==="string"){return parseInt(r.replace(/^\D+/g,""),10)||0}return 0}var kn,Tn;var Nn=__esm({"src/lib/responses/TagList.ts"(){kn=class{constructor(r,i){this.all=r;this.latest=i}};Tn=function(r,i=false){const c=r.split("\n").map(trimmed).filter(Boolean);if(!i){c.sort((function(r,i){const c=r.split(".");const u=i.split(".");if(c.length===1||u.length===1){return singleSorted(toNumber(c[0]),toNumber(u[0]))}for(let r=0,i=Math.max(c.length,u.length);r<i;r++){const i=sorted(toNumber(c[r]),toNumber(u[r]));if(i){return i}}return 0}))}const u=i?c[0]:[...c].reverse().find((r=>r.indexOf(".")>=0));return new kn(c,u)}}});var On={};__export(On,{addAnnotatedTagTask:()=>addAnnotatedTagTask,addTagTask:()=>addTagTask,tagListTask:()=>tagListTask});function tagListTask(r=[]){const i=r.some((r=>/^--sort=/.test(r)));return{format:"utf-8",commands:["tag","-l",...r],parser(r){return Tn(r,i)}}}function addTagTask(r){return{format:"utf-8",commands:["tag",r],parser(){return{name:r}}}}function addAnnotatedTagTask(r,i){return{format:"utf-8",commands:["tag","-a","-m",i,r],parser(){return{name:r}}}}var $n=__esm({"src/lib/tasks/tag.ts"(){Nn()}});var An=__commonJS({"src/git.js"(r,i){var{GitExecutor:c}=(ft(),z(ut));var{SimpleGitApi:u}=(Lr(),z(Rr));var{Scheduler:h}=(Fr(),z(Mr));var{configurationErrorTask:d}=(Me(),z(je));var{asArray:p,filterArray:g,filterPrimitives:y,filterString:b,filterStringOrStringArray:v,filterType:w,getTrailingOptions:C,trailingFunctionArgument:E,trailingOptionsArgument:x}=(xe(),z(Ee));var{applyPatchTask:S}=(Ur(),z(Br));var{branchTask:k,branchLocalTask:T,deleteBranchesTask:N,deleteBranchTask:O}=(tn(),z(en));var{checkIgnoreTask:$}=(on(),z(sn));var{checkIsRepoTask:A}=(Oe(),z(Se));var{cloneTask:P,cloneMirrorTask:I}=(cn(),z(an));var{cleanWithOptionsTask:R,isCleanOptionsArray:j}=(Qe(),z(De));var{commitTask:L}=(bt(),z(yt));var{diffSummaryTask:M}=(Ut(),z(Bt));var{fetchTask:D}=(fn(),z(hn));var{moveTask:q}=(gn(),z(mn));var{pullTask:F}=(bn(),z(yn));var{pushTagsTask:B}=(_r(),z(wr));var{addRemoteTask:U,getRemotesTask:V,listRemotesTask:Q,remoteTask:H,removeRemoteTask:G}=(_n(),z(wn));var{getResetMode:K,resetTask:W}=(nt(),z(et));var{stashListTask:J}=(En(),z(Cn));var{addSubModuleTask:Y,initSubModuleTask:X,subModuleTask:Z,updateSubModuleTask:ee}=(Sn(),z(xn));var{addAnnotatedTagTask:te,addTagTask:re,tagListTask:ne}=($n(),z(On));var{straightThroughBufferTask:se,straightThroughStringTask:ie}=(Me(),z(je));function Git2(r,i){this._executor=new c(r.binary,r.baseDir,new h(r.maxConcurrentProcesses),i);this._trimmed=r.trimmed}(Git2.prototype=Object.create(u.prototype)).constructor=Git2;Git2.prototype.customBinary=function(r){this._executor.binary=r;return this};Git2.prototype.env=function(r,i){if(arguments.length===1&&typeof r==="object"){this._executor.env=r}else{(this._executor.env=this._executor.env||{})[r]=i}return this};Git2.prototype.stashList=function(r){return this._runTask(J(x(arguments)||{},g(r)&&r||[]),E(arguments))};function createCloneTask(r,i,c,u){if(typeof c!=="string"){return d(`git.${r}() requires a string 'repoPath'`)}return i(c,w(u,b),C(arguments))}Git2.prototype.clone=function(){return this._runTask(createCloneTask("clone",P,...arguments),E(arguments))};Git2.prototype.mirror=function(){return this._runTask(createCloneTask("mirror",I,...arguments),E(arguments))};Git2.prototype.mv=function(r,i){return this._runTask(q(r,i),E(arguments))};Git2.prototype.checkoutLatestTag=function(r){var i=this;return this.pull((function(){i.tags((function(c,u){i.checkout(u.latest,r)}))}))};Git2.prototype.pull=function(r,i,c,u){return this._runTask(F(w(r,b),w(i,b),C(arguments)),E(arguments))};Git2.prototype.fetch=function(r,i){return this._runTask(D(w(r,b),w(i,b),C(arguments)),E(arguments))};Git2.prototype.silent=function(r){console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3");return this};Git2.prototype.tags=function(r,i){return this._runTask(ne(C(arguments)),E(arguments))};Git2.prototype.rebase=function(){return this._runTask(ie(["rebase",...C(arguments)]),E(arguments))};Git2.prototype.reset=function(r){return this._runTask(W(K(r),C(arguments)),E(arguments))};Git2.prototype.revert=function(r){const i=E(arguments);if(typeof r!=="string"){return this._runTask(d("Commit must be a string"),i)}return this._runTask(ie(["revert",...C(arguments,0,true),r]),i)};Git2.prototype.addTag=function(r){const i=typeof r==="string"?re(r):d("Git.addTag requires a tag name");return this._runTask(i,E(arguments))};Git2.prototype.addAnnotatedTag=function(r,i){return this._runTask(te(r,i),E(arguments))};Git2.prototype.checkout=function(){const r=["checkout",...C(arguments,true)];return this._runTask(ie(r),E(arguments))};Git2.prototype.checkoutBranch=function(r,i,c){return this.checkout(["-b",r,i],E(arguments))};Git2.prototype.checkoutLocalBranch=function(r,i){return this.checkout(["-b",r],E(arguments))};Git2.prototype.deleteLocalBranch=function(r,i,c){return this._runTask(O(r,typeof i==="boolean"?i:false),E(arguments))};Git2.prototype.deleteLocalBranches=function(r,i,c){return this._runTask(N(r,typeof i==="boolean"?i:false),E(arguments))};Git2.prototype.branch=function(r,i){return this._runTask(k(C(arguments)),E(arguments))};Git2.prototype.branchLocal=function(r){return this._runTask(T(),E(arguments))};Git2.prototype.raw=function(r){const i=!Array.isArray(r);const c=[].slice.call(i?arguments:r,0);for(let r=0;r<c.length&&i;r++){if(!y(c[r])){c.splice(r,c.length-r);break}}c.push(...C(arguments,0,true));var u=E(arguments);if(!c.length){return this._runTask(d("Raw: must supply one or more command to execute"),u)}return this._runTask(ie(c,this._trimmed),u)};Git2.prototype.submoduleAdd=function(r,i,c){return this._runTask(Y(r,i),E(arguments))};Git2.prototype.submoduleUpdate=function(r,i){return this._runTask(ee(C(arguments,true)),E(arguments))};Git2.prototype.submoduleInit=function(r,i){return this._runTask(X(C(arguments,true)),E(arguments))};Git2.prototype.subModule=function(r,i){return this._runTask(Z(C(arguments)),E(arguments))};Git2.prototype.listRemote=function(){return this._runTask(Q(C(arguments)),E(arguments))};Git2.prototype.addRemote=function(r,i,c){return this._runTask(U(r,i,C(arguments)),E(arguments))};Git2.prototype.removeRemote=function(r,i){return this._runTask(G(r),E(arguments))};Git2.prototype.getRemotes=function(r,i){return this._runTask(V(r===true),E(arguments))};Git2.prototype.remote=function(r,i){return this._runTask(H(C(arguments)),E(arguments))};Git2.prototype.tag=function(r,i){const c=C(arguments);if(c[0]!=="tag"){c.unshift("tag")}return this._runTask(ie(c),E(arguments))};Git2.prototype.updateServerInfo=function(r){return this._runTask(ie(["update-server-info"]),E(arguments))};Git2.prototype.pushTags=function(r,i){const c=B({remote:w(r,b)},C(arguments));return this._runTask(c,E(arguments))};Git2.prototype.rm=function(r){return this._runTask(ie(["rm","-f",...p(r)]),E(arguments))};Git2.prototype.rmKeepLocal=function(r){return this._runTask(ie(["rm","--cached",...p(r)]),E(arguments))};Git2.prototype.catFile=function(r,i){return this._catFile("utf-8",arguments)};Git2.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)};Git2.prototype._catFile=function(r,i){var c=E(i);var u=["cat-file"];var h=i[0];if(typeof h==="string"){return this._runTask(d("Git.catFile: options must be supplied as an array of strings"),c)}if(Array.isArray(h)){u.push.apply(u,h)}const p=r==="buffer"?se(u):ie(u);return this._runTask(p,c)};Git2.prototype.diff=function(r,i){const c=b(r)?d("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):ie(["diff",...C(arguments)]);return this._runTask(c,E(arguments))};Git2.prototype.diffSummary=function(){return this._runTask(M(C(arguments,1)),E(arguments))};Git2.prototype.applyPatch=function(r){const i=!v(r)?d(`git.applyPatch requires one or more string patches as the first argument`):S(p(r),C([].slice.call(arguments,1)));return this._runTask(i,E(arguments))};Git2.prototype.revparse=function(){const r=["rev-parse",...C(arguments,true)];return this._runTask(ie(r,true),E(arguments))};Git2.prototype.show=function(r,i){return this._runTask(ie(["show",...C(arguments,1)]),E(arguments))};Git2.prototype.clean=function(r,i,c){const u=j(r);const h=u&&r.join("")||w(r,b)||"";const d=C([].slice.call(arguments,u?1:0));return this._runTask(R(h,d),E(arguments))};Git2.prototype.exec=function(r){const i={commands:[],format:"utf-8",parser(){if(typeof r==="function"){r()}}};return this._runTask(i)};Git2.prototype.clearQueue=function(){return this};Git2.prototype.checkIgnore=function(r,i){return this._runTask($(p(w(r,v,[]))),E(arguments))};Git2.prototype.checkIsRepo=function(r,i){return this._runTask(A(w(r,b)),E(arguments))};i.exports=Git2}});Y();var Pn=class extends J{constructor(r,i){super(void 0,i);this.config=r}};Y();Y();var In=class extends J{constructor(r,i,c){super(r,c);this.task=r;this.plugin=i;Object.setPrototypeOf(this,new.target.prototype)}};Z();te();Oe();Qe();We();Ze();nt();function abortPlugin(r){if(!r){return}const i={type:"spawn.after",action(i,c){function kill(){c.kill(new In(void 0,"abort","Abort signal received"))}r.addEventListener("abort",kill);c.spawned.on("close",(()=>r.removeEventListener("abort",kill)))}};const c={type:"spawn.before",action(i,c){if(r.aborted){c.kill(new In(void 0,"abort","Abort already signaled"))}}};return[c,i]}function isConfigSwitch(r){return r.trim().toLowerCase()==="-c"}function preventProtocolOverride(r,i){if(!isConfigSwitch(r)){return}if(!/^\s*protocol(.[a-z]+)?.allow/.test(i)){return}throw new In(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function blockUnsafeOperationsPlugin({allowUnsafeProtocolOverride:r=false}={}){return{type:"spawn.args",action(i,c){i.forEach(((c,u)=>{const h=u<i.length?i[u+1]:"";r||preventProtocolOverride(c,h)}));return i}}}xe();function commandConfigPrefixingPlugin(r){const i=prefixedArray(r,"-c");return{type:"spawn.args",action(r){return[...i,...r]}}}xe();var Rn=(0,F.gX)().promise;function completionDetectionPlugin({onClose:r=true,onExit:i=50}={}){function createEvents(){let c=-1;const u={close:(0,F.gX)(),closeTimeout:(0,F.gX)(),exit:(0,F.gX)(),exitTimeout:(0,F.gX)()};const h=Promise.race([r===false?Rn:u.closeTimeout.promise,i===false?Rn:u.exitTimeout.promise]);configureTimeout(r,u.close,u.closeTimeout);configureTimeout(i,u.exit,u.exitTimeout);return{close(r){c=r;u.close.done()},exit(r){c=r;u.exit.done()},get exitCode(){return c},result:h}}function configureTimeout(r,i,c){if(r===false){return}(r===true?i.promise:i.promise.then((()=>delay(r)))).then(c.done)}return{type:"spawn.after",action(r,i){return __async(this,arguments,(function*(r,{spawned:i,close:c}){var u,h;const d=createEvents();let p=true;let quickClose=()=>void(p=false);(u=i.stdout)==null?void 0:u.on("data",quickClose);(h=i.stderr)==null?void 0:h.on("data",quickClose);i.on("error",quickClose);i.on("close",(r=>d.close(r)));i.on("exit",(r=>d.exit(r)));try{yield d.result;if(p){yield delay(50)}c(d.exitCode)}catch(r){c(d.exitCode,r)}}))}}}Y();function isTaskError(r){return!!(r.exitCode&&r.stdErr.length)}function getErrorMessage(r){return Buffer.concat([...r.stdOut,...r.stdErr])}function errorDetectionHandler(r=false,i=isTaskError,c=getErrorMessage){return(u,h)=>{if(!r&&u||!i(h)){return u}return c(h)}}function errorDetectionPlugin(r){return{type:"task.error",action(i,c){const u=r(i.error,{stdErr:c.stdErr,stdOut:c.stdOut,exitCode:c.exitCode});if(Buffer.isBuffer(u)){return{error:new J(void 0,u.toString("utf-8"))}}return{error:u}}}}xe();var jn=class{constructor(){this.plugins=new Set}add(r){const i=[];asArray(r).forEach((r=>r&&this.plugins.add(append(i,r))));return()=>{i.forEach((r=>this.plugins.delete(r)))}}exec(r,i,c){let u=i;const h=Object.freeze(Object.create(c));for(const i of this.plugins){if(i.type===r){u=i.action(u,h)}}return u}};xe();function progressMonitorPlugin(r){const i="--progress";const c=["checkout","clone","fetch","pull","push"];const u={type:"spawn.after",action(c,u){var h;if(!u.commands.includes(i)){return}(h=u.spawned.stderr)==null?void 0:h.on("data",(i=>{const c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(i.toString("utf8"));if(!c){return}r({method:u.method,stage:progressEventStage(c[1]),progress:asNumber(c[2]),processed:asNumber(c[3]),total:asNumber(c[4])})}))}};const h={type:"spawn.args",action(r,u){if(!c.includes(u.method)){return r}return including(r,i)}};return[h,u]}function progressEventStage(r){return String(r.toLowerCase().split(" ",1))||"unknown"}xe();function spawnOptionsPlugin(r){const i=pick(r,["uid","gid"]);return{type:"spawn.options",action(r){return __spreadValues(__spreadValues({},i),r)}}}function timeoutPlugin({block:r}){if(r>0){return{type:"spawn.after",action(i,c){var u,h;let d;function wait(){d&&clearTimeout(d);d=setTimeout(kill,r)}function stop(){var r,i;(r=c.spawned.stdout)==null?void 0:r.off("data",wait);(i=c.spawned.stderr)==null?void 0:i.off("data",wait);c.spawned.off("exit",stop);c.spawned.off("close",stop);d&&clearTimeout(d)}function kill(){stop();c.kill(new In(void 0,"timeout",`block timeout reached`))}(u=c.spawned.stdout)==null?void 0:u.on("data",wait);(h=c.spawned.stderr)==null?void 0:h.on("data",wait);c.spawned.on("exit",stop);c.spawned.on("close",stop);wait()}}}}xe();var Ln=An();function gitInstanceFactory(r,i){const c=new jn;const u=createInstanceConfig(r&&(typeof r==="string"?{baseDir:r}:r)||{},i);if(!folderExists(u.baseDir)){throw new Pn(u,`Cannot use simple-git on a directory that does not exist`)}if(Array.isArray(u.config)){c.add(commandConfigPrefixingPlugin(u.config))}c.add(blockUnsafeOperationsPlugin(u.unsafe));c.add(completionDetectionPlugin(u.completion));u.abort&&c.add(abortPlugin(u.abort));u.progress&&c.add(progressMonitorPlugin(u.progress));u.timeout&&c.add(timeoutPlugin(u.timeout));u.spawnOptions&&c.add(spawnOptionsPlugin(u.spawnOptions));c.add(errorDetectionPlugin(errorDetectionHandler(true)));u.errors&&c.add(errorDetectionPlugin(u.errors));return new Ln(u,c)}Z();var Mn=null&&["customBinary","env","outputHandler","silent"];var Dn=null&&["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"];function gitP(...r){let i;let c=Promise.resolve();try{i=gitInstanceFactory(...r)}catch(r){c=Promise.reject(r)}function builderReturn(){return u}function chainReturn(){return c}const u=[...Mn,...Dn].reduce(((r,c)=>{const u=Dn.includes(c);const h=u?asyncWrapper(c,i):syncWrapper(c,i,r);const d=u?chainReturn:builderReturn;Object.defineProperty(r,c,{enumerable:false,configurable:false,value:i?h:d});return r}),{});return u;function asyncWrapper(r,i){return function(...u){if(typeof u[u.length]==="function"){throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+r)}return c.then((function(){return new Promise((function(c,h){const callback=(r,i)=>{if(r){return h(toError(r))}c(i)};u.push(callback);i[r].apply(i,u)}))}))}}function syncWrapper(r,i,c){return(...u)=>{i[r](...u);return c}}}function toError(r){if(r instanceof Error){return r}if(typeof r==="string"){return new Error(r)}return new X(r)}var qn=null&&gitInstanceFactory;var Fn=gitInstanceFactory;var Bn=c(6113);const Un=128;let Vn,Qn;let fillPool=r=>{if(!Vn||Vn.length<r){Vn=Buffer.allocUnsafe(r*Un);(0,Bn.randomFillSync)(Vn);Qn=0}else if(Qn+r>Vn.length){(0,Bn.randomFillSync)(Vn);Qn=0}Qn+=r};let random=r=>{fillPool(r-=0);return Vn.subarray(Qn-r,Qn)};let customRandom=(r,i,c)=>{let u=(2<<31-Math.clz32(r.length-1|1))-1;let h=Math.ceil(1.6*u*i/r.length);return(d=i)=>{let p="";while(true){let i=c(h);let g=h;while(g--){p+=r[i[g]&u]||"";if(p.length===d)return p}}}};let customAlphabet=(r,i=21)=>customRandom(r,i,random);let nanoid=(r=21)=>{fillPool(r-=0);let i="";for(let c=Qn-r;c<Qn;c++){i+=urlAlphabet[Vn[c]&63]}return i};function genRandomLowercaseString(r=12){return customAlphabet("abcdefghijklmnopqrstuvwxyz",r)()}var Hn=undefined&&undefined.__awaiter||function(r,i,c,u){function adopt(r){return r instanceof c?r:new c((function(i){i(r)}))}return new(c||(c=Promise))((function(c,h){function fulfilled(r){try{step(u.next(r))}catch(r){h(r)}}function rejected(r){try{step(u["throw"](r))}catch(r){h(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())}))};function getGitWorkDIR(){const r=process.env.GIT_WORK_DIR_NAME||".gitWorkDir";return $().resolve(process.cwd(),r)}function initGitDir(){const r=getGitWorkDIR();if(!N().existsSync(r)){N().mkdirSync(r)}return r}function initGitInstance(){const r={baseDir:initGitDir(),binary:"git",maxConcurrentProcesses:6,trimmed:false};return Fn(r)}function genAuthorizedRepoPath(r,i,c){const u=new URL(r);const{protocol:h,host:d,pathname:p}=u;if(!i)return r;return`${h}//${[i.username,c].join(":")}@${d}${p}`}function cloneRemoteRepoToLocal(r,i,c){return Hn(this,void 0,void 0,(function*(){const u=genRandomLowercaseString();try{const h=process.env.ACCESS_TOKEN;yield r.clone(genAuthorizedRepoPath(i.repoPath,c,h),u,[`-b${i.branch}`,"--depth=1"]);return u}catch(r){return Promise.reject(r)}}))}const Gn=JSON.parse('{"version":"3","services":{},"networks":{"default":{"name":"traefik_default","external":true}}}');var Kn=c(96065);function safeCD(...r){(0,I.cd)(...r);if((0,I.error)()){throw new Error("cd fail")}}function rmDockerComposeContainer(r){return(0,I.exec)(`docker-compose --project-name ${r} down`)}var Wn=undefined&&undefined.__awaiter||function(r,i,c,u){function adopt(r){return r instanceof c?r:new c((function(i){i(r)}))}return new(c||(c=Promise))((function(c,h){function fulfilled(r){try{step(u.next(r))}catch(r){h(r)}}function rejected(r){try{step(u["throw"](r))}catch(r){h(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())}))};class Core{constructor(){this.git=initGitInstance();this.db=initDBInstance();initDB(this.db);this.Projects=()=>this.db("projects")}clone(r){return Wn(this,void 0,void 0,(function*(){const{project:i,user:c}=r;let u;try{console.error("Project clone start");u=yield cloneRemoteRepoToLocal(this.git,i,c);console.error("Project clone success")}catch(r){console.error("Project clone error");return}const h=yield this.Projects().insert(Object.assign(Object.assign({},i),{dirName:u}));return h}))}genDockerComposeConfig(r,i){const c=Object.assign({},Gn);c.services[r]={image:r,container_name:r,build:{context:".",dockerfile:"Dockerfile"},environment:{DOMAIN_NAME:process.env.DOMAIN_NAME},restart:"always",labels:["traefik.enable=true",`traefik.http.routers.${r}.rule=Host(\`${i}.\${DOMAIN_NAME}\`)`,`traefik.http.routers.${r}.service=${r}`,`traefik.http.services.${r}.loadbalancer.server.port=80`]};return c}genDomainName(r){return Wn(this,void 0,void 0,(function*(){switch(r.stage){case"uat":{const i=yield this.git.branch();const c=i.branches[i.current];return`${r.subdomainStatic}-${c.name.replace("/","-")}-${c.commit}-${genRandomLowercaseString(3)}`.toLowerCase()}case"prod":return r.subdomainStatic.toLowerCase();default:return""}}))}run(r){return Wn(this,void 0,void 0,(function*(){const i=yield this.Projects().where("id",r).first();if(!i)throw new Error("project not found");console.log("project info",i);console.log(`current work dir: ${(0,I.pwd)().toString()}`);const c=$().join(getGitWorkDIR(),i.dirName,i.subWorkDir||"");try{safeCD(c)}catch(r){throw new Error("项目的 subWorkDir 有误")}this.git.cwd(c);console.log(`current work dir: ${(0,I.pwd)().toString()}`);const u=genRandomLowercaseString();let h;switch(i.runMode){case"dockerfile":{if(!N().existsSync("Dockerfile"))throw new Error("Dockerfile 文件不存在");const r=`${i.appName}-${u}`;console.log("serviceName",r);const c=yield this.genDomainName(i);console.log("domainName",c);if(i.stage==="prod"){if(rmDockerComposeContainer(c).code!==0){throw new Error("生产环境下删除旧的容器失败")}}const d=this.genDockerComposeConfig(r,c);N().writeFileSync("./docker-compose.yaml",(0,Kn.Pz)(d));if((0,I.exec)(`docker-compose --project-name ${c} up --build -d`).code!==0){throw new Error("Failed to start app on dockerfile mode")}h=`${c}.${process.env.DOMAIN_NAME}`;break}case"pure":{break}default:break}return{actualDomain:h}}))}}const zn=Core;P().config();const Jn=zn;var Yn=undefined&&undefined.__awaiter||function(r,i,c,u){function adopt(r){return r instanceof c?r:new c((function(i){i(r)}))}return new(c||(c=Promise))((function(c,h){function fulfilled(r){try{step(u.next(r))}catch(r){h(r)}}function rejected(r){try{step(u["throw"](r))}catch(r){h(r)}}function step(r){r.done?c(r.value):adopt(r.value).then(fulfilled,rejected)}step((u=u.apply(r,i||[])).next())}))};const Xn=new(k());function validateConfigFile(r){const i={type:"object",properties:{project:{type:"object",properties:{repoPath:{type:"string"},branch:{type:"string"},subdomainStatic:{type:"string"},subWorkDir:{type:"string"},appName:{type:"string"},buildPath:{type:"string"},stage:{type:"string"},runMode:{type:"string"}},required:["repoPath","subdomainStatic","subWorkDir","appName","buildPath","stage","runMode"],additionalProperties:false},user:{type:"object"}},required:["project"],additionalProperties:false};return Xn.compile(i)(r)}h.name("euclid-cli").version("0.0.1").requiredOption("-f, --file <file>","build config file").addOption(new E("-t, --type <type>","config file type").choices(["json","yaml"]).default("json"));h.parse();const Zn=h.opts();console.log(Zn);const{type:es,file:ts}=Zn;const rs=(0,O.resolve)(ts);(0,T.readFile)(rs,"utf8",((r,i)=>Yn(void 0,void 0,void 0,(function*(){if(r)throw new Error("Could not read config file");const c=JSON.parse(i);const u=validateConfigFile(c);if(!u)throw new Error("Invalid config file");const h=new Jn;const d=yield h.clone({project:c.project,user:c.user});if(d){const r=yield h.run(d[0]);console.log(r);process.exit(0)}}))))},58583:module=>{module.exports=eval("require")("mysql")},886:module=>{module.exports=eval("require")("mysql2")},17415:module=>{module.exports=eval("require")("oracledb")},65021:module=>{module.exports=eval("require")("pg")},9276:module=>{module.exports=eval("require")("pg-query-stream")},97010:module=>{module.exports=eval("require")("sqlite3")},49124:module=>{module.exports=eval("require")("tedious")},15252:r=>{function webpackEmptyAsyncContext(r){return Promise.resolve().then((()=>{var i=new Error("Cannot find module '"+r+"'");i.code="MODULE_NOT_FOUND";throw i}))}webpackEmptyAsyncContext.keys=()=>[];webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=15252;r.exports=webpackEmptyAsyncContext},39491:r=>{"use strict";r.exports=require("assert")},32081:r=>{"use strict";r.exports=require("child_process")},6113:r=>{"use strict";r.exports=require("crypto")},82361:r=>{"use strict";r.exports=require("events")},57147:r=>{"use strict";r.exports=require("fs")},22037:r=>{"use strict";r.exports=require("os")},71017:r=>{"use strict";r.exports=require("path")},77282:r=>{"use strict";r.exports=require("process")},12781:r=>{"use strict";r.exports=require("stream")},39512:r=>{"use strict";r.exports=require("timers")},76224:r=>{"use strict";r.exports=require("tty")},57310:r=>{"use strict";r.exports=require("url")},73837:r=>{"use strict";r.exports=require("util")},10345:(r,i,c)=>{const{Argument:u}=c(54079);const{Command:h}=c(26505);const{CommanderError:d,InvalidArgumentError:p}=c(99027);const{Help:g}=c(79164);const{Option:y}=c(65205);i=r.exports=new h;i.program=i;i.Argument=u;i.Command=h;i.CommanderError=d;i.Help=g;i.InvalidArgumentError=p;i.InvalidOptionArgumentError=p;i.Option=y},54079:(r,i,c)=>{const{InvalidArgumentError:u}=c(99027);class Argument{constructor(r,i){this.description=i||"";this.variadic=false;this.parseArg=undefined;this.defaultValue=undefined;this.defaultValueDescription=undefined;this.argChoices=undefined;switch(r[0]){case"<":this.required=true;this._name=r.slice(1,-1);break;case"[":this.required=false;this._name=r.slice(1,-1);break;default:this.required=true;this._name=r;break}if(this._name.length>3&&this._name.slice(-3)==="..."){this.variadic=true;this._name=this._name.slice(0,-3)}}name(){return this._name}_concatValue(r,i){if(i===this.defaultValue||!Array.isArray(i)){return[r]}return i.concat(r)}default(r,i){this.defaultValue=r;this.defaultValueDescription=i;return this}argParser(r){this.parseArg=r;return this}choices(r){this.argChoices=r.slice();this.parseArg=(r,i)=>{if(!this.argChoices.includes(r)){throw new u(`Allowed choices are ${this.argChoices.join(", ")}.`)}if(this.variadic){return this._concatValue(r,i)}return r};return this}argRequired(){this.required=true;return this}argOptional(){this.required=false;return this}}function humanReadableArgName(r){const i=r.name()+(r.variadic===true?"...":"");return r.required?"<"+i+">":"["+i+"]"}i.Argument=Argument;i.humanReadableArgName=humanReadableArgName},26505:(r,i,c)=>{const u=c(82361).EventEmitter;const h=c(32081);const d=c(71017);const p=c(57147);const g=c(77282);const{Argument:y,humanReadableArgName:b}=c(54079);const{CommanderError:v}=c(99027);const{Help:w}=c(79164);const{Option:C,splitOptionFlags:E,DualOptions:x}=c(65205);const{suggestSimilar:S}=c(211);class Command extends u{constructor(r){super();this.commands=[];this.options=[];this.parent=null;this._allowUnknownOption=false;this._allowExcessArguments=true;this._args=[];this.args=[];this.rawArgs=[];this.processedArgs=[];this._scriptPath=null;this._name=r||"";this._optionValues={};this._optionValueSources={};this._storeOptionsAsProperties=false;this._actionHandler=null;this._executableHandler=false;this._executableFile=null;this._executableDir=null;this._defaultCommandName=null;this._exitCallback=null;this._aliases=[];this._combineFlagAndOptionalValue=true;this._description="";this._summary="";this._argsDescription=undefined;this._enablePositionalOptions=false;this._passThroughOptions=false;this._lifeCycleHooks={};this._showHelpAfterError=false;this._showSuggestionAfterError=true;this._outputConfiguration={writeOut:r=>g.stdout.write(r),writeErr:r=>g.stderr.write(r),getOutHelpWidth:()=>g.stdout.isTTY?g.stdout.columns:undefined,getErrHelpWidth:()=>g.stderr.isTTY?g.stderr.columns:undefined,outputError:(r,i)=>i(r)};this._hidden=false;this._hasHelpOption=true;this._helpFlags="-h, --help";this._helpDescription="display help for command";this._helpShortFlag="-h";this._helpLongFlag="--help";this._addImplicitHelpCommand=undefined;this._helpCommandName="help";this._helpCommandnameAndArgs="help [command]";this._helpCommandDescription="display help for command";this._helpConfiguration={}}copyInheritedSettings(r){this._outputConfiguration=r._outputConfiguration;this._hasHelpOption=r._hasHelpOption;this._helpFlags=r._helpFlags;this._helpDescription=r._helpDescription;this._helpShortFlag=r._helpShortFlag;this._helpLongFlag=r._helpLongFlag;this._helpCommandName=r._helpCommandName;this._helpCommandnameAndArgs=r._helpCommandnameAndArgs;this._helpCommandDescription=r._helpCommandDescription;this._helpConfiguration=r._helpConfiguration;this._exitCallback=r._exitCallback;this._storeOptionsAsProperties=r._storeOptionsAsProperties;this._combineFlagAndOptionalValue=r._combineFlagAndOptionalValue;this._allowExcessArguments=r._allowExcessArguments;this._enablePositionalOptions=r._enablePositionalOptions;this._showHelpAfterError=r._showHelpAfterError;this._showSuggestionAfterError=r._showSuggestionAfterError;return this}command(r,i,c){let u=i;let h=c;if(typeof u==="object"&&u!==null){h=u;u=null}h=h||{};const[,d,p]=r.match(/([^ ]+) *(.*)/);const g=this.createCommand(d);if(u){g.description(u);g._executableHandler=true}if(h.isDefault)this._defaultCommandName=g._name;g._hidden=!!(h.noHelp||h.hidden);g._executableFile=h.executableFile||null;if(p)g.arguments(p);this.commands.push(g);g.parent=this;g.copyInheritedSettings(this);if(u)return this;return g}createCommand(r){return new Command(r)}createHelp(){return Object.assign(new w,this.configureHelp())}configureHelp(r){if(r===undefined)return this._helpConfiguration;this._helpConfiguration=r;return this}configureOutput(r){if(r===undefined)return this._outputConfiguration;Object.assign(this._outputConfiguration,r);return this}showHelpAfterError(r=true){if(typeof r!=="string")r=!!r;this._showHelpAfterError=r;return this}showSuggestionAfterError(r=true){this._showSuggestionAfterError=!!r;return this}addCommand(r,i){if(!r._name){throw new Error(`Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()`)}i=i||{};if(i.isDefault)this._defaultCommandName=r._name;if(i.noHelp||i.hidden)r._hidden=true;this.commands.push(r);r.parent=this;return this}createArgument(r,i){return new y(r,i)}argument(r,i,c,u){const h=this.createArgument(r,i);if(typeof c==="function"){h.default(u).argParser(c)}else{h.default(c)}this.addArgument(h);return this}arguments(r){r.split(/ +/).forEach((r=>{this.argument(r)}));return this}addArgument(r){const i=this._args.slice(-1)[0];if(i&&i.variadic){throw new Error(`only the last argument can be variadic '${i.name()}'`)}if(r.required&&r.defaultValue!==undefined&&r.parseArg===undefined){throw new Error(`a default value for a required argument is never used: '${r.name()}'`)}this._args.push(r);return this}addHelpCommand(r,i){if(r===false){this._addImplicitHelpCommand=false}else{this._addImplicitHelpCommand=true;if(typeof r==="string"){this._helpCommandName=r.split(" ")[0];this._helpCommandnameAndArgs=r}this._helpCommandDescription=i||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===undefined){return this.commands.length&&!this._actionHandler&&!this._findCommand("help")}return this._addImplicitHelpCommand}hook(r,i){const c=["preSubcommand","preAction","postAction"];if(!c.includes(r)){throw new Error(`Unexpected value for event passed to hook : '${r}'.\nExpecting one of '${c.join("', '")}'`)}if(this._lifeCycleHooks[r]){this._lifeCycleHooks[r].push(i)}else{this._lifeCycleHooks[r]=[i]}return this}exitOverride(r){if(r){this._exitCallback=r}else{this._exitCallback=r=>{if(r.code!=="commander.executeSubCommandAsync"){throw r}else{}}}return this}_exit(r,i,c){if(this._exitCallback){this._exitCallback(new v(r,i,c))}g.exit(r)}action(r){const listener=i=>{const c=this._args.length;const u=i.slice(0,c);if(this._storeOptionsAsProperties){u[c]=this}else{u[c]=this.opts()}u.push(this);return r.apply(this,u)};this._actionHandler=listener;return this}createOption(r,i){return new C(r,i)}addOption(r){const i=r.name();const c=r.attributeName();if(r.negate){const i=r.long.replace(/^--no-/,"--");if(!this._findOption(i)){this.setOptionValueWithSource(c,r.defaultValue===undefined?true:r.defaultValue,"default")}}else if(r.defaultValue!==undefined){this.setOptionValueWithSource(c,r.defaultValue,"default")}this.options.push(r);const handleOptionValue=(i,u,h)=>{if(i==null&&r.presetArg!==undefined){i=r.presetArg}const d=this.getOptionValue(c);if(i!==null&&r.parseArg){try{i=r.parseArg(i,d)}catch(r){if(r.code==="commander.invalidArgument"){const i=`${u} ${r.message}`;this.error(i,{exitCode:r.exitCode,code:r.code})}throw r}}else if(i!==null&&r.variadic){i=r._concatValue(i,d)}if(i==null){if(r.negate){i=false}else if(r.isBoolean()||r.optional){i=true}else{i=""}}this.setOptionValueWithSource(c,i,h)};this.on("option:"+i,(i=>{const c=`error: option '${r.flags}' argument '${i}' is invalid.`;handleOptionValue(i,c,"cli")}));if(r.envVar){this.on("optionEnv:"+i,(i=>{const c=`error: option '${r.flags}' value '${i}' from env '${r.envVar}' is invalid.`;handleOptionValue(i,c,"env")}))}return this}_optionEx(r,i,c,u,h){if(typeof i==="object"&&i instanceof C){throw new Error("To add an Option object use addOption() instead of option() or requiredOption()")}const d=this.createOption(i,c);d.makeOptionMandatory(!!r.mandatory);if(typeof u==="function"){d.default(h).argParser(u)}else if(u instanceof RegExp){const r=u;u=(i,c)=>{const u=r.exec(i);return u?u[0]:c};d.default(h).argParser(u)}else{d.default(u)}return this.addOption(d)}option(r,i,c,u){return this._optionEx({},r,i,c,u)}requiredOption(r,i,c,u){return this._optionEx({mandatory:true},r,i,c,u)}combineFlagAndOptionalValue(r=true){this._combineFlagAndOptionalValue=!!r;return this}allowUnknownOption(r=true){this._allowUnknownOption=!!r;return this}allowExcessArguments(r=true){this._allowExcessArguments=!!r;return this}enablePositionalOptions(r=true){this._enablePositionalOptions=!!r;return this}passThroughOptions(r=true){this._passThroughOptions=!!r;if(!!this.parent&&r&&!this.parent._enablePositionalOptions){throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)")}return this}storeOptionsAsProperties(r=true){this._storeOptionsAsProperties=!!r;if(this.options.length){throw new Error("call .storeOptionsAsProperties() before adding options")}return this}getOptionValue(r){if(this._storeOptionsAsProperties){return this[r]}return this._optionValues[r]}setOptionValue(r,i){return this.setOptionValueWithSource(r,i,undefined)}setOptionValueWithSource(r,i,c){if(this._storeOptionsAsProperties){this[r]=i}else{this._optionValues[r]=i}this._optionValueSources[r]=c;return this}getOptionValueSource(r){return this._optionValueSources[r]}_prepareUserArgs(r,i){if(r!==undefined&&!Array.isArray(r)){throw new Error("first parameter to parse must be array or undefined")}i=i||{};if(r===undefined){r=g.argv;if(g.versions&&g.versions.electron){i.from="electron"}}this.rawArgs=r.slice();let c;switch(i.from){case undefined:case"node":this._scriptPath=r[1];c=r.slice(2);break;case"electron":if(g.defaultApp){this._scriptPath=r[1];c=r.slice(2)}else{c=r.slice(1)}break;case"user":c=r.slice(0);break;default:throw new Error(`unexpected parse option { from: '${i.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);this._name=this._name||"program";return c}parse(r,i){const c=this._prepareUserArgs(r,i);this._parseCommand([],c);return this}async parseAsync(r,i){const c=this._prepareUserArgs(r,i);await this._parseCommand([],c);return this}_executeSubCommand(r,i){i=i.slice();let c=false;const u=[".js",".ts",".tsx",".mjs",".cjs"];function findFile(r,i){const c=d.resolve(r,i);if(p.existsSync(c))return c;if(u.includes(d.extname(i)))return undefined;const h=u.find((r=>p.existsSync(`${c}${r}`)));if(h)return`${c}${h}`;return undefined}this._checkForMissingMandatoryOptions();this._checkForConflictingOptions();let y=r._executableFile||`${this._name}-${r._name}`;let b=this._executableDir||"";if(this._scriptPath){let r;try{r=p.realpathSync(this._scriptPath)}catch(i){r=this._scriptPath}b=d.resolve(d.dirname(r),b)}if(b){let i=findFile(b,y);if(!i&&!r._executableFile&&this._scriptPath){const c=d.basename(this._scriptPath,d.extname(this._scriptPath));if(c!==this._name){i=findFile(b,`${c}-${r._name}`)}}y=i||y}c=u.includes(d.extname(y));let w;if(g.platform!=="win32"){if(c){i.unshift(y);i=incrementNodeInspectorPort(g.execArgv).concat(i);w=h.spawn(g.argv[0],i,{stdio:"inherit"})}else{w=h.spawn(y,i,{stdio:"inherit"})}}else{i.unshift(y);i=incrementNodeInspectorPort(g.execArgv).concat(i);w=h.spawn(g.execPath,i,{stdio:"inherit"})}if(!w.killed){const r=["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"];r.forEach((r=>{g.on(r,(()=>{if(w.killed===false&&w.exitCode===null){w.kill(r)}}))}))}const C=this._exitCallback;if(!C){w.on("close",g.exit.bind(g))}else{w.on("close",(()=>{C(new v(g.exitCode||0,"commander.executeSubCommandAsync","(close)"))}))}w.on("error",(i=>{if(i.code==="ENOENT"){const i=b?`searched for local subcommand relative to directory '${b}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory";const c=`'${y}' does not exist\n - if '${r._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${i}`;throw new Error(c)}else if(i.code==="EACCES"){throw new Error(`'${y}' not executable`)}if(!C){g.exit(1)}else{const r=new v(1,"commander.executeSubCommandAsync","(error)");r.nestedError=i;C(r)}}));this.runningCommand=w}_dispatchSubcommand(r,i,c){const u=this._findCommand(r);if(!u)this.help({error:true});let h;h=this._chainOrCallSubCommandHook(h,u,"preSubcommand");h=this._chainOrCall(h,(()=>{if(u._executableHandler){this._executeSubCommand(u,i.concat(c))}else{return u._parseCommand(i,c)}}));return h}_checkNumberOfArguments(){this._args.forEach(((r,i)=>{if(r.required&&this.args[i]==null){this.missingArgument(r.name())}}));if(this._args.length>0&&this._args[this._args.length-1].variadic){return}if(this.args.length>this._args.length){this._excessArguments(this.args)}}_processArguments(){const myParseArg=(r,i,c)=>{let u=i;if(i!==null&&r.parseArg){try{u=r.parseArg(i,c)}catch(c){if(c.code==="commander.invalidArgument"){const u=`error: command-argument value '${i}' is invalid for argument '${r.name()}'. ${c.message}`;this.error(u,{exitCode:c.exitCode,code:c.code})}throw c}}return u};this._checkNumberOfArguments();const r=[];this._args.forEach(((i,c)=>{let u=i.defaultValue;if(i.variadic){if(c<this.args.length){u=this.args.slice(c);if(i.parseArg){u=u.reduce(((r,c)=>myParseArg(i,c,r)),i.defaultValue)}}else if(u===undefined){u=[]}}else if(c<this.args.length){u=this.args[c];if(i.parseArg){u=myParseArg(i,u,i.defaultValue)}}r[c]=u}));this.processedArgs=r}_chainOrCall(r,i){if(r&&r.then&&typeof r.then==="function"){return r.then((()=>i()))}return i()}_chainOrCallHooks(r,i){let c=r;const u=[];getCommandAndParents(this).reverse().filter((r=>r._lifeCycleHooks[i]!==undefined)).forEach((r=>{r._lifeCycleHooks[i].forEach((i=>{u.push({hookedCommand:r,callback:i})}))}));if(i==="postAction"){u.reverse()}u.forEach((r=>{c=this._chainOrCall(c,(()=>r.callback(r.hookedCommand,this)))}));return c}_chainOrCallSubCommandHook(r,i,c){let u=r;if(this._lifeCycleHooks[c]!==undefined){this._lifeCycleHooks[c].forEach((r=>{u=this._chainOrCall(u,(()=>r(this,i)))}))}return u}_parseCommand(r,i){const c=this.parseOptions(i);this._parseOptionsEnv();this._parseOptionsImplied();r=r.concat(c.operands);i=c.unknown;this.args=r.concat(i);if(r&&this._findCommand(r[0])){return this._dispatchSubcommand(r[0],r.slice(1),i)}if(this._hasImplicitHelpCommand()&&r[0]===this._helpCommandName){if(r.length===1){this.help()}return this._dispatchSubcommand(r[1],[],[this._helpLongFlag])}if(this._defaultCommandName){outputHelpIfRequested(this,i);return this._dispatchSubcommand(this._defaultCommandName,r,i)}if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName){this.help({error:true})}outputHelpIfRequested(this,c.unknown);this._checkForMissingMandatoryOptions();this._checkForConflictingOptions();const checkForUnknownOptions=()=>{if(c.unknown.length>0){this.unknownOption(c.unknown[0])}};const u=`command:${this.name()}`;if(this._actionHandler){checkForUnknownOptions();this._processArguments();let c;c=this._chainOrCallHooks(c,"preAction");c=this._chainOrCall(c,(()=>this._actionHandler(this.processedArgs)));if(this.parent){c=this._chainOrCall(c,(()=>{this.parent.emit(u,r,i)}))}c=this._chainOrCallHooks(c,"postAction");return c}if(this.parent&&this.parent.listenerCount(u)){checkForUnknownOptions();this._processArguments();this.parent.emit(u,r,i)}else if(r.length){if(this._findCommand("*")){return this._dispatchSubcommand("*",r,i)}if(this.listenerCount("command:*")){this.emit("command:*",r,i)}else if(this.commands.length){this.unknownCommand()}else{checkForUnknownOptions();this._processArguments()}}else if(this.commands.length){checkForUnknownOptions();this.help({error:true})}else{checkForUnknownOptions();this._processArguments()}}_findCommand(r){if(!r)return undefined;return this.commands.find((i=>i._name===r||i._aliases.includes(r)))}_findOption(r){return this.options.find((i=>i.is(r)))}_checkForMissingMandatoryOptions(){for(let r=this;r;r=r.parent){r.options.forEach((i=>{if(i.mandatory&&r.getOptionValue(i.attributeName())===undefined){r.missingMandatoryOptionValue(i)}}))}}_checkForConflictingLocalOptions(){const r=this.options.filter((r=>{const i=r.attributeName();if(this.getOptionValue(i)===undefined){return false}return this.getOptionValueSource(i)!=="default"}));const i=r.filter((r=>r.conflictsWith.length>0));i.forEach((i=>{const c=r.find((r=>i.conflictsWith.includes(r.attributeName())));if(c){this._conflictingOption(i,c)}}))}_checkForConflictingOptions(){for(let r=this;r;r=r.parent){r._checkForConflictingLocalOptions()}}parseOptions(r){const i=[];const c=[];let u=i;const h=r.slice();function maybeOption(r){return r.length>1&&r[0]==="-"}let d=null;while(h.length){const r=h.shift();if(r==="--"){if(u===c)u.push(r);u.push(...h);break}if(d&&!maybeOption(r)){this.emit(`option:${d.name()}`,r);continue}d=null;if(maybeOption(r)){const i=this._findOption(r);if(i){if(i.required){const r=h.shift();if(r===undefined)this.optionMissingArgument(i);this.emit(`option:${i.name()}`,r)}else if(i.optional){let r=null;if(h.length>0&&!maybeOption(h[0])){r=h.shift()}this.emit(`option:${i.name()}`,r)}else{this.emit(`option:${i.name()}`)}d=i.variadic?i:null;continue}}if(r.length>2&&r[0]==="-"&&r[1]!=="-"){const i=this._findOption(`-${r[1]}`);if(i){if(i.required||i.optional&&this._combineFlagAndOptionalValue){this.emit(`option:${i.name()}`,r.slice(2))}else{this.emit(`option:${i.name()}`);h.unshift(`-${r.slice(2)}`)}continue}}if(/^--[^=]+=/.test(r)){const i=r.indexOf("=");const c=this._findOption(r.slice(0,i));if(c&&(c.required||c.optional)){this.emit(`option:${c.name()}`,r.slice(i+1));continue}}if(maybeOption(r)){u=c}if((this._enablePositionalOptions||this._passThroughOptions)&&i.length===0&&c.length===0){if(this._findCommand(r)){i.push(r);if(h.length>0)c.push(...h);break}else if(r===this._helpCommandName&&this._hasImplicitHelpCommand()){i.push(r);if(h.length>0)i.push(...h);break}else if(this._defaultCommandName){c.push(r);if(h.length>0)c.push(...h);break}}if(this._passThroughOptions){u.push(r);if(h.length>0)u.push(...h);break}u.push(r)}return{operands:i,unknown:c}}opts(){if(this._storeOptionsAsProperties){const r={};const i=this.options.length;for(let c=0;c<i;c++){const i=this.options[c].attributeName();r[i]=i===this._versionOptionName?this._version:this[i]}return r}return this._optionValues}optsWithGlobals(){return getCommandAndParents(this).reduce(((r,i)=>Object.assign(r,i.opts())),{})}error(r,i){this._outputConfiguration.outputError(`${r}\n`,this._outputConfiguration.writeErr);if(typeof this._showHelpAfterError==="string"){this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`)}else if(this._showHelpAfterError){this._outputConfiguration.writeErr("\n");this.outputHelp({error:true})}const c=i||{};const u=c.exitCode||1;const h=c.code||"commander.error";this._exit(u,h,r)}_parseOptionsEnv(){this.options.forEach((r=>{if(r.envVar&&r.envVar in g.env){const i=r.attributeName();if(this.getOptionValue(i)===undefined||["default","config","env"].includes(this.getOptionValueSource(i))){if(r.required||r.optional){this.emit(`optionEnv:${r.name()}`,g.env[r.envVar])}else{this.emit(`optionEnv:${r.name()}`)}}}}))}_parseOptionsImplied(){const r=new x(this.options);const hasCustomOptionValue=r=>this.getOptionValue(r)!==undefined&&!["default","implied"].includes(this.getOptionValueSource(r));this.options.filter((i=>i.implied!==undefined&&hasCustomOptionValue(i.attributeName())&&r.valueFromOption(this.getOptionValue(i.attributeName()),i))).forEach((r=>{Object.keys(r.implied).filter((r=>!hasCustomOptionValue(r))).forEach((i=>{this.setOptionValueWithSource(i,r.implied[i],"implied")}))}))}missingArgument(r){const i=`error: missing required argument '${r}'`;this.error(i,{code:"commander.missingArgument"})}optionMissingArgument(r){const i=`error: option '${r.flags}' argument missing`;this.error(i,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(r){const i=`error: required option '${r.flags}' not specified`;this.error(i,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(r,i){const findBestOptionFromValue=r=>{const i=r.attributeName();const c=this.getOptionValue(i);const u=this.options.find((r=>r.negate&&i===r.attributeName()));const h=this.options.find((r=>!r.negate&&i===r.attributeName()));if(u&&(u.presetArg===undefined&&c===false||u.presetArg!==undefined&&c===u.presetArg)){return u}return h||r};const getErrorMessage=r=>{const i=findBestOptionFromValue(r);const c=i.attributeName();const u=this.getOptionValueSource(c);if(u==="env"){return`environment variable '${i.envVar}'`}return`option '${i.flags}'`};const c=`error: ${getErrorMessage(r)} cannot be used with ${getErrorMessage(i)}`;this.error(c,{code:"commander.conflictingOption"})}unknownOption(r){if(this._allowUnknownOption)return;let i="";if(r.startsWith("--")&&this._showSuggestionAfterError){let c=[];let u=this;do{const r=u.createHelp().visibleOptions(u).filter((r=>r.long)).map((r=>r.long));c=c.concat(r);u=u.parent}while(u&&!u._enablePositionalOptions);i=S(r,c)}const c=`error: unknown option '${r}'${i}`;this.error(c,{code:"commander.unknownOption"})}_excessArguments(r){if(this._allowExcessArguments)return;const i=this._args.length;const c=i===1?"":"s";const u=this.parent?` for '${this.name()}'`:"";const h=`error: too many arguments${u}. Expected ${i} argument${c} but got ${r.length}.`;this.error(h,{code:"commander.excessArguments"})}unknownCommand(){const r=this.args[0];let i="";if(this._showSuggestionAfterError){const c=[];this.createHelp().visibleCommands(this).forEach((r=>{c.push(r.name());if(r.alias())c.push(r.alias())}));i=S(r,c)}const c=`error: unknown command '${r}'${i}`;this.error(c,{code:"commander.unknownCommand"})}version(r,i,c){if(r===undefined)return this._version;this._version=r;i=i||"-V, --version";c=c||"output the version number";const u=this.createOption(i,c);this._versionOptionName=u.attributeName();this.options.push(u);this.on("option:"+u.name(),(()=>{this._outputConfiguration.writeOut(`${r}\n`);this._exit(0,"commander.version",r)}));return this}description(r,i){if(r===undefined&&i===undefined)return this._description;this._description=r;if(i){this._argsDescription=i}return this}summary(r){if(r===undefined)return this._summary;this._summary=r;return this}alias(r){if(r===undefined)return this._aliases[0];let i=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler){i=this.commands[this.commands.length-1]}if(r===i._name)throw new Error("Command alias can't be the same as its name");i._aliases.push(r);return this}aliases(r){if(r===undefined)return this._aliases;r.forEach((r=>this.alias(r)));return this}usage(r){if(r===undefined){if(this._usage)return this._usage;const r=this._args.map((r=>b(r)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?r:[]).join(" ")}this._usage=r;return this}name(r){if(r===undefined)return this._name;this._name=r;return this}nameFromFilename(r){this._name=d.basename(r,d.extname(r));return this}executableDir(r){if(r===undefined)return this._executableDir;this._executableDir=r;return this}helpInformation(r){const i=this.createHelp();if(i.helpWidth===undefined){i.helpWidth=r&&r.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()}return i.formatHelp(this,i)}_getHelpContext(r){r=r||{};const i={error:!!r.error};let c;if(i.error){c=r=>this._outputConfiguration.writeErr(r)}else{c=r=>this._outputConfiguration.writeOut(r)}i.write=r.write||c;i.command=this;return i}outputHelp(r){let i;if(typeof r==="function"){i=r;r=undefined}const c=this._getHelpContext(r);getCommandAndParents(this).reverse().forEach((r=>r.emit("beforeAllHelp",c)));this.emit("beforeHelp",c);let u=this.helpInformation(c);if(i){u=i(u);if(typeof u!=="string"&&!Buffer.isBuffer(u)){throw new Error("outputHelp callback must return a string or a Buffer")}}c.write(u);this.emit(this._helpLongFlag);this.emit("afterHelp",c);getCommandAndParents(this).forEach((r=>r.emit("afterAllHelp",c)))}helpOption(r,i){if(typeof r==="boolean"){this._hasHelpOption=r;return this}this._helpFlags=r||this._helpFlags;this._helpDescription=i||this._helpDescription;const c=E(this._helpFlags);this._helpShortFlag=c.shortFlag;this._helpLongFlag=c.longFlag;return this}help(r){this.outputHelp(r);let i=g.exitCode||0;if(i===0&&r&&typeof r!=="function"&&r.error){i=1}this._exit(i,"commander.help","(outputHelp)")}addHelpText(r,i){const c=["beforeAll","before","after","afterAll"];if(!c.includes(r)){throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${c.join("', '")}'`)}const u=`${r}Help`;this.on(u,(r=>{let c;if(typeof i==="function"){c=i({error:r.error,command:r.command})}else{c=i}if(c){r.write(`${c}\n`)}}));return this}}function outputHelpIfRequested(r,i){const c=r._hasHelpOption&&i.find((i=>i===r._helpLongFlag||i===r._helpShortFlag));if(c){r.outputHelp();r._exit(0,"commander.helpDisplayed","(outputHelp)")}}function incrementNodeInspectorPort(r){return r.map((r=>{if(!r.startsWith("--inspect")){return r}let i;let c="127.0.0.1";let u="9229";let h;if((h=r.match(/^(--inspect(-brk)?)$/))!==null){i=h[1]}else if((h=r.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null){i=h[1];if(/^\d+$/.test(h[3])){u=h[3]}else{c=h[3]}}else if((h=r.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null){i=h[1];c=h[3];u=h[4]}if(i&&u!=="0"){return`${i}=${c}:${parseInt(u)+1}`}return r}))}function getCommandAndParents(r){const i=[];for(let c=r;c;c=c.parent){i.push(c)}return i}i.Command=Command},99027:(r,i)=>{class CommanderError extends Error{constructor(r,i,c){super(c);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.code=i;this.exitCode=r;this.nestedError=undefined}}class InvalidArgumentError extends CommanderError{constructor(r){super(1,"commander.invalidArgument",r);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name}}i.CommanderError=CommanderError;i.InvalidArgumentError=InvalidArgumentError},79164:(r,i,c)=>{const{humanReadableArgName:u}=c(54079);class Help{constructor(){this.helpWidth=undefined;this.sortSubcommands=false;this.sortOptions=false}visibleCommands(r){const i=r.commands.filter((r=>!r._hidden));if(r._hasImplicitHelpCommand()){const[,c,u]=r._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/);const h=r.createCommand(c).helpOption(false);h.description(r._helpCommandDescription);if(u)h.arguments(u);i.push(h)}if(this.sortSubcommands){i.sort(((r,i)=>r.name().localeCompare(i.name())))}return i}visibleOptions(r){const i=r.options.filter((r=>!r.hidden));const c=r._hasHelpOption&&r._helpShortFlag&&!r._findOption(r._helpShortFlag);const u=r._hasHelpOption&&!r._findOption(r._helpLongFlag);if(c||u){let h;if(!c){h=r.createOption(r._helpLongFlag,r._helpDescription)}else if(!u){h=r.createOption(r._helpShortFlag,r._helpDescription)}else{h=r.createOption(r._helpFlags,r._helpDescription)}i.push(h)}if(this.sortOptions){const getSortKey=r=>r.short?r.short.replace(/^-/,""):r.long.replace(/^--/,"");i.sort(((r,i)=>getSortKey(r).localeCompare(getSortKey(i))))}return i}visibleArguments(r){if(r._argsDescription){r._args.forEach((i=>{i.description=i.description||r._argsDescription[i.name()]||""}))}if(r._args.find((r=>r.description))){return r._args}return[]}subcommandTerm(r){const i=r._args.map((r=>u(r))).join(" ");return r._name+(r._aliases[0]?"|"+r._aliases[0]:"")+(r.options.length?" [options]":"")+(i?" "+i:"")}optionTerm(r){return r.flags}argumentTerm(r){return r.name()}longestSubcommandTermLength(r,i){return i.visibleCommands(r).reduce(((r,c)=>Math.max(r,i.subcommandTerm(c).length)),0)}longestOptionTermLength(r,i){return i.visibleOptions(r).reduce(((r,c)=>Math.max(r,i.optionTerm(c).length)),0)}longestArgumentTermLength(r,i){return i.visibleArguments(r).reduce(((r,c)=>Math.max(r,i.argumentTerm(c).length)),0)}commandUsage(r){let i=r._name;if(r._aliases[0]){i=i+"|"+r._aliases[0]}let c="";for(let i=r.parent;i;i=i.parent){c=i.name()+" "+c}return c+i+" "+r.usage()}commandDescription(r){return r.description()}subcommandDescription(r){return r.summary()||r.description()}optionDescription(r){const i=[];if(r.argChoices){i.push(`choices: ${r.argChoices.map((r=>JSON.stringify(r))).join(", ")}`)}if(r.defaultValue!==undefined){const c=r.required||r.optional||r.isBoolean()&&typeof r.defaultValue==="boolean";if(c){i.push(`default: ${r.defaultValueDescription||JSON.stringify(r.defaultValue)}`)}}if(r.presetArg!==undefined&&r.optional){i.push(`preset: ${JSON.stringify(r.presetArg)}`)}if(r.envVar!==undefined){i.push(`env: ${r.envVar}`)}if(i.length>0){return`${r.description} (${i.join(", ")})`}return r.description}argumentDescription(r){const i=[];if(r.argChoices){i.push(`choices: ${r.argChoices.map((r=>JSON.stringify(r))).join(", ")}`)}if(r.defaultValue!==undefined){i.push(`default: ${r.defaultValueDescription||JSON.stringify(r.defaultValue)}`)}if(i.length>0){const c=`(${i.join(", ")})`;if(r.description){return`${r.description} ${c}`}return c}return r.description}formatHelp(r,i){const c=i.padWidth(r,i);const u=i.helpWidth||80;const h=2;const d=2;function formatItem(r,p){if(p){const g=`${r.padEnd(c+d)}${p}`;return i.wrap(g,u-h,c+d)}return r}function formatList(r){return r.join("\n").replace(/^/gm," ".repeat(h))}let p=[`Usage: ${i.commandUsage(r)}`,""];const g=i.commandDescription(r);if(g.length>0){p=p.concat([g,""])}const y=i.visibleArguments(r).map((r=>formatItem(i.argumentTerm(r),i.argumentDescription(r))));if(y.length>0){p=p.concat(["Arguments:",formatList(y),""])}const b=i.visibleOptions(r).map((r=>formatItem(i.optionTerm(r),i.optionDescription(r))));if(b.length>0){p=p.concat(["Options:",formatList(b),""])}const v=i.visibleCommands(r).map((r=>formatItem(i.subcommandTerm(r),i.subcommandDescription(r))));if(v.length>0){p=p.concat(["Commands:",formatList(v),""])}return p.join("\n")}padWidth(r,i){return Math.max(i.longestOptionTermLength(r,i),i.longestSubcommandTermLength(r,i),i.longestArgumentTermLength(r,i))}wrap(r,i,c,u=40){if(r.match(/[\n]\s+/))return r;const h=i-c;if(h<u)return r;const d=r.slice(0,c);const p=r.slice(c);const g=" ".repeat(c);const y=new RegExp(".{1,"+(h-1)+"}([\\s​]|$)|[^\\s​]+?([\\s​]|$)","g");const b=p.match(y)||[];return d+b.map(((r,i)=>{if(r.slice(-1)==="\n"){r=r.slice(0,r.length-1)}return(i>0?g:"")+r.trimRight()})).join("\n")}}i.Help=Help},65205:(r,i,c)=>{const{InvalidArgumentError:u}=c(99027);class Option{constructor(r,i){this.flags=r;this.description=i||"";this.required=r.includes("<");this.optional=r.includes("[");this.variadic=/\w\.\.\.[>\]]$/.test(r);this.mandatory=false;const c=splitOptionFlags(r);this.short=c.shortFlag;this.long=c.longFlag;this.negate=false;if(this.long){this.negate=this.long.startsWith("--no-")}this.defaultValue=undefined;this.defaultValueDescription=undefined;this.presetArg=undefined;this.envVar=undefined;this.parseArg=undefined;this.hidden=false;this.argChoices=undefined;this.conflictsWith=[];this.implied=undefined}default(r,i){this.defaultValue=r;this.defaultValueDescription=i;return this}preset(r){this.presetArg=r;return this}conflicts(r){this.conflictsWith=this.conflictsWith.concat(r);return this}implies(r){this.implied=Object.assign(this.implied||{},r);return this}env(r){this.envVar=r;return this}argParser(r){this.parseArg=r;return this}makeOptionMandatory(r=true){this.mandatory=!!r;return this}hideHelp(r=true){this.hidden=!!r;return this}_concatValue(r,i){if(i===this.defaultValue||!Array.isArray(i)){return[r]}return i.concat(r)}choices(r){this.argChoices=r.slice();this.parseArg=(r,i)=>{if(!this.argChoices.includes(r)){throw new u(`Allowed choices are ${this.argChoices.join(", ")}.`)}if(this.variadic){return this._concatValue(r,i)}return r};return this}name(){if(this.long){return this.long.replace(/^--/,"")}return this.short.replace(/^-/,"")}attributeName(){return camelcase(this.name().replace(/^no-/,""))}is(r){return this.short===r||this.long===r}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class DualOptions{constructor(r){this.positiveOptions=new Map;this.negativeOptions=new Map;this.dualOptions=new Set;r.forEach((r=>{if(r.negate){this.negativeOptions.set(r.attributeName(),r)}else{this.positiveOptions.set(r.attributeName(),r)}}));this.negativeOptions.forEach(((r,i)=>{if(this.positiveOptions.has(i)){this.dualOptions.add(i)}}))}valueFromOption(r,i){const c=i.attributeName();if(!this.dualOptions.has(c))return true;const u=this.negativeOptions.get(c).presetArg;const h=u!==undefined?u:false;return i.negate===(h===r)}}function camelcase(r){return r.split("-").reduce(((r,i)=>r+i[0].toUpperCase()+i.slice(1)))}function splitOptionFlags(r){let i;let c;const u=r.split(/[ |,]+/);if(u.length>1&&!/^[[<]/.test(u[1]))i=u.shift();c=u.shift();if(!i&&/^-[^-]$/.test(c)){i=c;c=undefined}return{shortFlag:i,longFlag:c}}i.Option=Option;i.splitOptionFlags=splitOptionFlags;i.DualOptions=DualOptions},211:(r,i)=>{const c=3;function editDistance(r,i){if(Math.abs(r.length-i.length)>c)return Math.max(r.length,i.length);const u=[];for(let i=0;i<=r.length;i++){u[i]=[i]}for(let r=0;r<=i.length;r++){u[0][r]=r}for(let c=1;c<=i.length;c++){for(let h=1;h<=r.length;h++){let d=1;if(r[h-1]===i[c-1]){d=0}else{d=1}u[h][c]=Math.min(u[h-1][c]+1,u[h][c-1]+1,u[h-1][c-1]+d);if(h>1&&c>1&&r[h-1]===i[c-2]&&r[h-2]===i[c-1]){u[h][c]=Math.min(u[h][c],u[h-2][c-2]+1)}}}return u[r.length][i.length]}function suggestSimilar(r,i){if(!i||i.length===0)return"";i=Array.from(new Set(i));const u=r.startsWith("--");if(u){r=r.slice(2);i=i.map((r=>r.slice(2)))}let h=[];let d=c;const p=.4;i.forEach((i=>{if(i.length<=1)return;const c=editDistance(r,i);const u=Math.max(r.length,i.length);const g=(u-c)/u;if(g>p){if(c<d){d=c;h=[i]}else if(c===d){h.push(i)}}}));h.sort(((r,i)=>r.localeCompare(i)));if(u){h=h.map((r=>`--${r}`))}if(h.length>1){return`\n(Did you mean one of ${h.join(", ")}?)`}if(h.length===1){return`\n(Did you mean ${h[0]}?)`}return""}i.suggestSimilar=suggestSimilar},39527:(r,i,c)=>{"use strict";var u=c(81667);var h=c(87287);var d=c(27031);var p=c(54154);var g=c(16691);function composeCollection(r,i,c,y,b){let v;switch(c.type){case"block-map":{v=d.resolveBlockMap(r,i,c,b);break}case"block-seq":{v=p.resolveBlockSeq(r,i,c,b);break}case"flow-collection":{v=g.resolveFlowCollection(r,i,c,b);break}}if(!y)return v;const w=i.directives.tagName(y.source,(r=>b(y,"TAG_RESOLVE_FAILED",r)));if(!w)return v;const C=v.constructor;if(w==="!"||w===C.tagName){v.tag=C.tagName;return v}const E=u.isMap(v)?"map":"seq";let x=i.schema.tags.find((r=>r.collection===E&&r.tag===w));if(!x){const r=i.schema.knownTags[w];if(r&&r.collection===E){i.schema.tags.push(Object.assign({},r,{default:false}));x=r}else{b(y,"TAG_RESOLVE_FAILED",`Unresolved tag: ${w}`,true);v.tag=w;return v}}const S=x.resolve(v,(r=>b(y,"TAG_RESOLVE_FAILED",r)),i.options);const k=u.isNode(S)?S:new h.Scalar(S);k.range=v.range;k.tag=w;if(x?.format)k.format=x.format;return k}i.composeCollection=composeCollection},68502:(r,i,c)=>{"use strict";var u=c(7932);var h=c(39105);var d=c(67780);var p=c(79145);function composeDoc(r,i,{offset:c,start:g,value:y,end:b},v){const w=Object.assign({_directives:i},r);const C=new u.Document(undefined,w);const E={atRoot:true,directives:C.directives,options:C.options,schema:C.schema};const x=p.resolveProps(g,{indicator:"doc-start",next:y??b?.[0],offset:c,onError:v,startOnNewline:true});if(x.found){C.directives.docStart=true;if(y&&(y.type==="block-map"||y.type==="block-seq")&&!x.hasNewline)v(x.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")}C.contents=y?h.composeNode(E,y,x,v):h.composeEmptyNode(E,x.end,g,null,x,v);const S=C.contents.range[2];const k=d.resolveEnd(b,S,false,v);if(k.comment)C.comment=k.comment;C.range=[c,S,k.offset];return C}i.composeDoc=composeDoc},39105:(r,i,c)=>{"use strict";var u=c(50449);var h=c(39527);var d=c(77134);var p=c(67780);var g=c(86411);const y={composeNode:composeNode,composeEmptyNode:composeEmptyNode};function composeNode(r,i,c,u){const{spaceBefore:p,comment:g,anchor:b,tag:v}=c;let w;let C=true;switch(i.type){case"alias":w=composeAlias(r,i,u);if(b||v)u(i,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":w=d.composeScalar(r,i,v,u);if(b)w.anchor=b.source.substring(1);break;case"block-map":case"block-seq":case"flow-collection":w=h.composeCollection(y,r,i,v,u);if(b)w.anchor=b.source.substring(1);break;default:{const h=i.type==="error"?i.message:`Unsupported token (type: ${i.type})`;u(i,"UNEXPECTED_TOKEN",h);w=composeEmptyNode(r,i.offset,undefined,null,c,u);C=false}}if(b&&w.anchor==="")u(b,"BAD_ALIAS","Anchor cannot be an empty string");if(p)w.spaceBefore=true;if(g){if(i.type==="scalar"&&i.source==="")w.comment=g;else w.commentBefore=g}if(r.options.keepSourceTokens&&C)w.srcToken=i;return w}function composeEmptyNode(r,i,c,u,{spaceBefore:h,comment:p,anchor:y,tag:b,end:v},w){const C={type:"scalar",offset:g.emptyScalarPosition(i,c,u),indent:-1,source:""};const E=d.composeScalar(r,C,b,w);if(y){E.anchor=y.source.substring(1);if(E.anchor==="")w(y,"BAD_ALIAS","Anchor cannot be an empty string")}if(h)E.spaceBefore=true;if(p){E.comment=p;E.range[2]=v}return E}function composeAlias({options:r},{offset:i,source:c,end:h},d){const g=new u.Alias(c.substring(1));if(g.source==="")d(i,"BAD_ALIAS","Alias cannot be an empty string");if(g.source.endsWith(":"))d(i+c.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",true);const y=i+c.length;const b=p.resolveEnd(h,y,r.strict,d);g.range=[i,y,b.offset];if(b.comment)g.comment=b.comment;return g}i.composeEmptyNode=composeEmptyNode;i.composeNode=composeNode},77134:(r,i,c)=>{"use strict";var u=c(81667);var h=c(87287);var d=c(57047);var p=c(18941);function composeScalar(r,i,c,g){const{value:y,type:b,comment:v,range:w}=i.type==="block-scalar"?d.resolveBlockScalar(i,r.options.strict,g):p.resolveFlowScalar(i,r.options.strict,g);const C=c?r.directives.tagName(c.source,(r=>g(c,"TAG_RESOLVE_FAILED",r))):null;const E=c&&C?findScalarTagByName(r.schema,y,C,c,g):i.type==="scalar"?findScalarTagByTest(r,y,i,g):r.schema[u.SCALAR];let x;try{const d=E.resolve(y,(r=>g(c??i,"TAG_RESOLVE_FAILED",r)),r.options);x=u.isScalar(d)?d:new h.Scalar(d)}catch(r){const u=r instanceof Error?r.message:String(r);g(c??i,"TAG_RESOLVE_FAILED",u);x=new h.Scalar(y)}x.range=w;x.source=y;if(b)x.type=b;if(C)x.tag=C;if(E.format)x.format=E.format;if(v)x.comment=v;return x}function findScalarTagByName(r,i,c,h,d){if(c==="!")return r[u.SCALAR];const p=[];for(const i of r.tags){if(!i.collection&&i.tag===c){if(i.default&&i.test)p.push(i);else return i}}for(const r of p)if(r.test?.test(i))return r;const g=r.knownTags[c];if(g&&!g.collection){r.tags.push(Object.assign({},g,{default:false,test:undefined}));return g}d(h,"TAG_RESOLVE_FAILED",`Unresolved tag: ${c}`,c!=="tag:yaml.org,2002:str");return r[u.SCALAR]}function findScalarTagByTest({directives:r,schema:i},c,h,d){const p=i.tags.find((r=>r.default&&r.test?.test(c)))||i[u.SCALAR];if(i.compat){const g=i.compat.find((r=>r.default&&r.test?.test(c)))??i[u.SCALAR];if(p.tag!==g.tag){const i=r.tagString(p.tag);const c=r.tagString(g.tag);const u=`Value may be parsed as either ${i} or ${c}`;d(h,"TAG_RESOLVE_FAILED",u,true)}}return p}i.composeScalar=composeScalar},40587:(r,i,c)=>{"use strict";var u=c(55219);var h=c(7932);var d=c(97397);var p=c(81667);var g=c(68502);var y=c(67780);function getErrorPos(r){if(typeof r==="number")return[r,r+1];if(Array.isArray(r))return r.length===2?r:[r[0],r[1]];const{offset:i,source:c}=r;return[i,i+(typeof c==="string"?c.length:1)]}function parsePrelude(r){let i="";let c=false;let u=false;for(let h=0;h<r.length;++h){const d=r[h];switch(d[0]){case"#":i+=(i===""?"":u?"\n\n":"\n")+(d.substring(1)||" ");c=true;u=false;break;case"%":if(r[h+1]?.[0]!=="#")h+=1;c=false;break;default:if(!c)u=true;c=false}}return{comment:i,afterEmptyLine:u}}class Composer{constructor(r={}){this.doc=null;this.atDirectives=false;this.prelude=[];this.errors=[];this.warnings=[];this.onError=(r,i,c,u)=>{const h=getErrorPos(r);if(u)this.warnings.push(new d.YAMLWarning(h,i,c));else this.errors.push(new d.YAMLParseError(h,i,c))};this.directives=new u.Directives({version:r.version||"1.2"});this.options=r}decorate(r,i){const{comment:c,afterEmptyLine:u}=parsePrelude(this.prelude);if(c){const h=r.contents;if(i){r.comment=r.comment?`${r.comment}\n${c}`:c}else if(u||r.directives.docStart||!h){r.commentBefore=c}else if(p.isCollection(h)&&!h.flow&&h.items.length>0){let r=h.items[0];if(p.isPair(r))r=r.key;const i=r.commentBefore;r.commentBefore=i?`${c}\n${i}`:c}else{const r=h.commentBefore;h.commentBefore=r?`${c}\n${r}`:c}}if(i){Array.prototype.push.apply(r.errors,this.errors);Array.prototype.push.apply(r.warnings,this.warnings)}else{r.errors=this.errors;r.warnings=this.warnings}this.prelude=[];this.errors=[];this.warnings=[]}streamInfo(){return{comment:parsePrelude(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(r,i=false,c=-1){for(const i of r)yield*this.next(i);yield*this.end(i,c)}*next(r){if(process.env.LOG_STREAM)console.dir(r,{depth:null});switch(r.type){case"directive":this.directives.add(r.source,((i,c,u)=>{const h=getErrorPos(r);h[0]+=i;this.onError(h,"BAD_DIRECTIVE",c,u)}));this.prelude.push(r.source);this.atDirectives=true;break;case"document":{const i=g.composeDoc(this.options,this.directives,r,this.onError);if(this.atDirectives&&!i.directives.docStart)this.onError(r,"MISSING_CHAR","Missing directives-end/doc-start indicator line");this.decorate(i,false);if(this.doc)yield this.doc;this.doc=i;this.atDirectives=false;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(r.source);break;case"error":{const i=r.source?`${r.message}: ${JSON.stringify(r.source)}`:r.message;const c=new d.YAMLParseError(getErrorPos(r),"UNEXPECTED_TOKEN",i);if(this.atDirectives||!this.doc)this.errors.push(c);else this.doc.errors.push(c);break}case"doc-end":{if(!this.doc){const i="Unexpected doc-end without preceding document";this.errors.push(new d.YAMLParseError(getErrorPos(r),"UNEXPECTED_TOKEN",i));break}this.doc.directives.docEnd=true;const i=y.resolveEnd(r.end,r.offset+r.source.length,this.doc.options.strict,this.onError);this.decorate(this.doc,true);if(i.comment){const r=this.doc.comment;this.doc.comment=r?`${r}\n${i.comment}`:i.comment}this.doc.range[2]=i.offset;break}default:this.errors.push(new d.YAMLParseError(getErrorPos(r),"UNEXPECTED_TOKEN",`Unsupported token ${r.type}`))}}*end(r=false,i=-1){if(this.doc){this.decorate(this.doc,true);yield this.doc;this.doc=null}else if(r){const r=Object.assign({_directives:this.directives},this.options);const c=new h.Document(undefined,r);if(this.atDirectives)this.onError(i,"MISSING_CHAR","Missing directives-end indicator line");c.range=[0,i,i];this.decorate(c,false);yield c}}}i.Composer=Composer},27031:(r,i,c)=>{"use strict";var u=c(57924);var h=c(45995);var d=c(79145);var p=c(29956);var g=c(63942);var y=c(39906);const b="All mapping items must start at the same column";function resolveBlockMap({composeNode:r,composeEmptyNode:i},c,v,w){const C=new h.YAMLMap(c.schema);if(c.atRoot)c.atRoot=false;let E=v.offset;let x=null;for(const h of v.items){const{start:S,key:k,sep:T,value:N}=h;const O=d.resolveProps(S,{indicator:"explicit-key-ind",next:k??T?.[0],offset:E,onError:w,startOnNewline:true});const $=!O.found;if($){if(k){if(k.type==="block-seq")w(E,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key");else if("indent"in k&&k.indent!==v.indent)w(E,"BAD_INDENT",b)}if(!O.anchor&&!O.tag&&!T){x=O.end;if(O.comment){if(C.comment)C.comment+="\n"+O.comment;else C.comment=O.comment}continue}if(O.hasNewlineAfterProp||p.containsNewline(k)){w(k??S[S.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}}else if(O.found?.indent!==v.indent){w(E,"BAD_INDENT",b)}const A=O.end;const P=k?r(c,k,O,w):i(c,A,S,null,O,w);if(c.schema.compat)g.flowIndentCheck(v.indent,k,w);if(y.mapIncludes(c,C.items,P))w(A,"DUPLICATE_KEY","Map keys must be unique");const I=d.resolveProps(T??[],{indicator:"map-value-ind",next:N,offset:P.range[2],onError:w,startOnNewline:!k||k.type==="block-scalar"});E=I.end;if(I.found){if($){if(N?.type==="block-map"&&!I.hasNewline)w(E,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings");if(c.options.strict&&O.start<I.found.offset-1024)w(P.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key")}const d=N?r(c,N,I,w):i(c,E,T,null,I,w);if(c.schema.compat)g.flowIndentCheck(v.indent,N,w);E=d.range[2];const p=new u.Pair(P,d);if(c.options.keepSourceTokens)p.srcToken=h;C.items.push(p)}else{if($)w(P.range,"MISSING_CHAR","Implicit map keys need to be followed by map values");if(I.comment){if(P.comment)P.comment+="\n"+I.comment;else P.comment=I.comment}const r=new u.Pair(P);if(c.options.keepSourceTokens)r.srcToken=h;C.items.push(r)}}if(x&&x<E)w(x,"IMPOSSIBLE","Map comment with trailing content");C.range=[v.offset,E,x??E];return C}i.resolveBlockMap=resolveBlockMap},57047:(r,i,c)=>{"use strict";var u=c(87287);function resolveBlockScalar(r,i,c){const h=r.offset;const d=parseBlockScalarHeader(r,i,c);if(!d)return{value:"",type:null,comment:"",range:[h,h,h]};const p=d.mode===">"?u.Scalar.BLOCK_FOLDED:u.Scalar.BLOCK_LITERAL;const g=r.source?splitLines(r.source):[];let y=g.length;for(let r=g.length-1;r>=0;--r){const i=g[r][1];if(i===""||i==="\r")y=r;else break}if(y===0){const i=d.chomp==="+"&&g.length>0?"\n".repeat(Math.max(1,g.length-1)):"";let c=h+d.length;if(r.source)c+=r.source.length;return{value:i,type:p,comment:d.comment,range:[h,c,c]}}let b=r.indent+d.indent;let v=r.offset+d.length;let w=0;for(let r=0;r<y;++r){const[i,u]=g[r];if(u===""||u==="\r"){if(d.indent===0&&i.length>b)b=i.length}else{if(i.length<b){const r="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";c(v+i.length,"MISSING_CHAR",r)}if(d.indent===0)b=i.length;w=r;break}v+=i.length+u.length+1}for(let r=g.length-1;r>=y;--r){if(g[r][0].length>b)y=r+1}let C="";let E="";let x=false;for(let r=0;r<w;++r)C+=g[r][0].slice(b)+"\n";for(let r=w;r<y;++r){let[i,h]=g[r];v+=i.length+h.length+1;const y=h[h.length-1]==="\r";if(y)h=h.slice(0,-1);if(h&&i.length<b){const r=d.indent?"explicit indentation indicator":"first line";const u=`Block scalar lines must not be less indented than their ${r}`;c(v-h.length-(y?2:1),"BAD_INDENT",u);i=""}if(p===u.Scalar.BLOCK_LITERAL){C+=E+i.slice(b)+h;E="\n"}else if(i.length>b||h[0]==="\t"){if(E===" ")E="\n";else if(!x&&E==="\n")E="\n\n";C+=E+i.slice(b)+h;E="\n";x=true}else if(h===""){if(E==="\n")C+="\n";else E="\n"}else{C+=E+h;E=" ";x=false}}switch(d.chomp){case"-":break;case"+":for(let r=y;r<g.length;++r)C+="\n"+g[r][0].slice(b);if(C[C.length-1]!=="\n")C+="\n";break;default:C+="\n"}const S=h+d.length+r.source.length;return{value:C,type:p,comment:d.comment,range:[h,S,S]}}function parseBlockScalarHeader({offset:r,props:i},c,u){if(i[0].type!=="block-scalar-header"){u(i[0],"IMPOSSIBLE","Block scalar header not found");return null}const{source:h}=i[0];const d=h[0];let p=0;let g="";let y=-1;for(let i=1;i<h.length;++i){const c=h[i];if(!g&&(c==="-"||c==="+"))g=c;else{const u=Number(c);if(!p&&u)p=u;else if(y===-1)y=r+i}}if(y!==-1)u(y,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${h}`);let b=false;let v="";let w=h.length;for(let r=1;r<i.length;++r){const h=i[r];switch(h.type){case"space":b=true;case"newline":w+=h.source.length;break;case"comment":if(c&&!b){const r="Comments must be separated from other tokens by white space characters";u(h,"MISSING_CHAR",r)}w+=h.source.length;v=h.source.substring(1);break;case"error":u(h,"UNEXPECTED_TOKEN",h.message);w+=h.source.length;break;default:{const r=`Unexpected token in block scalar header: ${h.type}`;u(h,"UNEXPECTED_TOKEN",r);const i=h.source;if(i&&typeof i==="string")w+=i.length}}}return{mode:d,indent:p,chomp:g,comment:v,length:w}}function splitLines(r){const i=r.split(/\n( *)/);const c=i[0];const u=c.match(/^( *)/);const h=u?.[1]?[u[1],c.slice(u[1].length)]:["",c];const d=[h];for(let r=1;r<i.length;r+=2)d.push([i[r],i[r+1]]);return d}i.resolveBlockScalar=resolveBlockScalar},54154:(r,i,c)=>{"use strict";var u=c(66511);var h=c(79145);var d=c(63942);function resolveBlockSeq({composeNode:r,composeEmptyNode:i},c,p,g){const y=new u.YAMLSeq(c.schema);if(c.atRoot)c.atRoot=false;let b=p.offset;let v=null;for(const{start:u,value:w}of p.items){const C=h.resolveProps(u,{indicator:"seq-item-ind",next:w,offset:b,onError:g,startOnNewline:true});if(!C.found){if(C.anchor||C.tag||w){if(w&&w.type==="block-seq")g(C.end,"BAD_INDENT","All sequence items must start at the same column");else g(b,"MISSING_CHAR","Sequence item without - indicator")}else{v=C.end;if(C.comment)y.comment=C.comment;continue}}const E=w?r(c,w,C,g):i(c,C.end,u,null,C,g);if(c.schema.compat)d.flowIndentCheck(p.indent,w,g);b=E.range[2];y.items.push(E)}y.range=[p.offset,b,v??b];return y}i.resolveBlockSeq=resolveBlockSeq},67780:(r,i)=>{"use strict";function resolveEnd(r,i,c,u){let h="";if(r){let d=false;let p="";for(const g of r){const{source:r,type:y}=g;switch(y){case"space":d=true;break;case"comment":{if(c&&!d)u(g,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const i=r.substring(1)||" ";if(!h)h=i;else h+=p+i;p="";break}case"newline":if(h)p+=r;d=true;break;default:u(g,"UNEXPECTED_TOKEN",`Unexpected ${y} at node end`)}i+=r.length}}return{comment:h,offset:i}}i.resolveEnd=resolveEnd},16691:(r,i,c)=>{"use strict";var u=c(81667);var h=c(57924);var d=c(45995);var p=c(66511);var g=c(67780);var y=c(79145);var b=c(29956);var v=c(39906);const w="Block collections are not allowed within flow collections";const isBlock=r=>r&&(r.type==="block-map"||r.type==="block-seq");function resolveFlowCollection({composeNode:r,composeEmptyNode:i},c,C,E){const x=C.start.source==="{";const S=x?"flow map":"flow sequence";const k=x?new d.YAMLMap(c.schema):new p.YAMLSeq(c.schema);k.flow=true;const T=c.atRoot;if(T)c.atRoot=false;let N=C.offset+C.start.source.length;for(let p=0;p<C.items.length;++p){const g=C.items[p];const{start:T,key:O,sep:$,value:A}=g;const P=y.resolveProps(T,{flow:S,indicator:"explicit-key-ind",next:O??$?.[0],offset:N,onError:E,startOnNewline:false});if(!P.found){if(!P.anchor&&!P.tag&&!$&&!A){if(p===0&&P.comma)E(P.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${S}`);else if(p<C.items.length-1)E(P.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${S}`);if(P.comment){if(k.comment)k.comment+="\n"+P.comment;else k.comment=P.comment}N=P.end;continue}if(!x&&c.options.strict&&b.containsNewline(O))E(O,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(p===0){if(P.comma)E(P.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${S}`)}else{if(!P.comma)E(P.start,"MISSING_CHAR",`Missing , between ${S} items`);if(P.comment){let r="";e:for(const i of T){switch(i.type){case"comma":case"space":break;case"comment":r=i.source.substring(1);break e;default:break e}}if(r){let i=k.items[k.items.length-1];if(u.isPair(i))i=i.value??i.key;if(i.comment)i.comment+="\n"+r;else i.comment=r;P.comment=P.comment.substring(r.length+1)}}}if(!x&&!$&&!P.found){const u=A?r(c,A,P,E):i(c,P.end,$,null,P,E);k.items.push(u);N=u.range[2];if(isBlock(A))E(u.range,"BLOCK_IN_FLOW",w)}else{const u=P.end;const p=O?r(c,O,P,E):i(c,u,T,null,P,E);if(isBlock(O))E(p.range,"BLOCK_IN_FLOW",w);const b=y.resolveProps($??[],{flow:S,indicator:"map-value-ind",next:A,offset:p.range[2],onError:E,startOnNewline:false});if(b.found){if(!x&&!P.found&&c.options.strict){if($)for(const r of $){if(r===b.found)break;if(r.type==="newline"){E(r,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}if(P.start<b.found.offset-1024)E(b.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else if(A){if("source"in A&&A.source&&A.source[0]===":")E(A,"MISSING_CHAR",`Missing space after : in ${S}`);else E(b.start,"MISSING_CHAR",`Missing , or : between ${S} items`)}const C=A?r(c,A,b,E):b.found?i(c,b.end,$,null,b,E):null;if(C){if(isBlock(A))E(C.range,"BLOCK_IN_FLOW",w)}else if(b.comment){if(p.comment)p.comment+="\n"+b.comment;else p.comment=b.comment}const I=new h.Pair(p,C);if(c.options.keepSourceTokens)I.srcToken=g;if(x){const r=k;if(v.mapIncludes(c,r.items,p))E(u,"DUPLICATE_KEY","Map keys must be unique");r.items.push(I)}else{const r=new d.YAMLMap(c.schema);r.flow=true;r.items.push(I);k.items.push(r)}N=C?C.range[2]:b.end}}const O=x?"}":"]";const[$,...A]=C.end;let P=N;if($&&$.source===O)P=$.offset+$.source.length;else{const r=S[0].toUpperCase()+S.substring(1);const i=T?`${r} must end with a ${O}`:`${r} in block collection must be sufficiently indented and end with a ${O}`;E(N,T?"MISSING_CHAR":"BAD_INDENT",i);if($&&$.source.length!==1)A.unshift($)}if(A.length>0){const r=g.resolveEnd(A,P,c.options.strict,E);if(r.comment){if(k.comment)k.comment+="\n"+r.comment;else k.comment=r.comment}k.range=[C.offset,P,r.offset]}else{k.range=[C.offset,P,P]}return k}i.resolveFlowCollection=resolveFlowCollection},18941:(r,i,c)=>{"use strict";var u=c(87287);var h=c(67780);function resolveFlowScalar(r,i,c){const{offset:d,type:p,source:g,end:y}=r;let b;let v;const _onError=(r,i,u)=>c(d+r,i,u);switch(p){case"scalar":b=u.Scalar.PLAIN;v=plainValue(g,_onError);break;case"single-quoted-scalar":b=u.Scalar.QUOTE_SINGLE;v=singleQuotedValue(g,_onError);break;case"double-quoted-scalar":b=u.Scalar.QUOTE_DOUBLE;v=doubleQuotedValue(g,_onError);break;default:c(r,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${p}`);return{value:"",type:null,comment:"",range:[d,d+g.length,d+g.length]}}const w=d+g.length;const C=h.resolveEnd(y,w,i,c);return{value:v,type:b,comment:C.comment,range:[d,w,C.offset]}}function plainValue(r,i){let c="";switch(r[0]){case"\t":c="a tab character";break;case",":c="flow indicator character ,";break;case"%":c="directive indicator character %";break;case"|":case">":{c=`block scalar indicator ${r[0]}`;break}case"@":case"`":{c=`reserved character ${r[0]}`;break}}if(c)i(0,"BAD_SCALAR_START",`Plain value cannot start with ${c}`);return foldLines(r)}function singleQuotedValue(r,i){if(r[r.length-1]!=="'"||r.length===1)i(r.length,"MISSING_CHAR","Missing closing 'quote");return foldLines(r.slice(1,-1)).replace(/''/g,"'")}function foldLines(r){let i,c;try{i=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy");c=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(r){i=/(.*?)[ \t]*\r?\n/ys;c=/[ \t]*(.*?)[ \t]*\r?\n/ys}let u=i.exec(r);if(!u)return r;let h=u[1];let d=" ";let p=i.lastIndex;c.lastIndex=p;while(u=c.exec(r)){if(u[1]===""){if(d==="\n")h+=d;else d="\n"}else{h+=d+u[1];d=" "}p=c.lastIndex}const g=/[ \t]*(.*)/ys;g.lastIndex=p;u=g.exec(r);return h+d+(u?.[1]??"")}function doubleQuotedValue(r,i){let c="";for(let u=1;u<r.length-1;++u){const h=r[u];if(h==="\r"&&r[u+1]==="\n")continue;if(h==="\n"){const{fold:i,offset:h}=foldNewline(r,u);c+=i;u=h}else if(h==="\\"){let h=r[++u];const p=d[h];if(p)c+=p;else if(h==="\n"){h=r[u+1];while(h===" "||h==="\t")h=r[++u+1]}else if(h==="\r"&&r[u+1]==="\n"){h=r[++u+1];while(h===" "||h==="\t")h=r[++u+1]}else if(h==="x"||h==="u"||h==="U"){const d={x:2,u:4,U:8}[h];c+=parseCharCode(r,u+1,d,i);u+=d}else{const h=r.substr(u-1,2);i(u-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${h}`);c+=h}}else if(h===" "||h==="\t"){const i=u;let d=r[u+1];while(d===" "||d==="\t")d=r[++u+1];if(d!=="\n"&&!(d==="\r"&&r[u+2]==="\n"))c+=u>i?r.slice(i,u+1):h}else{c+=h}}if(r[r.length-1]!=='"'||r.length===1)i(r.length,"MISSING_CHAR",'Missing closing "quote');return c}function foldNewline(r,i){let c="";let u=r[i+1];while(u===" "||u==="\t"||u==="\n"||u==="\r"){if(u==="\r"&&r[i+2]!=="\n")break;if(u==="\n")c+="\n";i+=1;u=r[i+1]}if(!c)c=" ";return{fold:c,offset:i}}const d={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function parseCharCode(r,i,c,u){const h=r.substr(i,c);const d=h.length===c&&/^[0-9a-fA-F]+$/.test(h);const p=d?parseInt(h,16):NaN;if(isNaN(p)){const h=r.substr(i-2,c+2);u(i-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${h}`);return h}return String.fromCodePoint(p)}i.resolveFlowScalar=resolveFlowScalar},79145:(r,i)=>{"use strict";function resolveProps(r,{flow:i,indicator:c,next:u,offset:h,onError:d,startOnNewline:p}){let g=false;let y=p;let b=p;let v="";let w="";let C=false;let E=false;let x=false;let S=null;let k=null;let T=null;let N=null;let O=null;for(const u of r){if(x){if(u.type!=="space"&&u.type!=="newline"&&u.type!=="comma")d(u.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space");x=false}switch(u.type){case"space":if(!i&&y&&c!=="doc-start"&&u.source[0]==="\t")d(u,"TAB_AS_INDENT","Tabs are not allowed as indentation");b=true;break;case"comment":{if(!b)d(u,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const r=u.source.substring(1)||" ";if(!v)v=r;else v+=w+r;w="";y=false;break}case"newline":if(y){if(v)v+=u.source;else g=true}else w+=u.source;y=true;C=true;if(S||k)E=true;b=true;break;case"anchor":if(S)d(u,"MULTIPLE_ANCHORS","A node can have at most one anchor");if(u.source.endsWith(":"))d(u.offset+u.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",true);S=u;if(O===null)O=u.offset;y=false;b=false;x=true;break;case"tag":{if(k)d(u,"MULTIPLE_TAGS","A node can have at most one tag");k=u;if(O===null)O=u.offset;y=false;b=false;x=true;break}case c:if(S||k)d(u,"BAD_PROP_ORDER",`Anchors and tags must be after the ${u.source} indicator`);if(N)d(u,"UNEXPECTED_TOKEN",`Unexpected ${u.source} in ${i??"collection"}`);N=u;y=false;b=false;break;case"comma":if(i){if(T)d(u,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`);T=u;y=false;b=false;break}default:d(u,"UNEXPECTED_TOKEN",`Unexpected ${u.type} token`);y=false;b=false}}const $=r[r.length-1];const A=$?$.offset+$.source.length:h;if(x&&u&&u.type!=="space"&&u.type!=="newline"&&u.type!=="comma"&&(u.type!=="scalar"||u.source!==""))d(u.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space");return{comma:T,found:N,spaceBefore:g,comment:v,hasNewline:C,hasNewlineAfterProp:E,anchor:S,tag:k,end:A,start:O??A}}i.resolveProps=resolveProps},29956:(r,i)=>{"use strict";function containsNewline(r){if(!r)return null;switch(r.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(r.source.includes("\n"))return true;if(r.end)for(const i of r.end)if(i.type==="newline")return true;return false;case"flow-collection":for(const i of r.items){for(const r of i.start)if(r.type==="newline")return true;if(i.sep)for(const r of i.sep)if(r.type==="newline")return true;if(containsNewline(i.key)||containsNewline(i.value))return true}return false;default:return true}}i.containsNewline=containsNewline},86411:(r,i)=>{"use strict";function emptyScalarPosition(r,i,c){if(i){if(c===null)c=i.length;for(let u=c-1;u>=0;--u){let c=i[u];switch(c.type){case"space":case"comment":case"newline":r-=c.source.length;continue}c=i[++u];while(c?.type==="space"){r+=c.source.length;c=i[++u]}break}}return r}i.emptyScalarPosition=emptyScalarPosition},63942:(r,i,c)=>{"use strict";var u=c(29956);function flowIndentCheck(r,i,c){if(i?.type==="flow-collection"){const h=i.end[0];if(h.indent===r&&(h.source==="]"||h.source==="}")&&u.containsNewline(i)){const r="Flow end indicator should be more indented than parent";c(h,"BAD_INDENT",r,true)}}}i.flowIndentCheck=flowIndentCheck},39906:(r,i,c)=>{"use strict";var u=c(81667);function mapIncludes(r,i,c){const{uniqueKeys:h}=r.options;if(h===false)return false;const d=typeof h==="function"?h:(i,c)=>i===c||u.isScalar(i)&&u.isScalar(c)&&i.value===c.value&&!(i.value==="<<"&&r.schema.merge);return i.some((r=>d(r.key,c)))}i.mapIncludes=mapIncludes},7932:(r,i,c)=>{"use strict";var u=c(50449);var h=c(93280);var d=c(81667);var p=c(57924);var g=c(18322);var y=c(13746);var b=c(46027);var v=c(57971);var w=c(92633);var C=c(63311);var E=c(58798);var x=c(55219);class Document{constructor(r,i,c){this.commentBefore=null;this.comment=null;this.errors=[];this.warnings=[];Object.defineProperty(this,d.NODE_TYPE,{value:d.DOC});let u=null;if(typeof i==="function"||Array.isArray(i)){u=i}else if(c===undefined&&i){c=i;i=undefined}const h=Object.assign({intAsBigInt:false,keepSourceTokens:false,logLevel:"warn",prettyErrors:true,strict:true,uniqueKeys:true,version:"1.2"},c);this.options=h;let{version:p}=h;if(c?._directives){this.directives=c._directives.atDocument();if(this.directives.yaml.explicit)p=this.directives.yaml.version}else this.directives=new x.Directives({version:p});this.setSchema(p,c);if(r===undefined)this.contents=null;else{this.contents=this.createNode(r,u,c)}}clone(){const r=Object.create(Document.prototype,{[d.NODE_TYPE]:{value:d.DOC}});r.commentBefore=this.commentBefore;r.comment=this.comment;r.errors=this.errors.slice();r.warnings=this.warnings.slice();r.options=Object.assign({},this.options);if(this.directives)r.directives=this.directives.clone();r.schema=this.schema.clone();r.contents=d.isNode(this.contents)?this.contents.clone(r.schema):this.contents;if(this.range)r.range=this.range.slice();return r}add(r){if(assertCollection(this.contents))this.contents.add(r)}addIn(r,i){if(assertCollection(this.contents))this.contents.addIn(r,i)}createAlias(r,i){if(!r.anchor){const c=w.anchorNames(this);r.anchor=!i||c.has(i)?w.findNewAnchor(i||"a",c):i}return new u.Alias(r.anchor)}createNode(r,i,c){let u=undefined;if(typeof i==="function"){r=i.call({"":r},"",r);u=i}else if(Array.isArray(i)){const keyToStr=r=>typeof r==="number"||r instanceof String||r instanceof Number;const r=i.filter(keyToStr).map(String);if(r.length>0)i=i.concat(r);u=i}else if(c===undefined&&i){c=i;i=undefined}const{aliasDuplicateObjects:h,anchorPrefix:p,flow:g,keepUndefined:y,onTagObj:b,tag:v}=c??{};const{onAnchor:C,setAnchors:x,sourceObjects:S}=w.createNodeAnchors(this,p||"a");const k={aliasDuplicateObjects:h??true,keepUndefined:y??false,onAnchor:C,onTagObj:b,replacer:u,schema:this.schema,sourceObjects:S};const T=E.createNode(r,v,k);if(g&&d.isCollection(T))T.flow=true;x();return T}createPair(r,i,c={}){const u=this.createNode(r,null,c);const h=this.createNode(i,null,c);return new p.Pair(u,h)}delete(r){return assertCollection(this.contents)?this.contents.delete(r):false}deleteIn(r){if(h.isEmptyPath(r)){if(this.contents==null)return false;this.contents=null;return true}return assertCollection(this.contents)?this.contents.deleteIn(r):false}get(r,i){return d.isCollection(this.contents)?this.contents.get(r,i):undefined}getIn(r,i){if(h.isEmptyPath(r))return!i&&d.isScalar(this.contents)?this.contents.value:this.contents;return d.isCollection(this.contents)?this.contents.getIn(r,i):undefined}has(r){return d.isCollection(this.contents)?this.contents.has(r):false}hasIn(r){if(h.isEmptyPath(r))return this.contents!==undefined;return d.isCollection(this.contents)?this.contents.hasIn(r):false}set(r,i){if(this.contents==null){this.contents=h.collectionFromPath(this.schema,[r],i)}else if(assertCollection(this.contents)){this.contents.set(r,i)}}setIn(r,i){if(h.isEmptyPath(r))this.contents=i;else if(this.contents==null){this.contents=h.collectionFromPath(this.schema,Array.from(r),i)}else if(assertCollection(this.contents)){this.contents.setIn(r,i)}}setSchema(r,i={}){if(typeof r==="number")r=String(r);let c;switch(r){case"1.1":if(this.directives)this.directives.yaml.version="1.1";else this.directives=new x.Directives({version:"1.1"});c={merge:true,resolveKnownTags:false,schema:"yaml-1.1"};break;case"1.2":case"next":if(this.directives)this.directives.yaml.version=r;else this.directives=new x.Directives({version:r});c={merge:false,resolveKnownTags:true,schema:"core"};break;case null:if(this.directives)delete this.directives;c=null;break;default:{const i=JSON.stringify(r);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(i.schema instanceof Object)this.schema=i.schema;else if(c)this.schema=new y.Schema(Object.assign(c,i));else throw new Error(`With a null YAML version, the { schema: Schema } option is required`)}toJS({json:r,jsonArg:i,mapAsMap:c,maxAliasCount:u,onAnchor:h,reviver:d}={}){const p={anchors:new Map,doc:this,keep:!r,mapAsMap:c===true,mapKeyWarned:false,maxAliasCount:typeof u==="number"?u:100,stringify:b.stringify};const y=g.toJS(this.contents,i??"",p);if(typeof h==="function")for(const{count:r,res:i}of p.anchors.values())h(i,r);return typeof d==="function"?C.applyReviver(d,{"":y},"",y):y}toJSON(r,i){return this.toJS({json:true,jsonArg:r,mapAsMap:false,onAnchor:i})}toString(r={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in r&&(!Number.isInteger(r.indent)||Number(r.indent)<=0)){const i=JSON.stringify(r.indent);throw new Error(`"indent" option must be a positive integer, not ${i}`)}return v.stringifyDocument(this,r)}}function assertCollection(r){if(d.isCollection(r))return true;throw new Error("Expected a YAML collection as document contents")}i.Document=Document},92633:(r,i,c)=>{"use strict";var u=c(81667);var h=c(40652);function anchorIsValid(r){if(/[\x00-\x19\s,[\]{}]/.test(r)){const i=JSON.stringify(r);const c=`Anchor must not contain whitespace or control characters: ${i}`;throw new Error(c)}return true}function anchorNames(r){const i=new Set;h.visit(r,{Value(r,c){if(c.anchor)i.add(c.anchor)}});return i}function findNewAnchor(r,i){for(let c=1;true;++c){const u=`${r}${c}`;if(!i.has(u))return u}}function createNodeAnchors(r,i){const c=[];const h=new Map;let d=null;return{onAnchor:u=>{c.push(u);if(!d)d=anchorNames(r);const h=findNewAnchor(i,d);d.add(h);return h},setAnchors:()=>{for(const r of c){const i=h.get(r);if(typeof i==="object"&&i.anchor&&(u.isScalar(i.node)||u.isCollection(i.node))){i.node.anchor=i.anchor}else{const i=new Error("Failed to resolve repeated object (this should not happen)");i.source=r;throw i}}},sourceObjects:h}}i.anchorIsValid=anchorIsValid;i.anchorNames=anchorNames;i.createNodeAnchors=createNodeAnchors;i.findNewAnchor=findNewAnchor},63311:(r,i)=>{"use strict";function applyReviver(r,i,c,u){if(u&&typeof u==="object"){if(Array.isArray(u)){for(let i=0,c=u.length;i<c;++i){const c=u[i];const h=applyReviver(r,u,String(i),c);if(h===undefined)delete u[i];else if(h!==c)u[i]=h}}else if(u instanceof Map){for(const i of Array.from(u.keys())){const c=u.get(i);const h=applyReviver(r,u,i,c);if(h===undefined)u.delete(i);else if(h!==c)u.set(i,h)}}else if(u instanceof Set){for(const i of Array.from(u)){const c=applyReviver(r,u,i,i);if(c===undefined)u.delete(i);else if(c!==i){u.delete(i);u.add(c)}}}else{for(const[i,c]of Object.entries(u)){const h=applyReviver(r,u,i,c);if(h===undefined)delete u[i];else if(h!==c)u[i]=h}}}return r.call(i,c,u)}i.applyReviver=applyReviver},58798:(r,i,c)=>{"use strict";var u=c(50449);var h=c(81667);var d=c(87287);const p="tag:yaml.org,2002:";function findTagObject(r,i,c){if(i){const r=c.filter((r=>r.tag===i));const u=r.find((r=>!r.format))??r[0];if(!u)throw new Error(`Tag ${i} not found`);return u}return c.find((i=>i.identify?.(r)&&!i.format))}function createNode(r,i,c){if(h.isDocument(r))r=r.contents;if(h.isNode(r))return r;if(h.isPair(r)){const i=c.schema[h.MAP].createNode?.(c.schema,null,c);i.items.push(r);return i}if(r instanceof String||r instanceof Number||r instanceof Boolean||typeof BigInt!=="undefined"&&r instanceof BigInt){r=r.valueOf()}const{aliasDuplicateObjects:g,onAnchor:y,onTagObj:b,schema:v,sourceObjects:w}=c;let C=undefined;if(g&&r&&typeof r==="object"){C=w.get(r);if(C){if(!C.anchor)C.anchor=y(r);return new u.Alias(C.anchor)}else{C={anchor:null,node:null};w.set(r,C)}}if(i?.startsWith("!!"))i=p+i.slice(2);let E=findTagObject(r,i,v.tags);if(!E){if(r&&typeof r.toJSON==="function"){r=r.toJSON()}if(!r||typeof r!=="object"){const i=new d.Scalar(r);if(C)C.node=i;return i}E=r instanceof Map?v[h.MAP]:Symbol.iterator in Object(r)?v[h.SEQ]:v[h.MAP]}if(b){b(E);delete c.onTagObj}const x=E?.createNode?E.createNode(c.schema,r,c):new d.Scalar(r);if(i)x.tag=i;if(C)C.node=x;return x}i.createNode=createNode},55219:(r,i,c)=>{"use strict";var u=c(81667);var h=c(40652);const d={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};const escapeTagName=r=>r.replace(/[!,[\]{}]/g,(r=>d[r]));class Directives{constructor(r,i){this.docStart=null;this.docEnd=false;this.yaml=Object.assign({},Directives.defaultYaml,r);this.tags=Object.assign({},Directives.defaultTags,i)}clone(){const r=new Directives(this.yaml,this.tags);r.docStart=this.docStart;return r}atDocument(){const r=new Directives(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=true;break;case"1.2":this.atNextDocument=false;this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.2"};this.tags=Object.assign({},Directives.defaultTags);break}return r}add(r,i){if(this.atNextDocument){this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.1"};this.tags=Object.assign({},Directives.defaultTags);this.atNextDocument=false}const c=r.trim().split(/[ \t]+/);const u=c.shift();switch(u){case"%TAG":{if(c.length!==2){i(0,"%TAG directive should contain exactly two parts");if(c.length<2)return false}const[r,u]=c;this.tags[r]=u;return true}case"%YAML":{this.yaml.explicit=true;if(c.length!==1){i(0,"%YAML directive should contain exactly one part");return false}const[r]=c;if(r==="1.1"||r==="1.2"){this.yaml.version=r;return true}else{const c=/^\d+\.\d+$/.test(r);i(6,`Unsupported YAML version ${r}`,c);return false}}default:i(0,`Unknown directive ${u}`,true);return false}}tagName(r,i){if(r==="!")return"!";if(r[0]!=="!"){i(`Not a valid tag: ${r}`);return null}if(r[1]==="<"){const c=r.slice(2,-1);if(c==="!"||c==="!!"){i(`Verbatim tags aren't resolved, so ${r} is invalid.`);return null}if(r[r.length-1]!==">")i("Verbatim tags must end with a >");return c}const[,c,u]=r.match(/^(.*!)([^!]*)$/);if(!u)i(`The ${r} tag has no suffix`);const h=this.tags[c];if(h)return h+decodeURIComponent(u);if(c==="!")return r;i(`Could not resolve tag: ${r}`);return null}tagString(r){for(const[i,c]of Object.entries(this.tags)){if(r.startsWith(c))return i+escapeTagName(r.substring(c.length))}return r[0]==="!"?r:`!<${r}>`}toString(r){const i=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[];const c=Object.entries(this.tags);let d;if(r&&c.length>0&&u.isNode(r.contents)){const i={};h.visit(r.contents,((r,c)=>{if(u.isNode(c)&&c.tag)i[c.tag]=true}));d=Object.keys(i)}else d=[];for(const[u,h]of c){if(u==="!!"&&h==="tag:yaml.org,2002:")continue;if(!r||d.some((r=>r.startsWith(h))))i.push(`%TAG ${u} ${h}`)}return i.join("\n")}}Directives.defaultYaml={explicit:false,version:"1.2"};Directives.defaultTags={"!!":"tag:yaml.org,2002:"};i.Directives=Directives},97397:(r,i)=>{"use strict";class YAMLError extends Error{constructor(r,i,c,u){super();this.name=r;this.code=c;this.message=u;this.pos=i}}class YAMLParseError extends YAMLError{constructor(r,i,c){super("YAMLParseError",r,i,c)}}class YAMLWarning extends YAMLError{constructor(r,i,c){super("YAMLWarning",r,i,c)}}const prettifyError=(r,i)=>c=>{if(c.pos[0]===-1)return;c.linePos=c.pos.map((r=>i.linePos(r)));const{line:u,col:h}=c.linePos[0];c.message+=` at line ${u}, column ${h}`;let d=h-1;let p=r.substring(i.lineStarts[u-1],i.lineStarts[u]).replace(/[\n\r]+$/,"");if(d>=60&&p.length>80){const r=Math.min(d-39,p.length-79);p="…"+p.substring(r);d-=r-1}if(p.length>80)p=p.substring(0,79)+"…";if(u>1&&/^ *$/.test(p.substring(0,d))){let c=r.substring(i.lineStarts[u-2],i.lineStarts[u-1]);if(c.length>80)c=c.substring(0,79)+"…\n";p=c+p}if(/[^ ]/.test(p)){let r=1;const i=c.linePos[1];if(i&&i.line===u&&i.col>h){r=Math.min(i.col-h,80-d)}const g=" ".repeat(d)+"^".repeat(r);c.message+=`:\n\n${p}\n${g}\n`}};i.YAMLError=YAMLError;i.YAMLParseError=YAMLParseError;i.YAMLWarning=YAMLWarning;i.prettifyError=prettifyError},96065:(r,i,c)=>{"use strict";var u;var h=c(40587);var d=c(7932);var p=c(13746);var g=c(97397);var y=c(50449);var b=c(81667);var v=c(57924);var w=c(87287);var C=c(45995);var E=c(66511);var x=c(58764);var S=c(14904);var k=c(89774);var T=c(34370);var N=c(56619);var O=c(40652);u=h.Composer;u=d.Document;u=p.Schema;u=g.YAMLError;u=g.YAMLParseError;u=g.YAMLWarning;u=y.Alias;u=b.isAlias;u=b.isCollection;u=b.isDocument;u=b.isMap;u=b.isNode;u=b.isPair;u=b.isScalar;u=b.isSeq;u=v.Pair;u=w.Scalar;u=C.YAMLMap;u=E.YAMLSeq;u=x;u=S.Lexer;u=k.LineCounter;u=T.Parser;u=N.parse;u=N.parseAllDocuments;u=N.parseDocument;i.Pz=N.stringify;u=O.visit;u=O.visitAsync},6125:(r,i)=>{"use strict";function debug(r,...i){if(r==="debug")console.log(...i)}function warn(r,i){if(r==="debug"||r==="warn"){if(typeof process!=="undefined"&&process.emitWarning)process.emitWarning(i);else console.warn(i)}}i.debug=debug;i.warn=warn},50449:(r,i,c)=>{"use strict";var u=c(92633);var h=c(40652);var d=c(81667);class Alias extends d.NodeBase{constructor(r){super(d.ALIAS);this.source=r;Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(r){let i=undefined;h.visit(r,{Node:(r,c)=>{if(c===this)return h.visit.BREAK;if(c.anchor===this.source)i=c}});return i}toJSON(r,i){if(!i)return{source:this.source};const{anchors:c,doc:u,maxAliasCount:h}=i;const d=this.resolve(u);if(!d){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(r)}const p=c.get(d);if(!p||p.res===undefined){const r="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(r)}if(h>=0){p.count+=1;if(p.aliasCount===0)p.aliasCount=getAliasCount(u,d,c);if(p.count*p.aliasCount>h){const r="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(r)}}return p.res}toString(r,i,c){const h=`*${this.source}`;if(r){u.anchorIsValid(this.source);if(r.options.verifyAliasOrder&&!r.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(r.implicitKey)return`${h} `}return h}}function getAliasCount(r,i,c){if(d.isAlias(i)){const u=i.resolve(r);const h=c&&u&&c.get(u);return h?h.count*h.aliasCount:0}else if(d.isCollection(i)){let u=0;for(const h of i.items){const i=getAliasCount(r,h,c);if(i>u)u=i}return u}else if(d.isPair(i)){const u=getAliasCount(r,i.key,c);const h=getAliasCount(r,i.value,c);return Math.max(u,h)}return 1}i.Alias=Alias},93280:(r,i,c)=>{"use strict";var u=c(58798);var h=c(81667);function collectionFromPath(r,i,c){let h=c;for(let r=i.length-1;r>=0;--r){const c=i[r];if(typeof c==="number"&&Number.isInteger(c)&&c>=0){const r=[];r[c]=h;h=r}else{h=new Map([[c,h]])}}return u.createNode(h,undefined,{aliasDuplicateObjects:false,keepUndefined:false,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:r,sourceObjects:new Map})}const isEmptyPath=r=>r==null||typeof r==="object"&&!!r[Symbol.iterator]().next().done;class Collection extends h.NodeBase{constructor(r,i){super(r);Object.defineProperty(this,"schema",{value:i,configurable:true,enumerable:false,writable:true})}clone(r){const i=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));if(r)i.schema=r;i.items=i.items.map((i=>h.isNode(i)||h.isPair(i)?i.clone(r):i));if(this.range)i.range=this.range.slice();return i}addIn(r,i){if(isEmptyPath(r))this.add(i);else{const[c,...u]=r;const d=this.get(c,true);if(h.isCollection(d))d.addIn(u,i);else if(d===undefined&&this.schema)this.set(c,collectionFromPath(this.schema,u,i));else throw new Error(`Expected YAML collection at ${c}. Remaining path: ${u}`)}}deleteIn(r){const[i,...c]=r;if(c.length===0)return this.delete(i);const u=this.get(i,true);if(h.isCollection(u))return u.deleteIn(c);else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${c}`)}getIn(r,i){const[c,...u]=r;const d=this.get(c,true);if(u.length===0)return!i&&h.isScalar(d)?d.value:d;else return h.isCollection(d)?d.getIn(u,i):undefined}hasAllNullValues(r){return this.items.every((i=>{if(!h.isPair(i))return false;const c=i.value;return c==null||r&&h.isScalar(c)&&c.value==null&&!c.commentBefore&&!c.comment&&!c.tag}))}hasIn(r){const[i,...c]=r;if(c.length===0)return this.has(i);const u=this.get(i,true);return h.isCollection(u)?u.hasIn(c):false}setIn(r,i){const[c,...u]=r;if(u.length===0){this.set(c,i)}else{const r=this.get(c,true);if(h.isCollection(r))r.setIn(u,i);else if(r===undefined&&this.schema)this.set(c,collectionFromPath(this.schema,u,i));else throw new Error(`Expected YAML collection at ${c}. Remaining path: ${u}`)}}}Collection.maxFlowStringSingleLineLength=60;i.Collection=Collection;i.collectionFromPath=collectionFromPath;i.isEmptyPath=isEmptyPath},81667:(r,i)=>{"use strict";const c=Symbol.for("yaml.alias");const u=Symbol.for("yaml.document");const h=Symbol.for("yaml.map");const d=Symbol.for("yaml.pair");const p=Symbol.for("yaml.scalar");const g=Symbol.for("yaml.seq");const y=Symbol.for("yaml.node.type");const isAlias=r=>!!r&&typeof r==="object"&&r[y]===c;const isDocument=r=>!!r&&typeof r==="object"&&r[y]===u;const isMap=r=>!!r&&typeof r==="object"&&r[y]===h;const isPair=r=>!!r&&typeof r==="object"&&r[y]===d;const isScalar=r=>!!r&&typeof r==="object"&&r[y]===p;const isSeq=r=>!!r&&typeof r==="object"&&r[y]===g;function isCollection(r){if(r&&typeof r==="object")switch(r[y]){case h:case g:return true}return false}function isNode(r){if(r&&typeof r==="object")switch(r[y]){case c:case h:case p:case g:return true}return false}const hasAnchor=r=>(isScalar(r)||isCollection(r))&&!!r.anchor;class NodeBase{constructor(r){Object.defineProperty(this,y,{value:r})}clone(){const r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));if(this.range)r.range=this.range.slice();return r}}i.ALIAS=c;i.DOC=u;i.MAP=h;i.NODE_TYPE=y;i.NodeBase=NodeBase;i.PAIR=d;i.SCALAR=p;i.SEQ=g;i.hasAnchor=hasAnchor;i.isAlias=isAlias;i.isCollection=isCollection;i.isDocument=isDocument;i.isMap=isMap;i.isNode=isNode;i.isPair=isPair;i.isScalar=isScalar;i.isSeq=isSeq},57924:(r,i,c)=>{"use strict";var u=c(58798);var h=c(24030);var d=c(81967);var p=c(81667);function createPair(r,i,c){const h=u.createNode(r,undefined,c);const d=u.createNode(i,undefined,c);return new Pair(h,d)}class Pair{constructor(r,i=null){Object.defineProperty(this,p.NODE_TYPE,{value:p.PAIR});this.key=r;this.value=i}clone(r){let{key:i,value:c}=this;if(p.isNode(i))i=i.clone(r);if(p.isNode(c))c=c.clone(r);return new Pair(i,c)}toJSON(r,i){const c=i?.mapAsMap?new Map:{};return d.addPairToJSMap(i,c,this)}toString(r,i,c){return r?.doc?h.stringifyPair(this,r,i,c):JSON.stringify(this)}}i.Pair=Pair;i.createPair=createPair},87287:(r,i,c)=>{"use strict";var u=c(81667);var h=c(18322);const isScalarValue=r=>!r||typeof r!=="function"&&typeof r!=="object";class Scalar extends u.NodeBase{constructor(r){super(u.SCALAR);this.value=r}toJSON(r,i){return i?.keep?this.value:h.toJS(this.value,r,i)}toString(){return String(this.value)}}Scalar.BLOCK_FOLDED="BLOCK_FOLDED";Scalar.BLOCK_LITERAL="BLOCK_LITERAL";Scalar.PLAIN="PLAIN";Scalar.QUOTE_DOUBLE="QUOTE_DOUBLE";Scalar.QUOTE_SINGLE="QUOTE_SINGLE";i.Scalar=Scalar;i.isScalarValue=isScalarValue},45995:(r,i,c)=>{"use strict";var u=c(36897);var h=c(81967);var d=c(93280);var p=c(81667);var g=c(57924);var y=c(87287);function findPair(r,i){const c=p.isScalar(i)?i.value:i;for(const u of r){if(p.isPair(u)){if(u.key===i||u.key===c)return u;if(p.isScalar(u.key)&&u.key.value===c)return u}}return undefined}class YAMLMap extends d.Collection{constructor(r){super(p.MAP,r);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(r,i){let c;if(p.isPair(r))c=r;else if(!r||typeof r!=="object"||!("key"in r)){c=new g.Pair(r,r?.value)}else c=new g.Pair(r.key,r.value);const u=findPair(this.items,c.key);const h=this.schema?.sortMapEntries;if(u){if(!i)throw new Error(`Key ${c.key} already set`);if(p.isScalar(u.value)&&y.isScalarValue(c.value))u.value.value=c.value;else u.value=c.value}else if(h){const r=this.items.findIndex((r=>h(c,r)<0));if(r===-1)this.items.push(c);else this.items.splice(r,0,c)}else{this.items.push(c)}}delete(r){const i=findPair(this.items,r);if(!i)return false;const c=this.items.splice(this.items.indexOf(i),1);return c.length>0}get(r,i){const c=findPair(this.items,r);const u=c?.value;return(!i&&p.isScalar(u)?u.value:u)??undefined}has(r){return!!findPair(this.items,r)}set(r,i){this.add(new g.Pair(r,i),true)}toJSON(r,i,c){const u=c?new c:i?.mapAsMap?new Map:{};if(i?.onCreate)i.onCreate(u);for(const r of this.items)h.addPairToJSMap(i,u,r);return u}toString(r,i,c){if(!r)return JSON.stringify(this);for(const r of this.items){if(!p.isPair(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`)}if(!r.allNullValues&&this.hasAllNullValues(false))r=Object.assign({},r,{allNullValues:true});return u.stringifyCollection(this,r,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:r.indent||"",onChompKeep:c,onComment:i})}}i.YAMLMap=YAMLMap;i.findPair=findPair},66511:(r,i,c)=>{"use strict";var u=c(36897);var h=c(93280);var d=c(81667);var p=c(87287);var g=c(18322);class YAMLSeq extends h.Collection{constructor(r){super(d.SEQ,r);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(r){this.items.push(r)}delete(r){const i=asItemIndex(r);if(typeof i!=="number")return false;const c=this.items.splice(i,1);return c.length>0}get(r,i){const c=asItemIndex(r);if(typeof c!=="number")return undefined;const u=this.items[c];return!i&&d.isScalar(u)?u.value:u}has(r){const i=asItemIndex(r);return typeof i==="number"&&i<this.items.length}set(r,i){const c=asItemIndex(r);if(typeof c!=="number")throw new Error(`Expected a valid index, not ${r}.`);const u=this.items[c];if(d.isScalar(u)&&p.isScalarValue(i))u.value=i;else this.items[c]=i}toJSON(r,i){const c=[];if(i?.onCreate)i.onCreate(c);let u=0;for(const r of this.items)c.push(g.toJS(r,String(u++),i));return c}toString(r,i,c){if(!r)return JSON.stringify(this);return u.stringifyCollection(this,r,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(r.indent||"")+"  ",onChompKeep:c,onComment:i})}}function asItemIndex(r){let i=d.isScalar(r)?r.value:r;if(i&&typeof i==="string")i=Number(i);return typeof i==="number"&&Number.isInteger(i)&&i>=0?i:null}i.YAMLSeq=YAMLSeq},81967:(r,i,c)=>{"use strict";var u=c(6125);var h=c(46027);var d=c(81667);var p=c(87287);var g=c(18322);const y="<<";function addPairToJSMap(r,i,{key:c,value:u}){if(r?.doc.schema.merge&&isMergeKey(c)){u=d.isAlias(u)?u.resolve(r.doc):u;if(d.isSeq(u))for(const c of u.items)mergeToJSMap(r,i,c);else if(Array.isArray(u))for(const c of u)mergeToJSMap(r,i,c);else mergeToJSMap(r,i,u)}else{const h=g.toJS(c,"",r);if(i instanceof Map){i.set(h,g.toJS(u,h,r))}else if(i instanceof Set){i.add(h)}else{const d=stringifyKey(c,h,r);const p=g.toJS(u,d,r);if(d in i)Object.defineProperty(i,d,{value:p,writable:true,enumerable:true,configurable:true});else i[d]=p}}return i}const isMergeKey=r=>r===y||d.isScalar(r)&&r.value===y&&(!r.type||r.type===p.Scalar.PLAIN);function mergeToJSMap(r,i,c){const u=r&&d.isAlias(c)?c.resolve(r.doc):c;if(!d.isMap(u))throw new Error("Merge sources must be maps or map aliases");const h=u.toJSON(null,r,Map);for(const[r,c]of h){if(i instanceof Map){if(!i.has(r))i.set(r,c)}else if(i instanceof Set){i.add(r)}else if(!Object.prototype.hasOwnProperty.call(i,r)){Object.defineProperty(i,r,{value:c,writable:true,enumerable:true,configurable:true})}}return i}function stringifyKey(r,i,c){if(i===null)return"";if(typeof i!=="object")return String(i);if(d.isNode(r)&&c&&c.doc){const i=h.createStringifyContext(c.doc,{});i.anchors=new Set;for(const r of c.anchors.keys())i.anchors.add(r.anchor);i.inFlow=true;i.inStringifyKey=true;const d=r.toString(i);if(!c.mapKeyWarned){let r=JSON.stringify(d);if(r.length>40)r=r.substring(0,36)+'..."';u.warn(c.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`);c.mapKeyWarned=true}return d}return JSON.stringify(i)}i.addPairToJSMap=addPairToJSMap},18322:(r,i,c)=>{"use strict";var u=c(81667);function toJS(r,i,c){if(Array.isArray(r))return r.map(((r,i)=>toJS(r,String(i),c)));if(r&&typeof r.toJSON==="function"){if(!c||!u.hasAnchor(r))return r.toJSON(i,c);const h={aliasCount:0,count:1,res:undefined};c.anchors.set(r,h);c.onCreate=r=>{h.res=r;delete c.onCreate};const d=r.toJSON(i,c);if(c.onCreate)c.onCreate(d);return d}if(typeof r==="bigint"&&!c?.keep)return Number(r);return r}i.toJS=toJS},44883:(r,i,c)=>{"use strict";var u=c(57047);var h=c(18941);var d=c(97397);var p=c(69820);function resolveAsScalar(r,i=true,c){if(r){const _onError=(r,i,u)=>{const h=typeof r==="number"?r:Array.isArray(r)?r[0]:r.offset;if(c)c(h,i,u);else throw new d.YAMLParseError([h,h+1],i,u)};switch(r.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return h.resolveFlowScalar(r,i,_onError);case"block-scalar":return u.resolveBlockScalar(r,i,_onError)}}return null}function createScalarToken(r,i){const{implicitKey:c=false,indent:u,inFlow:h=false,offset:d=-1,type:g="PLAIN"}=i;const y=p.stringifyString({type:g,value:r},{implicitKey:c,indent:u>0?" ".repeat(u):"",inFlow:h,options:{blockQuote:true,lineWidth:-1}});const b=i.end??[{type:"newline",offset:-1,indent:u,source:"\n"}];switch(y[0]){case"|":case">":{const r=y.indexOf("\n");const i=y.substring(0,r);const c=y.substring(r+1)+"\n";const h=[{type:"block-scalar-header",offset:d,indent:u,source:i}];if(!addEndtoBlockProps(h,b))h.push({type:"newline",offset:-1,indent:u,source:"\n"});return{type:"block-scalar",offset:d,indent:u,props:h,source:c}}case'"':return{type:"double-quoted-scalar",offset:d,indent:u,source:y,end:b};case"'":return{type:"single-quoted-scalar",offset:d,indent:u,source:y,end:b};default:return{type:"scalar",offset:d,indent:u,source:y,end:b}}}function setScalarValue(r,i,c={}){let{afterKey:u=false,implicitKey:h=false,inFlow:d=false,type:g}=c;let y="indent"in r?r.indent:null;if(u&&typeof y==="number")y+=2;if(!g)switch(r.type){case"single-quoted-scalar":g="QUOTE_SINGLE";break;case"double-quoted-scalar":g="QUOTE_DOUBLE";break;case"block-scalar":{const i=r.props[0];if(i.type!=="block-scalar-header")throw new Error("Invalid block scalar header");g=i.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:g="PLAIN"}const b=p.stringifyString({type:g,value:i},{implicitKey:h||y===null,indent:y!==null&&y>0?" ".repeat(y):"",inFlow:d,options:{blockQuote:true,lineWidth:-1}});switch(b[0]){case"|":case">":setBlockScalarValue(r,b);break;case'"':setFlowScalarValue(r,b,"double-quoted-scalar");break;case"'":setFlowScalarValue(r,b,"single-quoted-scalar");break;default:setFlowScalarValue(r,b,"scalar")}}function setBlockScalarValue(r,i){const c=i.indexOf("\n");const u=i.substring(0,c);const h=i.substring(c+1)+"\n";if(r.type==="block-scalar"){const i=r.props[0];if(i.type!=="block-scalar-header")throw new Error("Invalid block scalar header");i.source=u;r.source=h}else{const{offset:i}=r;const c="indent"in r?r.indent:-1;const d=[{type:"block-scalar-header",offset:i,indent:c,source:u}];if(!addEndtoBlockProps(d,"end"in r?r.end:undefined))d.push({type:"newline",offset:-1,indent:c,source:"\n"});for(const i of Object.keys(r))if(i!=="type"&&i!=="offset")delete r[i];Object.assign(r,{type:"block-scalar",indent:c,props:d,source:h})}}function addEndtoBlockProps(r,i){if(i)for(const c of i)switch(c.type){case"space":case"comment":r.push(c);break;case"newline":r.push(c);return true}return false}function setFlowScalarValue(r,i,c){switch(r.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":r.type=c;r.source=i;break;case"block-scalar":{const u=r.props.slice(1);let h=i.length;if(r.props[0].type==="block-scalar-header")h-=r.props[0].source.length;for(const r of u)r.offset+=h;delete r.props;Object.assign(r,{type:c,source:i,end:u});break}case"block-map":case"block-seq":{const u=r.offset+i.length;const h={type:"newline",offset:u,indent:r.indent,source:"\n"};delete r.items;Object.assign(r,{type:c,source:i,end:[h]});break}default:{const u="indent"in r?r.indent:-1;const h="end"in r&&Array.isArray(r.end)?r.end.filter((r=>r.type==="space"||r.type==="comment"||r.type==="newline")):[];for(const i of Object.keys(r))if(i!=="type"&&i!=="offset")delete r[i];Object.assign(r,{type:c,indent:u,source:i,end:h})}}}i.createScalarToken=createScalarToken;i.resolveAsScalar=resolveAsScalar;i.setScalarValue=setScalarValue},6181:(r,i)=>{"use strict";const stringify=r=>"type"in r?stringifyToken(r):stringifyItem(r);function stringifyToken(r){switch(r.type){case"block-scalar":{let i="";for(const c of r.props)i+=stringifyToken(c);return i+r.source}case"block-map":case"block-seq":{let i="";for(const c of r.items)i+=stringifyItem(c);return i}case"flow-collection":{let i=r.start.source;for(const c of r.items)i+=stringifyItem(c);for(const c of r.end)i+=c.source;return i}case"document":{let i=stringifyItem(r);if(r.end)for(const c of r.end)i+=c.source;return i}default:{let i=r.source;if("end"in r&&r.end)for(const c of r.end)i+=c.source;return i}}}function stringifyItem({start:r,key:i,sep:c,value:u}){let h="";for(const i of r)h+=i.source;if(i)h+=stringifyToken(i);if(c)for(const r of c)h+=r.source;if(u)h+=stringifyToken(u);return h}i.stringify=stringify},56021:(r,i)=>{"use strict";const c=Symbol("break visit");const u=Symbol("skip children");const h=Symbol("remove item");function visit(r,i){if("type"in r&&r.type==="document")r={start:r.start,value:r.value};_visit(Object.freeze([]),r,i)}visit.BREAK=c;visit.SKIP=u;visit.REMOVE=h;visit.itemAtPath=(r,i)=>{let c=r;for(const[r,u]of i){const i=c?.[r];if(i&&"items"in i){c=i.items[u]}else return undefined}return c};visit.parentCollection=(r,i)=>{const c=visit.itemAtPath(r,i.slice(0,-1));const u=i[i.length-1][0];const h=c?.[u];if(h&&"items"in h)return h;throw new Error("Parent collection not found")};function _visit(r,i,u){let d=u(i,r);if(typeof d==="symbol")return d;for(const p of["key","value"]){const g=i[p];if(g&&"items"in g){for(let i=0;i<g.items.length;++i){const d=_visit(Object.freeze(r.concat([[p,i]])),g.items[i],u);if(typeof d==="number")i=d-1;else if(d===c)return c;else if(d===h){g.items.splice(i,1);i-=1}}if(typeof d==="function"&&p==="key")d=d(i,r)}}return typeof d==="function"?d(i,r):d}i.visit=visit},58764:(r,i,c)=>{"use strict";var u=c(44883);var h=c(6181);var d=c(56021);const p="\ufeff";const g="";const y="";const b="";const isCollection=r=>!!r&&"items"in r;const isScalar=r=>!!r&&(r.type==="scalar"||r.type==="single-quoted-scalar"||r.type==="double-quoted-scalar"||r.type==="block-scalar");function prettyToken(r){switch(r){case p:return"<BOM>";case g:return"<DOC>";case y:return"<FLOW_END>";case b:return"<SCALAR>";default:return JSON.stringify(r)}}function tokenType(r){switch(r){case p:return"byte-order-mark";case g:return"doc-mode";case y:return"flow-error-end";case b:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(r[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}i.createScalarToken=u.createScalarToken;i.resolveAsScalar=u.resolveAsScalar;i.setScalarValue=u.setScalarValue;i.stringify=h.stringify;i.visit=d.visit;i.BOM=p;i.DOCUMENT=g;i.FLOW_END=y;i.SCALAR=b;i.isCollection=isCollection;i.isScalar=isScalar;i.prettyToken=prettyToken;i.tokenType=tokenType},14904:(r,i,c)=>{"use strict";var u=c(58764);function isEmpty(r){switch(r){case undefined:case" ":case"\n":case"\r":case"\t":return true;default:return false}}const h="0123456789ABCDEFabcdef".split("");const d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split("");const p=",[]{}".split("");const g=" ,[]{}\n\r\t".split("");const isNotAnchorChar=r=>!r||g.includes(r);class Lexer{constructor(){this.atEnd=false;this.blockScalarIndent=-1;this.blockScalarKeep=false;this.buffer="";this.flowKey=false;this.flowLevel=0;this.indentNext=0;this.indentValue=0;this.lineEndPos=null;this.next=null;this.pos=0}*lex(r,i=false){if(r){this.buffer=this.buffer?this.buffer+r:r;this.lineEndPos=null}this.atEnd=!i;let c=this.next??"stream";while(c&&(i||this.hasChars(1)))c=yield*this.parseNext(c)}atLineEnd(){let r=this.pos;let i=this.buffer[r];while(i===" "||i==="\t")i=this.buffer[++r];if(!i||i==="#"||i==="\n")return true;if(i==="\r")return this.buffer[r+1]==="\n";return false}charAt(r){return this.buffer[this.pos+r]}continueScalar(r){let i=this.buffer[r];if(this.indentNext>0){let c=0;while(i===" ")i=this.buffer[++c+r];if(i==="\r"){const i=this.buffer[c+r+1];if(i==="\n"||!i&&!this.atEnd)return r+c+1}return i==="\n"||c>=this.indentNext||!i&&!this.atEnd?r+c:-1}if(i==="-"||i==="."){const i=this.buffer.substr(r,3);if((i==="---"||i==="...")&&isEmpty(this.buffer[r+3]))return-1}return r}getLine(){let r=this.lineEndPos;if(typeof r!=="number"||r!==-1&&r<this.pos){r=this.buffer.indexOf("\n",this.pos);this.lineEndPos=r}if(r===-1)return this.atEnd?this.buffer.substring(this.pos):null;if(this.buffer[r-1]==="\r")r-=1;return this.buffer.substring(this.pos,r)}hasChars(r){return this.pos+r<=this.buffer.length}setNext(r){this.buffer=this.buffer.substring(this.pos);this.pos=0;this.lineEndPos=null;this.next=r;return null}peek(r){return this.buffer.substr(this.pos,r)}*parseNext(r){switch(r){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let r=this.getLine();if(r===null)return this.setNext("stream");if(r[0]===u.BOM){yield*this.pushCount(1);r=r.substring(1)}if(r[0]==="%"){let i=r.length;const c=r.indexOf("#");if(c!==-1){const u=r[c-1];if(u===" "||u==="\t")i=c-1}while(true){const c=r[i-1];if(c===" "||c==="\t")i-=1;else break}const u=(yield*this.pushCount(i))+(yield*this.pushSpaces(true));yield*this.pushCount(r.length-u);this.pushNewline();return"stream"}if(this.atLineEnd()){const i=yield*this.pushSpaces(true);yield*this.pushCount(r.length-i);yield*this.pushNewline();return"stream"}yield u.DOCUMENT;return yield*this.parseLineStart()}*parseLineStart(){const r=this.charAt(0);if(!r&&!this.atEnd)return this.setNext("line-start");if(r==="-"||r==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const r=this.peek(3);if(r==="---"&&isEmpty(this.charAt(3))){yield*this.pushCount(3);this.indentValue=0;this.indentNext=0;return"doc"}else if(r==="..."&&isEmpty(this.charAt(3))){yield*this.pushCount(3);return"stream"}}this.indentValue=yield*this.pushSpaces(false);if(this.indentNext>this.indentValue&&!isEmpty(this.charAt(1)))this.indentNext=this.indentValue;return yield*this.parseBlockStart()}*parseBlockStart(){const[r,i]=this.peek(2);if(!i&&!this.atEnd)return this.setNext("block-start");if((r==="-"||r==="?"||r===":")&&isEmpty(i)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(true));this.indentNext=this.indentValue+1;this.indentValue+=r;return yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(true);const r=this.getLine();if(r===null)return this.setNext("doc");let i=yield*this.pushIndicators();switch(r[i]){case"#":yield*this.pushCount(r.length-i);case undefined:yield*this.pushNewline();return yield*this.parseLineStart();case"{":case"[":yield*this.pushCount(1);this.flowKey=false;this.flowLevel=1;return"flow";case"}":case"]":yield*this.pushCount(1);return"doc";case"*":yield*this.pushUntil(isNotAnchorChar);return"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":i+=(yield*this.parseBlockScalarHeader());i+=(yield*this.pushSpaces(true));yield*this.pushCount(r.length-i);yield*this.pushNewline();return yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let r,i;let c=-1;do{r=yield*this.pushNewline();if(r>0){i=yield*this.pushSpaces(false);this.indentValue=c=i}else{i=0}i+=(yield*this.pushSpaces(true))}while(r+i>0);const h=this.getLine();if(h===null)return this.setNext("flow");if(c!==-1&&c<this.indentNext&&h[0]!=="#"||c===0&&(h.startsWith("---")||h.startsWith("..."))&&isEmpty(h[3])){const r=c===this.indentNext-1&&this.flowLevel===1&&(h[0]==="]"||h[0]==="}");if(!r){this.flowLevel=0;yield u.FLOW_END;return yield*this.parseLineStart()}}let d=0;while(h[d]===","){d+=(yield*this.pushCount(1));d+=(yield*this.pushSpaces(true));this.flowKey=false}d+=(yield*this.pushIndicators());switch(h[d]){case undefined:return"flow";case"#":yield*this.pushCount(h.length-d);return"flow";case"{":case"[":yield*this.pushCount(1);this.flowKey=false;this.flowLevel+=1;return"flow";case"}":case"]":yield*this.pushCount(1);this.flowKey=true;this.flowLevel-=1;return this.flowLevel?"flow":"doc";case"*":yield*this.pushUntil(isNotAnchorChar);return"flow";case'"':case"'":this.flowKey=true;return yield*this.parseQuotedScalar();case":":{const r=this.charAt(1);if(this.flowKey||isEmpty(r)||r===","){this.flowKey=false;yield*this.pushCount(1);yield*this.pushSpaces(true);return"flow"}}default:this.flowKey=false;return yield*this.parsePlainScalar()}}*parseQuotedScalar(){const r=this.charAt(0);let i=this.buffer.indexOf(r,this.pos+1);if(r==="'"){while(i!==-1&&this.buffer[i+1]==="'")i=this.buffer.indexOf("'",i+2)}else{while(i!==-1){let r=0;while(this.buffer[i-1-r]==="\\")r+=1;if(r%2===0)break;i=this.buffer.indexOf('"',i+1)}}const c=this.buffer.substring(0,i);let u=c.indexOf("\n",this.pos);if(u!==-1){while(u!==-1){const r=this.continueScalar(u+1);if(r===-1)break;u=c.indexOf("\n",r)}if(u!==-1){i=u-(c[u-1]==="\r"?2:1)}}if(i===-1){if(!this.atEnd)return this.setNext("quoted-scalar");i=this.buffer.length}yield*this.pushToIndex(i+1,false);return this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1;this.blockScalarKeep=false;let r=this.pos;while(true){const i=this.buffer[++r];if(i==="+")this.blockScalarKeep=true;else if(i>"0"&&i<="9")this.blockScalarIndent=Number(i)-1;else if(i!=="-")break}return yield*this.pushUntil((r=>isEmpty(r)||r==="#"))}*parseBlockScalar(){let r=this.pos-1;let i=0;let c;e:for(let u=this.pos;c=this.buffer[u];++u){switch(c){case" ":i+=1;break;case"\n":r=u;i=0;break;case"\r":{const r=this.buffer[u+1];if(!r&&!this.atEnd)return this.setNext("block-scalar");if(r==="\n")break}default:break e}}if(!c&&!this.atEnd)return this.setNext("block-scalar");if(i>=this.indentNext){if(this.blockScalarIndent===-1)this.indentNext=i;else this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(r+1);if(i===-1)break;r=this.buffer.indexOf("\n",i)}while(r!==-1);if(r===-1){if(!this.atEnd)return this.setNext("block-scalar");r=this.buffer.length}}if(!this.blockScalarKeep){do{let c=r-1;let u=this.buffer[c];if(u==="\r")u=this.buffer[--c];const h=c;while(u===" "||u==="\t")u=this.buffer[--c];if(u==="\n"&&c>=this.pos&&c+1+i>h)r=c;else break}while(true)}yield u.SCALAR;yield*this.pushToIndex(r+1,true);return yield*this.parseLineStart()}*parsePlainScalar(){const r=this.flowLevel>0;let i=this.pos-1;let c=this.pos-1;let h;while(h=this.buffer[++c]){if(h===":"){const u=this.buffer[c+1];if(isEmpty(u)||r&&u===",")break;i=c}else if(isEmpty(h)){let u=this.buffer[c+1];if(h==="\r"){if(u==="\n"){c+=1;h="\n";u=this.buffer[c+1]}else i=c}if(u==="#"||r&&p.includes(u))break;if(h==="\n"){const r=this.continueScalar(c+1);if(r===-1)break;c=Math.max(c,r-2)}}else{if(r&&p.includes(h))break;i=c}}if(!h&&!this.atEnd)return this.setNext("plain-scalar");yield u.SCALAR;yield*this.pushToIndex(i+1,true);return r?"flow":"doc"}*pushCount(r){if(r>0){yield this.buffer.substr(this.pos,r);this.pos+=r;return r}return 0}*pushToIndex(r,i){const c=this.buffer.slice(this.pos,r);if(c){yield c;this.pos+=c.length;return c.length}else if(i)yield"";return 0}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(true))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(isNotAnchorChar))+(yield*this.pushSpaces(true))+(yield*this.pushIndicators());case"-":case"?":case":":{const r=this.flowLevel>0;const i=this.charAt(1);if(isEmpty(i)||r&&p.includes(i)){if(!r)this.indentNext=this.indentValue+1;else if(this.flowKey)this.flowKey=false;return(yield*this.pushCount(1))+(yield*this.pushSpaces(true))+(yield*this.pushIndicators())}}}return 0}*pushTag(){if(this.charAt(1)==="<"){let r=this.pos+2;let i=this.buffer[r];while(!isEmpty(i)&&i!==">")i=this.buffer[++r];return yield*this.pushToIndex(i===">"?r+1:r,false)}else{let r=this.pos+1;let i=this.buffer[r];while(i){if(d.includes(i))i=this.buffer[++r];else if(i==="%"&&h.includes(this.buffer[r+1])&&h.includes(this.buffer[r+2])){i=this.buffer[r+=3]}else break}return yield*this.pushToIndex(r,false)}}*pushNewline(){const r=this.buffer[this.pos];if(r==="\n")return yield*this.pushCount(1);else if(r==="\r"&&this.charAt(1)==="\n")return yield*this.pushCount(2);else return 0}*pushSpaces(r){let i=this.pos-1;let c;do{c=this.buffer[++i]}while(c===" "||r&&c==="\t");const u=i-this.pos;if(u>0){yield this.buffer.substr(this.pos,u);this.pos=i}return u}*pushUntil(r){let i=this.pos;let c=this.buffer[i];while(!r(c))c=this.buffer[++i];return yield*this.pushToIndex(i,false)}}i.Lexer=Lexer},89774:(r,i)=>{"use strict";class LineCounter{constructor(){this.lineStarts=[];this.addNewLine=r=>this.lineStarts.push(r);this.linePos=r=>{let i=0;let c=this.lineStarts.length;while(i<c){const u=i+c>>1;if(this.lineStarts[u]<r)i=u+1;else c=u}if(this.lineStarts[i]===r)return{line:i+1,col:1};if(i===0)return{line:0,col:r};const u=this.lineStarts[i-1];return{line:i,col:r-u+1}}}}i.LineCounter=LineCounter},34370:(r,i,c)=>{"use strict";var u=c(58764);var h=c(14904);function includesToken(r,i){for(let c=0;c<r.length;++c)if(r[c].type===i)return true;return false}function findNonEmptyIndex(r){for(let i=0;i<r.length;++i){switch(r[i].type){case"space":case"comment":case"newline":break;default:return i}}return-1}function isFlowToken(r){switch(r?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return true;default:return false}}function getPrevProps(r){switch(r.type){case"document":return r.start;case"block-map":{const i=r.items[r.items.length-1];return i.sep??i.start}case"block-seq":return r.items[r.items.length-1].start;default:return[]}}function getFirstKeyStartProps(r){if(r.length===0)return[];let i=r.length;e:while(--i>=0){switch(r[i].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}}while(r[++i]?.type==="space"){}return r.splice(i,r.length)}function fixFlowSeqItems(r){if(r.start.type==="flow-seq-start"){for(const i of r.items){if(i.sep&&!i.value&&!includesToken(i.start,"explicit-key-ind")&&!includesToken(i.sep,"map-value-ind")){if(i.key)i.value=i.key;delete i.key;if(isFlowToken(i.value)){if(i.value.end)Array.prototype.push.apply(i.value.end,i.sep);else i.value.end=i.sep}else Array.prototype.push.apply(i.start,i.sep);delete i.sep}}}}class Parser{constructor(r){this.atNewLine=true;this.atScalar=false;this.indent=0;this.offset=0;this.onKeyLine=false;this.stack=[];this.source="";this.type="";this.lexer=new h.Lexer;this.onNewLine=r}*parse(r,i=false){if(this.onNewLine&&this.offset===0)this.onNewLine(0);for(const c of this.lexer.lex(r,i))yield*this.next(c);if(!i)yield*this.end()}*next(r){this.source=r;if(process.env.LOG_TOKENS)console.log("|",u.prettyToken(r));if(this.atScalar){this.atScalar=false;yield*this.step();this.offset+=r.length;return}const i=u.tokenType(r);if(!i){const i=`Not a YAML token: ${r}`;yield*this.pop({type:"error",offset:this.offset,message:i,source:r});this.offset+=r.length}else if(i==="scalar"){this.atNewLine=false;this.atScalar=true;this.type="scalar"}else{this.type=i;yield*this.step();switch(i){case"newline":this.atNewLine=true;this.indent=0;if(this.onNewLine)this.onNewLine(this.offset+r.length);break;case"space":if(this.atNewLine&&r[0]===" ")this.indent+=r.length;break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":if(this.atNewLine)this.indent+=r.length;break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=false}this.offset+=r.length}}*end(){while(this.stack.length>0)yield*this.pop()}get sourceToken(){const r={type:this.type,offset:this.offset,indent:this.indent,source:this.source};return r}*step(){const r=this.peek(1);if(this.type==="doc-end"&&(!r||r.type!=="doc-end")){while(this.stack.length>0)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!r)return yield*this.stream();switch(r.type){case"document":return yield*this.document(r);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(r);case"block-scalar":return yield*this.blockScalar(r);case"block-map":return yield*this.blockMap(r);case"block-seq":return yield*this.blockSequence(r);case"flow-collection":return yield*this.flowCollection(r);case"doc-end":return yield*this.documentEnd(r)}yield*this.pop()}peek(r){return this.stack[this.stack.length-r]}*pop(r){const i=r??this.stack.pop();if(!i){const r="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:r}}else if(this.stack.length===0){yield i}else{const r=this.peek(1);if(i.type==="block-scalar"){i.indent="indent"in r?r.indent:0}else if(i.type==="flow-collection"&&r.type==="document"){i.indent=0}if(i.type==="flow-collection")fixFlowSeqItems(i);switch(r.type){case"document":r.value=i;break;case"block-scalar":r.props.push(i);break;case"block-map":{const c=r.items[r.items.length-1];if(c.value){r.items.push({start:[],key:i,sep:[]});this.onKeyLine=true;return}else if(c.sep){c.value=i}else{Object.assign(c,{key:i,sep:[]});this.onKeyLine=!includesToken(c.start,"explicit-key-ind");return}break}case"block-seq":{const c=r.items[r.items.length-1];if(c.value)r.items.push({start:[],value:i});else c.value=i;break}case"flow-collection":{const c=r.items[r.items.length-1];if(!c||c.value)r.items.push({start:[],key:i,sep:[]});else if(c.sep)c.value=i;else Object.assign(c,{key:i,sep:[]});return}default:yield*this.pop();yield*this.pop(i)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(i.type==="block-map"||i.type==="block-seq")){const c=i.items[i.items.length-1];if(c&&!c.sep&&!c.value&&c.start.length>0&&findNonEmptyIndex(c.start)===-1&&(i.indent===0||c.start.every((r=>r.type!=="comment"||r.indent<i.indent)))){if(r.type==="document")r.end=c.start;else r.items.push({start:c.start});i.items.splice(-1,1)}}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const r={type:"document",offset:this.offset,start:[]};if(this.type==="doc-start")r.start.push(this.sourceToken);this.stack.push(r);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(r){if(r.value)return yield*this.lineEnd(r);switch(this.type){case"doc-start":{if(findNonEmptyIndex(r.start)!==-1){yield*this.pop();yield*this.step()}else r.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":r.start.push(this.sourceToken);return}const i=this.startBlockValue(r);if(i)this.stack.push(i);else{yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}}*scalar(r){if(this.type==="map-value-ind"){const i=getPrevProps(this.peek(2));const c=getFirstKeyStartProps(i);let u;if(r.end){u=r.end;u.push(this.sourceToken);delete r.end}else u=[this.sourceToken];const h={type:"block-map",offset:r.offset,indent:r.indent,items:[{start:c,key:r,sep:u}]};this.onKeyLine=true;this.stack[this.stack.length-1]=h}else yield*this.lineEnd(r)}*blockScalar(r){switch(this.type){case"space":case"comment":case"newline":r.props.push(this.sourceToken);return;case"scalar":r.source=this.source;this.atNewLine=true;this.indent=0;if(this.onNewLine){let r=this.source.indexOf("\n")+1;while(r!==0){this.onNewLine(this.offset+r);r=this.source.indexOf("\n",r)+1}}yield*this.pop();break;default:yield*this.pop();yield*this.step()}}*blockMap(r){const i=r.items[r.items.length-1];switch(this.type){case"newline":this.onKeyLine=false;if(i.value){const c="end"in i.value?i.value.end:undefined;const u=Array.isArray(c)?c[c.length-1]:undefined;if(u?.type==="comment")c?.push(this.sourceToken);else r.items.push({start:[this.sourceToken]})}else if(i.sep){i.sep.push(this.sourceToken)}else{i.start.push(this.sourceToken)}return;case"space":case"comment":if(i.value){r.items.push({start:[this.sourceToken]})}else if(i.sep){i.sep.push(this.sourceToken)}else{if(this.atIndentedComment(i.start,r.indent)){const c=r.items[r.items.length-2];const u=c?.value?.end;if(Array.isArray(u)){Array.prototype.push.apply(u,i.start);u.push(this.sourceToken);r.items.pop();return}}i.start.push(this.sourceToken)}return}if(this.indent>=r.indent){const c=!this.onKeyLine&&this.indent===r.indent&&i.sep;let u=[];if(c&&i.sep&&!i.value){const c=[];for(let u=0;u<i.sep.length;++u){const h=i.sep[u];switch(h.type){case"newline":c.push(u);break;case"space":break;case"comment":if(h.indent>r.indent)c.length=0;break;default:c.length=0}}if(c.length>=2)u=i.sep.splice(c[1])}switch(this.type){case"anchor":case"tag":if(c||i.value){u.push(this.sourceToken);r.items.push({start:u});this.onKeyLine=true}else if(i.sep){i.sep.push(this.sourceToken)}else{i.start.push(this.sourceToken)}return;case"explicit-key-ind":if(!i.sep&&!includesToken(i.start,"explicit-key-ind")){i.start.push(this.sourceToken)}else if(c||i.value){u.push(this.sourceToken);r.items.push({start:u})}else{this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]})}this.onKeyLine=true;return;case"map-value-ind":if(includesToken(i.start,"explicit-key-ind")){if(!i.sep){if(includesToken(i.start,"newline")){Object.assign(i,{key:null,sep:[this.sourceToken]})}else{const r=getFirstKeyStartProps(i.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]})}}else if(i.value){r.items.push({start:[],key:null,sep:[this.sourceToken]})}else if(includesToken(i.sep,"map-value-ind")){this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:u,key:null,sep:[this.sourceToken]}]})}else if(isFlowToken(i.key)&&!includesToken(i.sep,"newline")){const r=getFirstKeyStartProps(i.start);const c=i.key;const u=i.sep;u.push(this.sourceToken);delete i.key,delete i.sep;this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:c,sep:u}]})}else if(u.length>0){i.sep=i.sep.concat(u,this.sourceToken)}else{i.sep.push(this.sourceToken)}}else{if(!i.sep){Object.assign(i,{key:null,sep:[this.sourceToken]})}else if(i.value||c){r.items.push({start:u,key:null,sep:[this.sourceToken]})}else if(includesToken(i.sep,"map-value-ind")){this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]})}else{i.sep.push(this.sourceToken)}}this.onKeyLine=true;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const h=this.flowScalar(this.type);if(c||i.value){r.items.push({start:u,key:h,sep:[]});this.onKeyLine=true}else if(i.sep){this.stack.push(h)}else{Object.assign(i,{key:h,sep:[]});this.onKeyLine=true}return}default:{const h=this.startBlockValue(r);if(h){if(c&&h.type!=="block-seq"&&includesToken(i.start,"explicit-key-ind")){r.items.push({start:u})}this.stack.push(h);return}}}}yield*this.pop();yield*this.step()}*blockSequence(r){const i=r.items[r.items.length-1];switch(this.type){case"newline":if(i.value){const c="end"in i.value?i.value.end:undefined;const u=Array.isArray(c)?c[c.length-1]:undefined;if(u?.type==="comment")c?.push(this.sourceToken);else r.items.push({start:[this.sourceToken]})}else i.start.push(this.sourceToken);return;case"space":case"comment":if(i.value)r.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(i.start,r.indent)){const c=r.items[r.items.length-2];const u=c?.value?.end;if(Array.isArray(u)){Array.prototype.push.apply(u,i.start);u.push(this.sourceToken);r.items.pop();return}}i.start.push(this.sourceToken)}return;case"anchor":case"tag":if(i.value||this.indent<=r.indent)break;i.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==r.indent)break;if(i.value||includesToken(i.start,"seq-item-ind"))r.items.push({start:[this.sourceToken]});else i.start.push(this.sourceToken);return}if(this.indent>r.indent){const i=this.startBlockValue(r);if(i){this.stack.push(i);return}}yield*this.pop();yield*this.step()}*flowCollection(r){const i=r.items[r.items.length-1];if(this.type==="flow-error-end"){let r;do{yield*this.pop();r=this.peek(1)}while(r&&r.type==="flow-collection")}else if(r.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":if(!i||i.sep)r.items.push({start:[this.sourceToken]});else i.start.push(this.sourceToken);return;case"map-value-ind":if(!i||i.value)r.items.push({start:[],key:null,sep:[this.sourceToken]});else if(i.sep)i.sep.push(this.sourceToken);else Object.assign(i,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":if(!i||i.value)r.items.push({start:[this.sourceToken]});else if(i.sep)i.sep.push(this.sourceToken);else i.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const c=this.flowScalar(this.type);if(!i||i.value)r.items.push({start:[],key:c,sep:[]});else if(i.sep)this.stack.push(c);else Object.assign(i,{key:c,sep:[]});return}case"flow-map-end":case"flow-seq-end":r.end.push(this.sourceToken);return}const c=this.startBlockValue(r);if(c)this.stack.push(c);else{yield*this.pop();yield*this.step()}}else{const i=this.peek(2);if(i.type==="block-map"&&(this.type==="map-value-ind"&&i.indent===r.indent||this.type==="newline"&&!i.items[i.items.length-1].sep)){yield*this.pop();yield*this.step()}else if(this.type==="map-value-ind"&&i.type!=="flow-collection"){const c=getPrevProps(i);const u=getFirstKeyStartProps(c);fixFlowSeqItems(r);const h=r.end.splice(1,r.end.length);h.push(this.sourceToken);const d={type:"block-map",offset:r.offset,indent:r.indent,items:[{start:u,key:r,sep:h}]};this.onKeyLine=true;this.stack[this.stack.length-1]=d}else{yield*this.lineEnd(r)}}}flowScalar(r){if(this.onNewLine){let r=this.source.indexOf("\n")+1;while(r!==0){this.onNewLine(this.offset+r);r=this.source.indexOf("\n",r)+1}}return{type:r,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(r){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=true;const i=getPrevProps(r);const c=getFirstKeyStartProps(i);c.push(this.sourceToken);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:c}]}}case"map-value-ind":{this.onKeyLine=true;const i=getPrevProps(r);const c=getFirstKeyStartProps(i);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:c,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(r,i){if(this.type!=="comment")return false;if(this.indent<=i)return false;return r.every((r=>r.type==="newline"||r.type==="space"))}*documentEnd(r){if(this.type!=="doc-mode"){if(r.end)r.end.push(this.sourceToken);else r.end=[this.sourceToken];if(this.type==="newline")yield*this.pop()}}*lineEnd(r){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop();yield*this.step();break;case"newline":this.onKeyLine=false;case"space":case"comment":default:if(r.end)r.end.push(this.sourceToken);else r.end=[this.sourceToken];if(this.type==="newline")yield*this.pop()}}}i.Parser=Parser},56619:(r,i,c)=>{"use strict";var u=c(40587);var h=c(7932);var d=c(97397);var p=c(6125);var g=c(89774);var y=c(34370);function parseOptions(r){const i=r.prettyErrors!==false;const c=r.lineCounter||i&&new g.LineCounter||null;return{lineCounter:c,prettyErrors:i}}function parseAllDocuments(r,i={}){const{lineCounter:c,prettyErrors:h}=parseOptions(i);const p=new y.Parser(c?.addNewLine);const g=new u.Composer(i);const b=Array.from(g.compose(p.parse(r)));if(h&&c)for(const i of b){i.errors.forEach(d.prettifyError(r,c));i.warnings.forEach(d.prettifyError(r,c))}if(b.length>0)return b;return Object.assign([],{empty:true},g.streamInfo())}function parseDocument(r,i={}){const{lineCounter:c,prettyErrors:h}=parseOptions(i);const p=new y.Parser(c?.addNewLine);const g=new u.Composer(i);let b=null;for(const i of g.compose(p.parse(r),true,r.length)){if(!b)b=i;else if(b.options.logLevel!=="silent"){b.errors.push(new d.YAMLParseError(i.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}if(h&&c){b.errors.forEach(d.prettifyError(r,c));b.warnings.forEach(d.prettifyError(r,c))}return b}function parse(r,i,c){let u=undefined;if(typeof i==="function"){u=i}else if(c===undefined&&i&&typeof i==="object"){c=i}const h=parseDocument(r,c);if(!h)return null;h.warnings.forEach((r=>p.warn(h.options.logLevel,r)));if(h.errors.length>0){if(h.options.logLevel!=="silent")throw h.errors[0];else h.errors=[]}return h.toJS(Object.assign({reviver:u},c))}function stringify(r,i,c){let u=null;if(typeof i==="function"||Array.isArray(i)){u=i}else if(c===undefined&&i){c=i}if(typeof c==="string")c=c.length;if(typeof c==="number"){const r=Math.round(c);c=r<1?undefined:r>8?{indent:8}:{indent:r}}if(r===undefined){const{keepUndefined:r}=c??i??{};if(!r)return undefined}return new h.Document(r,u,c).toString(c)}i.parse=parse;i.parseAllDocuments=parseAllDocuments;i.parseDocument=parseDocument;i.stringify=stringify},13746:(r,i,c)=>{"use strict";var u=c(81667);var h=c(2077);var d=c(76715);var p=c(61938);var g=c(31097);const sortMapEntriesByKey=(r,i)=>r.key<i.key?-1:r.key>i.key?1:0;class Schema{constructor({compat:r,customTags:i,merge:c,resolveKnownTags:y,schema:b,sortMapEntries:v,toStringDefaults:w}){this.compat=Array.isArray(r)?g.getTags(r,"compat"):r?g.getTags(null,r):null;this.merge=!!c;this.name=typeof b==="string"&&b||"core";this.knownTags=y?g.coreKnownTags:{};this.tags=g.getTags(i,this.name);this.toStringOptions=w??null;Object.defineProperty(this,u.MAP,{value:h.map});Object.defineProperty(this,u.SCALAR,{value:p.string});Object.defineProperty(this,u.SEQ,{value:d.seq});this.sortMapEntries=typeof v==="function"?v:v===true?sortMapEntriesByKey:null}clone(){const r=Object.create(Schema.prototype,Object.getOwnPropertyDescriptors(this));r.tags=this.tags.slice();return r}}i.Schema=Schema},2077:(r,i,c)=>{"use strict";var u=c(81667);var h=c(57924);var d=c(45995);function createMap(r,i,c){const{keepUndefined:u,replacer:p}=c;const g=new d.YAMLMap(r);const add=(r,d)=>{if(typeof p==="function")d=p.call(i,r,d);else if(Array.isArray(p)&&!p.includes(r))return;if(d!==undefined||u)g.items.push(h.createPair(r,d,c))};if(i instanceof Map){for(const[r,c]of i)add(r,c)}else if(i&&typeof i==="object"){for(const r of Object.keys(i))add(r,i[r])}if(typeof r.sortMapEntries==="function"){g.items.sort(r.sortMapEntries)}return g}const p={collection:"map",createNode:createMap,default:true,nodeClass:d.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(r,i){if(!u.isMap(r))i("Expected a mapping for this tag");return r}};i.map=p},35394:(r,i,c)=>{"use strict";var u=c(87287);const h={identify:r=>r==null,createNode:()=>new u.Scalar(null),default:true,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new u.Scalar(null),stringify:({source:r},i)=>typeof r==="string"&&h.test.test(r)?r:i.options.nullStr};i.nullTag=h},76715:(r,i,c)=>{"use strict";var u=c(58798);var h=c(81667);var d=c(66511);function createSeq(r,i,c){const{replacer:h}=c;const p=new d.YAMLSeq(r);if(i&&Symbol.iterator in Object(i)){let r=0;for(let d of i){if(typeof h==="function"){const c=i instanceof Set?d:String(r++);d=h.call(i,c,d)}p.items.push(u.createNode(d,undefined,c))}}return p}const p={collection:"seq",createNode:createSeq,default:true,nodeClass:d.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(r,i){if(!h.isSeq(r))i("Expected a sequence for this tag");return r}};i.seq=p},61938:(r,i,c)=>{"use strict";var u=c(69820);const h={identify:r=>typeof r==="string",default:true,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify(r,i,c,h){i=Object.assign({actualString:true},i);return u.stringifyString(r,i,c,h)}};i.string=h},18092:(r,i,c)=>{"use strict";var u=c(87287);const h={identify:r=>typeof r==="boolean",default:true,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:r=>new u.Scalar(r[0]==="t"||r[0]==="T"),stringify({source:r,value:i},c){if(r&&h.test.test(r)){const c=r[0]==="t"||r[0]==="T";if(i===c)return r}return i?c.options.trueStr:c.options.falseStr}};i.boolTag=h},75243:(r,i,c)=>{"use strict";var u=c(87287);var h=c(3362);const d={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:h.stringifyNumber};const p={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r),stringify(r){const i=Number(r.value);return isFinite(i)?i.toExponential():h.stringifyNumber(r)}};const g={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(r){const i=new u.Scalar(parseFloat(r));const c=r.indexOf(".");if(c!==-1&&r[r.length-1]==="0")i.minFractionDigits=r.length-c-1;return i},stringify:h.stringifyNumber};i.float=g;i.floatExp=p;i.floatNaN=d},41971:(r,i,c)=>{"use strict";var u=c(3362);const intIdentify=r=>typeof r==="bigint"||Number.isInteger(r);const intResolve=(r,i,c,{intAsBigInt:u})=>u?BigInt(r):parseInt(r.substring(i),c);function intStringify(r,i,c){const{value:h}=r;if(intIdentify(h)&&h>=0)return c+h.toString(i);return u.stringifyNumber(r)}const h={identify:r=>intIdentify(r)&&r>=0,default:true,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(r,i,c)=>intResolve(r,2,8,c),stringify:r=>intStringify(r,8,"0o")};const d={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(r,i,c)=>intResolve(r,0,10,c),stringify:u.stringifyNumber};const p={identify:r=>intIdentify(r)&&r>=0,default:true,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(r,i,c)=>intResolve(r,2,16,c),stringify:r=>intStringify(r,16,"0x")};i.int=d;i.intHex=p;i.intOct=h},75779:(r,i,c)=>{"use strict";var u=c(2077);var h=c(35394);var d=c(76715);var p=c(61938);var g=c(18092);var y=c(75243);var b=c(41971);const v=[u.map,d.seq,p.string,h.nullTag,g.boolTag,b.intOct,b.int,b.intHex,y.floatNaN,y.floatExp,y.float];i.schema=v},39302:(r,i,c)=>{"use strict";var u=c(87287);var h=c(2077);var d=c(76715);function intIdentify(r){return typeof r==="bigint"||Number.isInteger(r)}const stringifyJSON=({value:r})=>JSON.stringify(r);const p=[{identify:r=>typeof r==="string",default:true,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify:stringifyJSON},{identify:r=>r==null,createNode:()=>new u.Scalar(null),default:true,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:stringifyJSON},{identify:r=>typeof r==="boolean",default:true,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:r=>r==="true",stringify:stringifyJSON},{identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(r,i,{intAsBigInt:c})=>c?BigInt(r):parseInt(r,10),stringify:({value:r})=>intIdentify(r)?r.toString():JSON.stringify(r)},{identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:r=>parseFloat(r),stringify:stringifyJSON}];const g={default:true,tag:"",test:/^/,resolve(r,i){i(`Unresolved plain scalar ${JSON.stringify(r)}`);return r}};const y=[h.map,d.seq].concat(p,g);i.schema=y},31097:(r,i,c)=>{"use strict";var u=c(2077);var h=c(35394);var d=c(76715);var p=c(61938);var g=c(18092);var y=c(75243);var b=c(41971);var v=c(75779);var w=c(39302);var C=c(38428);var E=c(54409);var x=c(12563);var S=c(0);var k=c(43368);var T=c(56069);const N=new Map([["core",v.schema],["failsafe",[u.map,d.seq,p.string]],["json",w.schema],["yaml11",S.schema],["yaml-1.1",S.schema]]);const O={binary:C.binary,bool:g.boolTag,float:y.float,floatExp:y.floatExp,floatNaN:y.floatNaN,floatTime:T.floatTime,int:b.int,intHex:b.intHex,intOct:b.intOct,intTime:T.intTime,map:u.map,null:h.nullTag,omap:E.omap,pairs:x.pairs,seq:d.seq,set:k.set,timestamp:T.timestamp};const $={"tag:yaml.org,2002:binary":C.binary,"tag:yaml.org,2002:omap":E.omap,"tag:yaml.org,2002:pairs":x.pairs,"tag:yaml.org,2002:set":k.set,"tag:yaml.org,2002:timestamp":T.timestamp};function getTags(r,i){let c=N.get(i);if(!c){if(Array.isArray(r))c=[];else{const r=Array.from(N.keys()).filter((r=>r!=="yaml11")).map((r=>JSON.stringify(r))).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${r} or define customTags array`)}}if(Array.isArray(r)){for(const i of r)c=c.concat(i)}else if(typeof r==="function"){c=r(c.slice())}return c.map((r=>{if(typeof r!=="string")return r;const i=O[r];if(i)return i;const c=Object.keys(O).map((r=>JSON.stringify(r))).join(", ");throw new Error(`Unknown custom tag "${r}"; use one of ${c}`)}))}i.coreKnownTags=$;i.getTags=getTags},38428:(r,i,c)=>{"use strict";var u=c(87287);var h=c(69820);const d={identify:r=>r instanceof Uint8Array,default:false,tag:"tag:yaml.org,2002:binary",resolve(r,i){if(typeof Buffer==="function"){return Buffer.from(r,"base64")}else if(typeof atob==="function"){const i=atob(r.replace(/[\n\r]/g,""));const c=new Uint8Array(i.length);for(let r=0;r<i.length;++r)c[r]=i.charCodeAt(r);return c}else{i("This environment does not support reading binary tags; either Buffer or atob is required");return r}},stringify({comment:r,type:i,value:c},d,p,g){const y=c;let b;if(typeof Buffer==="function"){b=y instanceof Buffer?y.toString("base64"):Buffer.from(y.buffer).toString("base64")}else if(typeof btoa==="function"){let r="";for(let i=0;i<y.length;++i)r+=String.fromCharCode(y[i]);b=btoa(r)}else{throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required")}if(!i)i=u.Scalar.BLOCK_LITERAL;if(i!==u.Scalar.QUOTE_DOUBLE){const r=Math.max(d.options.lineWidth-d.indent.length,d.options.minContentWidth);const c=Math.ceil(b.length/r);const h=new Array(c);for(let i=0,u=0;i<c;++i,u+=r){h[i]=b.substr(u,r)}b=h.join(i===u.Scalar.BLOCK_LITERAL?"\n":" ")}return h.stringifyString({comment:r,type:i,value:b},d,p,g)}};i.binary=d},41941:(r,i,c)=>{"use strict";var u=c(87287);function boolStringify({value:r,source:i},c){const u=r?h:d;if(i&&u.test.test(i))return i;return r?c.options.trueStr:c.options.falseStr}const h={identify:r=>r===true,default:true,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new u.Scalar(true),stringify:boolStringify};const d={identify:r=>r===false,default:true,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new u.Scalar(false),stringify:boolStringify};i.falseTag=d;i.trueTag=h},82420:(r,i,c)=>{"use strict";var u=c(87287);var h=c(3362);const d={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:h.stringifyNumber};const p={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r.replace(/_/g,"")),stringify(r){const i=Number(r.value);return isFinite(i)?i.toExponential():h.stringifyNumber(r)}};const g={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(r){const i=new u.Scalar(parseFloat(r.replace(/_/g,"")));const c=r.indexOf(".");if(c!==-1){const u=r.substring(c+1).replace(/_/g,"");if(u[u.length-1]==="0")i.minFractionDigits=u.length}return i},stringify:h.stringifyNumber};i.float=g;i.floatExp=p;i.floatNaN=d},95596:(r,i,c)=>{"use strict";var u=c(3362);const intIdentify=r=>typeof r==="bigint"||Number.isInteger(r);function intResolve(r,i,c,{intAsBigInt:u}){const h=r[0];if(h==="-"||h==="+")i+=1;r=r.substring(i).replace(/_/g,"");if(u){switch(c){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}const i=BigInt(r);return h==="-"?BigInt(-1)*i:i}const d=parseInt(r,c);return h==="-"?-1*d:d}function intStringify(r,i,c){const{value:h}=r;if(intIdentify(h)){const r=h.toString(i);return h<0?"-"+c+r.substr(1):c+r}return u.stringifyNumber(r)}const h={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(r,i,c)=>intResolve(r,2,2,c),stringify:r=>intStringify(r,2,"0b")};const d={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(r,i,c)=>intResolve(r,1,8,c),stringify:r=>intStringify(r,8,"0")};const p={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(r,i,c)=>intResolve(r,0,10,c),stringify:u.stringifyNumber};const g={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(r,i,c)=>intResolve(r,2,16,c),stringify:r=>intStringify(r,16,"0x")};i.int=p;i.intBin=h;i.intHex=g;i.intOct=d},54409:(r,i,c)=>{"use strict";var u=c(66511);var h=c(18322);var d=c(81667);var p=c(45995);var g=c(12563);class YAMLOMap extends u.YAMLSeq{constructor(){super();this.add=p.YAMLMap.prototype.add.bind(this);this.delete=p.YAMLMap.prototype.delete.bind(this);this.get=p.YAMLMap.prototype.get.bind(this);this.has=p.YAMLMap.prototype.has.bind(this);this.set=p.YAMLMap.prototype.set.bind(this);this.tag=YAMLOMap.tag}toJSON(r,i){if(!i)return super.toJSON(r);const c=new Map;if(i?.onCreate)i.onCreate(c);for(const r of this.items){let u,p;if(d.isPair(r)){u=h.toJS(r.key,"",i);p=h.toJS(r.value,u,i)}else{u=h.toJS(r,"",i)}if(c.has(u))throw new Error("Ordered maps must not include duplicate keys");c.set(u,p)}return c}}YAMLOMap.tag="tag:yaml.org,2002:omap";const y={collection:"seq",identify:r=>r instanceof Map,nodeClass:YAMLOMap,default:false,tag:"tag:yaml.org,2002:omap",resolve(r,i){const c=g.resolvePairs(r,i);const u=[];for(const{key:r}of c.items){if(d.isScalar(r)){if(u.includes(r.value)){i(`Ordered maps must not include duplicate keys: ${r.value}`)}else{u.push(r.value)}}}return Object.assign(new YAMLOMap,c)},createNode(r,i,c){const u=g.createPairs(r,i,c);const h=new YAMLOMap;h.items=u.items;return h}};i.YAMLOMap=YAMLOMap;i.omap=y},12563:(r,i,c)=>{"use strict";var u=c(81667);var h=c(57924);var d=c(87287);var p=c(66511);function resolvePairs(r,i){if(u.isSeq(r)){for(let c=0;c<r.items.length;++c){let p=r.items[c];if(u.isPair(p))continue;else if(u.isMap(p)){if(p.items.length>1)i("Each pair must have its own sequence indicator");const r=p.items[0]||new h.Pair(new d.Scalar(null));if(p.commentBefore)r.key.commentBefore=r.key.commentBefore?`${p.commentBefore}\n${r.key.commentBefore}`:p.commentBefore;if(p.comment){const i=r.value??r.key;i.comment=i.comment?`${p.comment}\n${i.comment}`:p.comment}p=r}r.items[c]=u.isPair(p)?p:new h.Pair(p)}}else i("Expected a sequence for this tag");return r}function createPairs(r,i,c){const{replacer:u}=c;const d=new p.YAMLSeq(r);d.tag="tag:yaml.org,2002:pairs";let g=0;if(i&&Symbol.iterator in Object(i))for(let r of i){if(typeof u==="function")r=u.call(i,String(g++),r);let p,y;if(Array.isArray(r)){if(r.length===2){p=r[0];y=r[1]}else throw new TypeError(`Expected [key, value] tuple: ${r}`)}else if(r&&r instanceof Object){const i=Object.keys(r);if(i.length===1){p=i[0];y=r[p]}else throw new TypeError(`Expected { key: value } tuple: ${r}`)}else{p=r}d.items.push(h.createPair(p,y,c))}return d}const g={collection:"seq",default:false,tag:"tag:yaml.org,2002:pairs",resolve:resolvePairs,createNode:createPairs};i.createPairs=createPairs;i.pairs=g;i.resolvePairs=resolvePairs},0:(r,i,c)=>{"use strict";var u=c(2077);var h=c(35394);var d=c(76715);var p=c(61938);var g=c(38428);var y=c(41941);var b=c(82420);var v=c(95596);var w=c(54409);var C=c(12563);var E=c(43368);var x=c(56069);const S=[u.map,d.seq,p.string,h.nullTag,y.trueTag,y.falseTag,v.intBin,v.intOct,v.int,v.intHex,b.floatNaN,b.floatExp,b.float,g.binary,w.omap,C.pairs,E.set,x.intTime,x.floatTime,x.timestamp];i.schema=S},43368:(r,i,c)=>{"use strict";var u=c(81667);var h=c(57924);var d=c(45995);class YAMLSet extends d.YAMLMap{constructor(r){super(r);this.tag=YAMLSet.tag}add(r){let i;if(u.isPair(r))i=r;else if(r&&typeof r==="object"&&"key"in r&&"value"in r&&r.value===null)i=new h.Pair(r.key,null);else i=new h.Pair(r,null);const c=d.findPair(this.items,i.key);if(!c)this.items.push(i)}get(r,i){const c=d.findPair(this.items,r);return!i&&u.isPair(c)?u.isScalar(c.key)?c.key.value:c.key:c}set(r,i){if(typeof i!=="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof i}`);const c=d.findPair(this.items,r);if(c&&!i){this.items.splice(this.items.indexOf(c),1)}else if(!c&&i){this.items.push(new h.Pair(r))}}toJSON(r,i){return super.toJSON(r,i,Set)}toString(r,i,c){if(!r)return JSON.stringify(this);if(this.hasAllNullValues(true))return super.toString(Object.assign({},r,{allNullValues:true}),i,c);else throw new Error("Set items must all have null values")}}YAMLSet.tag="tag:yaml.org,2002:set";const p={collection:"map",identify:r=>r instanceof Set,nodeClass:YAMLSet,default:false,tag:"tag:yaml.org,2002:set",resolve(r,i){if(u.isMap(r)){if(r.hasAllNullValues(true))return Object.assign(new YAMLSet,r);else i("Set items must all have null values")}else i("Expected a mapping for this tag");return r},createNode(r,i,c){const{replacer:u}=c;const d=new YAMLSet(r);if(i&&Symbol.iterator in Object(i))for(let r of i){if(typeof u==="function")r=u.call(i,r,r);d.items.push(h.createPair(r,null,c))}return d}};i.YAMLSet=YAMLSet;i.set=p},56069:(r,i,c)=>{"use strict";var u=c(3362);function parseSexagesimal(r,i){const c=r[0];const u=c==="-"||c==="+"?r.substring(1):r;const num=r=>i?BigInt(r):Number(r);const h=u.replace(/_/g,"").split(":").reduce(((r,i)=>r*num(60)+num(i)),num(0));return c==="-"?num(-1)*h:h}function stringifySexagesimal(r){let{value:i}=r;let num=r=>r;if(typeof i==="bigint")num=r=>BigInt(r);else if(isNaN(i)||!isFinite(i))return u.stringifyNumber(r);let c="";if(i<0){c="-";i*=num(-1)}const h=num(60);const d=[i%h];if(i<60){d.unshift(0)}else{i=(i-d[0])/h;d.unshift(i%h);if(i>=60){i=(i-d[0])/h;d.unshift(i)}}return c+d.map((r=>r<10?"0"+String(r):String(r))).join(":").replace(/000000\d*$/,"")}const h={identify:r=>typeof r==="bigint"||Number.isInteger(r),default:true,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(r,i,{intAsBigInt:c})=>parseSexagesimal(r,c),stringify:stringifySexagesimal};const d={identify:r=>typeof r==="number",default:true,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:r=>parseSexagesimal(r,false),stringify:stringifySexagesimal};const p={identify:r=>r instanceof Date,default:true,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})"+"(?:"+"(?:t|T|[ \\t]+)"+"([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)"+"(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?"+")?$"),resolve(r){const i=r.match(p.test);if(!i)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,c,u,h,d,g,y]=i.map(Number);const b=i[7]?Number((i[7]+"00").substr(1,3)):0;let v=Date.UTC(c,u-1,h,d||0,g||0,y||0,b);const w=i[8];if(w&&w!=="Z"){let r=parseSexagesimal(w,false);if(Math.abs(r)<30)r*=60;v-=6e4*r}return new Date(v)},stringify:({value:r})=>r.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};i.floatTime=d;i.intTime=h;i.timestamp=p},82184:(r,i)=>{"use strict";const c="flow";const u="block";const h="quoted";function foldFlowLines(r,i,c="flow",{indentAtStart:d,lineWidth:p=80,minContentWidth:g=20,onFold:y,onOverflow:b}={}){if(!p||p<0)return r;const v=Math.max(1+g,1+p-i.length);if(r.length<=v)return r;const w=[];const C={};let E=p-i.length;if(typeof d==="number"){if(d>p-Math.max(2,g))w.push(0);else E=p-d}let x=undefined;let S=undefined;let k=false;let T=-1;let N=-1;let O=-1;if(c===u){T=consumeMoreIndentedLines(r,T);if(T!==-1)E=T+v}for(let i;i=r[T+=1];){if(c===h&&i==="\\"){N=T;switch(r[T+1]){case"x":T+=3;break;case"u":T+=5;break;case"U":T+=9;break;default:T+=1}O=T}if(i==="\n"){if(c===u)T=consumeMoreIndentedLines(r,T);E=T+v;x=undefined}else{if(i===" "&&S&&S!==" "&&S!=="\n"&&S!=="\t"){const i=r[T+1];if(i&&i!==" "&&i!=="\n"&&i!=="\t")x=T}if(T>=E){if(x){w.push(x);E=x+v;x=undefined}else if(c===h){while(S===" "||S==="\t"){S=i;i=r[T+=1];k=true}const c=T>O+1?T-2:N-1;if(C[c])return r;w.push(c);C[c]=true;E=c+v;x=undefined}else{k=true}}}S=i}if(k&&b)b();if(w.length===0)return r;if(y)y();let $=r.slice(0,w[0]);for(let u=0;u<w.length;++u){const d=w[u];const p=w[u+1]||r.length;if(d===0)$=`\n${i}${r.slice(0,p)}`;else{if(c===h&&C[d])$+=`${r[d]}\\`;$+=`\n${i}${r.slice(d+1,p)}`}}return $}function consumeMoreIndentedLines(r,i){let c=r[i+1];while(c===" "||c==="\t"){do{c=r[i+=1]}while(c&&c!=="\n");c=r[i+1]}return i}i.FOLD_BLOCK=u;i.FOLD_FLOW=c;i.FOLD_QUOTED=h;i.foldFlowLines=foldFlowLines},46027:(r,i,c)=>{"use strict";var u=c(92633);var h=c(81667);var d=c(49815);var p=c(69820);function createStringifyContext(r,i){const c=Object.assign({blockQuote:true,commentString:d.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:false,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:true,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:false,singleQuote:null,trueStr:"true",verifyAliasOrder:true},r.schema.toStringOptions,i);let u;switch(c.collectionStyle){case"block":u=false;break;case"flow":u=true;break;default:u=null}return{anchors:new Set,doc:r,indent:"",indentStep:typeof c.indent==="number"?" ".repeat(c.indent):"  ",inFlow:u,options:c}}function getTagObject(r,i){if(i.tag){const c=r.filter((r=>r.tag===i.tag));if(c.length>0)return c.find((r=>r.format===i.format))??c[0]}let c=undefined;let u;if(h.isScalar(i)){u=i.value;const h=r.filter((r=>r.identify?.(u)));c=h.find((r=>r.format===i.format))??h.find((r=>!r.format))}else{u=i;c=r.find((r=>r.nodeClass&&u instanceof r.nodeClass))}if(!c){const r=u?.constructor?.name??typeof u;throw new Error(`Tag not resolved for ${r} value`)}return c}function stringifyProps(r,i,{anchors:c,doc:d}){if(!d.directives)return"";const p=[];const g=(h.isScalar(r)||h.isCollection(r))&&r.anchor;if(g&&u.anchorIsValid(g)){c.add(g);p.push(`&${g}`)}const y=r.tag?r.tag:i.default?null:i.tag;if(y)p.push(d.directives.tagString(y));return p.join(" ")}function stringify(r,i,c,u){if(h.isPair(r))return r.toString(i,c,u);if(h.isAlias(r)){if(i.doc.directives)return r.toString(i);if(i.resolvedAliases?.has(r)){throw new TypeError(`Cannot stringify circular structure without alias nodes`)}else{if(i.resolvedAliases)i.resolvedAliases.add(r);else i.resolvedAliases=new Set([r]);r=r.resolve(i.doc)}}let d=undefined;const g=h.isNode(r)?r:i.doc.createNode(r,{onTagObj:r=>d=r});if(!d)d=getTagObject(i.doc.schema.tags,g);const y=stringifyProps(g,d,i);if(y.length>0)i.indentAtStart=(i.indentAtStart??0)+y.length+1;const b=typeof d.stringify==="function"?d.stringify(g,i,c,u):h.isScalar(g)?p.stringifyString(g,i,c,u):g.toString(i,c,u);if(!y)return b;return h.isScalar(g)||b[0]==="{"||b[0]==="["?`${y} ${b}`:`${y}\n${i.indent}${b}`}i.createStringifyContext=createStringifyContext;i.stringify=stringify},36897:(r,i,c)=>{"use strict";var u=c(93280);var h=c(81667);var d=c(46027);var p=c(49815);function stringifyCollection(r,i,c){const u=i.inFlow??r.flow;const h=u?stringifyFlowCollection:stringifyBlockCollection;return h(r,i,c)}function stringifyBlockCollection({comment:r,items:i},c,{blockItemPrefix:u,flowChars:g,itemIndent:y,onChompKeep:b,onComment:v}){const{indent:w,options:{commentString:C}}=c;const E=Object.assign({},c,{indent:y,type:null});let x=false;const S=[];for(let r=0;r<i.length;++r){const g=i[r];let b=null;if(h.isNode(g)){if(!x&&g.spaceBefore)S.push("");addCommentBefore(c,S,g.commentBefore,x);if(g.comment)b=g.comment}else if(h.isPair(g)){const r=h.isNode(g.key)?g.key:null;if(r){if(!x&&r.spaceBefore)S.push("");addCommentBefore(c,S,r.commentBefore,x)}}x=false;let v=d.stringify(g,E,(()=>b=null),(()=>x=true));if(b)v+=p.lineComment(v,y,C(b));if(x&&b)x=false;S.push(u+v)}let k;if(S.length===0){k=g.start+g.end}else{k=S[0];for(let r=1;r<S.length;++r){const i=S[r];k+=i?`\n${w}${i}`:"\n"}}if(r){k+="\n"+p.indentComment(C(r),w);if(v)v()}else if(x&&b)b();return k}function stringifyFlowCollection({comment:r,items:i},c,{flowChars:g,itemIndent:y,onComment:b}){const{indent:v,indentStep:w,options:{commentString:C}}=c;y+=w;const E=Object.assign({},c,{indent:y,inFlow:true,type:null});let x=false;let S=0;const k=[];for(let r=0;r<i.length;++r){const u=i[r];let g=null;if(h.isNode(u)){if(u.spaceBefore)k.push("");addCommentBefore(c,k,u.commentBefore,false);if(u.comment)g=u.comment}else if(h.isPair(u)){const r=h.isNode(u.key)?u.key:null;if(r){if(r.spaceBefore)k.push("");addCommentBefore(c,k,r.commentBefore,false);if(r.comment)x=true}const i=h.isNode(u.value)?u.value:null;if(i){if(i.comment)g=i.comment;if(i.commentBefore)x=true}else if(u.value==null&&r&&r.comment){g=r.comment}}if(g)x=true;let b=d.stringify(u,E,(()=>g=null));if(r<i.length-1)b+=",";if(g)b+=p.lineComment(b,y,C(g));if(!x&&(k.length>S||b.includes("\n")))x=true;k.push(b);S=k.length}let T;const{start:N,end:O}=g;if(k.length===0){T=N+O}else{if(!x){const r=k.reduce(((r,i)=>r+i.length+2),2);x=r>u.Collection.maxFlowStringSingleLineLength}if(x){T=N;for(const r of k)T+=r?`\n${w}${v}${r}`:"\n";T+=`\n${v}${O}`}else{T=`${N} ${k.join(" ")} ${O}`}}if(r){T+=p.lineComment(T,C(r),v);if(b)b()}return T}function addCommentBefore({indent:r,options:{commentString:i}},c,u,h){if(u&&h)u=u.replace(/^\n+/,"");if(u){const h=p.indentComment(i(u),r);c.push(h.trimStart())}}i.stringifyCollection=stringifyCollection},49815:(r,i)=>{"use strict";const stringifyComment=r=>r.replace(/^(?!$)(?: $)?/gm,"#");function indentComment(r,i){if(/^\n+$/.test(r))return r.substring(1);return i?r.replace(/^(?! *$)/gm,i):r}const lineComment=(r,i,c)=>r.endsWith("\n")?indentComment(c,i):c.includes("\n")?"\n"+indentComment(c,i):(r.endsWith(" ")?"":" ")+c;i.indentComment=indentComment;i.lineComment=lineComment;i.stringifyComment=stringifyComment},57971:(r,i,c)=>{"use strict";var u=c(81667);var h=c(46027);var d=c(49815);function stringifyDocument(r,i){const c=[];let p=i.directives===true;if(i.directives!==false&&r.directives){const i=r.directives.toString(r);if(i){c.push(i);p=true}else if(r.directives.docStart)p=true}if(p)c.push("---");const g=h.createStringifyContext(r,i);const{commentString:y}=g.options;if(r.commentBefore){if(c.length!==1)c.unshift("");const i=y(r.commentBefore);c.unshift(d.indentComment(i,""))}let b=false;let v=null;if(r.contents){if(u.isNode(r.contents)){if(r.contents.spaceBefore&&p)c.push("");if(r.contents.commentBefore){const i=y(r.contents.commentBefore);c.push(d.indentComment(i,""))}g.forceBlockIndent=!!r.comment;v=r.contents.comment}const i=v?undefined:()=>b=true;let w=h.stringify(r.contents,g,(()=>v=null),i);if(v)w+=d.lineComment(w,"",y(v));if((w[0]==="|"||w[0]===">")&&c[c.length-1]==="---"){c[c.length-1]=`--- ${w}`}else c.push(w)}else{c.push(h.stringify(r.contents,g))}if(r.directives?.docEnd){if(r.comment){const i=y(r.comment);if(i.includes("\n")){c.push("...");c.push(d.indentComment(i,""))}else{c.push(`... ${i}`)}}else{c.push("...")}}else{let i=r.comment;if(i&&b)i=i.replace(/^\n+/,"");if(i){if((!b||v)&&c[c.length-1]!=="")c.push("");c.push(d.indentComment(y(i),""))}}return c.join("\n")+"\n"}i.stringifyDocument=stringifyDocument},3362:(r,i)=>{"use strict";function stringifyNumber({format:r,minFractionDigits:i,tag:c,value:u}){if(typeof u==="bigint")return String(u);const h=typeof u==="number"?u:Number(u);if(!isFinite(h))return isNaN(h)?".nan":h<0?"-.inf":".inf";let d=JSON.stringify(u);if(!r&&i&&(!c||c==="tag:yaml.org,2002:float")&&/^\d/.test(d)){let r=d.indexOf(".");if(r<0){r=d.length;d+="."}let c=i-(d.length-r-1);while(c-- >0)d+="0"}return d}i.stringifyNumber=stringifyNumber},24030:(r,i,c)=>{"use strict";var u=c(81667);var h=c(87287);var d=c(46027);var p=c(49815);function stringifyPair({key:r,value:i},c,g,y){const{allNullValues:b,doc:v,indent:w,indentStep:C,options:{commentString:E,indentSeq:x,simpleKeys:S}}=c;let k=u.isNode(r)&&r.comment||null;if(S){if(k){throw new Error("With simple keys, key nodes cannot have comments")}if(u.isCollection(r)){const r="With simple keys, collection cannot be used as a key value";throw new Error(r)}}let T=!S&&(!r||k&&i==null&&!c.inFlow||u.isCollection(r)||(u.isScalar(r)?r.type===h.Scalar.BLOCK_FOLDED||r.type===h.Scalar.BLOCK_LITERAL:typeof r==="object"));c=Object.assign({},c,{allNullValues:false,implicitKey:!T&&(S||!b),indent:w+C});let N=false;let O=false;let $=d.stringify(r,c,(()=>N=true),(()=>O=true));if(!T&&!c.inFlow&&$.length>1024){if(S)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");T=true}if(c.inFlow){if(b||i==null){if(N&&g)g();return $===""?"?":T?`? ${$}`:$}}else if(b&&!S||i==null&&T){$=`? ${$}`;if(k&&!N){$+=p.lineComment($,c.indent,E(k))}else if(O&&y)y();return $}if(N)k=null;if(T){if(k)$+=p.lineComment($,c.indent,E(k));$=`? ${$}\n${w}:`}else{$=`${$}:`;if(k)$+=p.lineComment($,c.indent,E(k))}let A="";let P=null;if(u.isNode(i)){if(i.spaceBefore)A="\n";if(i.commentBefore){const r=E(i.commentBefore);A+=`\n${p.indentComment(r,c.indent)}`}P=i.comment}else if(i&&typeof i==="object"){i=v.createNode(i)}c.implicitKey=false;if(!T&&!k&&u.isScalar(i))c.indentAtStart=$.length+1;O=false;if(!x&&C.length>=2&&!c.inFlow&&!T&&u.isSeq(i)&&!i.flow&&!i.tag&&!i.anchor){c.indent=c.indent.substr(2)}let I=false;const R=d.stringify(i,c,(()=>I=true),(()=>O=true));let j=" ";if(A||k){if(R===""&&!c.inFlow)j=A==="\n"?"\n\n":A;else j=`${A}\n${c.indent}`}else if(!T&&u.isCollection(i)){const r=R[0]==="["||R[0]==="{";if(!r||R.includes("\n"))j=`\n${c.indent}`}else if(R===""||R[0]==="\n")j="";$+=j+R;if(c.inFlow){if(I&&g)g()}else if(P&&!I){$+=p.lineComment($,c.indent,E(P))}else if(O&&y){y()}return $}i.stringifyPair=stringifyPair},69820:(r,i,c)=>{"use strict";var u=c(87287);var h=c(82184);const getFoldOptions=r=>({indentAtStart:r.indentAtStart,lineWidth:r.options.lineWidth,minContentWidth:r.options.minContentWidth});const containsDocumentMarker=r=>/^(%|---|\.\.\.)/m.test(r);function lineLengthOverLimit(r,i,c){if(!i||i<0)return false;const u=i-c;const h=r.length;if(h<=u)return false;for(let i=0,c=0;i<h;++i){if(r[i]==="\n"){if(i-c>u)return true;c=i+1;if(h-c<=u)return false}}return true}function doubleQuotedString(r,i){const c=JSON.stringify(r);if(i.options.doubleQuotedAsJSON)return c;const{implicitKey:u}=i;const d=i.options.doubleQuotedMinMultiLineLength;const p=i.indent||(containsDocumentMarker(r)?"  ":"");let g="";let y=0;for(let r=0,i=c[r];i;i=c[++r]){if(i===" "&&c[r+1]==="\\"&&c[r+2]==="n"){g+=c.slice(y,r)+"\\ ";r+=1;y=r;i="\\"}if(i==="\\")switch(c[r+1]){case"u":{g+=c.slice(y,r);const i=c.substr(r+2,4);switch(i){case"0000":g+="\\0";break;case"0007":g+="\\a";break;case"000b":g+="\\v";break;case"001b":g+="\\e";break;case"0085":g+="\\N";break;case"00a0":g+="\\_";break;case"2028":g+="\\L";break;case"2029":g+="\\P";break;default:if(i.substr(0,2)==="00")g+="\\x"+i.substr(2);else g+=c.substr(r,6)}r+=5;y=r+1}break;case"n":if(u||c[r+2]==='"'||c.length<d){r+=1}else{g+=c.slice(y,r)+"\n\n";while(c[r+2]==="\\"&&c[r+3]==="n"&&c[r+4]!=='"'){g+="\n";r+=2}g+=p;if(c[r+2]===" ")g+="\\";r+=1;y=r+1}break;default:r+=1}}g=y?g+c.slice(y):c;return u?g:h.foldFlowLines(g,p,h.FOLD_QUOTED,getFoldOptions(i))}function singleQuotedString(r,i){if(i.options.singleQuote===false||i.implicitKey&&r.includes("\n")||/[ \t]\n|\n[ \t]/.test(r))return doubleQuotedString(r,i);const c=i.indent||(containsDocumentMarker(r)?"  ":"");const u="'"+r.replace(/'/g,"''").replace(/\n+/g,`$&\n${c}`)+"'";return i.implicitKey?u:h.foldFlowLines(u,c,h.FOLD_FLOW,getFoldOptions(i))}function quotedString(r,i){const{singleQuote:c}=i.options;let u;if(c===false)u=doubleQuotedString;else{const i=r.includes('"');const h=r.includes("'");if(i&&!h)u=singleQuotedString;else if(h&&!i)u=doubleQuotedString;else u=c?singleQuotedString:doubleQuotedString}return u(r,i)}function blockString({comment:r,type:i,value:c},d,p,g){const{blockQuote:y,commentString:b,lineWidth:v}=d.options;if(!y||/\n[\t ]+$/.test(c)||/^\s*$/.test(c)){return quotedString(c,d)}const w=d.indent||(d.forceBlockIndent||containsDocumentMarker(c)?"  ":"");const C=y==="literal"?true:y==="folded"||i===u.Scalar.BLOCK_FOLDED?false:i===u.Scalar.BLOCK_LITERAL?true:!lineLengthOverLimit(c,v,w.length);if(!c)return C?"|\n":">\n";let E;let x;for(x=c.length;x>0;--x){const r=c[x-1];if(r!=="\n"&&r!=="\t"&&r!==" ")break}let S=c.substring(x);const k=S.indexOf("\n");if(k===-1){E="-"}else if(c===S||k!==S.length-1){E="+";if(g)g()}else{E=""}if(S){c=c.slice(0,-S.length);if(S[S.length-1]==="\n")S=S.slice(0,-1);S=S.replace(/\n+(?!\n|$)/g,`$&${w}`)}let T=false;let N;let O=-1;for(N=0;N<c.length;++N){const r=c[N];if(r===" ")T=true;else if(r==="\n")O=N;else break}let $=c.substring(0,O<N?O+1:N);if($){c=c.substring($.length);$=$.replace(/\n+/g,`$&${w}`)}const A=w?"2":"1";let P=(C?"|":">")+(T?A:"")+E;if(r){P+=" "+b(r.replace(/ ?[\r\n]+/g," "));if(p)p()}if(C){c=c.replace(/\n+/g,`$&${w}`);return`${P}\n${w}${$}${c}${S}`}c=c.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${w}`);const I=h.foldFlowLines(`${$}${c}${S}`,w,h.FOLD_BLOCK,getFoldOptions(d));return`${P}\n${w}${I}`}function plainString(r,i,c,d){const{type:p,value:g}=r;const{actualString:y,implicitKey:b,indent:v,inFlow:w}=i;if(b&&/[\n[\]{},]/.test(g)||w&&/[[\]{},]/.test(g)){return quotedString(g,i)}if(!g||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(g)){return b||w||!g.includes("\n")?quotedString(g,i):blockString(r,i,c,d)}if(!b&&!w&&p!==u.Scalar.PLAIN&&g.includes("\n")){return blockString(r,i,c,d)}if(v===""&&containsDocumentMarker(g)){i.forceBlockIndent=true;return blockString(r,i,c,d)}const C=g.replace(/\n+/g,`$&\n${v}`);if(y){const test=r=>r.default&&r.tag!=="tag:yaml.org,2002:str"&&r.test?.test(C);const{compat:r,tags:c}=i.doc.schema;if(c.some(test)||r?.some(test))return quotedString(g,i)}return b?C:h.foldFlowLines(C,v,h.FOLD_FLOW,getFoldOptions(i))}function stringifyString(r,i,c,h){const{implicitKey:d,inFlow:p}=i;const g=typeof r.value==="string"?r:Object.assign({},r,{value:String(r.value)});let{type:y}=r;if(y!==u.Scalar.QUOTE_DOUBLE){if(/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(g.value))y=u.Scalar.QUOTE_DOUBLE}const _stringify=r=>{switch(r){case u.Scalar.BLOCK_FOLDED:case u.Scalar.BLOCK_LITERAL:return d||p?quotedString(g.value,i):blockString(g,i,c,h);case u.Scalar.QUOTE_DOUBLE:return doubleQuotedString(g.value,i);case u.Scalar.QUOTE_SINGLE:return singleQuotedString(g.value,i);case u.Scalar.PLAIN:return plainString(g,i,c,h);default:return null}};let b=_stringify(y);if(b===null){const{defaultKeyType:r,defaultStringType:c}=i.options;const u=d&&r||c;b=_stringify(u);if(b===null)throw new Error(`Unsupported default string type ${u}`)}return b}i.stringifyString=stringifyString},40652:(r,i,c)=>{"use strict";var u=c(81667);const h=Symbol("break visit");const d=Symbol("skip children");const p=Symbol("remove node");function visit(r,i){const c=initVisitor(i);if(u.isDocument(r)){const i=visit_(null,r.contents,c,Object.freeze([r]));if(i===p)r.contents=null}else visit_(null,r,c,Object.freeze([]))}visit.BREAK=h;visit.SKIP=d;visit.REMOVE=p;function visit_(r,i,c,d){const g=callVisitor(r,i,c,d);if(u.isNode(g)||u.isPair(g)){replaceNode(r,d,g);return visit_(r,g,c,d)}if(typeof g!=="symbol"){if(u.isCollection(i)){d=Object.freeze(d.concat(i));for(let r=0;r<i.items.length;++r){const u=visit_(r,i.items[r],c,d);if(typeof u==="number")r=u-1;else if(u===h)return h;else if(u===p){i.items.splice(r,1);r-=1}}}else if(u.isPair(i)){d=Object.freeze(d.concat(i));const r=visit_("key",i.key,c,d);if(r===h)return h;else if(r===p)i.key=null;const u=visit_("value",i.value,c,d);if(u===h)return h;else if(u===p)i.value=null}}return g}async function visitAsync(r,i){const c=initVisitor(i);if(u.isDocument(r)){const i=await visitAsync_(null,r.contents,c,Object.freeze([r]));if(i===p)r.contents=null}else await visitAsync_(null,r,c,Object.freeze([]))}visitAsync.BREAK=h;visitAsync.SKIP=d;visitAsync.REMOVE=p;async function visitAsync_(r,i,c,d){const g=await callVisitor(r,i,c,d);if(u.isNode(g)||u.isPair(g)){replaceNode(r,d,g);return visitAsync_(r,g,c,d)}if(typeof g!=="symbol"){if(u.isCollection(i)){d=Object.freeze(d.concat(i));for(let r=0;r<i.items.length;++r){const u=await visitAsync_(r,i.items[r],c,d);if(typeof u==="number")r=u-1;else if(u===h)return h;else if(u===p){i.items.splice(r,1);r-=1}}}else if(u.isPair(i)){d=Object.freeze(d.concat(i));const r=await visitAsync_("key",i.key,c,d);if(r===h)return h;else if(r===p)i.key=null;const u=await visitAsync_("value",i.value,c,d);if(u===h)return h;else if(u===p)i.value=null}}return g}function initVisitor(r){if(typeof r==="object"&&(r.Collection||r.Node||r.Value)){return Object.assign({Alias:r.Node,Map:r.Node,Scalar:r.Node,Seq:r.Node},r.Value&&{Map:r.Value,Scalar:r.Value,Seq:r.Value},r.Collection&&{Map:r.Collection,Seq:r.Collection},r)}return r}function callVisitor(r,i,c,h){if(typeof c==="function")return c(r,i,h);if(u.isMap(i))return c.Map?.(r,i,h);if(u.isSeq(i))return c.Seq?.(r,i,h);if(u.isPair(i))return c.Pair?.(r,i,h);if(u.isScalar(i))return c.Scalar?.(r,i,h);if(u.isAlias(i))return c.Alias?.(r,i,h);return undefined}function replaceNode(r,i,c){const h=i[i.length-1];if(u.isCollection(h)){h.items[r]=c}else if(u.isPair(h)){if(r==="key")h.key=c;else h.value=c}else if(u.isDocument(h)){h.contents=c}else{const r=u.isAlias(h)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}i.visit=visit;i.visitAsync=visitAsync},59449:(r,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:true});var u=c(76224);function _interopNamespace(r){if(r&&r.__esModule)return r;var i=Object.create(null);if(r){Object.keys(r).forEach((function(c){if(c!=="default"){var u=Object.getOwnPropertyDescriptor(r,c);Object.defineProperty(i,c,u.get?u:{enumerable:true,get:function(){return r[c]}})}}))}i["default"]=r;return Object.freeze(i)}var h=_interopNamespace(u);const{env:d={},argv:p=[],platform:g=""}=typeof process==="undefined"?{}:process;const y="NO_COLOR"in d||p.includes("--no-color");const b="FORCE_COLOR"in d||p.includes("--color");const v=g==="win32";const w=d.TERM==="dumb";const C=h&&h.isatty&&h.isatty(1)&&d.TERM&&!w;const E="CI"in d&&("GITHUB_ACTIONS"in d||"GITLAB_CI"in d||"CIRCLECI"in d);const x=!y&&(b||v&&!w||C||E);const replaceClose=(r,i,c,u,h=i.substring(0,r)+u,d=i.substring(r+c.length),p=d.indexOf(c))=>h+(p<0?d:replaceClose(p,d,c,u));const clearBleed=(r,i,c,u,h)=>r<0?c+i+u:c+replaceClose(r,i,u,h)+u;const filterEmpty=(r,i,c=r,u=r.length+1)=>h=>h||!(h===""||h===undefined)?clearBleed((""+h).indexOf(i,u),h,r,i,c):"";const init=(r,i,c)=>filterEmpty(`[${r}m`,`[${i}m`,c);const S={reset:init(0,0),bold:init(1,22,"[22m[1m"),dim:init(2,22,"[22m[2m"),italic:init(3,23),underline:init(4,24),inverse:init(7,27),hidden:init(8,28),strikethrough:init(9,29),black:init(30,39),red:init(31,39),green:init(32,39),yellow:init(33,39),blue:init(34,39),magenta:init(35,39),cyan:init(36,39),white:init(37,39),gray:init(90,39),bgBlack:init(40,49),bgRed:init(41,49),bgGreen:init(42,49),bgYellow:init(43,49),bgBlue:init(44,49),bgMagenta:init(45,49),bgCyan:init(46,49),bgWhite:init(47,49),blackBright:init(90,39),redBright:init(91,39),greenBright:init(92,39),yellowBright:init(93,39),blueBright:init(94,39),magentaBright:init(95,39),cyanBright:init(96,39),whiteBright:init(97,39),bgBlackBright:init(100,49),bgRedBright:init(101,49),bgGreenBright:init(102,49),bgYellowBright:init(103,49),bgBlueBright:init(104,49),bgMagentaBright:init(105,49),bgCyanBright:init(106,49),bgWhiteBright:init(107,49)};const createColors=({useColor:r=x}={})=>r?S:Object.keys(S).reduce(((r,i)=>({...r,[i]:String})),{});const{reset:k,bold:T,dim:N,italic:O,underline:$,inverse:A,hidden:P,strikethrough:I,black:R,red:j,green:L,yellow:M,blue:D,magenta:q,cyan:F,white:B,gray:U,bgBlack:V,bgRed:Q,bgGreen:H,bgYellow:G,bgBlue:K,bgMagenta:W,bgCyan:z,bgWhite:J,blackBright:Y,redBright:X,greenBright:Z,yellowBright:ee,blueBright:te,magentaBright:re,cyanBright:ne,whiteBright:se,bgBlackBright:ie,bgRedBright:oe,bgGreenBright:ae,bgYellowBright:ce,bgBlueBright:le,bgMagentaBright:ue,bgCyanBright:he,bgWhiteBright:fe}=createColors();i.bgBlack=V;i.bgBlackBright=ie;i.bgBlue=K;i.bgBlueBright=le;i.bgCyan=z;i.bgCyanBright=he;i.bgGreen=H;i.bgGreenBright=ae;i.bgMagenta=W;i.bgMagentaBright=ue;i.bgRed=Q;i.bgRedBright=oe;i.bgWhite=J;i.bgWhiteBright=fe;i.bgYellow=G;i.bgYellowBright=ce;i.black=R;i.blackBright=Y;i.blue=D;i.blueBright=te;i.bold=T;i.createColors=createColors;i.cyan=F;i.cyanBright=ne;i.dim=N;i.gray=U;i.green=L;i.greenBright=Z;i.hidden=P;i.inverse=A;i.isColorSupported=x;i.italic=O;i.magenta=q;i.magentaBright=re;i.red=j;i.redBright=X;i.reset=k;i.strikethrough=I;i.underline=$;i.white=B;i.whiteBright=se;i.yellow=M;i.yellowBright=ee},63358:(r,i,c)=>{"use strict";const u=c(71017);const{promisify:h}=c(73837);const d=h(c(57147).readFile);const p=c(54629);const g=c(14704);const y=new Map;async function getDirectoryTypeActual(r){if(p(r)){return"commonjs"}try{return JSON.parse(await d(u.resolve(r,"package.json"))).type||"commonjs"}catch(r){}const i=u.dirname(r);if(i===r){return"commonjs"}return getDirectoryType(i)}async function getDirectoryType(r){if(g.has(r)){return g.get(r)}if(y.has(r)){return y.get(r)}const i=getDirectoryTypeActual(r);y.set(r,i);const c=await i;g.set(r,c);y.delete(r);return c}function getPackageType(r){return getDirectoryType(u.resolve(u.dirname(r)))}r.exports=getPackageType},14704:r=>{"use strict";r.exports=new Map},35594:(r,i,c)=>{"use strict";const u=c(63358);const h=c(97834);r.exports=r=>u(r);r.exports.sync=h},54629:(r,i,c)=>{"use strict";const u=c(71017);function isNodeModules(r){let i=u.basename(r);if(u.sep==="\\"){i=i.toLowerCase()}return i==="node_modules"}r.exports=isNodeModules},97834:(r,i,c)=>{"use strict";const u=c(71017);const{readFileSync:h}=c(57147);const d=c(54629);const p=c(14704);function getDirectoryTypeActual(r){if(d(r)){return"commonjs"}try{return JSON.parse(h(u.resolve(r,"package.json"))).type||"commonjs"}catch(r){}const i=u.dirname(r);if(i===r){return"commonjs"}return getDirectoryType(i)}function getDirectoryType(r){if(p.has(r)){return p.get(r)}const i=getDirectoryTypeActual(r);p.set(r,i);return i}function getPackageTypeSync(r){return getDirectoryType(u.resolve(u.dirname(r)))}r.exports=getPackageTypeSync},80584:r=>{"use strict";r.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},57795:r=>{"use strict";r.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}};var __webpack_module_cache__={};function __nccwpck_require__(r){var i=__webpack_module_cache__[r];if(i!==undefined){return i.exports}var c=__webpack_module_cache__[r]={id:r,loaded:false,exports:{}};var u=true;try{__webpack_modules__[r].call(c.exports,c,c.exports,__nccwpck_require__);u=false}finally{if(u)delete __webpack_module_cache__[r]}c.loaded=true;return c.exports}(()=>{__nccwpck_require__.n=r=>{var i=r&&r.__esModule?()=>r["default"]:()=>r;__nccwpck_require__.d(i,{a:i});return i}})();(()=>{__nccwpck_require__.d=(r,i)=>{for(var c in i){if(__nccwpck_require__.o(i,c)&&!__nccwpck_require__.o(r,c)){Object.defineProperty(r,c,{enumerable:true,get:i[c]})}}}})();(()=>{__nccwpck_require__.o=(r,i)=>Object.prototype.hasOwnProperty.call(r,i)})();(()=>{__nccwpck_require__.r=r=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(r,"__esModule",{value:true})}})();(()=>{__nccwpck_require__.nmd=r=>{r.paths=[];if(!r.children)r.children=[];return r}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__=__nccwpck_require__(24941);module.exports=__webpack_exports__})();